// @bun
var qT=Object.create;var{getPrototypeOf:VT,defineProperty:aY,getOwnPropertyNames:AT}=Object;var OT=Object.prototype.hasOwnProperty;var Y2=(D,F,$)=>{$=D!=null?qT(VT(D)):{};let B=F||!D||!D.__esModule?aY($,"default",{value:D,enumerable:!0}):$;for(let J of AT(D))if(!OT.call(B,J))aY(B,J,{get:()=>D[J],enumerable:!0});return B};var t=(D,F)=>()=>(F||D((F={exports:{}}).exports,F),F.exports);var vF=(D,F)=>{for(var $ in F)aY(D,$,{get:F[$],enumerable:!0,configurable:!0,set:(B)=>F[$]=()=>B})};var k=(D,F)=>()=>(D&&(F=D(D=0)),F);var Z6=import.meta.require,Y8=(D,F,$)=>{if(F!=null){if(typeof F!=="object"&&typeof F!=="function")throw TypeError('Object expected to be assigned to "using" declaration');let B;if($)B=F[Symbol.asyncDispose];if(B===void 0)B=F[Symbol.dispose];if(typeof B!=="function")throw TypeError("Object not disposable");D.push([$,B,F])}else if($)D.push([$]);return F},X8=(D,F,$)=>{let B=(Y)=>F=$?new SuppressedError(Y,F,"An error was suppressed during disposal"):($=!0,Y),J=(Y)=>{while(Y=D.pop())try{var X=Y[1]&&Y[1].call(Y[2]);if(Y[0])return Promise.resolve(X).then(J,(Q)=>(B(Q),J()))}catch(Q){B(Q)}if($)throw F};return J()};function UT(D){FG=D}function vB(){return FG}function E0(D,F){let $=vB(),B=gB({issueData:F,data:D.data,path:D.path,errorMaps:[D.common.contextualErrorMap,D.schemaErrorMap,$,$===H7?void 0:H7].filter((J)=>!!J)});D.common.issues.push(B)}class i1{constructor(){this.value="valid"}dirty(){if(this.value==="valid")this.value="dirty"}abort(){if(this.value!=="aborted")this.value="aborted"}static mergeArray(D,F){let $=[];for(let B of F){if(B.status==="aborted")return a0;if(B.status==="dirty")D.dirty();$.push(B.value)}return{status:D.value,value:$}}static async mergeObjectAsync(D,F){let $=[];for(let B of F){let J=await B.key,Y=await B.value;$.push({key:J,value:Y})}return i1.mergeObjectSync(D,$)}static mergeObjectSync(D,F){let $={};for(let B of F){let{key:J,value:Y}=B;if(J.status==="aborted")return a0;if(Y.status==="aborted")return a0;if(J.status==="dirty")D.dirty();if(Y.status==="dirty")D.dirty();if(J.value!=="__proto__"&&(typeof Y.value!=="undefined"||B.alwaysSet))$[J.value]=Y.value}return{status:D.value,value:$}}}function mB(D,F,$,B){if($==="a"&&!B)throw new TypeError("Private accessor was defined without a getter");if(typeof F==="function"?D!==F||!B:!F.has(D))throw new TypeError("Cannot read private member from an object whose class did not declare it");return $==="m"?B:$==="a"?B.call(D):B?B.value:F.get(D)}function $G(D,F,$,B,J){if(B==="m")throw new TypeError("Private method is not writable");if(B==="a"&&!J)throw new TypeError("Private accessor was defined without a setter");if(typeof F==="function"?D!==F||!J:!F.has(D))throw new TypeError("Cannot write private member to an object whose class did not declare it");return B==="a"?J.call(D,$):J?J.value=$:F.set(D,$),$}class w2{constructor(D,F,$,B){this._cachedPath=[],this.parent=D,this.data=F,this._path=$,this._key=B}get path(){if(!this._cachedPath.length)if(this._key instanceof Array)this._cachedPath.push(...this._path,...this._key);else this._cachedPath.push(...this._path,this._key);return this._cachedPath}}function QD(D){if(!D)return{};let{errorMap:F,invalid_type_error:$,required_error:B,description:J}=D;if(F&&($||B))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);if(F)return{errorMap:F,description:J};return{errorMap:(X,Q)=>{var w,f;let{message:G}=D;if(X.code==="invalid_enum_value")return{message:G!==null&&G!==void 0?G:Q.defaultError};if(typeof Q.data==="undefined")return{message:(w=G!==null&&G!==void 0?G:B)!==null&&w!==void 0?w:Q.defaultError};if(X.code!=="invalid_type")return{message:Q.defaultError};return{message:(f=G!==null&&G!==void 0?G:$)!==null&&f!==void 0?f:Q.defaultError}},description:J}}class fD{get description(){return this._def.description}_getType(D){return F6(D.data)}_getOrReturnCtx(D,F){return F||{common:D.parent.common,data:D.data,parsedType:F6(D.data),schemaErrorMap:this._def.errorMap,path:D.path,parent:D.parent}}_processInputParams(D){return{status:new i1,ctx:{common:D.parent.common,data:D.data,parsedType:F6(D.data),schemaErrorMap:this._def.errorMap,path:D.path,parent:D.parent}}}_parseSync(D){let F=this._parse(D);if(p9(F))throw new Error("Synchronous parse encountered promise.");return F}_parseAsync(D){let F=this._parse(D);return Promise.resolve(F)}parse(D,F){let $=this.safeParse(D,F);if($.success)return $.data;throw $.error}safeParse(D,F){var $;let B={common:{issues:[],async:($=F===null||F===void 0?void 0:F.async)!==null&&$!==void 0?$:!1,contextualErrorMap:F===null||F===void 0?void 0:F.errorMap},path:(F===null||F===void 0?void 0:F.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:D,parsedType:F6(D)},J=this._parseSync({data:D,path:B.path,parent:B});return aW(B,J)}"~validate"(D){var F,$;let B={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:D,parsedType:F6(D)};if(!this["~standard"].async)try{let J=this._parseSync({data:D,path:[],parent:B});return Q8(J)?{value:J.value}:{issues:B.common.issues}}catch(J){if(($=(F=J===null||J===void 0?void 0:J.message)===null||F===void 0?void 0:F.toLowerCase())===null||$===void 0?void 0:$.includes("encountered"))this["~standard"].async=!0;B.common={issues:[],async:!0}}return this._parseAsync({data:D,path:[],parent:B}).then((J)=>Q8(J)?{value:J.value}:{issues:B.common.issues})}async parseAsync(D,F){let $=await this.safeParseAsync(D,F);if($.success)return $.data;throw $.error}async safeParseAsync(D,F){let $={common:{issues:[],contextualErrorMap:F===null||F===void 0?void 0:F.errorMap,async:!0},path:(F===null||F===void 0?void 0:F.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:D,parsedType:F6(D)},B=this._parse({data:D,path:$.path,parent:$}),J=await(p9(B)?B:Promise.resolve(B));return aW($,J)}refine(D,F){let $=(B)=>{if(typeof F==="string"||typeof F==="undefined")return{message:F};else if(typeof F==="function")return F(B);else return F};return this._refinement((B,J)=>{let Y=D(B),X=()=>J.addIssue({code:B0.custom,...$(B)});if(typeof Promise!=="undefined"&&Y instanceof Promise)return Y.then((Q)=>{if(!Q)return X(),!1;else return!0});if(!Y)return X(),!1;else return!0})}refinement(D,F){return this._refinement(($,B)=>{if(!D($))return B.addIssue(typeof F==="function"?F($,B):F),!1;else return!0})}_refinement(D){return new gF({schema:this,typeName:J0.ZodEffects,effect:{type:"refinement",refinement:D}})}superRefine(D){return this._refinement(D)}constructor(D){this.spa=this.safeParseAsync,this._def=D,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:(F)=>this["~validate"](F)}}optional(){return ZF.create(this,this._def)}nullable(){return $6.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Q2.create(this)}promise(){return G8.create(this,this._def)}or(D){return V7.create([this,D],this._def)}and(D){return A7.create(this,D,this._def)}transform(D){return new gF({...QD(this._def),schema:this,typeName:J0.ZodEffects,effect:{type:"transform",transform:D}})}default(D){let F=typeof D==="function"?D:()=>D;return new R7({...QD(this._def),innerType:this,defaultValue:F,typeName:J0.ZodDefault})}brand(){return new pB({typeName:J0.ZodBranded,type:this,...QD(this._def)})}catch(D){let F=typeof D==="function"?D:()=>D;return new C7({...QD(this._def),innerType:this,catchValue:F,typeName:J0.ZodCatch})}describe(D){return new this.constructor({...this._def,description:D})}pipe(D){return r9.create(this,D)}readonly(){return Z7.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}function JG(D){let F="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";if(D.precision)F=`${F}\\.\\d{${D.precision}}`;else if(D.precision==null)F=`${F}(\\.\\d+)?`;return F}function uT(D){return new RegExp(`^${JG(D)}$`)}function YG(D){let F=`${BG}T${JG(D)}`,$=[];if($.push(D.local?"Z?":"Z"),D.offset)$.push("([+-]\\d{2}:?\\d{2})");return F=`${F}(${$.join("|")})`,new RegExp(`^${F}$`)}function vT(D,F){if((F==="v4"||!F)&&PT.test(D))return!0;if((F==="v6"||!F)&&hT.test(D))return!0;return!1}function gT(D,F){if(!LT.test(D))return!1;try{let[$]=D.split("."),B=$.replace(/-/g,"+").replace(/_/g,"/").padEnd($.length+(4-$.length%4)%4,"="),J=JSON.parse(atob(B));if(typeof J!=="object"||J===null)return!1;if(!J.typ||!J.alg)return!1;if(F&&J.alg!==F)return!1;return!0}catch($){return!1}}function mT(D,F){if((F==="v4"||!F)&&bT.test(D))return!0;if((F==="v6"||!F)&&ST.test(D))return!0;return!1}function cT(D,F){let $=(D.toString().split(".")[1]||"").length,B=(F.toString().split(".")[1]||"").length,J=$>B?$:B,Y=parseInt(D.toFixed(J).replace(".","")),X=parseInt(F.toFixed(J).replace(".",""));return Y%X/Math.pow(10,J)}function f7(D){if(D instanceof nD){let F={};for(let $ in D.shape){let B=D.shape[$];F[$]=ZF.create(f7(B))}return new nD({...D._def,shape:()=>F})}else if(D instanceof Q2)return new Q2({...D._def,type:f7(D.element)});else if(D instanceof ZF)return ZF.create(f7(D.unwrap()));else if(D instanceof $6)return $6.create(f7(D.unwrap()));else if(D instanceof _2)return _2.create(D.items.map((F)=>f7(F)));else return D}function BX(D,F){let $=F6(D),B=F6(F);if(D===F)return{valid:!0,data:D};else if($===R0.object&&B===R0.object){let J=ND.objectKeys(F),Y=ND.objectKeys(D).filter((Q)=>J.indexOf(Q)!==-1),X={...D,...F};for(let Q of Y){let w=BX(D[Q],F[Q]);if(!w.valid)return{valid:!1};X[Q]=w.data}return{valid:!0,data:X}}else if($===R0.array&&B===R0.array){if(D.length!==F.length)return{valid:!1};let J=[];for(let Y=0;Y<D.length;Y++){let X=D[Y],Q=F[Y],w=BX(X,Q);if(!w.valid)return{valid:!1};J.push(w.data)}return{valid:!0,data:J}}else if($===R0.date&&B===R0.date&&+D===+F)return{valid:!0,data:D};else return{valid:!1}}function XG(D,F){return new L6({values:D,typeName:J0.ZodEnum,...QD(F)})}function eW(D,F){let $=typeof D==="function"?D(F):typeof D==="string"?{message:D}:D;return typeof $==="string"?{message:$}:$}function QG(D,F={},$){if(D)return f8.create().superRefine((B,J)=>{var Y,X;let Q=D(B);if(Q instanceof Promise)return Q.then((w)=>{var f,G;if(!w){let H=eW(F,B),K=(G=(f=H.fatal)!==null&&f!==void 0?f:$)!==null&&G!==void 0?G:!0;J.addIssue({code:"custom",...H,fatal:K})}});if(!Q){let w=eW(F,B),f=(X=(Y=w.fatal)!==null&&Y!==void 0?Y:$)!==null&&X!==void 0?X:!0;J.addIssue({code:"custom",...w,fatal:f})}return});return f8.create()}var ND,DX,R0,F6=(D)=>{switch(typeof D){case"undefined":return R0.undefined;case"string":return R0.string;case"number":return isNaN(D)?R0.nan:R0.number;case"boolean":return R0.boolean;case"function":return R0.function;case"bigint":return R0.bigint;case"symbol":return R0.symbol;case"object":if(Array.isArray(D))return R0.array;if(D===null)return R0.null;if(D.then&&typeof D.then==="function"&&D.catch&&typeof D.catch==="function")return R0.promise;if(typeof Map!=="undefined"&&D instanceof Map)return R0.map;if(typeof Set!=="undefined"&&D instanceof Set)return R0.set;if(typeof Date!=="undefined"&&D instanceof Date)return R0.date;return R0.object;default:return R0.unknown}},B0,jT=(D)=>{return JSON.stringify(D,null,2).replace(/"([^"]+)":/g,"$1:")},CF,H7=(D,F)=>{let $;switch(D.code){case B0.invalid_type:if(D.received===R0.undefined)$="Required";else $=`Expected ${D.expected}, received ${D.received}`;break;case B0.invalid_literal:$=`Invalid literal value, expected ${JSON.stringify(D.expected,ND.jsonStringifyReplacer)}`;break;case B0.unrecognized_keys:$=`Unrecognized key(s) in object: ${ND.joinValues(D.keys,", ")}`;break;case B0.invalid_union:$="Invalid input";break;case B0.invalid_union_discriminator:$=`Invalid discriminator value. Expected ${ND.joinValues(D.options)}`;break;case B0.invalid_enum_value:$=`Invalid enum value. Expected ${ND.joinValues(D.options)}, received '${D.received}'`;break;case B0.invalid_arguments:$="Invalid function arguments";break;case B0.invalid_return_type:$="Invalid function return type";break;case B0.invalid_date:$="Invalid date";break;case B0.invalid_string:if(typeof D.validation==="object")if("includes"in D.validation){if($=`Invalid input: must include "${D.validation.includes}"`,typeof D.validation.position==="number")$=`${$} at one or more positions greater than or equal to ${D.validation.position}`}else if("startsWith"in D.validation)$=`Invalid input: must start with "${D.validation.startsWith}"`;else if("endsWith"in D.validation)$=`Invalid input: must end with "${D.validation.endsWith}"`;else ND.assertNever(D.validation);else if(D.validation!=="regex")$=`Invalid ${D.validation}`;else $="Invalid";break;case B0.too_small:if(D.type==="array")$=`Array must contain ${D.exact?"exactly":D.inclusive?"at least":"more than"} ${D.minimum} element(s)`;else if(D.type==="string")$=`String must contain ${D.exact?"exactly":D.inclusive?"at least":"over"} ${D.minimum} character(s)`;else if(D.type==="number")$=`Number must be ${D.exact?"exactly equal to ":D.inclusive?"greater than or equal to ":"greater than "}${D.minimum}`;else if(D.type==="date")$=`Date must be ${D.exact?"exactly equal to ":D.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(D.minimum))}`;else $="Invalid input";break;case B0.too_big:if(D.type==="array")$=`Array must contain ${D.exact?"exactly":D.inclusive?"at most":"less than"} ${D.maximum} element(s)`;else if(D.type==="string")$=`String must contain ${D.exact?"exactly":D.inclusive?"at most":"under"} ${D.maximum} character(s)`;else if(D.type==="number")$=`Number must be ${D.exact?"exactly":D.inclusive?"less than or equal to":"less than"} ${D.maximum}`;else if(D.type==="bigint")$=`BigInt must be ${D.exact?"exactly":D.inclusive?"less than or equal to":"less than"} ${D.maximum}`;else if(D.type==="date")$=`Date must be ${D.exact?"exactly":D.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(D.maximum))}`;else $="Invalid input";break;case B0.custom:$="Invalid input";break;case B0.invalid_intersection_types:$="Intersection results could not be merged";break;case B0.not_multiple_of:$=`Number must be a multiple of ${D.multipleOf}`;break;case B0.not_finite:$="Number must be finite";break;default:$=F.defaultError,ND.assertNever(D)}return{message:$}},FG,gB=(D)=>{let{data:F,path:$,errorMaps:B,issueData:J}=D,Y=[...$,...J.path||[]],X={...J,path:Y};if(J.message!==void 0)return{...J,path:Y,message:J.message};let Q="",w=B.filter((f)=>!!f).slice().reverse();for(let f of w)Q=f(X,{data:F,defaultError:Q}).message;return{...J,path:Y,message:Q}},RT,a0,W7=(D)=>({status:"dirty",value:D}),YF=(D)=>({status:"valid",value:D}),FX=(D)=>D.status==="aborted",$X=(D)=>D.status==="dirty",Q8=(D)=>D.status==="valid",p9=(D)=>typeof Promise!=="undefined"&&D instanceof Promise,h0,m9,c9,aW=(D,F)=>{if(Q8(F))return{success:!0,data:F.value};else{if(!D.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let $=new CF(D.common.issues);return this._error=$,this._error}}}},CT,ZT,NT,MT,_T,LT,zT,IT,TT="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",eY,PT,bT,hT,ST,yT,xT,BG="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",kT,X2,M6,_6,E7,w8,i9,K7,q7,f8,N6,M2,d9,Q2,nD,V7,D6=(D)=>{if(D instanceof O7)return D6(D.schema);else if(D instanceof gF)return D6(D.innerType());else if(D instanceof j7)return[D.value];else if(D instanceof L6)return D.options;else if(D instanceof U7)return ND.objectValues(D.enum);else if(D instanceof R7)return D6(D._def.innerType);else if(D instanceof K7)return[void 0];else if(D instanceof q7)return[null];else if(D instanceof ZF)return[void 0,...D6(D.unwrap())];else if(D instanceof $6)return[null,...D6(D.unwrap())];else if(D instanceof pB)return D6(D.unwrap());else if(D instanceof Z7)return D6(D.unwrap());else if(D instanceof C7)return D6(D._def.innerType);else return[]},cB,A7,_2,l9,n9,W8,G7,O7,j7,L6,U7,G8,gF,ZF,$6,R7,C7,o9,pT,pB,r9,Z7,iT,J0,dT=(D,F={message:`Input not instance of ${D.name}`})=>QG(($)=>$ instanceof D,F),wG,fG,lT,nT,WG,oT,rT,tT,sT,aT,eT,DP,FP,$P,BP,JP,YP,XP,QP,wP,fP,WP,GP,HP,EP,KP,qP,VP,AP,DG,OP,jP,UP,RP,CP=()=>wG().optional(),ZP=()=>fG().optional(),NP=()=>WG().optional(),MP,_P,W;var C0=k(()=>{(function(D){D.assertEqual=(J)=>J;function F(J){}D.assertIs=F;function $(J){throw new Error}D.assertNever=$,D.arrayToEnum=(J)=>{let Y={};for(let X of J)Y[X]=X;return Y},D.getValidEnumValues=(J)=>{let Y=D.objectKeys(J).filter((Q)=>typeof J[J[Q]]!=="number"),X={};for(let Q of Y)X[Q]=J[Q];return D.objectValues(X)},D.objectValues=(J)=>{return D.objectKeys(J).map(function(Y){return J[Y]})},D.objectKeys=typeof Object.keys==="function"?(J)=>Object.keys(J):(J)=>{let Y=[];for(let X in J)if(Object.prototype.hasOwnProperty.call(J,X))Y.push(X);return Y},D.find=(J,Y)=>{for(let X of J)if(Y(X))return X;return},D.isInteger=typeof Number.isInteger==="function"?(J)=>Number.isInteger(J):(J)=>typeof J==="number"&&isFinite(J)&&Math.floor(J)===J;function B(J,Y=" | "){return J.map((X)=>typeof X==="string"?`'${X}'`:X).join(Y)}D.joinValues=B,D.jsonStringifyReplacer=(J,Y)=>{if(typeof Y==="bigint")return Y.toString();return Y}})(ND||(ND={}));(function(D){D.mergeShapes=(F,$)=>{return{...F,...$}}})(DX||(DX={}));R0=ND.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),B0=ND.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);CF=class CF extends Error{get errors(){return this.issues}constructor(D){super();this.issues=[],this.addIssue=($)=>{this.issues=[...this.issues,$]},this.addIssues=($=[])=>{this.issues=[...this.issues,...$]};let F=new.target.prototype;if(Object.setPrototypeOf)Object.setPrototypeOf(this,F);else this.__proto__=F;this.name="ZodError",this.issues=D}format(D){let F=D||function(J){return J.message},$={_errors:[]},B=(J)=>{for(let Y of J.issues)if(Y.code==="invalid_union")Y.unionErrors.map(B);else if(Y.code==="invalid_return_type")B(Y.returnTypeError);else if(Y.code==="invalid_arguments")B(Y.argumentsError);else if(Y.path.length===0)$._errors.push(F(Y));else{let X=$,Q=0;while(Q<Y.path.length){let w=Y.path[Q];if(Q!==Y.path.length-1)X[w]=X[w]||{_errors:[]};else X[w]=X[w]||{_errors:[]},X[w]._errors.push(F(Y));X=X[w],Q++}}};return B(this),$}static assert(D){if(!(D instanceof CF))throw new Error(`Not a ZodError: ${D}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ND.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(D=(F)=>F.message){let F={},$=[];for(let B of this.issues)if(B.path.length>0)F[B.path[0]]=F[B.path[0]]||[],F[B.path[0]].push(D(B));else $.push(D(B));return{formErrors:$,fieldErrors:F}}get formErrors(){return this.flatten()}};CF.create=(D)=>{return new CF(D)};FG=H7;RT=[];a0=Object.freeze({status:"aborted"});(function(D){D.errToObj=(F)=>typeof F==="string"?{message:F}:F||{},D.toString=(F)=>typeof F==="string"?F:F===null||F===void 0?void 0:F.message})(h0||(h0={}));CT=/^c[^\s-]{8,}$/i,ZT=/^[0-9a-z]+$/,NT=/^[0-9A-HJKMNP-TV-Z]{26}$/i,MT=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,_T=/^[a-z0-9_-]{21}$/i,LT=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,zT=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,IT=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,PT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,bT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,hT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ST=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,yT=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,xT=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,kT=new RegExp(`^${BG}$`);X2=class X2 extends fD{_parse(D){if(this._def.coerce)D.data=String(D.data);if(this._getType(D)!==R0.string){let J=this._getOrReturnCtx(D);return E0(J,{code:B0.invalid_type,expected:R0.string,received:J.parsedType}),a0}let $=new i1,B=void 0;for(let J of this._def.checks)if(J.kind==="min"){if(D.data.length<J.value)B=this._getOrReturnCtx(D,B),E0(B,{code:B0.too_small,minimum:J.value,type:"string",inclusive:!0,exact:!1,message:J.message}),$.dirty()}else if(J.kind==="max"){if(D.data.length>J.value)B=this._getOrReturnCtx(D,B),E0(B,{code:B0.too_big,maximum:J.value,type:"string",inclusive:!0,exact:!1,message:J.message}),$.dirty()}else if(J.kind==="length"){let Y=D.data.length>J.value,X=D.data.length<J.value;if(Y||X){if(B=this._getOrReturnCtx(D,B),Y)E0(B,{code:B0.too_big,maximum:J.value,type:"string",inclusive:!0,exact:!0,message:J.message});else if(X)E0(B,{code:B0.too_small,minimum:J.value,type:"string",inclusive:!0,exact:!0,message:J.message});$.dirty()}}else if(J.kind==="email"){if(!IT.test(D.data))B=this._getOrReturnCtx(D,B),E0(B,{validation:"email",code:B0.invalid_string,message:J.message}),$.dirty()}else if(J.kind==="emoji"){if(!eY)eY=new RegExp(TT,"u");if(!eY.test(D.data))B=this._getOrReturnCtx(D,B),E0(B,{validation:"emoji",code:B0.invalid_string,message:J.message}),$.dirty()}else if(J.kind==="uuid"){if(!MT.test(D.data))B=this._getOrReturnCtx(D,B),E0(B,{validation:"uuid",code:B0.invalid_string,message:J.message}),$.dirty()}else if(J.kind==="nanoid"){if(!_T.test(D.data))B=this._getOrReturnCtx(D,B),E0(B,{validation:"nanoid",code:B0.invalid_string,message:J.message}),$.dirty()}else if(J.kind==="cuid"){if(!CT.test(D.data))B=this._getOrReturnCtx(D,B),E0(B,{validation:"cuid",code:B0.invalid_string,message:J.message}),$.dirty()}else if(J.kind==="cuid2"){if(!ZT.test(D.data))B=this._getOrReturnCtx(D,B),E0(B,{validation:"cuid2",code:B0.invalid_string,message:J.message}),$.dirty()}else if(J.kind==="ulid"){if(!NT.test(D.data))B=this._getOrReturnCtx(D,B),E0(B,{validation:"ulid",code:B0.invalid_string,message:J.message}),$.dirty()}else if(J.kind==="url")try{new URL(D.data)}catch(Y){B=this._getOrReturnCtx(D,B),E0(B,{validation:"url",code:B0.invalid_string,message:J.message}),$.dirty()}else if(J.kind==="regex"){if(J.regex.lastIndex=0,!J.regex.test(D.data))B=this._getOrReturnCtx(D,B),E0(B,{validation:"regex",code:B0.invalid_string,message:J.message}),$.dirty()}else if(J.kind==="trim")D.data=D.data.trim();else if(J.kind==="includes"){if(!D.data.includes(J.value,J.position))B=this._getOrReturnCtx(D,B),E0(B,{code:B0.invalid_string,validation:{includes:J.value,position:J.position},message:J.message}),$.dirty()}else if(J.kind==="toLowerCase")D.data=D.data.toLowerCase();else if(J.kind==="toUpperCase")D.data=D.data.toUpperCase();else if(J.kind==="startsWith"){if(!D.data.startsWith(J.value))B=this._getOrReturnCtx(D,B),E0(B,{code:B0.invalid_string,validation:{startsWith:J.value},message:J.message}),$.dirty()}else if(J.kind==="endsWith"){if(!D.data.endsWith(J.value))B=this._getOrReturnCtx(D,B),E0(B,{code:B0.invalid_string,validation:{endsWith:J.value},message:J.message}),$.dirty()}else if(J.kind==="datetime"){if(!YG(J).test(D.data))B=this._getOrReturnCtx(D,B),E0(B,{code:B0.invalid_string,validation:"datetime",message:J.message}),$.dirty()}else if(J.kind==="date"){if(!kT.test(D.data))B=this._getOrReturnCtx(D,B),E0(B,{code:B0.invalid_string,validation:"date",message:J.message}),$.dirty()}else if(J.kind==="time"){if(!uT(J).test(D.data))B=this._getOrReturnCtx(D,B),E0(B,{code:B0.invalid_string,validation:"time",message:J.message}),$.dirty()}else if(J.kind==="duration"){if(!zT.test(D.data))B=this._getOrReturnCtx(D,B),E0(B,{validation:"duration",code:B0.invalid_string,message:J.message}),$.dirty()}else if(J.kind==="ip"){if(!vT(D.data,J.version))B=this._getOrReturnCtx(D,B),E0(B,{validation:"ip",code:B0.invalid_string,message:J.message}),$.dirty()}else if(J.kind==="jwt"){if(!gT(D.data,J.alg))B=this._getOrReturnCtx(D,B),E0(B,{validation:"jwt",code:B0.invalid_string,message:J.message}),$.dirty()}else if(J.kind==="cidr"){if(!mT(D.data,J.version))B=this._getOrReturnCtx(D,B),E0(B,{validation:"cidr",code:B0.invalid_string,message:J.message}),$.dirty()}else if(J.kind==="base64"){if(!yT.test(D.data))B=this._getOrReturnCtx(D,B),E0(B,{validation:"base64",code:B0.invalid_string,message:J.message}),$.dirty()}else if(J.kind==="base64url"){if(!xT.test(D.data))B=this._getOrReturnCtx(D,B),E0(B,{validation:"base64url",code:B0.invalid_string,message:J.message}),$.dirty()}else ND.assertNever(J);return{status:$.value,value:D.data}}_regex(D,F,$){return this.refinement((B)=>D.test(B),{validation:F,code:B0.invalid_string,...h0.errToObj($)})}_addCheck(D){return new X2({...this._def,checks:[...this._def.checks,D]})}email(D){return this._addCheck({kind:"email",...h0.errToObj(D)})}url(D){return this._addCheck({kind:"url",...h0.errToObj(D)})}emoji(D){return this._addCheck({kind:"emoji",...h0.errToObj(D)})}uuid(D){return this._addCheck({kind:"uuid",...h0.errToObj(D)})}nanoid(D){return this._addCheck({kind:"nanoid",...h0.errToObj(D)})}cuid(D){return this._addCheck({kind:"cuid",...h0.errToObj(D)})}cuid2(D){return this._addCheck({kind:"cuid2",...h0.errToObj(D)})}ulid(D){return this._addCheck({kind:"ulid",...h0.errToObj(D)})}base64(D){return this._addCheck({kind:"base64",...h0.errToObj(D)})}base64url(D){return this._addCheck({kind:"base64url",...h0.errToObj(D)})}jwt(D){return this._addCheck({kind:"jwt",...h0.errToObj(D)})}ip(D){return this._addCheck({kind:"ip",...h0.errToObj(D)})}cidr(D){return this._addCheck({kind:"cidr",...h0.errToObj(D)})}datetime(D){var F,$;if(typeof D==="string")return this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:D});return this._addCheck({kind:"datetime",precision:typeof(D===null||D===void 0?void 0:D.precision)==="undefined"?null:D===null||D===void 0?void 0:D.precision,offset:(F=D===null||D===void 0?void 0:D.offset)!==null&&F!==void 0?F:!1,local:($=D===null||D===void 0?void 0:D.local)!==null&&$!==void 0?$:!1,...h0.errToObj(D===null||D===void 0?void 0:D.message)})}date(D){return this._addCheck({kind:"date",message:D})}time(D){if(typeof D==="string")return this._addCheck({kind:"time",precision:null,message:D});return this._addCheck({kind:"time",precision:typeof(D===null||D===void 0?void 0:D.precision)==="undefined"?null:D===null||D===void 0?void 0:D.precision,...h0.errToObj(D===null||D===void 0?void 0:D.message)})}duration(D){return this._addCheck({kind:"duration",...h0.errToObj(D)})}regex(D,F){return this._addCheck({kind:"regex",regex:D,...h0.errToObj(F)})}includes(D,F){return this._addCheck({kind:"includes",value:D,position:F===null||F===void 0?void 0:F.position,...h0.errToObj(F===null||F===void 0?void 0:F.message)})}startsWith(D,F){return this._addCheck({kind:"startsWith",value:D,...h0.errToObj(F)})}endsWith(D,F){return this._addCheck({kind:"endsWith",value:D,...h0.errToObj(F)})}min(D,F){return this._addCheck({kind:"min",value:D,...h0.errToObj(F)})}max(D,F){return this._addCheck({kind:"max",value:D,...h0.errToObj(F)})}length(D,F){return this._addCheck({kind:"length",value:D,...h0.errToObj(F)})}nonempty(D){return this.min(1,h0.errToObj(D))}trim(){return new X2({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new X2({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new X2({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((D)=>D.kind==="datetime")}get isDate(){return!!this._def.checks.find((D)=>D.kind==="date")}get isTime(){return!!this._def.checks.find((D)=>D.kind==="time")}get isDuration(){return!!this._def.checks.find((D)=>D.kind==="duration")}get isEmail(){return!!this._def.checks.find((D)=>D.kind==="email")}get isURL(){return!!this._def.checks.find((D)=>D.kind==="url")}get isEmoji(){return!!this._def.checks.find((D)=>D.kind==="emoji")}get isUUID(){return!!this._def.checks.find((D)=>D.kind==="uuid")}get isNANOID(){return!!this._def.checks.find((D)=>D.kind==="nanoid")}get isCUID(){return!!this._def.checks.find((D)=>D.kind==="cuid")}get isCUID2(){return!!this._def.checks.find((D)=>D.kind==="cuid2")}get isULID(){return!!this._def.checks.find((D)=>D.kind==="ulid")}get isIP(){return!!this._def.checks.find((D)=>D.kind==="ip")}get isCIDR(){return!!this._def.checks.find((D)=>D.kind==="cidr")}get isBase64(){return!!this._def.checks.find((D)=>D.kind==="base64")}get isBase64url(){return!!this._def.checks.find((D)=>D.kind==="base64url")}get minLength(){let D=null;for(let F of this._def.checks)if(F.kind==="min"){if(D===null||F.value>D)D=F.value}return D}get maxLength(){let D=null;for(let F of this._def.checks)if(F.kind==="max"){if(D===null||F.value<D)D=F.value}return D}};X2.create=(D)=>{var F;return new X2({checks:[],typeName:J0.ZodString,coerce:(F=D===null||D===void 0?void 0:D.coerce)!==null&&F!==void 0?F:!1,...QD(D)})};M6=class M6 extends fD{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(D){if(this._def.coerce)D.data=Number(D.data);if(this._getType(D)!==R0.number){let J=this._getOrReturnCtx(D);return E0(J,{code:B0.invalid_type,expected:R0.number,received:J.parsedType}),a0}let $=void 0,B=new i1;for(let J of this._def.checks)if(J.kind==="int"){if(!ND.isInteger(D.data))$=this._getOrReturnCtx(D,$),E0($,{code:B0.invalid_type,expected:"integer",received:"float",message:J.message}),B.dirty()}else if(J.kind==="min"){if(J.inclusive?D.data<J.value:D.data<=J.value)$=this._getOrReturnCtx(D,$),E0($,{code:B0.too_small,minimum:J.value,type:"number",inclusive:J.inclusive,exact:!1,message:J.message}),B.dirty()}else if(J.kind==="max"){if(J.inclusive?D.data>J.value:D.data>=J.value)$=this._getOrReturnCtx(D,$),E0($,{code:B0.too_big,maximum:J.value,type:"number",inclusive:J.inclusive,exact:!1,message:J.message}),B.dirty()}else if(J.kind==="multipleOf"){if(cT(D.data,J.value)!==0)$=this._getOrReturnCtx(D,$),E0($,{code:B0.not_multiple_of,multipleOf:J.value,message:J.message}),B.dirty()}else if(J.kind==="finite"){if(!Number.isFinite(D.data))$=this._getOrReturnCtx(D,$),E0($,{code:B0.not_finite,message:J.message}),B.dirty()}else ND.assertNever(J);return{status:B.value,value:D.data}}gte(D,F){return this.setLimit("min",D,!0,h0.toString(F))}gt(D,F){return this.setLimit("min",D,!1,h0.toString(F))}lte(D,F){return this.setLimit("max",D,!0,h0.toString(F))}lt(D,F){return this.setLimit("max",D,!1,h0.toString(F))}setLimit(D,F,$,B){return new M6({...this._def,checks:[...this._def.checks,{kind:D,value:F,inclusive:$,message:h0.toString(B)}]})}_addCheck(D){return new M6({...this._def,checks:[...this._def.checks,D]})}int(D){return this._addCheck({kind:"int",message:h0.toString(D)})}positive(D){return this._addCheck({kind:"min",value:0,inclusive:!1,message:h0.toString(D)})}negative(D){return this._addCheck({kind:"max",value:0,inclusive:!1,message:h0.toString(D)})}nonpositive(D){return this._addCheck({kind:"max",value:0,inclusive:!0,message:h0.toString(D)})}nonnegative(D){return this._addCheck({kind:"min",value:0,inclusive:!0,message:h0.toString(D)})}multipleOf(D,F){return this._addCheck({kind:"multipleOf",value:D,message:h0.toString(F)})}finite(D){return this._addCheck({kind:"finite",message:h0.toString(D)})}safe(D){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:h0.toString(D)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:h0.toString(D)})}get minValue(){let D=null;for(let F of this._def.checks)if(F.kind==="min"){if(D===null||F.value>D)D=F.value}return D}get maxValue(){let D=null;for(let F of this._def.checks)if(F.kind==="max"){if(D===null||F.value<D)D=F.value}return D}get isInt(){return!!this._def.checks.find((D)=>D.kind==="int"||D.kind==="multipleOf"&&ND.isInteger(D.value))}get isFinite(){let D=null,F=null;for(let $ of this._def.checks)if($.kind==="finite"||$.kind==="int"||$.kind==="multipleOf")return!0;else if($.kind==="min"){if(F===null||$.value>F)F=$.value}else if($.kind==="max"){if(D===null||$.value<D)D=$.value}return Number.isFinite(F)&&Number.isFinite(D)}};M6.create=(D)=>{return new M6({checks:[],typeName:J0.ZodNumber,coerce:(D===null||D===void 0?void 0:D.coerce)||!1,...QD(D)})};_6=class _6 extends fD{constructor(){super(...arguments);this.min=this.gte,this.max=this.lte}_parse(D){if(this._def.coerce)try{D.data=BigInt(D.data)}catch(J){return this._getInvalidInput(D)}if(this._getType(D)!==R0.bigint)return this._getInvalidInput(D);let $=void 0,B=new i1;for(let J of this._def.checks)if(J.kind==="min"){if(J.inclusive?D.data<J.value:D.data<=J.value)$=this._getOrReturnCtx(D,$),E0($,{code:B0.too_small,type:"bigint",minimum:J.value,inclusive:J.inclusive,message:J.message}),B.dirty()}else if(J.kind==="max"){if(J.inclusive?D.data>J.value:D.data>=J.value)$=this._getOrReturnCtx(D,$),E0($,{code:B0.too_big,type:"bigint",maximum:J.value,inclusive:J.inclusive,message:J.message}),B.dirty()}else if(J.kind==="multipleOf"){if(D.data%J.value!==BigInt(0))$=this._getOrReturnCtx(D,$),E0($,{code:B0.not_multiple_of,multipleOf:J.value,message:J.message}),B.dirty()}else ND.assertNever(J);return{status:B.value,value:D.data}}_getInvalidInput(D){let F=this._getOrReturnCtx(D);return E0(F,{code:B0.invalid_type,expected:R0.bigint,received:F.parsedType}),a0}gte(D,F){return this.setLimit("min",D,!0,h0.toString(F))}gt(D,F){return this.setLimit("min",D,!1,h0.toString(F))}lte(D,F){return this.setLimit("max",D,!0,h0.toString(F))}lt(D,F){return this.setLimit("max",D,!1,h0.toString(F))}setLimit(D,F,$,B){return new _6({...this._def,checks:[...this._def.checks,{kind:D,value:F,inclusive:$,message:h0.toString(B)}]})}_addCheck(D){return new _6({...this._def,checks:[...this._def.checks,D]})}positive(D){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:h0.toString(D)})}negative(D){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:h0.toString(D)})}nonpositive(D){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:h0.toString(D)})}nonnegative(D){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:h0.toString(D)})}multipleOf(D,F){return this._addCheck({kind:"multipleOf",value:D,message:h0.toString(F)})}get minValue(){let D=null;for(let F of this._def.checks)if(F.kind==="min"){if(D===null||F.value>D)D=F.value}return D}get maxValue(){let D=null;for(let F of this._def.checks)if(F.kind==="max"){if(D===null||F.value<D)D=F.value}return D}};_6.create=(D)=>{var F;return new _6({checks:[],typeName:J0.ZodBigInt,coerce:(F=D===null||D===void 0?void 0:D.coerce)!==null&&F!==void 0?F:!1,...QD(D)})};E7=class E7 extends fD{_parse(D){if(this._def.coerce)D.data=Boolean(D.data);if(this._getType(D)!==R0.boolean){let $=this._getOrReturnCtx(D);return E0($,{code:B0.invalid_type,expected:R0.boolean,received:$.parsedType}),a0}return YF(D.data)}};E7.create=(D)=>{return new E7({typeName:J0.ZodBoolean,coerce:(D===null||D===void 0?void 0:D.coerce)||!1,...QD(D)})};w8=class w8 extends fD{_parse(D){if(this._def.coerce)D.data=new Date(D.data);if(this._getType(D)!==R0.date){let J=this._getOrReturnCtx(D);return E0(J,{code:B0.invalid_type,expected:R0.date,received:J.parsedType}),a0}if(isNaN(D.data.getTime())){let J=this._getOrReturnCtx(D);return E0(J,{code:B0.invalid_date}),a0}let $=new i1,B=void 0;for(let J of this._def.checks)if(J.kind==="min"){if(D.data.getTime()<J.value)B=this._getOrReturnCtx(D,B),E0(B,{code:B0.too_small,message:J.message,inclusive:!0,exact:!1,minimum:J.value,type:"date"}),$.dirty()}else if(J.kind==="max"){if(D.data.getTime()>J.value)B=this._getOrReturnCtx(D,B),E0(B,{code:B0.too_big,message:J.message,inclusive:!0,exact:!1,maximum:J.value,type:"date"}),$.dirty()}else ND.assertNever(J);return{status:$.value,value:new Date(D.data.getTime())}}_addCheck(D){return new w8({...this._def,checks:[...this._def.checks,D]})}min(D,F){return this._addCheck({kind:"min",value:D.getTime(),message:h0.toString(F)})}max(D,F){return this._addCheck({kind:"max",value:D.getTime(),message:h0.toString(F)})}get minDate(){let D=null;for(let F of this._def.checks)if(F.kind==="min"){if(D===null||F.value>D)D=F.value}return D!=null?new Date(D):null}get maxDate(){let D=null;for(let F of this._def.checks)if(F.kind==="max"){if(D===null||F.value<D)D=F.value}return D!=null?new Date(D):null}};w8.create=(D)=>{return new w8({checks:[],coerce:(D===null||D===void 0?void 0:D.coerce)||!1,typeName:J0.ZodDate,...QD(D)})};i9=class i9 extends fD{_parse(D){if(this._getType(D)!==R0.symbol){let $=this._getOrReturnCtx(D);return E0($,{code:B0.invalid_type,expected:R0.symbol,received:$.parsedType}),a0}return YF(D.data)}};i9.create=(D)=>{return new i9({typeName:J0.ZodSymbol,...QD(D)})};K7=class K7 extends fD{_parse(D){if(this._getType(D)!==R0.undefined){let $=this._getOrReturnCtx(D);return E0($,{code:B0.invalid_type,expected:R0.undefined,received:$.parsedType}),a0}return YF(D.data)}};K7.create=(D)=>{return new K7({typeName:J0.ZodUndefined,...QD(D)})};q7=class q7 extends fD{_parse(D){if(this._getType(D)!==R0.null){let $=this._getOrReturnCtx(D);return E0($,{code:B0.invalid_type,expected:R0.null,received:$.parsedType}),a0}return YF(D.data)}};q7.create=(D)=>{return new q7({typeName:J0.ZodNull,...QD(D)})};f8=class f8 extends fD{constructor(){super(...arguments);this._any=!0}_parse(D){return YF(D.data)}};f8.create=(D)=>{return new f8({typeName:J0.ZodAny,...QD(D)})};N6=class N6 extends fD{constructor(){super(...arguments);this._unknown=!0}_parse(D){return YF(D.data)}};N6.create=(D)=>{return new N6({typeName:J0.ZodUnknown,...QD(D)})};M2=class M2 extends fD{_parse(D){let F=this._getOrReturnCtx(D);return E0(F,{code:B0.invalid_type,expected:R0.never,received:F.parsedType}),a0}};M2.create=(D)=>{return new M2({typeName:J0.ZodNever,...QD(D)})};d9=class d9 extends fD{_parse(D){if(this._getType(D)!==R0.undefined){let $=this._getOrReturnCtx(D);return E0($,{code:B0.invalid_type,expected:R0.void,received:$.parsedType}),a0}return YF(D.data)}};d9.create=(D)=>{return new d9({typeName:J0.ZodVoid,...QD(D)})};Q2=class Q2 extends fD{_parse(D){let{ctx:F,status:$}=this._processInputParams(D),B=this._def;if(F.parsedType!==R0.array)return E0(F,{code:B0.invalid_type,expected:R0.array,received:F.parsedType}),a0;if(B.exactLength!==null){let Y=F.data.length>B.exactLength.value,X=F.data.length<B.exactLength.value;if(Y||X)E0(F,{code:Y?B0.too_big:B0.too_small,minimum:X?B.exactLength.value:void 0,maximum:Y?B.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:B.exactLength.message}),$.dirty()}if(B.minLength!==null){if(F.data.length<B.minLength.value)E0(F,{code:B0.too_small,minimum:B.minLength.value,type:"array",inclusive:!0,exact:!1,message:B.minLength.message}),$.dirty()}if(B.maxLength!==null){if(F.data.length>B.maxLength.value)E0(F,{code:B0.too_big,maximum:B.maxLength.value,type:"array",inclusive:!0,exact:!1,message:B.maxLength.message}),$.dirty()}if(F.common.async)return Promise.all([...F.data].map((Y,X)=>{return B.type._parseAsync(new w2(F,Y,F.path,X))})).then((Y)=>{return i1.mergeArray($,Y)});let J=[...F.data].map((Y,X)=>{return B.type._parseSync(new w2(F,Y,F.path,X))});return i1.mergeArray($,J)}get element(){return this._def.type}min(D,F){return new Q2({...this._def,minLength:{value:D,message:h0.toString(F)}})}max(D,F){return new Q2({...this._def,maxLength:{value:D,message:h0.toString(F)}})}length(D,F){return new Q2({...this._def,exactLength:{value:D,message:h0.toString(F)}})}nonempty(D){return this.min(1,D)}};Q2.create=(D,F)=>{return new Q2({type:D,minLength:null,maxLength:null,exactLength:null,typeName:J0.ZodArray,...QD(F)})};nD=class nD extends fD{constructor(){super(...arguments);this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let D=this._def.shape(),F=ND.objectKeys(D);return this._cached={shape:D,keys:F}}_parse(D){if(this._getType(D)!==R0.object){let w=this._getOrReturnCtx(D);return E0(w,{code:B0.invalid_type,expected:R0.object,received:w.parsedType}),a0}let{status:$,ctx:B}=this._processInputParams(D),{shape:J,keys:Y}=this._getCached(),X=[];if(!(this._def.catchall instanceof M2&&this._def.unknownKeys==="strip")){for(let w in B.data)if(!Y.includes(w))X.push(w)}let Q=[];for(let w of Y){let f=J[w],G=B.data[w];Q.push({key:{status:"valid",value:w},value:f._parse(new w2(B,G,B.path,w)),alwaysSet:w in B.data})}if(this._def.catchall instanceof M2){let w=this._def.unknownKeys;if(w==="passthrough")for(let f of X)Q.push({key:{status:"valid",value:f},value:{status:"valid",value:B.data[f]}});else if(w==="strict"){if(X.length>0)E0(B,{code:B0.unrecognized_keys,keys:X}),$.dirty()}else if(w==="strip");else throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let w=this._def.catchall;for(let f of X){let G=B.data[f];Q.push({key:{status:"valid",value:f},value:w._parse(new w2(B,G,B.path,f)),alwaysSet:f in B.data})}}if(B.common.async)return Promise.resolve().then(async()=>{let w=[];for(let f of Q){let G=await f.key,H=await f.value;w.push({key:G,value:H,alwaysSet:f.alwaysSet})}return w}).then((w)=>{return i1.mergeObjectSync($,w)});else return i1.mergeObjectSync($,Q)}get shape(){return this._def.shape()}strict(D){return h0.errToObj,new nD({...this._def,unknownKeys:"strict",...D!==void 0?{errorMap:(F,$)=>{var B,J,Y,X;let Q=(Y=(J=(B=this._def).errorMap)===null||J===void 0?void 0:J.call(B,F,$).message)!==null&&Y!==void 0?Y:$.defaultError;if(F.code==="unrecognized_keys")return{message:(X=h0.errToObj(D).message)!==null&&X!==void 0?X:Q};return{message:Q}}}:{}})}strip(){return new nD({...this._def,unknownKeys:"strip"})}passthrough(){return new nD({...this._def,unknownKeys:"passthrough"})}extend(D){return new nD({...this._def,shape:()=>({...this._def.shape(),...D})})}merge(D){return new nD({unknownKeys:D._def.unknownKeys,catchall:D._def.catchall,shape:()=>({...this._def.shape(),...D._def.shape()}),typeName:J0.ZodObject})}setKey(D,F){return this.augment({[D]:F})}catchall(D){return new nD({...this._def,catchall:D})}pick(D){let F={};return ND.objectKeys(D).forEach(($)=>{if(D[$]&&this.shape[$])F[$]=this.shape[$]}),new nD({...this._def,shape:()=>F})}omit(D){let F={};return ND.objectKeys(this.shape).forEach(($)=>{if(!D[$])F[$]=this.shape[$]}),new nD({...this._def,shape:()=>F})}deepPartial(){return f7(this)}partial(D){let F={};return ND.objectKeys(this.shape).forEach(($)=>{let B=this.shape[$];if(D&&!D[$])F[$]=B;else F[$]=B.optional()}),new nD({...this._def,shape:()=>F})}required(D){let F={};return ND.objectKeys(this.shape).forEach(($)=>{if(D&&!D[$])F[$]=this.shape[$];else{let J=this.shape[$];while(J instanceof ZF)J=J._def.innerType;F[$]=J}}),new nD({...this._def,shape:()=>F})}keyof(){return XG(ND.objectKeys(this.shape))}};nD.create=(D,F)=>{return new nD({shape:()=>D,unknownKeys:"strip",catchall:M2.create(),typeName:J0.ZodObject,...QD(F)})};nD.strictCreate=(D,F)=>{return new nD({shape:()=>D,unknownKeys:"strict",catchall:M2.create(),typeName:J0.ZodObject,...QD(F)})};nD.lazycreate=(D,F)=>{return new nD({shape:D,unknownKeys:"strip",catchall:M2.create(),typeName:J0.ZodObject,...QD(F)})};V7=class V7 extends fD{_parse(D){let{ctx:F}=this._processInputParams(D),$=this._def.options;function B(J){for(let X of J)if(X.result.status==="valid")return X.result;for(let X of J)if(X.result.status==="dirty")return F.common.issues.push(...X.ctx.common.issues),X.result;let Y=J.map((X)=>new CF(X.ctx.common.issues));return E0(F,{code:B0.invalid_union,unionErrors:Y}),a0}if(F.common.async)return Promise.all($.map(async(J)=>{let Y={...F,common:{...F.common,issues:[]},parent:null};return{result:await J._parseAsync({data:F.data,path:F.path,parent:Y}),ctx:Y}})).then(B);else{let J=void 0,Y=[];for(let Q of $){let w={...F,common:{...F.common,issues:[]},parent:null},f=Q._parseSync({data:F.data,path:F.path,parent:w});if(f.status==="valid")return f;else if(f.status==="dirty"&&!J)J={result:f,ctx:w};if(w.common.issues.length)Y.push(w.common.issues)}if(J)return F.common.issues.push(...J.ctx.common.issues),J.result;let X=Y.map((Q)=>new CF(Q));return E0(F,{code:B0.invalid_union,unionErrors:X}),a0}}get options(){return this._def.options}};V7.create=(D,F)=>{return new V7({options:D,typeName:J0.ZodUnion,...QD(F)})};cB=class cB extends fD{_parse(D){let{ctx:F}=this._processInputParams(D);if(F.parsedType!==R0.object)return E0(F,{code:B0.invalid_type,expected:R0.object,received:F.parsedType}),a0;let $=this.discriminator,B=F.data[$],J=this.optionsMap.get(B);if(!J)return E0(F,{code:B0.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[$]}),a0;if(F.common.async)return J._parseAsync({data:F.data,path:F.path,parent:F});else return J._parseSync({data:F.data,path:F.path,parent:F})}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(D,F,$){let B=new Map;for(let J of F){let Y=D6(J.shape[D]);if(!Y.length)throw new Error(`A discriminator value for key \`${D}\` could not be extracted from all schema options`);for(let X of Y){if(B.has(X))throw new Error(`Discriminator property ${String(D)} has duplicate value ${String(X)}`);B.set(X,J)}}return new cB({typeName:J0.ZodDiscriminatedUnion,discriminator:D,options:F,optionsMap:B,...QD($)})}};A7=class A7 extends fD{_parse(D){let{status:F,ctx:$}=this._processInputParams(D),B=(J,Y)=>{if(FX(J)||FX(Y))return a0;let X=BX(J.value,Y.value);if(!X.valid)return E0($,{code:B0.invalid_intersection_types}),a0;if($X(J)||$X(Y))F.dirty();return{status:F.value,value:X.data}};if($.common.async)return Promise.all([this._def.left._parseAsync({data:$.data,path:$.path,parent:$}),this._def.right._parseAsync({data:$.data,path:$.path,parent:$})]).then(([J,Y])=>B(J,Y));else return B(this._def.left._parseSync({data:$.data,path:$.path,parent:$}),this._def.right._parseSync({data:$.data,path:$.path,parent:$}))}};A7.create=(D,F,$)=>{return new A7({left:D,right:F,typeName:J0.ZodIntersection,...QD($)})};_2=class _2 extends fD{_parse(D){let{status:F,ctx:$}=this._processInputParams(D);if($.parsedType!==R0.array)return E0($,{code:B0.invalid_type,expected:R0.array,received:$.parsedType}),a0;if($.data.length<this._def.items.length)return E0($,{code:B0.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a0;if(!this._def.rest&&$.data.length>this._def.items.length)E0($,{code:B0.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),F.dirty();let J=[...$.data].map((Y,X)=>{let Q=this._def.items[X]||this._def.rest;if(!Q)return null;return Q._parse(new w2($,Y,$.path,X))}).filter((Y)=>!!Y);if($.common.async)return Promise.all(J).then((Y)=>{return i1.mergeArray(F,Y)});else return i1.mergeArray(F,J)}get items(){return this._def.items}rest(D){return new _2({...this._def,rest:D})}};_2.create=(D,F)=>{if(!Array.isArray(D))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new _2({items:D,typeName:J0.ZodTuple,rest:null,...QD(F)})};l9=class l9 extends fD{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(D){let{status:F,ctx:$}=this._processInputParams(D);if($.parsedType!==R0.object)return E0($,{code:B0.invalid_type,expected:R0.object,received:$.parsedType}),a0;let B=[],J=this._def.keyType,Y=this._def.valueType;for(let X in $.data)B.push({key:J._parse(new w2($,X,$.path,X)),value:Y._parse(new w2($,$.data[X],$.path,X)),alwaysSet:X in $.data});if($.common.async)return i1.mergeObjectAsync(F,B);else return i1.mergeObjectSync(F,B)}get element(){return this._def.valueType}static create(D,F,$){if(F instanceof fD)return new l9({keyType:D,valueType:F,typeName:J0.ZodRecord,...QD($)});return new l9({keyType:X2.create(),valueType:D,typeName:J0.ZodRecord,...QD(F)})}};n9=class n9 extends fD{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(D){let{status:F,ctx:$}=this._processInputParams(D);if($.parsedType!==R0.map)return E0($,{code:B0.invalid_type,expected:R0.map,received:$.parsedType}),a0;let B=this._def.keyType,J=this._def.valueType,Y=[...$.data.entries()].map(([X,Q],w)=>{return{key:B._parse(new w2($,X,$.path,[w,"key"])),value:J._parse(new w2($,Q,$.path,[w,"value"]))}});if($.common.async){let X=new Map;return Promise.resolve().then(async()=>{for(let Q of Y){let w=await Q.key,f=await Q.value;if(w.status==="aborted"||f.status==="aborted")return a0;if(w.status==="dirty"||f.status==="dirty")F.dirty();X.set(w.value,f.value)}return{status:F.value,value:X}})}else{let X=new Map;for(let Q of Y){let{key:w,value:f}=Q;if(w.status==="aborted"||f.status==="aborted")return a0;if(w.status==="dirty"||f.status==="dirty")F.dirty();X.set(w.value,f.value)}return{status:F.value,value:X}}}};n9.create=(D,F,$)=>{return new n9({valueType:F,keyType:D,typeName:J0.ZodMap,...QD($)})};W8=class W8 extends fD{_parse(D){let{status:F,ctx:$}=this._processInputParams(D);if($.parsedType!==R0.set)return E0($,{code:B0.invalid_type,expected:R0.set,received:$.parsedType}),a0;let B=this._def;if(B.minSize!==null){if($.data.size<B.minSize.value)E0($,{code:B0.too_small,minimum:B.minSize.value,type:"set",inclusive:!0,exact:!1,message:B.minSize.message}),F.dirty()}if(B.maxSize!==null){if($.data.size>B.maxSize.value)E0($,{code:B0.too_big,maximum:B.maxSize.value,type:"set",inclusive:!0,exact:!1,message:B.maxSize.message}),F.dirty()}let J=this._def.valueType;function Y(Q){let w=new Set;for(let f of Q){if(f.status==="aborted")return a0;if(f.status==="dirty")F.dirty();w.add(f.value)}return{status:F.value,value:w}}let X=[...$.data.values()].map((Q,w)=>J._parse(new w2($,Q,$.path,w)));if($.common.async)return Promise.all(X).then((Q)=>Y(Q));else return Y(X)}min(D,F){return new W8({...this._def,minSize:{value:D,message:h0.toString(F)}})}max(D,F){return new W8({...this._def,maxSize:{value:D,message:h0.toString(F)}})}size(D,F){return this.min(D,F).max(D,F)}nonempty(D){return this.min(1,D)}};W8.create=(D,F)=>{return new W8({valueType:D,minSize:null,maxSize:null,typeName:J0.ZodSet,...QD(F)})};G7=class G7 extends fD{constructor(){super(...arguments);this.validate=this.implement}_parse(D){let{ctx:F}=this._processInputParams(D);if(F.parsedType!==R0.function)return E0(F,{code:B0.invalid_type,expected:R0.function,received:F.parsedType}),a0;function $(X,Q){return gB({data:X,path:F.path,errorMaps:[F.common.contextualErrorMap,F.schemaErrorMap,vB(),H7].filter((w)=>!!w),issueData:{code:B0.invalid_arguments,argumentsError:Q}})}function B(X,Q){return gB({data:X,path:F.path,errorMaps:[F.common.contextualErrorMap,F.schemaErrorMap,vB(),H7].filter((w)=>!!w),issueData:{code:B0.invalid_return_type,returnTypeError:Q}})}let J={errorMap:F.common.contextualErrorMap},Y=F.data;if(this._def.returns instanceof G8){let X=this;return YF(async function(...Q){let w=new CF([]),f=await X._def.args.parseAsync(Q,J).catch((K)=>{throw w.addIssue($(Q,K)),w}),G=await Reflect.apply(Y,this,f);return await X._def.returns._def.type.parseAsync(G,J).catch((K)=>{throw w.addIssue(B(G,K)),w})})}else{let X=this;return YF(function(...Q){let w=X._def.args.safeParse(Q,J);if(!w.success)throw new CF([$(Q,w.error)]);let f=Reflect.apply(Y,this,w.data),G=X._def.returns.safeParse(f,J);if(!G.success)throw new CF([B(f,G.error)]);return G.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...D){return new G7({...this._def,args:_2.create(D).rest(N6.create())})}returns(D){return new G7({...this._def,returns:D})}implement(D){return this.parse(D)}strictImplement(D){return this.parse(D)}static create(D,F,$){return new G7({args:D?D:_2.create([]).rest(N6.create()),returns:F||N6.create(),typeName:J0.ZodFunction,...QD($)})}};O7=class O7 extends fD{get schema(){return this._def.getter()}_parse(D){let{ctx:F}=this._processInputParams(D);return this._def.getter()._parse({data:F.data,path:F.path,parent:F})}};O7.create=(D,F)=>{return new O7({getter:D,typeName:J0.ZodLazy,...QD(F)})};j7=class j7 extends fD{_parse(D){if(D.data!==this._def.value){let F=this._getOrReturnCtx(D);return E0(F,{received:F.data,code:B0.invalid_literal,expected:this._def.value}),a0}return{status:"valid",value:D.data}}get value(){return this._def.value}};j7.create=(D,F)=>{return new j7({value:D,typeName:J0.ZodLiteral,...QD(F)})};L6=class L6 extends fD{constructor(){super(...arguments);m9.set(this,void 0)}_parse(D){if(typeof D.data!=="string"){let F=this._getOrReturnCtx(D),$=this._def.values;return E0(F,{expected:ND.joinValues($),received:F.parsedType,code:B0.invalid_type}),a0}if(!mB(this,m9,"f"))$G(this,m9,new Set(this._def.values),"f");if(!mB(this,m9,"f").has(D.data)){let F=this._getOrReturnCtx(D),$=this._def.values;return E0(F,{received:F.data,code:B0.invalid_enum_value,options:$}),a0}return YF(D.data)}get options(){return this._def.values}get enum(){let D={};for(let F of this._def.values)D[F]=F;return D}get Values(){let D={};for(let F of this._def.values)D[F]=F;return D}get Enum(){let D={};for(let F of this._def.values)D[F]=F;return D}extract(D,F=this._def){return L6.create(D,{...this._def,...F})}exclude(D,F=this._def){return L6.create(this.options.filter(($)=>!D.includes($)),{...this._def,...F})}};m9=new WeakMap;L6.create=XG;U7=class U7 extends fD{constructor(){super(...arguments);c9.set(this,void 0)}_parse(D){let F=ND.getValidEnumValues(this._def.values),$=this._getOrReturnCtx(D);if($.parsedType!==R0.string&&$.parsedType!==R0.number){let B=ND.objectValues(F);return E0($,{expected:ND.joinValues(B),received:$.parsedType,code:B0.invalid_type}),a0}if(!mB(this,c9,"f"))$G(this,c9,new Set(ND.getValidEnumValues(this._def.values)),"f");if(!mB(this,c9,"f").has(D.data)){let B=ND.objectValues(F);return E0($,{received:$.data,code:B0.invalid_enum_value,options:B}),a0}return YF(D.data)}get enum(){return this._def.values}};c9=new WeakMap;U7.create=(D,F)=>{return new U7({values:D,typeName:J0.ZodNativeEnum,...QD(F)})};G8=class G8 extends fD{unwrap(){return this._def.type}_parse(D){let{ctx:F}=this._processInputParams(D);if(F.parsedType!==R0.promise&&F.common.async===!1)return E0(F,{code:B0.invalid_type,expected:R0.promise,received:F.parsedType}),a0;let $=F.parsedType===R0.promise?F.data:Promise.resolve(F.data);return YF($.then((B)=>{return this._def.type.parseAsync(B,{path:F.path,errorMap:F.common.contextualErrorMap})}))}};G8.create=(D,F)=>{return new G8({type:D,typeName:J0.ZodPromise,...QD(F)})};gF=class gF extends fD{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===J0.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(D){let{status:F,ctx:$}=this._processInputParams(D),B=this._def.effect||null,J={addIssue:(Y)=>{if(E0($,Y),Y.fatal)F.abort();else F.dirty()},get path(){return $.path}};if(J.addIssue=J.addIssue.bind(J),B.type==="preprocess"){let Y=B.transform($.data,J);if($.common.async)return Promise.resolve(Y).then(async(X)=>{if(F.value==="aborted")return a0;let Q=await this._def.schema._parseAsync({data:X,path:$.path,parent:$});if(Q.status==="aborted")return a0;if(Q.status==="dirty")return W7(Q.value);if(F.value==="dirty")return W7(Q.value);return Q});else{if(F.value==="aborted")return a0;let X=this._def.schema._parseSync({data:Y,path:$.path,parent:$});if(X.status==="aborted")return a0;if(X.status==="dirty")return W7(X.value);if(F.value==="dirty")return W7(X.value);return X}}if(B.type==="refinement"){let Y=(X)=>{let Q=B.refinement(X,J);if($.common.async)return Promise.resolve(Q);if(Q instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return X};if($.common.async===!1){let X=this._def.schema._parseSync({data:$.data,path:$.path,parent:$});if(X.status==="aborted")return a0;if(X.status==="dirty")F.dirty();return Y(X.value),{status:F.value,value:X.value}}else return this._def.schema._parseAsync({data:$.data,path:$.path,parent:$}).then((X)=>{if(X.status==="aborted")return a0;if(X.status==="dirty")F.dirty();return Y(X.value).then(()=>{return{status:F.value,value:X.value}})})}if(B.type==="transform")if($.common.async===!1){let Y=this._def.schema._parseSync({data:$.data,path:$.path,parent:$});if(!Q8(Y))return Y;let X=B.transform(Y.value,J);if(X instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:F.value,value:X}}else return this._def.schema._parseAsync({data:$.data,path:$.path,parent:$}).then((Y)=>{if(!Q8(Y))return Y;return Promise.resolve(B.transform(Y.value,J)).then((X)=>({status:F.value,value:X}))});ND.assertNever(B)}};gF.create=(D,F,$)=>{return new gF({schema:D,typeName:J0.ZodEffects,effect:F,...QD($)})};gF.createWithPreprocess=(D,F,$)=>{return new gF({schema:F,effect:{type:"preprocess",transform:D},typeName:J0.ZodEffects,...QD($)})};ZF=class ZF extends fD{_parse(D){if(this._getType(D)===R0.undefined)return YF(void 0);return this._def.innerType._parse(D)}unwrap(){return this._def.innerType}};ZF.create=(D,F)=>{return new ZF({innerType:D,typeName:J0.ZodOptional,...QD(F)})};$6=class $6 extends fD{_parse(D){if(this._getType(D)===R0.null)return YF(null);return this._def.innerType._parse(D)}unwrap(){return this._def.innerType}};$6.create=(D,F)=>{return new $6({innerType:D,typeName:J0.ZodNullable,...QD(F)})};R7=class R7 extends fD{_parse(D){let{ctx:F}=this._processInputParams(D),$=F.data;if(F.parsedType===R0.undefined)$=this._def.defaultValue();return this._def.innerType._parse({data:$,path:F.path,parent:F})}removeDefault(){return this._def.innerType}};R7.create=(D,F)=>{return new R7({innerType:D,typeName:J0.ZodDefault,defaultValue:typeof F.default==="function"?F.default:()=>F.default,...QD(F)})};C7=class C7 extends fD{_parse(D){let{ctx:F}=this._processInputParams(D),$={...F,common:{...F.common,issues:[]}},B=this._def.innerType._parse({data:$.data,path:$.path,parent:{...$}});if(p9(B))return B.then((J)=>{return{status:"valid",value:J.status==="valid"?J.value:this._def.catchValue({get error(){return new CF($.common.issues)},input:$.data})}});else return{status:"valid",value:B.status==="valid"?B.value:this._def.catchValue({get error(){return new CF($.common.issues)},input:$.data})}}removeCatch(){return this._def.innerType}};C7.create=(D,F)=>{return new C7({innerType:D,typeName:J0.ZodCatch,catchValue:typeof F.catch==="function"?F.catch:()=>F.catch,...QD(F)})};o9=class o9 extends fD{_parse(D){if(this._getType(D)!==R0.nan){let $=this._getOrReturnCtx(D);return E0($,{code:B0.invalid_type,expected:R0.nan,received:$.parsedType}),a0}return{status:"valid",value:D.data}}};o9.create=(D)=>{return new o9({typeName:J0.ZodNaN,...QD(D)})};pT=Symbol("zod_brand");pB=class pB extends fD{_parse(D){let{ctx:F}=this._processInputParams(D),$=F.data;return this._def.type._parse({data:$,path:F.path,parent:F})}unwrap(){return this._def.type}};r9=class r9 extends fD{_parse(D){let{status:F,ctx:$}=this._processInputParams(D);if($.common.async)return(async()=>{let J=await this._def.in._parseAsync({data:$.data,path:$.path,parent:$});if(J.status==="aborted")return a0;if(J.status==="dirty")return F.dirty(),W7(J.value);else return this._def.out._parseAsync({data:J.value,path:$.path,parent:$})})();else{let B=this._def.in._parseSync({data:$.data,path:$.path,parent:$});if(B.status==="aborted")return a0;if(B.status==="dirty")return F.dirty(),{status:"dirty",value:B.value};else return this._def.out._parseSync({data:B.value,path:$.path,parent:$})}}static create(D,F){return new r9({in:D,out:F,typeName:J0.ZodPipeline})}};Z7=class Z7 extends fD{_parse(D){let F=this._def.innerType._parse(D),$=(B)=>{if(Q8(B))B.value=Object.freeze(B.value);return B};return p9(F)?F.then((B)=>$(B)):$(F)}unwrap(){return this._def.innerType}};Z7.create=(D,F)=>{return new Z7({innerType:D,typeName:J0.ZodReadonly,...QD(F)})};iT={object:nD.lazycreate};(function(D){D.ZodString="ZodString",D.ZodNumber="ZodNumber",D.ZodNaN="ZodNaN",D.ZodBigInt="ZodBigInt",D.ZodBoolean="ZodBoolean",D.ZodDate="ZodDate",D.ZodSymbol="ZodSymbol",D.ZodUndefined="ZodUndefined",D.ZodNull="ZodNull",D.ZodAny="ZodAny",D.ZodUnknown="ZodUnknown",D.ZodNever="ZodNever",D.ZodVoid="ZodVoid",D.ZodArray="ZodArray",D.ZodObject="ZodObject",D.ZodUnion="ZodUnion",D.ZodDiscriminatedUnion="ZodDiscriminatedUnion",D.ZodIntersection="ZodIntersection",D.ZodTuple="ZodTuple",D.ZodRecord="ZodRecord",D.ZodMap="ZodMap",D.ZodSet="ZodSet",D.ZodFunction="ZodFunction",D.ZodLazy="ZodLazy",D.ZodLiteral="ZodLiteral",D.ZodEnum="ZodEnum",D.ZodEffects="ZodEffects",D.ZodNativeEnum="ZodNativeEnum",D.ZodOptional="ZodOptional",D.ZodNullable="ZodNullable",D.ZodDefault="ZodDefault",D.ZodCatch="ZodCatch",D.ZodPromise="ZodPromise",D.ZodBranded="ZodBranded",D.ZodPipeline="ZodPipeline",D.ZodReadonly="ZodReadonly"})(J0||(J0={}));wG=X2.create,fG=M6.create,lT=o9.create,nT=_6.create,WG=E7.create,oT=w8.create,rT=i9.create,tT=K7.create,sT=q7.create,aT=f8.create,eT=N6.create,DP=M2.create,FP=d9.create,$P=Q2.create,BP=nD.create,JP=nD.strictCreate,YP=V7.create,XP=cB.create,QP=A7.create,wP=_2.create,fP=l9.create,WP=n9.create,GP=W8.create,HP=G7.create,EP=O7.create,KP=j7.create,qP=L6.create,VP=U7.create,AP=G8.create,DG=gF.create,OP=ZF.create,jP=$6.create,UP=gF.createWithPreprocess,RP=r9.create,MP={string:(D)=>X2.create({...D,coerce:!0}),number:(D)=>M6.create({...D,coerce:!0}),boolean:(D)=>E7.create({...D,coerce:!0}),bigint:(D)=>_6.create({...D,coerce:!0}),date:(D)=>w8.create({...D,coerce:!0})},_P=a0,W=Object.freeze({__proto__:null,defaultErrorMap:H7,setErrorMap:UT,getErrorMap:vB,makeIssue:gB,EMPTY_PATH:RT,addIssueToContext:E0,ParseStatus:i1,INVALID:a0,DIRTY:W7,OK:YF,isAborted:FX,isDirty:$X,isValid:Q8,isAsync:p9,get util(){return ND},get objectUtil(){return DX},ZodParsedType:R0,getParsedType:F6,ZodType:fD,datetimeRegex:YG,ZodString:X2,ZodNumber:M6,ZodBigInt:_6,ZodBoolean:E7,ZodDate:w8,ZodSymbol:i9,ZodUndefined:K7,ZodNull:q7,ZodAny:f8,ZodUnknown:N6,ZodNever:M2,ZodVoid:d9,ZodArray:Q2,ZodObject:nD,ZodUnion:V7,ZodDiscriminatedUnion:cB,ZodIntersection:A7,ZodTuple:_2,ZodRecord:l9,ZodMap:n9,ZodSet:W8,ZodFunction:G7,ZodLazy:O7,ZodLiteral:j7,ZodEnum:L6,ZodNativeEnum:U7,ZodPromise:G8,ZodEffects:gF,ZodTransformer:gF,ZodOptional:ZF,ZodNullable:$6,ZodDefault:R7,ZodCatch:C7,ZodNaN:o9,BRAND:pT,ZodBranded:pB,ZodPipeline:r9,ZodReadonly:Z7,custom:QG,Schema:fD,ZodSchema:fD,late:iT,get ZodFirstPartyTypeKind(){return J0},coerce:MP,any:aT,array:$P,bigint:nT,boolean:WG,date:oT,discriminatedUnion:XP,effect:DG,enum:qP,function:HP,instanceof:dT,intersection:QP,lazy:EP,literal:KP,map:WP,nan:lT,nativeEnum:VP,never:DP,null:sT,nullable:jP,number:fG,object:BP,oboolean:NP,onumber:ZP,optional:OP,ostring:CP,pipeline:RP,preprocess:UP,promise:AP,record:fP,set:GP,strictObject:JP,string:wG,symbol:rT,transformer:DG,tuple:wP,undefined:tT,union:YP,unknown:eT,void:FP,NEVER:_P,ZodIssueCode:B0,quotelessJson:jT,ZodError:CF})});var L2,z2;var JX=k(()=>{L2=Symbol("current"),z2=Symbol("previous")});function YX(D){if(typeof D.ZodType.prototype.openapi!=="undefined")return;D.ZodType.prototype.openapi=function(Y){let{zodOpenApi:X,...Q}=this._def,w=new this.constructor({...Q,zodOpenApi:{openapi:t9(Y,X==null?void 0:X.openapi)}});if(w._def.zodOpenApi[L2]=w,X)w._def.zodOpenApi[z2]=this;return w};let F=D.ZodType.prototype.describe;D.ZodType.prototype.describe=function(...Y){let X=F.apply(this,Y),Q=X._def;if(Q.zodOpenApi){let w={...Q.zodOpenApi};w.openapi=t9({description:Y[0]},w.openapi),w[z2]=this,w[L2]=X,Q.zodOpenApi=w}else Q.zodOpenApi={openapi:{description:Y[0]},[L2]:X};return X};let $=D.ZodObject.prototype.extend;D.ZodObject.prototype.extend=function(...Y){let X=$.apply(this,Y),Q=X._def.zodOpenApi;if(Q){let w={...Q};w.openapi=t9({},w.openapi),w[z2]=this,X._def.zodOpenApi=w}else X._def.zodOpenApi={[z2]:this};return X};let B=D.ZodObject.prototype.omit;D.ZodObject.prototype.omit=function(...Y){let X=B.apply(this,Y),Q=X._def.zodOpenApi;if(Q){let w={...Q};w.openapi=t9({},w.openapi),delete w[z2],delete w[L2],X._def.zodOpenApi=w}return X};let J=D.ZodObject.prototype.pick;D.ZodObject.prototype.pick=function(...Y){let X=J.apply(this,Y),Q=X._def.zodOpenApi;if(Q){let w={...Q};w.openapi=t9({},w.openapi),delete w[z2],delete w[L2],X._def.zodOpenApi=w}return X}}var t9=(D,{ref:F,refType:$,param:B,header:J,...Y}={})=>({...Y,...D});var XX=k(()=>{JX()});var QX=k(()=>{C0();XX();YX(W)});var pG=t((Ee,cG)=>{cG.exports=function D(F){if(F===void 0)F=2;if(F>=Error.stackTraceLimit)throw new TypeError("getCallerFile(position) requires position be less then Error.stackTraceLimit but position was: `"+F+"` and Error.stackTraceLimit was: `"+Error.stackTraceLimit+"`");var $=Error.prepareStackTrace;Error.prepareStackTrace=function(J,Y){return Y};var B=new Error().stack;if(Error.prepareStackTrace=$,B!==null&&typeof B==="object")return B[F]?B[F].getFileName():void 0}});import yb from"os";import Q5 from"path";var S6,L8,Y5,X5,bH,hH,x00,xb,kb;var SH=k(()=>{S6=yb.homedir(),{env:L8}=process,Y5=L8.XDG_DATA_HOME||(S6?Q5.join(S6,".local","share"):void 0),X5=L8.XDG_CONFIG_HOME||(S6?Q5.join(S6,".config"):void 0),bH=L8.XDG_STATE_HOME||(S6?Q5.join(S6,".local","state"):void 0),hH=L8.XDG_CACHE_HOME||(S6?Q5.join(S6,".cache"):void 0),x00=L8.XDG_RUNTIME_DIR||void 0,xb=(L8.XDG_DATA_DIRS||"/usr/local/share/:/usr/share/").split(":");if(Y5)xb.unshift(Y5);kb=(L8.XDG_CONFIG_DIRS||"/etc/xdg").split(":");if(X5)kb.unshift(X5)});var uH={};vF(uH,{Global:()=>P0});import $$ from"fs/promises";import z7 from"path";var w5="dgmo",yH,ub,xH,vb,P0;var d1=k(async()=>{SH();yH=z7.join(Y5,w5),ub=z7.join(hH,w5),xH=z7.join(X5,w5),vb=z7.join(bH,w5);((kH)=>kH.Path={data:yH,bin:z7.join(yH,"bin"),providers:z7.join(xH,"providers"),cache:ub,config:xH,state:vb})(P0||={});await Promise.all([$$.mkdir(P0.Path.data,{recursive:!0}),$$.mkdir(P0.Path.config,{recursive:!0}),$$.mkdir(P0.Path.cache,{recursive:!0}),$$.mkdir(P0.Path.providers,{recursive:!0}),$$.mkdir(P0.Path.state,{recursive:!0})])});import kX from"path";import f5 from"fs/promises";var Z0;var xD=k(async()=>{await d1();((vH)=>{vH.Default=X({service:"default"});let F="";function $(){return F}vH.file=$;async function B(Q){let w=kX.join(P0.Path.data,"log");await f5.mkdir(w,{recursive:!0}),J(w);let f=process.env.OPENCODE_ENV==="production";if(Q.print&&!f)return;F=kX.join(w,new Date().toISOString().split(".")[0].replace(/:/g,"")+".log");let G=Bun.file(F);await f5.truncate(F).catch(()=>{});let H=G.writer();process.stderr.write=(K)=>{return H.write(K),H.flush(),!0}}vH.init=B;async function J(Q){let f=(await f5.readdir(Q,{withFileTypes:!0})).filter((H)=>H.isFile()&&H.name.endsWith(".log")).map((H)=>kX.join(Q,H.name));if(f.length<=5)return;let G=f.slice(0,-10);await Promise.all(G.map((H)=>f5.unlink(H).catch(()=>{})))}let Y=Date.now();function X(Q){Q=Q||{};function w(G,H){let K=Object.entries({...Q,...H}).filter(([q,U])=>U!==void 0&&U!==null).map(([q,U])=>`${q}=${U}`).join(" "),E=new Date,O=E.getTime()-Y;return Y=E.getTime(),[E.toISOString().split(".")[0],"+"+O+"ms",K,G].filter(Boolean).join(" ")+`
`}let f={info(G,H){process.stderr.write("INFO  "+w(G,H))},error(G,H){process.stderr.write("ERROR "+w(G,H))},warn(G,H){process.stderr.write("WARN  "+w(G,H))},tag(G,H){if(Q)Q[G]=H;return f},clone(){return Z0.create({...Q})},time(G,H){let K=Date.now();f.info(G,{status:"started",...H});function E(){f.info(G,{status:"completed",duration:Date.now()-K,...H})}return{stop:E,[Symbol.dispose](){E()}}}};return f}vH.create=X})(Z0||={})});import{AsyncLocalStorage as gb}from"async_hooks";var uX;var gH=k(()=>{((l00)=>{class D extends Error{name;constructor($){super(`No context found for ${$}`);this.name=$}}l00.NotFound=D;function F($){let B=new gb;return{use(){let J=B.getStore();if(!J)throw new D($);return J},provide(J,Y){return B.run(J,Y)}}}l00.create=F})(uX||={})});import{exists as mb}from"fs/promises";import{dirname as cb,join as pb}from"path";var z8;var W5=k(()=>{((t00)=>{async function D(F,$,B){let J=$,Y=[];while(!0){let X=pb(J,F);if(await mb(X))Y.push(X);if(B===J)break;let Q=cb(J);if(Q===J)break;J=Q}return Y}t00.findUp=D})(z8||={})});var vX={};vF(vX,{App:()=>w0});import B$ from"path";import mH from"os";var w0;var MD=k(async()=>{QX();await xD();gH();W5();await d1();C0();((cH)=>{let D=Z0.create({service:"app"});cH.Info=W.object({user:W.string(),hostname:W.string(),git:W.boolean(),path:W.object({config:W.string(),data:W.string(),root:W.string(),cwd:W.string(),state:W.string()}),time:W.object({initialized:W.number().optional()})}).openapi({ref:"App"});let $=uX.create("app"),B="app.json";async function J(f,G){D.info("creating",{cwd:f.cwd});let H=await z8.findUp(".git",f.cwd).then(([C])=>C?B$.dirname(C):void 0);D.info("git",{git:H});let K=B$.join(P0.Path.data,"project",H?w(H):"global"),E=Bun.file(B$.join(K,"app.json")),O=await E.json().catch(()=>({}));await E.write(JSON.stringify(O));let q=new Map,U=H??f.cwd,N={user:mH.userInfo().username,hostname:mH.hostname(),time:{initialized:O.initialized},git:H!==void 0,path:{config:P0.Path.config,state:P0.Path.state,data:K,root:U,cwd:f.cwd}},L={services:q,info:N};return $.provide(L,async()=>{try{return await G(L.info)}finally{for(let[C,R]of L.services.entries()){if(!R.shutdown)continue;D.info("shutdown",{name:C}),await R.shutdown?.(await R.state)}}})}cH.provide=J;function Y(f,G,H){return()=>{let K=$.use(),E=K.services;if(!E.has(f))D.info("registering service",{name:f}),E.set(f,{state:G(K.info),shutdown:H});return E.get(f)?.state}}cH.state=Y;function X(){return $.use().info}cH.info=X;async function Q(){let{info:f}=$.use();f.time.initialized=Date.now(),await Bun.write(B$.join(f.path.data,"app.json"),JSON.stringify({initialized:Date.now()}))}cH.initialize=Q;function w(f){return f.split(B$.sep).filter(Boolean).join("-").replace(/[^A-Za-z0-9_]/g,"-")}})(w0||={})});var F0;var eD=k(async()=>{C0();await MD();await xD();((fD0)=>{let D=Z0.create({service:"bus"}),F=w0.state("bus",()=>{return{subscriptions:new Map}}),$=new Map;function B(G,H){let K={type:G,properties:H};return $.set(G,K),K}fD0.event=B;function J(){return W.discriminatedUnion("type",$.entries().map(([G,H])=>W.object({type:W.literal(G),properties:H.properties}).openapi({ref:"Event."+H.type})).toArray())}fD0.payloads=J;async function Y(G,H){let K={type:G.type,properties:H};D.info("publishing",{type:G.type});let E=[];for(let O of[G.type,"*"]){let q=F().subscriptions.get(O);for(let U of q??[])E.push(U(K))}return Promise.all(E)}fD0.publish=Y;function X(G,H){return f(G.type,H)}fD0.subscribe=X;function Q(G,H){let K=X(G,(E)=>{if(H(E))K()})}fD0.once=Q;function w(G){return f("*",G)}fD0.subscribeAll=w;function f(G,H){D.info("subscribing",{type:G});let K=F().subscriptions,E=K.get(G)??[];return E.push(H),K.set(G,E),()=>{D.info("unsubscribing",{type:G});let O=K.get(G);if(!O)return;let q=O.indexOf(H);if(q===-1)return;O.splice(q,1)}}})(F0||={})});import ib from"path";var dF;var Y$=k(async()=>{await d1();await xD();C0();((J$)=>{let D=Z0.create({service:"models.dev"}),F=ib.join(P0.Path.cache,"models.json");J$.Model=W.object({id:W.string(),name:W.string(),release_date:W.string(),attachment:W.boolean(),reasoning:W.boolean(),temperature:W.boolean(),tool_call:W.boolean(),cost:W.object({input:W.number(),output:W.number(),cache_read:W.number().optional(),cache_write:W.number().optional()}),limit:W.object({context:W.number(),output:W.number()}),options:W.record(W.any())}).openapi({ref:"Model"}),J$.Provider=W.object({api:W.string().optional(),name:W.string(),env:W.array(W.string()),id:W.string(),npm:W.string().optional(),models:W.record(J$.Model)}).openapi({ref:"Provider"});async function J(){let Q=await Bun.file(F).json().catch(()=>{});if(Q)return Y(),Q;Y();let w=await'{"github-copilot":{"id":"github-copilot","env":["GITHUB_TOKEN"],"npm":"@ai-sdk/openai-compatible","api":"https://api.githubcopilot.com","name":"GitHub Copilot","doc":"https://docs.github.com/en/copilot","models":{"gemini-2.5-pro":{"id":"gemini-2.5-pro","name":"Gemini 2.5 Pro (Preview)","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-03-20","last_updated":"2025-06-05","modalities":{"input":["text","image","audio","video"],"output":["text"]},"open_weights":false,"limit":{"context":2000000,"output":8192}},"claude-3.5-sonnet":{"id":"claude-3.5-sonnet","name":"Claude Sonnet 3.5","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2024-10-22","last_updated":"2024-10-22","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"limit":{"context":200000,"output":8192}},"o3-mini":{"id":"o3-mini","name":"o3-mini","attachment":false,"reasoning":true,"temperature":false,"tool_call":false,"knowledge":"2024-10","release_date":"2024-12-20","last_updated":"2025-01-29","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"limit":{"context":128000,"output":65536}},"gpt-4.1":{"id":"gpt-4.1","name":"GPT-4.1","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2025-04-14","last_updated":"2025-04-14","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"limit":{"context":128000,"output":16384}},"claude-3.7-sonnet":{"id":"claude-3.7-sonnet","name":"Claude Sonnet 3.7","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2025-02-19","last_updated":"2025-02-19","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"limit":{"context":200000,"output":8192}},"claude-3.7-sonnet-thought":{"id":"claude-3.7-sonnet-thought","name":"Claude Sonnet 3.7 Thinking","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2025-02-19","last_updated":"2025-02-19","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"limit":{"context":200000,"output":8192}},"o4-mini":{"id":"o4-mini","name":"o4-mini (Preview)","attachment":false,"reasoning":true,"temperature":false,"tool_call":false,"knowledge":"2024-10","release_date":"2025-04-16","last_updated":"2025-04-16","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"limit":{"context":128000,"output":65536}},"o1":{"id":"o1","name":"o1 (Preview)","attachment":false,"reasoning":true,"temperature":false,"tool_call":false,"knowledge":"2023-10","release_date":"2024-12-05","last_updated":"2024-12-05","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"limit":{"context":128000,"output":32768}},"gemini-2.0-flash-001":{"id":"gemini-2.0-flash-001","name":"Gemini 2.0 Flash","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-06","release_date":"2024-12-11","last_updated":"2024-12-11","modalities":{"input":["text","image","audio","video"],"output":["text"]},"open_weights":false,"limit":{"context":1000000,"output":8192}},"gpt-4o":{"id":"gpt-4o","name":"GPT-4o","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-09","release_date":"2024-05-13","last_updated":"2024-05-13","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"limit":{"context":128000,"output":16384}},"claude-sonnet-4":{"id":"claude-sonnet-4","name":"Claude Sonnet 4 (Preview)","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2025-05-22","last_updated":"2025-05-22","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"limit":{"context":200000,"output":8192}}}},"openai":{"id":"openai","env":["OPENAI_API_KEY"],"npm":"@ai-sdk/openai","name":"OpenAI","doc":"https://platform.openai.com/docs/models","models":{"gpt-4.1-mini":{"id":"gpt-4.1-mini","name":"GPT-4.1 mini","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2025-04-14","last_updated":"2025-04-14","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":0.4,"output":1.6,"cache_read":0.1},"limit":{"context":1047576,"output":32768}},"o1-preview":{"id":"o1-preview","name":"o1-preview","attachment":false,"reasoning":true,"temperature":true,"tool_call":false,"knowledge":"2023-09","release_date":"2024-09-12","last_updated":"2024-09-12","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":15,"output":60,"cache_read":7.5},"limit":{"context":128000,"output":32768}},"o1-mini":{"id":"o1-mini","name":"o1-mini","attachment":false,"reasoning":true,"temperature":false,"tool_call":false,"knowledge":"2023-09","release_date":"2024-09-12","last_updated":"2024-09-12","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":1.1,"output":4.4,"cache_read":0.55},"limit":{"context":128000,"output":65536}},"o4-mini-deep-research":{"id":"o4-mini-deep-research","name":"o4-mini-deep-research","attachment":true,"reasoning":true,"temperature":false,"tool_call":true,"knowledge":"2024-05","release_date":"2024-06-26","last_updated":"2024-06-26","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":2,"output":8,"cache_read":0.5},"limit":{"context":200000,"output":100000}},"gpt-4.5-preview":{"id":"gpt-4.5-preview","name":"GPT-4.5 Preview","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2025-02-01","last_updated":"2025-02-01","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":75,"output":150,"cache_read":37.5},"limit":{"context":128000,"output":16384}},"o1-pro":{"id":"o1-pro","name":"o1-pro","attachment":true,"reasoning":true,"temperature":false,"tool_call":true,"knowledge":"2023-09","release_date":"2025-03-19","last_updated":"2025-03-19","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":150,"output":600},"limit":{"context":200000,"output":100000}},"o3-mini":{"id":"o3-mini","name":"o3-mini","attachment":false,"reasoning":true,"temperature":false,"tool_call":true,"knowledge":"2024-05","release_date":"2024-12-20","last_updated":"2025-01-29","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":1.1,"output":4.4,"cache_read":0.55},"limit":{"context":200000,"output":100000}},"gpt-4.1":{"id":"gpt-4.1","name":"GPT-4.1","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2025-04-14","last_updated":"2025-04-14","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":2,"output":8,"cache_read":0.5},"limit":{"context":1047576,"output":32768}},"o3":{"id":"o3","name":"o3","attachment":true,"reasoning":true,"temperature":false,"tool_call":true,"knowledge":"2024-05","release_date":"2025-04-16","last_updated":"2025-04-16","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":2,"output":8,"cache_read":0.5},"limit":{"context":200000,"output":100000}},"gpt-4o-mini":{"id":"gpt-4o-mini","name":"GPT-4o mini","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-09","release_date":"2024-07-18","last_updated":"2024-07-18","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":0.15,"output":0.6,"cache_read":0.08},"limit":{"context":128000,"output":16384}},"o3-pro":{"id":"o3-pro","name":"o3-pro","attachment":true,"reasoning":true,"temperature":false,"tool_call":true,"knowledge":"2024-05","release_date":"2025-06-10","last_updated":"2025-06-10","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":20,"output":80},"limit":{"context":200000,"output":100000}},"codex-mini-latest":{"id":"codex-mini-latest","name":"Codex Mini","attachment":true,"reasoning":true,"temperature":false,"tool_call":true,"knowledge":"2024-04","release_date":"2025-05-16","last_updated":"2025-05-16","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":1.5,"output":6,"cache_read":0.375},"limit":{"context":200000,"output":100000}},"gpt-4.1-nano":{"id":"gpt-4.1-nano","name":"GPT-4.1 nano","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2025-04-14","last_updated":"2025-04-14","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":0.1,"output":0.4,"cache_read":0.03},"limit":{"context":1047576,"output":32768}},"o4-mini":{"id":"o4-mini","name":"o4-mini","attachment":true,"reasoning":true,"temperature":false,"tool_call":true,"knowledge":"2024-05","release_date":"2025-04-16","last_updated":"2025-04-16","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":1.1,"output":4.4,"cache_read":0.28},"limit":{"context":200000,"output":100000}},"o1":{"id":"o1","name":"o1","attachment":true,"reasoning":true,"temperature":false,"tool_call":true,"knowledge":"2023-09","release_date":"2024-12-05","last_updated":"2024-12-05","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":15,"output":60,"cache_read":7.5},"limit":{"context":200000,"output":100000}},"gpt-4":{"id":"gpt-4","name":"GPT-4","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-11","release_date":"2023-11-06","last_updated":"2024-04-09","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":10,"output":30},"limit":{"context":8192,"output":8192}},"gpt-4-turbo":{"id":"gpt-4-turbo","name":"GPT-4 Turbo","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-12","release_date":"2023-11-06","last_updated":"2024-04-09","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":10,"output":30},"limit":{"context":128000,"output":4096}},"o3-deep-research":{"id":"o3-deep-research","name":"o3-deep-research","attachment":true,"reasoning":true,"temperature":false,"tool_call":true,"knowledge":"2024-05","release_date":"2024-06-26","last_updated":"2024-06-26","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":10,"output":40,"cache_read":2.5},"limit":{"context":200000,"output":100000}},"gpt-4o":{"id":"gpt-4o","name":"GPT-4o","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-09","release_date":"2024-05-13","last_updated":"2024-05-13","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":2.5,"output":10,"cache_read":1.25},"limit":{"context":128000,"output":16384}}}},"deepseek":{"id":"deepseek","env":["DEEPSEEK_API_KEY"],"npm":"@ai-sdk/openai-compatible","api":"https://api.deepseek.com","name":"DeepSeek","doc":"https://platform.deepseek.com/api-docs/pricing","models":{"deepseek-reasoner":{"id":"deepseek-reasoner","name":"DeepSeek Reasoner","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2024-07","release_date":"2025-01-20","last_updated":"2025-05-29","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":0.55,"output":2.19,"cache_read":0.14},"limit":{"context":65536,"output":8192}},"deepseek-chat":{"id":"deepseek-chat","name":"DeepSeek Chat","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2024-07","release_date":"2024-12-26","last_updated":"2025-03-24","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":0.27,"output":1.1,"cache_read":0.07},"limit":{"context":65536,"output":8192}}}},"anthropic":{"id":"anthropic","env":["ANTHROPIC_API_KEY"],"npm":"@ai-sdk/anthropic","name":"Anthropic","doc":"https://docs.anthropic.com/en/docs/about-claude/models","models":{"claude-3-haiku-20240307":{"id":"claude-3-haiku-20240307","name":"Claude Haiku 3","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-08-31","release_date":"2024-03-13","last_updated":"2024-03-13","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":0.25,"output":1.25,"cache_read":0.03,"cache_write":0.3},"limit":{"context":200000,"output":4096}},"claude-3-opus-20240229":{"id":"claude-3-opus-20240229","name":"Claude Opus 3","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-08-31","release_date":"2024-02-29","last_updated":"2024-02-29","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":15,"output":75,"cache_read":1.5,"cache_write":18.75},"limit":{"context":200000,"output":4096}},"claude-3-5-haiku-20241022":{"id":"claude-3-5-haiku-20241022","name":"Claude Haiku 3.5","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-07-31","release_date":"2024-10-22","last_updated":"2024-10-22","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":0.8,"output":4,"cache_read":0.08,"cache_write":1},"limit":{"context":200000,"output":8192}},"claude-sonnet-4-20250514":{"id":"claude-sonnet-4-20250514","name":"Claude Sonnet 4","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-03-31","release_date":"2025-05-22","last_updated":"2025-05-22","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":3,"output":15,"cache_read":0.3,"cache_write":3.75},"limit":{"context":200000,"output":64000}},"claude-3-sonnet-20240229":{"id":"claude-3-sonnet-20240229","name":"Claude Sonnet 3","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-08-31","release_date":"2024-03-04","last_updated":"2024-03-04","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":3,"output":15,"cache_read":0.3,"cache_write":0.3},"limit":{"context":200000,"output":4096}},"claude-3-5-sonnet-20240620":{"id":"claude-3-5-sonnet-20240620","name":"Claude Sonnet 3.5","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04-30","release_date":"2024-06-20","last_updated":"2024-06-20","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":3,"output":15,"cache_read":0.3,"cache_write":3.75},"limit":{"context":200000,"output":8192}},"claude-opus-4-20250514":{"id":"claude-opus-4-20250514","name":"Claude Opus 4","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-03-31","release_date":"2025-05-22","last_updated":"2025-05-22","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":15,"output":75,"cache_read":1.5,"cache_write":18.75},"limit":{"context":200000,"output":32000}},"claude-3-5-sonnet-20241022":{"id":"claude-3-5-sonnet-20241022","name":"Claude Sonnet 3.5 v2","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04-30","release_date":"2024-10-22","last_updated":"2024-10-22","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":3,"output":15,"cache_read":0.3,"cache_write":3.75},"limit":{"context":200000,"output":8192}},"claude-3-7-sonnet-20250219":{"id":"claude-3-7-sonnet-20250219","name":"Claude Sonnet 3.7","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2024-10-31","release_date":"2025-02-19","last_updated":"2025-02-19","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":3,"output":15,"cache_read":0.3,"cache_write":3.75},"limit":{"context":200000,"output":64000}}}},"openrouter":{"id":"openrouter","env":["OPENROUTER_API_KEY"],"npm":"@ai-sdk/openai-compatible","api":"https://openrouter.ai/api/v1","name":"OpenRouter","doc":"https://openrouter.ai/models","models":{"openai/gpt-4.1-mini":{"id":"openai/gpt-4.1-mini","name":"GPT-4.1 Mini","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2025-04-14","last_updated":"2025-04-14","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":0.4,"output":1.6,"cache_read":0.1},"limit":{"context":1047576,"output":32768}},"openai/gpt-4.1":{"id":"openai/gpt-4.1","name":"GPT-4.1","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2025-04-14","last_updated":"2025-04-14","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":2,"output":8,"cache_read":0.5},"limit":{"context":1047576,"output":32768}},"openai/gpt-4o-mini":{"id":"openai/gpt-4o-mini","name":"GPT-4o-mini","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-10","release_date":"2024-07-18","last_updated":"2024-07-18","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":0.15,"output":0.6,"cache_read":0.08},"limit":{"context":128000,"output":16384}},"openai/o4-mini":{"id":"openai/o4-mini","name":"o4 Mini","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2024-06","release_date":"2025-04-16","last_updated":"2025-04-16","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":1.1,"output":4.4,"cache_read":0.28},"limit":{"context":200000,"output":100000}},"anthropic/claude-4-sonnet-20250522":{"id":"anthropic/claude-4-sonnet-20250522","name":"Claude Sonnet 4","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-03-31","release_date":"2025-05-22","last_updated":"2025-05-22","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":3,"output":15,"cache_read":0.3,"cache_write":3.75},"limit":{"context":200000,"output":64000}},"anthropic/claude-3.7-sonnet":{"id":"anthropic/claude-3.7-sonnet","name":"Claude Sonnet 3.7","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2024-01","release_date":"2025-02-19","last_updated":"2025-02-19","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":15,"output":75,"cache_read":1.5,"cache_write":18.75},"limit":{"context":200000,"output":128000}},"anthropic/claude-opus-4":{"id":"anthropic/claude-opus-4","name":"Claude Opus 4","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-03-31","release_date":"2025-05-22","last_updated":"2025-05-22","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":15,"output":75,"cache_read":1.5,"cache_write":18.75},"limit":{"context":200000,"output":32000}},"x-ai/grok-3-mini":{"id":"x-ai/grok-3-mini","name":"Grok 3 Mini","attachment":false,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2024-11","release_date":"2025-02-17","last_updated":"2025-02-17","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":0.3,"output":0.5,"cache_read":0.075,"cache_write":0.5},"limit":{"context":131072,"output":8192}},"x-ai/grok-3-mini-beta":{"id":"x-ai/grok-3-mini-beta","name":"Grok 3 Mini Beta","attachment":false,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2024-11","release_date":"2025-02-17","last_updated":"2025-02-17","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":0.3,"output":0.5,"cache_read":0.075,"cache_write":0.5},"limit":{"context":131072,"output":8192}},"x-ai/grok-3":{"id":"x-ai/grok-3","name":"Grok 3","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-11","release_date":"2025-02-17","last_updated":"2025-02-17","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":3,"output":15,"cache_read":0.75,"cache_write":15},"limit":{"context":131072,"output":8192}},"x-ai/grok-3-beta":{"id":"x-ai/grok-3-beta","name":"Grok 3 Beta","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-11","release_date":"2025-02-17","last_updated":"2025-02-17","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":3,"output":15,"cache_read":0.75,"cache_write":15},"limit":{"context":131072,"output":8192}},"google/gemini-2.5-pro-preview-05-06":{"id":"google/gemini-2.5-pro-preview-05-06","name":"Gemini 2.5 Pro Preview 05-06","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-05-06","last_updated":"2025-05-06","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":1.25,"output":10,"cache_read":0.31},"limit":{"context":1048576,"output":65536}},"google/gemini-2.5-pro-preview-06-05":{"id":"google/gemini-2.5-pro-preview-06-05","name":"Gemini 2.5 Pro Preview 06-05","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-06-05","last_updated":"2025-06-05","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":1.25,"output":10,"cache_read":0.31},"limit":{"context":1048576,"output":65536}},"google/gemini-2.5-pro":{"id":"google/gemini-2.5-pro","name":"Gemini 2.5 Pro","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-03-20","last_updated":"2025-06-05","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":1.25,"output":10,"cache_read":0.31},"limit":{"context":1048576,"output":65536}},"google/gemini-2.5-flash-preview-04-17":{"id":"google/gemini-2.5-flash-preview-04-17","name":"Gemini 2.5 Flash Preview 04-17","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-04-17","last_updated":"2025-04-17","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":0.15,"output":0.6,"cache_read":0.0375},"limit":{"context":1048576,"output":65536}},"google/gemini-2.5-flash-preview-05-20":{"id":"google/gemini-2.5-flash-preview-05-20","name":"Gemini 2.5 Flash Preview 05-20","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-05-20","last_updated":"2025-05-20","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":0.15,"output":0.6,"cache_read":0.0375},"limit":{"context":1048576,"output":65536}},"google/gemini-2.0-flash-001":{"id":"google/gemini-2.0-flash-001","name":"Gemini 2.0 Flash","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-06","release_date":"2024-12-11","last_updated":"2024-12-11","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":0.1,"output":0.4,"cache_read":0.025},"limit":{"context":1048576,"output":8192}}}},"vercel":{"id":"vercel","env":["V0_API_KEY"],"npm":"@ai-sdk/vercel","name":"Vercel","doc":"https://sdk.vercel.ai/providers/ai-sdk-providers/vercel","models":{"v0-1.5-lg":{"id":"v0-1.5-lg","name":"v0-1.5-lg","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"release_date":"2025-06-09","last_updated":"2025-06-09","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":15,"output":75},"limit":{"context":512000,"output":32000}},"v0-1.5-md":{"id":"v0-1.5-md","name":"v0-1.5-md","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"release_date":"2025-06-09","last_updated":"2025-06-09","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":3,"output":15},"limit":{"context":128000,"output":32000}},"v0-1.0-md":{"id":"v0-1.0-md","name":"v0-1.0-md","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"release_date":"2025-05-22","last_updated":"2025-05-22","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":3,"output":15},"limit":{"context":128000,"output":32000}}}},"mistral":{"id":"mistral","env":["MISTRAL_API_KEY"],"npm":"@ai-sdk/mistral","name":"Mistral","doc":"https://docs.mistral.ai/getting-started/models/","models":{"ministral-8b-latest":{"id":"ministral-8b-latest","name":"Ministral 8B","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-10","release_date":"2024-10-01","last_updated":"2024-10-04","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.1,"output":0.1},"limit":{"context":128000,"output":128000}},"open-mixtral-8x7b":{"id":"open-mixtral-8x7b","name":"Mixtral 8x7B","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-01","release_date":"2023-12-11","last_updated":"2023-12-11","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.7,"output":0.7},"limit":{"context":32000,"output":32000}},"open-mistral-7b":{"id":"open-mistral-7b","name":"Mistral 7B","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-12","release_date":"2023-09-27","last_updated":"2023-09-27","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.25,"output":0.25},"limit":{"context":8000,"output":8000}},"pixtral-12b":{"id":"pixtral-12b","name":"Pixtral 12B","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-09","release_date":"2024-09-01","last_updated":"2024-09-01","modalities":{"input":["text","image"],"output":["text"]},"open_weights":true,"cost":{"input":0.15,"output":0.15},"limit":{"context":128000,"output":128000}},"mistral-medium-latest":{"id":"mistral-medium-latest","name":"Mistral Medium","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2025-05","release_date":"2025-05-07","last_updated":"2025-05-10","modalities":{"input":["text","image"],"output":["text"]},"open_weights":true,"cost":{"input":0.4,"output":2},"limit":{"context":128000,"output":16384}},"open-mixtral-8x22b":{"id":"open-mixtral-8x22b","name":"Mixtral 8x22B","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2024-04-17","last_updated":"2024-04-17","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":2,"output":6},"limit":{"context":64000,"output":64000}},"pixtral-large-latest":{"id":"pixtral-large-latest","name":"Pixtral Large","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-11","release_date":"2024-11-01","last_updated":"2024-11-04","modalities":{"input":["text","image"],"output":["text"]},"open_weights":true,"cost":{"input":2,"output":6},"limit":{"context":128000,"output":128000}},"devstral-small-2505":{"id":"devstral-small-2505","name":"Devstral","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2025-05","release_date":"2025-05-07","last_updated":"2025-05-07","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.1,"output":0.3},"limit":{"context":128000,"output":128000}},"mistral-nemo":{"id":"mistral-nemo","name":"Mistral Nemo","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-07","release_date":"2024-07-01","last_updated":"2024-07-01","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.15,"output":0.15},"limit":{"context":128000,"output":128000}},"magistral-medium-latest":{"id":"magistral-medium-latest","name":"Magistral Medium","attachment":false,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-06","release_date":"2025-03-17","last_updated":"2025-03-20","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":2,"output":5},"limit":{"context":128000,"output":16384}},"codestral-latest":{"id":"codestral-latest","name":"Codestral","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-10","release_date":"2024-05-29","last_updated":"2025-01-04","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.3,"output":0.9},"limit":{"context":256000,"output":4096}},"ministral-3b-latest":{"id":"ministral-3b-latest","name":"Ministral 3B","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-10","release_date":"2024-10-01","last_updated":"2024-10-04","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.04,"output":0.04},"limit":{"context":128000,"output":128000}},"mistral-large-latest":{"id":"mistral-large-latest","name":"Mistral Large","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-11","release_date":"2024-11-01","last_updated":"2024-11-04","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":2,"output":6},"limit":{"context":131072,"output":16384}},"magistral-small":{"id":"magistral-small","name":"Magistral Small","attachment":false,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-06","release_date":"2025-03-17","last_updated":"2025-03-17","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.5,"output":1.5},"limit":{"context":128000,"output":128000}},"mistral-small-latest":{"id":"mistral-small-latest","name":"Mistral Small","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2025-03","release_date":"2024-09-01","last_updated":"2024-09-04","modalities":{"input":["text","image"],"output":["text"]},"open_weights":true,"cost":{"input":0.1,"output":0.3},"limit":{"context":128000,"output":16384}}}},"xai":{"id":"xai","env":["XAI_API_KEY"],"npm":"@ai-sdk/xai","name":"xAI","doc":"https://docs.x.ai/docs/models","models":{"grok-2":{"id":"grok-2","name":"Grok 2","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-08","release_date":"2024-08-20","last_updated":"2024-08-20","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":2,"output":10,"cache_read":2,"cache_write":10},"limit":{"context":131072,"output":8192}},"grok-3-mini-latest":{"id":"grok-3-mini-latest","name":"Grok 3 Mini Latest","attachment":false,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2024-11","release_date":"2025-02-17","last_updated":"2025-02-17","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":0.3,"output":0.5,"cache_read":0.075,"cache_write":0.5},"limit":{"context":131072,"output":8192}},"grok-2-vision":{"id":"grok-2-vision","name":"Grok 2 Vision","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-08","release_date":"2024-08-20","last_updated":"2024-08-20","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":2,"output":10,"cache_read":2,"cache_write":10},"limit":{"context":8192,"output":4096}},"grok-3-fast":{"id":"grok-3-fast","name":"Grok 3 Fast","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-11","release_date":"2025-02-17","last_updated":"2025-02-17","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":5,"output":25,"cache_read":1.25,"cache_write":25},"limit":{"context":131072,"output":8192}},"grok-3-mini-fast":{"id":"grok-3-mini-fast","name":"Grok 3 Mini Fast","attachment":false,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2024-11","release_date":"2025-02-17","last_updated":"2025-02-17","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":0.6,"output":4,"cache_read":0.15,"cache_write":4},"limit":{"context":131072,"output":8192}},"grok-3-mini-fast-latest":{"id":"grok-3-mini-fast-latest","name":"Grok 3 Mini Fast Latest","attachment":false,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2024-11","release_date":"2025-02-17","last_updated":"2025-02-17","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":0.6,"output":4,"cache_read":0.15,"cache_write":4},"limit":{"context":131072,"output":8192}},"grok-2-1212":{"id":"grok-2-1212","name":"Grok 2 (1212)","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-08","release_date":"2024-12-12","last_updated":"2024-12-12","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":2,"output":10,"cache_read":2,"cache_write":10},"limit":{"context":131072,"output":8192}},"grok-2-latest":{"id":"grok-2-latest","name":"Grok 2 Latest","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-08","release_date":"2024-08-20","last_updated":"2024-12-12","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":2,"output":10,"cache_read":2,"cache_write":10},"limit":{"context":131072,"output":8192}},"grok-2-vision-1212":{"id":"grok-2-vision-1212","name":"Grok 2 Vision (1212)","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-08","release_date":"2024-08-20","last_updated":"2024-12-12","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":2,"output":10,"cache_read":2,"cache_write":10},"limit":{"context":8192,"output":4096}},"grok-beta":{"id":"grok-beta","name":"Grok Beta","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-08","release_date":"2024-11-01","last_updated":"2024-11-01","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":5,"output":15,"cache_read":5,"cache_write":15},"limit":{"context":131072,"output":4096}},"grok-3-fast-latest":{"id":"grok-3-fast-latest","name":"Grok 3 Fast Latest","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-11","release_date":"2025-02-17","last_updated":"2025-02-17","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":5,"output":25,"cache_read":1.25,"cache_write":25},"limit":{"context":131072,"output":8192}},"grok-vision-beta":{"id":"grok-vision-beta","name":"Grok Vision Beta","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-08","release_date":"2024-11-01","last_updated":"2024-11-01","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":5,"output":15,"cache_read":5,"cache_write":15},"limit":{"context":8192,"output":4096}},"grok-3-latest":{"id":"grok-3-latest","name":"Grok 3 Latest","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-11","release_date":"2025-02-17","last_updated":"2025-02-17","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":3,"output":15,"cache_read":0.75,"cache_write":15},"limit":{"context":131072,"output":8192}},"grok-3-mini":{"id":"grok-3-mini","name":"Grok 3 Mini","attachment":false,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2024-11","release_date":"2025-02-17","last_updated":"2025-02-17","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":0.3,"output":0.5,"cache_read":0.075,"cache_write":0.5},"limit":{"context":131072,"output":8192}},"grok-2-vision-latest":{"id":"grok-2-vision-latest","name":"Grok 2 Vision Latest","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-08","release_date":"2024-08-20","last_updated":"2024-12-12","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":2,"output":10,"cache_read":2,"cache_write":10},"limit":{"context":8192,"output":4096}},"grok-3":{"id":"grok-3","name":"Grok 3","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-11","release_date":"2025-02-17","last_updated":"2025-02-17","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":3,"output":15,"cache_read":0.75,"cache_write":15},"limit":{"context":131072,"output":8192}}}},"amazon-bedrock":{"id":"amazon-bedrock","env":["AWS_ACCESS_KEY_ID","AWS_SECRET_ACCESS_KEY","AWS_REGION"],"npm":"@ai-sdk/amazon-bedrock","name":"Amazon Bedrock","doc":"https://docs.aws.amazon.com/bedrock/latest/userguide/models-supported.html","models":{"anthropic.claude-3-5-haiku-20241022-v1:0":{"id":"anthropic.claude-3-5-haiku-20241022-v1:0","name":"Claude Haiku 3.5","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-07","release_date":"2024-10-22","last_updated":"2024-10-22","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":0.8,"output":4,"cache_read":0.08,"cache_write":1},"limit":{"context":200000,"output":8192}},"anthropic.claude-sonnet-4-20250514-v1:0":{"id":"anthropic.claude-sonnet-4-20250514-v1:0","name":"Claude Sonnet 4","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2025-05-22","last_updated":"2025-05-22","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":3,"output":15,"cache_read":0.3,"cache_write":3.75},"limit":{"context":200000,"output":64000}},"meta.llama3-2-1b-instruct-v1:0":{"id":"meta.llama3-2-1b-instruct-v1:0","name":"Llama 3.2 1B Instruct","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-12","release_date":"2024-09-25","last_updated":"2024-09-25","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.1,"output":0.1},"limit":{"context":131000,"output":4096}},"anthropic.claude-v2:1":{"id":"anthropic.claude-v2:1","name":"Claude 2.1","attachment":false,"reasoning":false,"temperature":true,"tool_call":false,"knowledge":"2023-08","release_date":"2023-11-21","last_updated":"2023-11-21","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":8,"output":24},"limit":{"context":200000,"output":4096}},"meta.llama4-maverick-17b-instruct-v1:0":{"id":"meta.llama4-maverick-17b-instruct-v1:0","name":"Llama 4 Maverick 17B Instruct","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-08","release_date":"2025-04-05","last_updated":"2025-04-05","modalities":{"input":["text","image"],"output":["text"]},"open_weights":true,"cost":{"input":0.24,"output":0.97},"limit":{"context":1000000,"output":16384}},"anthropic.claude-3-7-sonnet-20250219-v1:0":{"id":"anthropic.claude-3-7-sonnet-20250219-v1:0","name":"Claude Sonnet 3.7","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2025-02-19","last_updated":"2025-02-19","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":3,"output":15,"cache_read":0.3,"cache_write":3.75},"limit":{"context":200000,"output":8192}},"anthropic.claude-instant-v1":{"id":"anthropic.claude-instant-v1","name":"Claude Instant","attachment":false,"reasoning":false,"temperature":true,"tool_call":false,"knowledge":"2023-08","release_date":"2023-03-01","last_updated":"2023-03-01","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":0.8,"output":2.4},"limit":{"context":100000,"output":4096}},"amazon.nova-lite-v1:0":{"id":"amazon.nova-lite-v1:0","name":"Nova Lite","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-10","release_date":"2024-12-03","last_updated":"2024-12-03","modalities":{"input":["text","image","video"],"output":["text"]},"open_weights":false,"cost":{"input":0.06,"output":0.24,"cache_read":0.015},"limit":{"context":300000,"output":8192}},"meta.llama3-2-3b-instruct-v1:0":{"id":"meta.llama3-2-3b-instruct-v1:0","name":"Llama 3.2 3B Instruct","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-12","release_date":"2024-09-25","last_updated":"2024-09-25","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.15,"output":0.15},"limit":{"context":131000,"output":4096}},"cohere.command-light-text-v14":{"id":"cohere.command-light-text-v14","name":"Command Light","attachment":false,"reasoning":false,"temperature":true,"tool_call":false,"knowledge":"2023-08","release_date":"2023-11-01","last_updated":"2023-11-01","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.3,"output":0.6},"limit":{"context":4096,"output":4096}},"amazon.nova-premier-v1:0":{"id":"amazon.nova-premier-v1:0","name":"Nova Premier","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2024-10","release_date":"2024-12-03","last_updated":"2024-12-03","modalities":{"input":["text","image","video"],"output":["text"]},"open_weights":false,"cost":{"input":2.5,"output":12.5},"limit":{"context":1000000,"output":16384}},"anthropic.claude-v2":{"id":"anthropic.claude-v2","name":"Claude 2","attachment":false,"reasoning":false,"temperature":true,"tool_call":false,"knowledge":"2023-08","release_date":"2023-07-11","last_updated":"2023-07-11","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":8,"output":24},"limit":{"context":100000,"output":4096}},"meta.llama3-1-8b-instruct-v1:0":{"id":"meta.llama3-1-8b-instruct-v1:0","name":"Llama 3.1 8B Instruct","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-12","release_date":"2024-07-23","last_updated":"2024-07-23","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.22,"output":0.22},"limit":{"context":128000,"output":4096}},"anthropic.claude-3-opus-20240229-v1:0":{"id":"anthropic.claude-3-opus-20240229-v1:0","name":"Claude Opus 3","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-08","release_date":"2024-02-29","last_updated":"2024-02-29","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":15,"output":75},"limit":{"context":200000,"output":4096}},"ai21.jamba-1-5-mini-v1:0":{"id":"ai21.jamba-1-5-mini-v1:0","name":"Jamba 1.5 Mini","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-08","release_date":"2024-08-15","last_updated":"2024-08-15","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.2,"output":0.4},"limit":{"context":256000,"output":4096}},"anthropic.claude-3-5-sonnet-20240620-v1:0":{"id":"anthropic.claude-3-5-sonnet-20240620-v1:0","name":"Claude Sonnet 3.5","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2024-06-20","last_updated":"2024-06-20","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":3,"output":15,"cache_read":0.3,"cache_write":3.75},"limit":{"context":200000,"output":8192}},"meta.llama3-3-70b-instruct-v1:0":{"id":"meta.llama3-3-70b-instruct-v1:0","name":"Llama 3.3 70B Instruct","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-12","release_date":"2024-12-06","last_updated":"2024-12-06","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.72,"output":0.72},"limit":{"context":128000,"output":4096}},"cohere.command-r-plus-v1:0":{"id":"cohere.command-r-plus-v1:0","name":"Command R+","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2024-04-04","last_updated":"2024-04-04","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":3,"output":15},"limit":{"context":128000,"output":4096}},"meta.llama3-70b-instruct-v1:0":{"id":"meta.llama3-70b-instruct-v1:0","name":"Llama 3 70B Instruct","attachment":false,"reasoning":false,"temperature":true,"tool_call":false,"knowledge":"2023-12","release_date":"2024-07-23","last_updated":"2024-07-23","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":2.65,"output":3.5},"limit":{"context":8192,"output":2048}},"amazon.nova-micro-v1:0":{"id":"amazon.nova-micro-v1:0","name":"Nova Micro","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-10","release_date":"2024-12-03","last_updated":"2024-12-03","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":0.035,"output":0.14,"cache_read":0.00875},"limit":{"context":128000,"output":8192}},"meta.llama3-8b-instruct-v1:0":{"id":"meta.llama3-8b-instruct-v1:0","name":"Llama 3 8B Instruct","attachment":false,"reasoning":false,"temperature":true,"tool_call":false,"knowledge":"2023-03","release_date":"2024-07-23","last_updated":"2024-07-23","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.3,"output":0.6},"limit":{"context":8192,"output":2048}},"ai21.jamba-1-5-large-v1:0":{"id":"ai21.jamba-1-5-large-v1:0","name":"Jamba 1.5 Large","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-08","release_date":"2024-08-15","last_updated":"2024-08-15","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":2,"output":8},"limit":{"context":256000,"output":4096}},"cohere.command-text-v14":{"id":"cohere.command-text-v14","name":"Command","attachment":false,"reasoning":false,"temperature":true,"tool_call":false,"knowledge":"2023-08","release_date":"2023-11-01","last_updated":"2023-11-01","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":1.5,"output":2},"limit":{"context":4096,"output":4096}},"deepseek.r1-v1:0":{"id":"deepseek.r1-v1:0","name":"DeepSeek-R1","attachment":false,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2024-07","release_date":"2025-01-20","last_updated":"2025-05-29","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":1.35,"output":5.4},"limit":{"context":128000,"output":32768}},"anthropic.claude-3-5-sonnet-20241022-v2:0":{"id":"anthropic.claude-3-5-sonnet-20241022-v2:0","name":"Claude Sonnet 3.5 v2","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2024-10-22","last_updated":"2024-10-22","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":3,"output":15,"cache_read":0.3,"cache_write":3.75},"limit":{"context":200000,"output":8192}},"amazon.nova-pro-v1:0":{"id":"amazon.nova-pro-v1:0","name":"Nova Pro","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-10","release_date":"2024-12-03","last_updated":"2024-12-03","modalities":{"input":["text","image","video"],"output":["text"]},"open_weights":false,"cost":{"input":0.8,"output":3.2,"cache_read":0.2},"limit":{"context":300000,"output":8192}},"meta.llama3-1-70b-instruct-v1:0":{"id":"meta.llama3-1-70b-instruct-v1:0","name":"Llama 3.1 70B Instruct","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-12","release_date":"2024-07-23","last_updated":"2024-07-23","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.72,"output":0.72},"limit":{"context":128000,"output":4096}},"meta.llama4-scout-17b-instruct-v1:0":{"id":"meta.llama4-scout-17b-instruct-v1:0","name":"Llama 4 Scout 17B Instruct","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-08","release_date":"2025-04-05","last_updated":"2025-04-05","modalities":{"input":["text","image"],"output":["text"]},"open_weights":true,"cost":{"input":0.17,"output":0.66},"limit":{"context":3500000,"output":16384}},"anthropic.claude-opus-4-20250514-v1:0":{"id":"anthropic.claude-opus-4-20250514-v1:0","name":"Claude Opus 4","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2025-05-22","last_updated":"2025-05-22","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":15,"output":75,"cache_read":1.5,"cache_write":18.75},"limit":{"context":200000,"output":32000}},"cohere.command-r-v1:0":{"id":"cohere.command-r-v1:0","name":"Command R","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2024-03-11","last_updated":"2024-03-11","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.5,"output":1.5},"limit":{"context":128000,"output":4096}},"anthropic.claude-3-sonnet-20240229-v1:0":{"id":"anthropic.claude-3-sonnet-20240229-v1:0","name":"Claude Sonnet 3","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-08","release_date":"2024-03-04","last_updated":"2024-03-04","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":3,"output":15},"limit":{"context":200000,"output":4096}},"anthropic.claude-3-haiku-20240307-v1:0":{"id":"anthropic.claude-3-haiku-20240307-v1:0","name":"Claude Haiku 3","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-02","release_date":"2024-03-13","last_updated":"2024-03-13","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":0.25,"output":1.25},"limit":{"context":200000,"output":4096}},"meta.llama3-2-90b-instruct-v1:0":{"id":"meta.llama3-2-90b-instruct-v1:0","name":"Llama 3.2 90B Instruct","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-12","release_date":"2024-09-25","last_updated":"2024-09-25","modalities":{"input":["text","image"],"output":["text"]},"open_weights":true,"cost":{"input":0.72,"output":0.72},"limit":{"context":128000,"output":4096}},"meta.llama3-2-11b-instruct-v1:0":{"id":"meta.llama3-2-11b-instruct-v1:0","name":"Llama 3.2 11B Instruct","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-12","release_date":"2024-09-25","last_updated":"2024-09-25","modalities":{"input":["text","image"],"output":["text"]},"open_weights":true,"cost":{"input":0.16,"output":0.16},"limit":{"context":128000,"output":4096}}}},"groq":{"id":"groq","env":["GROQ_API_KEY"],"npm":"@ai-sdk/groq","name":"Groq","doc":"https://console.groq.com/docs/models","models":{"llama-3.3-70b-versatile":{"id":"llama-3.3-70b-versatile","name":"Llama 3.3 70B Versatile","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-12","release_date":"2024-12-06","last_updated":"2024-12-06","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.59,"output":0.79},"limit":{"context":131072,"output":32768}},"llama-3.1-8b-instant":{"id":"llama-3.1-8b-instant","name":"Llama 3.1 8B Instant","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-12","release_date":"2024-07-23","last_updated":"2024-07-23","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.05,"output":0.08},"limit":{"context":131072,"output":8192}},"llama-guard-3-8b":{"id":"llama-guard-3-8b","name":"Llama Guard 3 8B","attachment":false,"reasoning":false,"temperature":true,"tool_call":false,"release_date":"2024-07-23","last_updated":"2024-07-23","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.2,"output":0.2},"limit":{"context":8192,"output":8192}},"gemma2-9b-it":{"id":"gemma2-9b-it","name":"Gemma 2 9B","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-06","release_date":"2024-06-27","last_updated":"2024-06-27","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.2,"output":0.2},"limit":{"context":8192,"output":8192}},"llama3-8b-8192":{"id":"llama3-8b-8192","name":"Llama 3 8B","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-03","release_date":"2024-04-18","last_updated":"2024-04-18","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.05,"output":0.08},"limit":{"context":8192,"output":8192}},"llama3-70b-8192":{"id":"llama3-70b-8192","name":"Llama 3 70B","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-03","release_date":"2024-04-18","last_updated":"2024-04-18","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.59,"output":0.79},"limit":{"context":8192,"output":8192}},"deepseek-r1-distill-llama-70b":{"id":"deepseek-r1-distill-llama-70b","name":"DeepSeek R1 Distill Llama 70B","attachment":false,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2024-07","release_date":"2025-01-20","last_updated":"2025-01-20","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.75,"output":0.99},"limit":{"context":131072,"output":8192}},"qwen-qwq-32b":{"id":"qwen-qwq-32b","name":"Qwen QwQ 32B","attachment":false,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2024-09","release_date":"2024-11-27","last_updated":"2024-11-27","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.29,"output":0.39},"limit":{"context":131072,"output":16384}},"mistral-saba-24b":{"id":"mistral-saba-24b","name":"Mistral Saba 24B","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-08","release_date":"2025-02-06","last_updated":"2025-02-06","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":0.79,"output":0.79},"limit":{"context":32768,"output":32768}},"qwen/qwen3-32b":{"id":"qwen/qwen3-32b","name":"Qwen3 32B","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-11-08","release_date":"2024-12-23","last_updated":"2024-12-23","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0.29,"output":0.59},"limit":{"context":131072,"output":16384}},"meta-llama/llama-4-maverick-17b-128e-instruct":{"id":"meta-llama/llama-4-maverick-17b-128e-instruct","name":"Llama 4 Maverick 17B","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-08","release_date":"2025-04-05","last_updated":"2025-04-05","modalities":{"input":["text","image"],"output":["text"]},"open_weights":true,"cost":{"input":0.2,"output":0.6},"limit":{"context":131072,"output":8192}},"meta-llama/llama-4-scout-17b-16e-instruct":{"id":"meta-llama/llama-4-scout-17b-16e-instruct","name":"Llama 4 Scout 17B","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-08","release_date":"2025-04-05","last_updated":"2025-04-05","modalities":{"input":["text","image"],"output":["text"]},"open_weights":true,"cost":{"input":0.11,"output":0.34},"limit":{"context":131072,"output":8192}},"meta-llama/llama-guard-4-12b":{"id":"meta-llama/llama-guard-4-12b","name":"Llama Guard 4 12B","attachment":false,"reasoning":false,"temperature":true,"tool_call":false,"release_date":"2025-04-05","last_updated":"2025-04-05","modalities":{"input":["text","image"],"output":["text"]},"open_weights":true,"cost":{"input":0.2,"output":0.2},"limit":{"context":131072,"output":128}}}},"morph":{"id":"morph","env":["MORPH_API_KEY"],"npm":"@ai-sdk/openai-compatible","api":"https://api.morphllm.com/v1","name":"Morph","doc":"https://docs.morphllm.com/api-reference/introduction","models":{"morph-v3-large":{"id":"morph-v3-large","name":"Morph v3 Large","attachment":false,"reasoning":false,"temperature":false,"tool_call":false,"release_date":"2024-08-15","last_updated":"2024-08-15","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":0.9,"output":1.9},"limit":{"context":32000,"output":32000}},"morph-v3-fast":{"id":"morph-v3-fast","name":"Morph v3 Fast","attachment":false,"reasoning":false,"temperature":false,"tool_call":false,"release_date":"2024-08-15","last_updated":"2024-08-15","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":0.8,"output":1.2},"limit":{"context":16000,"output":16000}},"auto":{"id":"auto","name":"Auto","attachment":false,"reasoning":false,"temperature":false,"tool_call":false,"release_date":"2024-06-01","last_updated":"2024-06-01","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":0.85,"output":1.55},"limit":{"context":32000,"output":32000}}}},"llama":{"id":"llama","env":["LLAMA_API_KEY"],"npm":"@ai-sdk/openai-compatible","api":"https://api.llama.com/compat/v1/","name":"Llama","doc":"https://llama.developer.meta.com/docs/models","models":{"cerebras-llama-4-scout-17b-16e-instruct":{"id":"cerebras-llama-4-scout-17b-16e-instruct","name":"Cerebras-Llama-4-Scout-17B-16E-Instruct","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-04-05","last_updated":"2025-04-05","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0,"output":0},"limit":{"context":128000,"output":4096}},"llama-4-scout-17b-16e-instruct-fp8":{"id":"llama-4-scout-17b-16e-instruct-fp8","name":"Llama-4-Scout-17B-16E-Instruct-FP8","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-08","release_date":"2025-04-05","last_updated":"2025-04-05","modalities":{"input":["text","image"],"output":["text"]},"open_weights":true,"cost":{"input":0,"output":0},"limit":{"context":128000,"output":4096}},"llama-3.3-70b-instruct":{"id":"llama-3.3-70b-instruct","name":"Llama-3.3-70B-Instruct","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-12","release_date":"2024-12-06","last_updated":"2024-12-06","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0,"output":0},"limit":{"context":128000,"output":4096}},"groq-llama-4-maverick-17b-128e-instruct":{"id":"groq-llama-4-maverick-17b-128e-instruct","name":"Groq-Llama-4-Maverick-17B-128E-Instruct","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-04-05","last_updated":"2025-04-05","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0,"output":0},"limit":{"context":128000,"output":4096}},"cerebras-llama-4-maverick-17b-128e-instruct":{"id":"cerebras-llama-4-maverick-17b-128e-instruct","name":"Cerebras-Llama-4-Maverick-17B-128E-Instruct","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-04-05","last_updated":"2025-04-05","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0,"output":0},"limit":{"context":128000,"output":4096}},"llama-3.3-8b-instruct":{"id":"llama-3.3-8b-instruct","name":"Llama-3.3-8B-Instruct","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-12","release_date":"2024-12-06","last_updated":"2024-12-06","modalities":{"input":["text"],"output":["text"]},"open_weights":true,"cost":{"input":0,"output":0},"limit":{"context":128000,"output":4096}},"llama-4-maverick-17b-128e-instruct-fp8":{"id":"llama-4-maverick-17b-128e-instruct-fp8","name":"Llama-4-Maverick-17B-128E-Instruct-FP8","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-08","release_date":"2025-04-05","last_updated":"2025-04-05","modalities":{"input":["text","image"],"output":["text"]},"open_weights":true,"cost":{"input":0,"output":0},"limit":{"context":128000,"output":4096}}}},"google-vertex":{"id":"google-vertex","env":["GOOGLE_VERTEX_PROJECT","GOOGLE_VERTEX_LOCATION","GOOGLE_APPLICATION_CREDENTIALS"],"npm":"@ai-sdk/google-vertex","name":"Vertex","doc":"https://docs.aws.amazon.com/bedrock/latest/userguide/models-supported.html","models":{"gemini-2.5-pro-preview-05-06":{"id":"gemini-2.5-pro-preview-05-06","name":"Gemini 2.5 Pro Preview 05-06","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-05-06","last_updated":"2025-05-06","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":1.25,"output":10,"cache_read":0.31},"limit":{"context":1048576,"output":65536}},"gemini-2.5-pro-preview-06-05":{"id":"gemini-2.5-pro-preview-06-05","name":"Gemini 2.5 Pro Preview 06-05","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-06-05","last_updated":"2025-06-05","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":1.25,"output":10,"cache_read":0.31},"limit":{"context":1048576,"output":65536}},"gemini-2.5-pro":{"id":"gemini-2.5-pro","name":"Gemini 2.5 Pro","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-03-20","last_updated":"2025-06-05","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":1.25,"output":10,"cache_read":0.31},"limit":{"context":1048576,"output":65536}},"gemini-2.5-flash-lite-preview-06-17":{"id":"gemini-2.5-flash-lite-preview-06-17","name":"Gemini 2.5 Flash Lite Preview 06-17","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-06-17","last_updated":"2025-06-17","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":0.1,"output":0.4,"cache_read":0.025},"limit":{"context":65536,"output":65536}},"gemini-2.0-flash-lite":{"id":"gemini-2.0-flash-lite","name":"Gemini 2.0 Flash Lite","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-06","release_date":"2024-12-11","last_updated":"2024-12-11","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":0.075,"output":0.3},"limit":{"context":1048576,"output":8192}},"gemini-2.5-flash-preview-04-17":{"id":"gemini-2.5-flash-preview-04-17","name":"Gemini 2.5 Flash Preview 04-17","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-04-17","last_updated":"2025-04-17","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":0.15,"output":0.6,"cache_read":0.0375},"limit":{"context":1048576,"output":65536}},"gemini-2.5-flash-preview-05-20":{"id":"gemini-2.5-flash-preview-05-20","name":"Gemini 2.5 Flash Preview 05-20","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-05-20","last_updated":"2025-05-20","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":0.15,"output":0.6,"cache_read":0.0375},"limit":{"context":1048576,"output":65536}},"gemini-2.0-flash":{"id":"gemini-2.0-flash","name":"Gemini 2.0 Flash","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-06","release_date":"2024-12-11","last_updated":"2024-12-11","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":0.1,"output":0.4,"cache_read":0.025},"limit":{"context":1048576,"output":8192}}}},"azure":{"id":"azure","env":["AZURE_RESOURCE_NAME","AZURE_API_KEY"],"npm":"@ai-sdk/azure","name":"Azure","doc":"https://learn.microsoft.com/en-us/azure/ai-services/openai/concepts/models","models":{"gpt-4.1-mini":{"id":"gpt-4.1-mini","name":"GPT-4.1 mini","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-05","release_date":"2025-04-14","last_updated":"2025-04-14","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":0.4,"output":1.6,"cache_read":0.1},"limit":{"context":1047576,"output":32768}},"o1-preview":{"id":"o1-preview","name":"o1-preview","attachment":false,"reasoning":true,"temperature":false,"tool_call":true,"knowledge":"2023-09","release_date":"2024-09-12","last_updated":"2024-09-12","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":16.5,"output":66,"cache_read":8.25},"limit":{"context":128000,"output":32768}},"o1-mini":{"id":"o1-mini","name":"o1-mini","attachment":false,"reasoning":true,"temperature":false,"tool_call":true,"knowledge":"2023-09","release_date":"2024-09-12","last_updated":"2024-09-12","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":1.1,"output":4.4,"cache_read":0.55},"limit":{"context":128000,"output":65536}},"gpt-3.5-turbo-1106":{"id":"gpt-3.5-turbo-1106","name":"GPT-3.5 Turbo 1106","attachment":false,"reasoning":false,"temperature":true,"tool_call":false,"knowledge":"2021-08","release_date":"2023-11-06","last_updated":"2023-11-06","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":1,"output":2},"limit":{"context":16384,"output":16384}},"gpt-3.5-turbo-instruct":{"id":"gpt-3.5-turbo-instruct","name":"GPT-3.5 Turbo Instruct","attachment":false,"reasoning":false,"temperature":true,"tool_call":false,"knowledge":"2021-08","release_date":"2023-09-21","last_updated":"2023-09-21","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":1.5,"output":2},"limit":{"context":4096,"output":4096}},"o3-mini":{"id":"o3-mini","name":"o3-mini","attachment":false,"reasoning":true,"temperature":false,"tool_call":true,"knowledge":"2024-05","release_date":"2024-12-20","last_updated":"2025-01-29","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":1.1,"output":4.4,"cache_read":0.55},"limit":{"context":200000,"output":100000}},"gpt-4.1":{"id":"gpt-4.1","name":"GPT-4.1","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-05","release_date":"2025-04-14","last_updated":"2025-04-14","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":2,"output":8,"cache_read":0.5},"limit":{"context":1047576,"output":32768}},"o3":{"id":"o3","name":"o3","attachment":true,"reasoning":true,"temperature":false,"tool_call":true,"knowledge":"2024-05","release_date":"2025-04-16","last_updated":"2025-04-16","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":2,"output":8,"cache_read":0.5},"limit":{"context":200000,"output":100000}},"gpt-3.5-turbo-0613":{"id":"gpt-3.5-turbo-0613","name":"GPT-3.5 Turbo 0613","attachment":false,"reasoning":false,"temperature":true,"tool_call":false,"knowledge":"2021-08","release_date":"2023-06-13","last_updated":"2023-06-13","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":3,"output":4},"limit":{"context":16384,"output":16384}},"gpt-4o-mini":{"id":"gpt-4o-mini","name":"GPT-4o mini","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-09","release_date":"2024-07-18","last_updated":"2024-07-18","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":0.15,"output":0.6,"cache_read":0.08},"limit":{"context":128000,"output":16384}},"gpt-4-turbo-vision":{"id":"gpt-4-turbo-vision","name":"GPT-4 Turbo Vision","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-11","release_date":"2023-11-06","last_updated":"2024-04-09","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":10,"output":30},"limit":{"context":128000,"output":4096}},"gpt-4.1-nano":{"id":"gpt-4.1-nano","name":"GPT-4.1 nano","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-05","release_date":"2025-04-14","last_updated":"2025-04-14","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":0.1,"output":0.4,"cache_read":0.03},"limit":{"context":1047576,"output":32768}},"o4-mini":{"id":"o4-mini","name":"o4-mini","attachment":true,"reasoning":true,"temperature":false,"tool_call":true,"knowledge":"2024-05","release_date":"2025-04-16","last_updated":"2025-04-16","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":1.1,"output":4.4,"cache_read":0.28},"limit":{"context":200000,"output":100000}},"gpt-3.5-turbo-0125":{"id":"gpt-3.5-turbo-0125","name":"GPT-3.5 Turbo 0125","attachment":false,"reasoning":false,"temperature":true,"tool_call":false,"knowledge":"2021-08","release_date":"2024-01-25","last_updated":"2024-01-25","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":0.5,"output":1.5},"limit":{"context":16384,"output":16384}},"o1":{"id":"o1","name":"o1","attachment":false,"reasoning":true,"temperature":false,"tool_call":true,"knowledge":"2023-09","release_date":"2024-12-05","last_updated":"2024-12-05","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":15,"output":60,"cache_read":7.5},"limit":{"context":200000,"output":100000}},"gpt-3.5-turbo-0301":{"id":"gpt-3.5-turbo-0301","name":"GPT-3.5 Turbo 0301","attachment":false,"reasoning":false,"temperature":true,"tool_call":false,"knowledge":"2021-08","release_date":"2023-03-01","last_updated":"2023-03-01","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":1.5,"output":2},"limit":{"context":4096,"output":4096}},"gpt-4":{"id":"gpt-4","name":"GPT-4","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-11","release_date":"2023-03-14","last_updated":"2023-03-14","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":60,"output":120},"limit":{"context":8192,"output":8192}},"gpt-4-turbo":{"id":"gpt-4-turbo","name":"GPT-4 Turbo","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-11","release_date":"2023-11-06","last_updated":"2024-04-09","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":10,"output":30},"limit":{"context":128000,"output":4096}},"gpt-4o":{"id":"gpt-4o","name":"GPT-4o","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-09","release_date":"2024-05-13","last_updated":"2024-05-13","modalities":{"input":["text","image"],"output":["text"]},"open_weights":false,"cost":{"input":2.5,"output":10,"cache_read":1.25},"limit":{"context":128000,"output":16384}},"gpt-4-32k":{"id":"gpt-4-32k","name":"GPT-4 32K","attachment":false,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2023-11","release_date":"2023-03-14","last_updated":"2023-03-14","modalities":{"input":["text"],"output":["text"]},"open_weights":false,"cost":{"input":60,"output":120},"limit":{"context":32768,"output":32768}}}},"google":{"id":"google","env":["GOOGLE_GENERATIVE_AI_API_KEY"],"npm":"@ai-sdk/google","name":"Google","doc":"https://ai.google.dev/gemini-api/docs/pricing","models":{"gemini-2.5-pro-preview-05-06":{"id":"gemini-2.5-pro-preview-05-06","name":"Gemini 2.5 Pro Preview 05-06","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-05-06","last_updated":"2025-05-06","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":1.25,"output":10,"cache_read":0.31},"limit":{"context":1048576,"output":65536}},"gemini-2.5-pro-preview-06-05":{"id":"gemini-2.5-pro-preview-06-05","name":"Gemini 2.5 Pro Preview 06-05","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-06-05","last_updated":"2025-06-05","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":1.25,"output":10,"cache_read":0.31},"limit":{"context":1048576,"output":65536}},"gemini-2.5-pro":{"id":"gemini-2.5-pro","name":"Gemini 2.5 Pro","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-03-20","last_updated":"2025-06-05","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":1.25,"output":10,"cache_read":0.31},"limit":{"context":1048576,"output":65536}},"gemini-2.5-flash-lite-preview-06-17":{"id":"gemini-2.5-flash-lite-preview-06-17","name":"Gemini 2.5 Flash Lite Preview 06-17","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-06-17","last_updated":"2025-06-17","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":0.1,"output":0.4,"cache_read":0.025},"limit":{"context":65536,"output":65536}},"gemini-2.0-flash-lite":{"id":"gemini-2.0-flash-lite","name":"Gemini 2.0 Flash Lite","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-06","release_date":"2024-12-11","last_updated":"2024-12-11","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":0.075,"output":0.3},"limit":{"context":1048576,"output":8192}},"gemini-1.5-pro":{"id":"gemini-1.5-pro","name":"Gemini 1.5 Pro","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2024-02-15","last_updated":"2024-02-15","modalities":{"input":["text","image","audio","video"],"output":["text"]},"open_weights":false,"cost":{"input":1.25,"output":5,"cache_read":0.3125},"limit":{"context":2000000,"output":8192}},"gemini-2.5-flash-preview-04-17":{"id":"gemini-2.5-flash-preview-04-17","name":"Gemini 2.5 Flash Preview 04-17","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-04-17","last_updated":"2025-04-17","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":0.15,"output":0.6,"cache_read":0.0375},"limit":{"context":1048576,"output":65536}},"gemini-1.5-flash-8b":{"id":"gemini-1.5-flash-8b","name":"Gemini 1.5 Flash-8B","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2024-10-03","last_updated":"2024-10-03","modalities":{"input":["text","image","audio","video"],"output":["text"]},"open_weights":false,"cost":{"input":0.0375,"output":0.15,"cache_read":0.01},"limit":{"context":1000000,"output":8192}},"gemini-2.5-flash-preview-05-20":{"id":"gemini-2.5-flash-preview-05-20","name":"Gemini 2.5 Flash Preview 05-20","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-05-20","last_updated":"2025-05-20","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":0.15,"output":0.6,"cache_read":0.0375},"limit":{"context":1048576,"output":65536}},"gemini-2.0-flash":{"id":"gemini-2.0-flash","name":"Gemini 2.0 Flash","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-06","release_date":"2024-12-11","last_updated":"2024-12-11","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":0.1,"output":0.4,"cache_read":0.025},"limit":{"context":1048576,"output":8192}},"gemini-2.5-flash":{"id":"gemini-2.5-flash","name":"Gemini 2.5 Flash","attachment":true,"reasoning":true,"temperature":true,"tool_call":true,"knowledge":"2025-01","release_date":"2025-03-20","last_updated":"2025-06-05","modalities":{"input":["text","image","audio","video","pdf"],"output":["text"]},"open_weights":false,"cost":{"input":0.3,"output":2.5,"cache_read":0.075},"limit":{"context":1048576,"output":65536}},"gemini-1.5-flash":{"id":"gemini-1.5-flash","name":"Gemini 1.5 Flash","attachment":true,"reasoning":false,"temperature":true,"tool_call":true,"knowledge":"2024-04","release_date":"2024-05-14","last_updated":"2024-05-14","modalities":{"input":["text","image","audio","video"],"output":["text"]},"open_weights":false,"cost":{"input":0.075,"output":0.3,"cache_read":0.01875},"limit":{"context":1000000,"output":8192}}}}}';return JSON.parse(w)}J$.get=J;async function Y(){let X=Bun.file(F);D.info("refreshing");let Q=await fetch("https://models.dev/api.json").catch(()=>{});if(Q&&Q.ok)await Bun.write(X,Q)}})(dF||={})});var G5;var gX=k(()=>{G5={done:!1,hasNext:!1}});function I7(D,...F){let $=D,B=F.map((Y)=>("lazy"in Y)?db(Y):void 0),J=0;for(;J<F.length;){if(B[J]===void 0||!lb($)){let w=F[J];$=w($),J+=1;continue}let Y=[];for(let w=J;w<F.length;w++){let f=B[w];if(f===void 0||(Y.push(f),f.isSingle))break}let X=[];for(let w of $)if(pH(w,X,Y))break;let{isSingle:Q}=Y.at(-1);$=Q?X[0]:X,J+=Y.length}return $}function pH(D,F,$){if($.length===0)return F.push(D),!1;let B=D,J=G5,Y=!1;for(let[X,Q]of $.entries()){let{index:w,items:f}=Q;if(f.push(B),J=Q(B,w,f),Q.index+=1,J.hasNext){if(J.hasMany??!1){for(let G of J.next)if(pH(G,F,$.slice(X+1)))return!0;return Y}B=J.next}if(!J.hasNext)break;J.done&&(Y=!0)}return J.hasNext&&F.push(B),Y}function db(D){let{lazy:F,lazyArgs:$}=D,B=F(...$);return Object.assign(B,{isSingle:F.single??!1,index:0,items:[]})}function lb(D){return typeof D=="string"||typeof D=="object"&&D!==null&&Symbol.iterator in D}var mX=k(()=>{gX()});function iH(D,F){let $=F.length-D.length;if($===1){let[B,...J]=F;return I7(B,{lazy:D,lazyArgs:J})}if($===0){let B={lazy:D,lazyArgs:F};return Object.assign((J)=>I7(J,B),B)}throw new Error("Wrong number of arguments")}var dH=k(()=>{mX()});function H5(...D){return iH(nb,D)}function nb(){let D=new Set;return(F)=>D.has(F)?G5:(D.add(F),{done:!1,hasNext:!0,next:F})}var lH=k(()=>{dH();gX()});function nH(D,F,$){let B=(J)=>D(J,...F);return $===void 0?B:Object.assign(B,{lazy:$,lazyArgs:F})}var oH=()=>{};function y6(D,F,$){let B=D.length-F.length;if(B===0)return D(...F);if(B===1)return nH(D,F,$);throw new Error("Wrong number of arguments")}var X$=k(()=>{oH()});function cX(...D){return y6(Object.values,D)}var rH=k(()=>{X$()});function aH(D,F){let[$,...B]=F;if(!ob($)){let Y=pX(...B);return D($,Y)}let J=pX($,...B);return(Y)=>D(Y,J)}function pX(D,F,...$){let B=typeof D=="function"?D:D[0],J=typeof D=="function"?"asc":D[1],{[J]:Y}=sH,X=F===void 0?void 0:pX(F,...$);return(Q,w)=>{let f=B(Q),G=B(w);return Y(f,G)?1:Y(G,f)?-1:X?.(Q,w)??0}}function ob(D){if(tH(D))return!0;if(typeof D!="object"||!Array.isArray(D))return!1;let[F,$,...B]=D;return tH(F)&&typeof $=="string"&&$ in sH&&B.length===0}var sH,tH=(D)=>typeof D=="function"&&D.length===1;var eH=k(()=>{sH={asc:(D,F)=>D>F,desc:(D,F)=>D<F}});function Q$(...D){return aH(rb,D)}var rb=(D,F)=>[...D].sort(F);var DE=k(()=>{eH()});function iX(D){if(typeof D!="object"||D===null)return!1;let F=Object.getPrototypeOf(D);return F===null||F===Object.prototype}var FE=()=>{};function T7(...D){return y6($E,D)}function $E(D,F){let $={...D,...F};for(let B in F){if(!(B in D))continue;let{[B]:J}=D;if(!iX(J))continue;let{[B]:Y}=F;iX(Y)&&($[B]=$E(J,Y))}return $}var BE=k(()=>{FE();X$()});function E5(...D){return y6(tb,D)}function tb(D,F){let $={};for(let[B,J]of Object.entries(D)){let Y=F(J,B,D);$[B]=Y}return $}var JE=k(()=>{X$()});function dX(...D){return y6(sb,D,ab)}var sb=(D,F)=>D.map(F),ab=(D)=>(F,$,B)=>({done:!1,hasNext:!0,next:D(F,$,B)});var YE=k(()=>{X$()});var P7=k(()=>{lH();rH();DE();BE();JE();YE();mX()});function x6(D){let F,$=!1;return()=>{if($)return F;return F=D(),F}}var BD;var QF=k(()=>{C0();BD=class BD extends Error{static create(D,F){let $=W.object({name:W.literal(D),data:F}).openapi({ref:D}),B=class extends BD{data;static Schema=$;name=D;constructor(J,Y){super(D,Y);this.data=J;this.name=D}static isInstance(J){return"name"in J&&J.name===D}schema(){return $}toObject(){return{name:D,data:this.data}}};return Object.defineProperty(B,"name",{value:D}),B}static Unknown=BD.create("UnknownError",W.object({message:W.string()}))}});import K5 from"path";import eb from"fs/promises";var HD;var lF=k(async()=>{await xD();C0();await MD();W5();await Y$();P7();await d1();QF();((cD)=>{let D=Z0.create({service:"config"});cD.state=w0.state("config",async(K)=>{let E=await cD.global();for(let O of["dgmo.jsonc","dgmo.json"]){let q=await z8.findUp(O,K.path.cwd,K.path.root);for(let U of q.toReversed())E=T7(E,await w(U))}return D.info("loaded",E),E}),cD.McpLocal=W.object({type:W.literal("local").describe("Type of MCP server connection"),command:W.string().array().describe("Command and arguments to run the MCP server"),environment:W.record(W.string(),W.string()).optional().describe("Environment variables to set when running the MCP server"),enabled:W.boolean().optional().describe("Enable or disable the MCP server on startup")}).strict().openapi({ref:"McpLocalConfig"}),cD.McpRemote=W.object({type:W.literal("remote").describe("Type of MCP server connection"),url:W.string().describe("URL of the remote MCP server"),enabled:W.boolean().optional().describe("Enable or disable the MCP server on startup")}).strict().openapi({ref:"McpRemoteConfig"}),cD.Mcp=W.discriminatedUnion("type",[cD.McpLocal,cD.McpRemote]),cD.Keybinds=W.object({leader:W.string().optional().describe("Leader key for keybind combinations"),help:W.string().optional().describe("Show help dialog"),editor_open:W.string().optional().describe("Open external editor"),session_new:W.string().optional().describe("Create a new session"),session_list:W.string().optional().describe("List all sessions"),session_share:W.string().optional().describe("Share current session"),session_interrupt:W.string().optional().describe("Interrupt current session"),session_compact:W.string().optional().describe("Toggle compact mode for session"),tool_details:W.string().optional().describe("Show tool details"),model_list:W.string().optional().describe("List available models"),theme_list:W.string().optional().describe("List available themes"),project_init:W.string().optional().describe("Initialize project configuration"),input_clear:W.string().optional().describe("Clear input field"),input_paste:W.string().optional().describe("Paste from clipboard"),input_submit:W.string().optional().describe("Submit input"),input_newline:W.string().optional().describe("Insert newline in input"),history_previous:W.string().optional().describe("Navigate to previous history item"),history_next:W.string().optional().describe("Navigate to next history item"),messages_page_up:W.string().optional().describe("Scroll messages up by one page"),messages_page_down:W.string().optional().describe("Scroll messages down by one page"),messages_half_page_up:W.string().optional().describe("Scroll messages up by half page"),messages_half_page_down:W.string().optional().describe("Scroll messages down by half page"),messages_previous:W.string().optional().describe("Navigate to previous message"),messages_next:W.string().optional().describe("Navigate to next message"),messages_first:W.string().optional().describe("Navigate to first message"),messages_last:W.string().optional().describe("Navigate to last message"),app_exit:W.string().optional().describe("Exit the application")}).strict().openapi({ref:"KeybindsConfig"}),cD.Info=W.object({$schema:W.string().optional().describe("JSON schema reference for configuration validation"),theme:W.string().optional().describe("Theme name to use for the interface"),keybinds:cD.Keybinds.optional().describe("Custom keybind configurations"),autoshare:W.boolean().optional().describe("Share newly created sessions automatically"),autoupdate:W.boolean().optional().describe("Automatically update to the latest version"),disabled_providers:W.array(W.string()).optional().describe("Disable providers that are loaded automatically"),model:W.string().describe("Model to use in the format of provider/model, eg anthropic/claude-2").optional(),provider:W.record(dF.Provider.partial().extend({models:W.record(dF.Model.partial()),options:W.record(W.any()).optional()})).optional().describe("Custom provider configurations and model overrides"),mcp:W.record(W.string(),cD.Mcp).optional().describe("MCP (Model Context Protocol) server configurations"),experimental:W.object({hook:W.object({file_edited:W.record(W.string(),W.object({command:W.string().array(),environment:W.record(W.string(),W.string()).optional()}).array()).optional(),session_completed:W.object({command:W.string().array(),environment:W.record(W.string(),W.string()).optional()}).array().optional()}).optional()}).optional(),performance:W.object({enabled:W.boolean().optional().default(!1).describe("Enable performance tracking for tool execution"),saveReports:W.boolean().optional().default(!0).describe("Save performance reports to storage"),maxMetrics:W.number().optional().default(1000).describe("Maximum number of metrics to keep in memory")}).optional().describe("Performance tracking configuration"),agentMode:W.enum(["read-only","all-tools"]).optional().default("read-only").describe("Default mode for sub-agents (read-only or all-tools)"),dgm:W.object({enabled:W.boolean().optional().default(!1).describe("Enable DGM integration"),pythonPath:W.string().optional().default("python3").describe("Path to Python executable"),dgmPath:W.string().optional().describe("Path to DGM module (defaults to auto-discovery)"),evolutionSettings:W.object({autoApprove:W.boolean().optional().default(!1).describe("Automatically approve evolution proposals"),maxConcurrentEvolutions:W.number().optional().default(5).describe("Maximum number of concurrent evolutions"),performanceThreshold:W.number().optional().default(0.8).describe("Performance threshold for evolution acceptance (0-1)")}).optional().describe("Evolution-specific settings"),communication:W.object({timeout:W.number().optional().default(30000).describe("Timeout for DGM operations in milliseconds"),retryAttempts:W.number().optional().default(3).describe("Maximum retry attempts for failed operations"),healthCheckInterval:W.number().optional().default(60000).describe("Health check interval in milliseconds")}).optional().describe("Communication and networking settings"),timeout:W.number().optional().default(30000).describe("Timeout for DGM operations in milliseconds (deprecated - use communication.timeout)"),maxRetries:W.number().optional().default(3).describe("Maximum retry attempts for failed operations (deprecated - use communication.retryAttempts)"),healthCheckInterval:W.number().optional().default(60000).describe("Health check interval in milliseconds (deprecated - use communication.healthCheckInterval)")}).optional().describe("DGM (Dynamic Graph Memory) integration configuration")}).strict().openapi({ref:"Config"}),cD.global=x6(async()=>{let K=await w(K5.join(P0.Path.config,"config.json"));return await import(K5.join(P0.Path.config,"config"),{with:{type:"toml"}}).then(async(E)=>{let{provider:O,model:q,...U}=E.default;if(O&&q)K.model=`${O}/${q}`;K.$schema="https://dgmo.ai/config.json",K=T7(K,U),await Bun.write(K5.join(P0.Path.config,"config.json"),JSON.stringify(K,null,2)),await eb.unlink(K5.join(P0.Path.config,"config"))}).catch(()=>{}),K});async function w(K){let E=await Bun.file(K).json().catch((q)=>{if(q.code==="ENOENT")return{};throw new cD.JsonError({path:K},{cause:q})}),O=cD.Info.safeParse(E);if(O.success)return O.data;throw new cD.InvalidError({path:K,issues:O.error.issues})}cD.JsonError=BD.create("ConfigJsonError",W.object({path:W.string()})),cD.InvalidError=BD.create("ConfigInvalidError",W.object({path:W.string(),issues:W.custom().optional()}));function H(){return cD.state()}cD.get=H})(HD||={})});function k6(D){if(D==null)return"unknown error";if(typeof D==="string")return D;if(D instanceof Error)return D.message;return JSON.stringify(D)}var XE="vercel.ai.error",Dh,QE,Fh,N0,wE="AI_APICallError",fE,$h,WE,KF,GE="AI_EmptyResponseBodyError",HE,Bh,EE,lX,KE="AI_InvalidArgumentError",qE,Jh,VE,q5,AE="AI_InvalidPromptError",OE,Yh,jE,P2,Xh="AI_InvalidResponseDataError",Qh,wh,fh,UE="AI_JSONParseError",RE,Wh,CE,b7,ZE="AI_LoadAPIKeyError",NE,Gh,ME,J6,Hh="AI_LoadSettingError",Eh,Kh,qh,Vh="AI_NoContentGeneratedError",Ah,Oh,jh,_E="AI_NoSuchModelError",LE,Uh,zE,w$,Rh="AI_TooManyEmbeddingValuesForCallError",Ch,Zh,Nh,IE="AI_TypeValidationError",TE,Mh,PE,_h,I8,bE="AI_UnsupportedFunctionalityError",hE,Lh,SE,Y6;var bD=k(()=>{Dh=Symbol.for(XE),Fh=class D extends Error{constructor({name:F,message:$,cause:B}){super($);this[QE]=!0,this.name=F,this.cause=B}static isInstance(F){return D.hasMarker(F,XE)}static hasMarker(F,$){let B=Symbol.for($);return F!=null&&typeof F==="object"&&B in F&&typeof F[B]==="boolean"&&F[B]===!0}};QE=Dh;N0=Fh,fE=`vercel.ai.error.${wE}`,$h=Symbol.for(fE),KF=class extends N0{constructor({message:D,url:F,requestBodyValues:$,statusCode:B,responseHeaders:J,responseBody:Y,cause:X,isRetryable:Q=B!=null&&(B===408||B===409||B===429||B>=500),data:w}){super({name:wE,message:D,cause:X});this[WE]=!0,this.url=F,this.requestBodyValues=$,this.statusCode=B,this.responseHeaders=J,this.responseBody=Y,this.isRetryable=Q,this.data=w}static isInstance(D){return N0.hasMarker(D,fE)}};WE=$h;HE=`vercel.ai.error.${GE}`,Bh=Symbol.for(HE),lX=class extends N0{constructor({message:D="Empty response body"}={}){super({name:GE,message:D});this[EE]=!0}static isInstance(D){return N0.hasMarker(D,HE)}};EE=Bh;qE=`vercel.ai.error.${KE}`,Jh=Symbol.for(qE),q5=class extends N0{constructor({message:D,cause:F,argument:$}){super({name:KE,message:D,cause:F});this[VE]=!0,this.argument=$}static isInstance(D){return N0.hasMarker(D,qE)}};VE=Jh;OE=`vercel.ai.error.${AE}`,Yh=Symbol.for(OE),P2=class extends N0{constructor({prompt:D,message:F,cause:$}){super({name:AE,message:`Invalid prompt: ${F}`,cause:$});this[jE]=!0,this.prompt=D}static isInstance(D){return N0.hasMarker(D,OE)}};jE=Yh;Qh=`vercel.ai.error.${Xh}`,wh=Symbol.for(Qh);fh=wh;RE=`vercel.ai.error.${UE}`,Wh=Symbol.for(RE),b7=class extends N0{constructor({text:D,cause:F}){super({name:UE,message:`JSON parsing failed: Text: ${D}.
Error message: ${k6(F)}`,cause:F});this[CE]=!0,this.text=D}static isInstance(D){return N0.hasMarker(D,RE)}};CE=Wh;NE=`vercel.ai.error.${ZE}`,Gh=Symbol.for(NE),J6=class extends N0{constructor({message:D}){super({name:ZE,message:D});this[ME]=!0}static isInstance(D){return N0.hasMarker(D,NE)}};ME=Gh;Eh=`vercel.ai.error.${Hh}`,Kh=Symbol.for(Eh);qh=Kh;Ah=`vercel.ai.error.${Vh}`,Oh=Symbol.for(Ah);jh=Oh;LE=`vercel.ai.error.${_E}`,Uh=Symbol.for(LE),w$=class extends N0{constructor({errorName:D=_E,modelId:F,modelType:$,message:B=`No such ${$}: ${F}`}){super({name:D,message:B});this[zE]=!0,this.modelId=F,this.modelType=$}static isInstance(D){return N0.hasMarker(D,LE)}};zE=Uh;Ch=`vercel.ai.error.${Rh}`,Zh=Symbol.for(Ch);Nh=Zh;TE=`vercel.ai.error.${IE}`,Mh=Symbol.for(TE),_h=class D extends N0{constructor({value:F,cause:$}){super({name:IE,message:`Type validation failed: Value: ${JSON.stringify(F)}.
Error message: ${k6($)}`,cause:$});this[PE]=!0,this.value=F}static isInstance(F){return N0.hasMarker(F,TE)}static wrap({value:F,cause:$}){return D.isInstance($)&&$.value===F?$:new D({value:F,cause:$})}};PE=Mh;I8=_h,hE=`vercel.ai.error.${bE}`,Lh=Symbol.for(hE),Y6=class extends N0{constructor({functionality:D,message:F=`'${D}' functionality not supported.`}){super({name:bE,message:F});this[SE]=!0,this.functionality=D}static isInstance(D){return N0.hasMarker(D,hE)}};SE=Lh});var yE=(D,F=21)=>{return($=F)=>{let B="",J=$|0;while(J--)B+=D[Math.random()*D.length|0];return B}};var xE=()=>{};var mE=t((U10,h7)=>{var zh=typeof Buffer!=="undefined",kE=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,uE=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function vE(D,F,$){if($==null){if(F!==null&&typeof F==="object")$=F,F=void 0}if(zh&&Buffer.isBuffer(D))D=D.toString();if(D&&D.charCodeAt(0)===65279)D=D.slice(1);let B=JSON.parse(D,F);if(B===null||typeof B!=="object")return B;let J=$&&$.protoAction||"error",Y=$&&$.constructorAction||"error";if(J==="ignore"&&Y==="ignore")return B;if(J!=="ignore"&&Y!=="ignore"){if(kE.test(D)===!1&&uE.test(D)===!1)return B}else if(J!=="ignore"&&Y==="ignore"){if(kE.test(D)===!1)return B}else if(uE.test(D)===!1)return B;return gE(B,{protoAction:J,constructorAction:Y,safe:$&&$.safe})}function gE(D,{protoAction:F="error",constructorAction:$="error",safe:B}={}){let J=[D];while(J.length){let Y=J;J=[];for(let X of Y){if(F!=="ignore"&&Object.prototype.hasOwnProperty.call(X,"__proto__")){if(B===!0)return null;else if(F==="error")throw new SyntaxError("Object contains forbidden prototype property");delete X.__proto__}if($!=="ignore"&&Object.prototype.hasOwnProperty.call(X,"constructor")&&Object.prototype.hasOwnProperty.call(X.constructor,"prototype")){if(B===!0)return null;else if($==="error")throw new SyntaxError("Object contains forbidden prototype property");delete X.constructor}for(let Q in X){let w=X[Q];if(w&&typeof w==="object")J.push(w)}}}return D}function nX(D,F,$){let B=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return vE(D,F,$)}finally{Error.stackTraceLimit=B}}function Ih(D,F){let $=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return vE(D,F,{safe:!0})}catch(B){return null}finally{Error.stackTraceLimit=$}}h7.exports=nX;h7.exports.default=nX;h7.exports.parse=nX;h7.exports.safeParse=Ih;h7.exports.scan=gE});function cE(...D){return D.reduce((F,$)=>({...F,...$!=null?$:{}}),{})}function pE(D){return new ReadableStream({async pull(F){try{let{value:$,done:B}=await D.next();if(B)F.close();else F.enqueue($)}catch($){F.error($)}},cancel(){}})}async function iE(D){return D==null?Promise.resolve():new Promise((F)=>setTimeout(F,D))}function oX(){let D="",F=void 0,$=[],B=void 0,J=void 0;function Y(w,f){if(w===""){X(f);return}if(w.startsWith(":"))return;let G=w.indexOf(":");if(G===-1){Q(w,"");return}let H=w.slice(0,G),K=G+1,E=K<w.length&&w[K]===" "?w.slice(K+1):w.slice(K);Q(H,E)}function X(w){if($.length>0)w.enqueue({event:F,data:$.join(`
`),id:B,retry:J}),$=[],F=void 0,J=void 0}function Q(w,f){switch(w){case"event":F=f;break;case"data":$.push(f);break;case"id":B=f;break;case"retry":let G=parseInt(f,10);if(!isNaN(G))J=G;break}}return new TransformStream({transform(w,f){let{lines:G,incompleteLine:H}=Th(D,w);D=H;for(let K=0;K<G.length;K++)Y(G[K],f)},flush(w){Y(D,w),X(w)}})}function Th(D,F){let $=[],B=D;for(let J=0;J<F.length;){let Y=F[J++];if(Y===`
`)$.push(B),B="";else if(Y==="\r"){if($.push(B),B="",F[J]===`
`)J++}else B+=Y}return{lines:$,incompleteLine:B}}function V5(D){let F={};return D.headers.forEach(($,B)=>{F[B]=$}),F}function dE(D){if(D==null)return"unknown error";if(typeof D==="string")return D;if(D instanceof Error)return D.message;return JSON.stringify(D)}function Ph(D){return Object.fromEntries(Object.entries(D).filter(([F,$])=>$!=null))}function f$(D){return D instanceof Error&&(D.name==="AbortError"||D.name==="TimeoutError")}function lE({apiKey:D,environmentVariableName:F,apiKeyParameterName:$="apiKey",description:B}){if(typeof D==="string")return D;if(D!=null)throw new J6({message:`${B} API key must be a string.`});if(typeof process==="undefined")throw new J6({message:`${B} API key is missing. Pass it using the '${$}' parameter. Environment variables is not supported in this environment.`});if(D=process.env[F],D==null)throw new J6({message:`${B} API key is missing. Pass it using the '${$}' parameter or the ${F} environment variable.`});if(typeof D!=="string")throw new J6({message:`${B} API key must be a string. The value of the ${F} environment variable is not a string.`});return D}function bh(D){return{[W$]:!0,validate:D}}function hh(D){return typeof D==="object"&&D!==null&&W$ in D&&D[W$]===!0&&"validate"in D}function Sh(D){return hh(D)?D:yh(D)}function yh(D){return bh((F)=>{let $=D.safeParse(F);return $.success?{success:!0,value:$.data}:{success:!1,error:$.error}})}function xh({value:D,schema:F}){let $=X6({value:D,schema:F});if(!$.success)throw I8.wrap({value:D,cause:$.error});return $.value}function X6({value:D,schema:F}){let $=Sh(F);try{if($.validate==null)return{success:!0,value:D};let B=$.validate(D);if(B.success)return B;return{success:!1,error:I8.wrap({value:D,cause:B.error})}}catch(B){return{success:!1,error:I8.wrap({value:D,cause:B})}}}function kh({text:D,schema:F}){try{let $=tX.default.parse(D);if(F==null)return $;return xh({value:$,schema:F})}catch($){if(b7.isInstance($)||I8.isInstance($))throw $;throw new b7({text:D,cause:$})}}function b2({text:D,schema:F}){try{let $=tX.default.parse(D);if(F==null)return{success:!0,value:$,rawValue:$};let B=X6({value:$,schema:F});return B.success?{...B,rawValue:$}:B}catch($){return{success:!1,error:b7.isInstance($)?$:new b7({text:D,cause:$})}}}function nE({provider:D,providerOptions:F,schema:$}){if((F==null?void 0:F[D])==null)return;let B=X6({value:F[D],schema:$});if(!B.success)throw new q5({argument:"providerOptions",message:`invalid ${D} provider options`,cause:B.error});return B.value}async function oE(D){if(typeof D==="function")D=D();return Promise.resolve(D)}function S7(D){let F=D.replace(/-/g,"+").replace(/_/g,"/"),$=mh(F);return Uint8Array.from($,(B)=>B.codePointAt(0))}function T8(D){let F="";for(let $=0;$<D.length;$++)F+=String.fromCodePoint(D[$]);return gh(F)}function aE(D){return D==null?void 0:D.replace(/\/$/,"")}var tX,G2=({prefix:D,size:F=16,alphabet:$="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:B="-"}={})=>{let J=yE($,F);if(D==null)return J;if($.includes(B))throw new q5({argument:"separator",message:`The separator "${B}" must not be part of the alphabet "${$}".`});return(Y)=>`${D}${B}${J(Y)}`},rX,W$,uh=()=>globalThis.fetch,sX=async({url:D,headers:F,body:$,failedResponseHandler:B,successfulResponseHandler:J,abortSignal:Y,fetch:X})=>vh({url:D,headers:{"Content-Type":"application/json",...F},body:{content:JSON.stringify($),values:$},failedResponseHandler:B,successfulResponseHandler:J,abortSignal:Y,fetch:X}),vh=async({url:D,headers:F={},body:$,successfulResponseHandler:B,failedResponseHandler:J,abortSignal:Y,fetch:X=uh()})=>{try{let Q=await X(D,{method:"POST",headers:Ph(F),body:$.content,signal:Y}),w=V5(Q);if(!Q.ok){let f;try{f=await J({response:Q,url:D,requestBodyValues:$.values})}catch(G){if(f$(G)||KF.isInstance(G))throw G;throw new KF({message:"Failed to process error response",cause:G,statusCode:Q.status,url:D,responseHeaders:w,requestBodyValues:$.values})}throw f.value}try{return await B({response:Q,url:D,requestBodyValues:$.values})}catch(f){if(f instanceof Error){if(f$(f)||KF.isInstance(f))throw f}throw new KF({message:"Failed to process successful response",cause:f,statusCode:Q.status,url:D,responseHeaders:w,requestBodyValues:$.values})}}catch(Q){if(f$(Q))throw Q;if(Q instanceof TypeError&&Q.message==="fetch failed"){let w=Q.cause;if(w!=null)throw new KF({message:`Cannot connect to API: ${w.message}`,cause:w,url:D,requestBodyValues:$.values,isRetryable:!0})}throw Q}},rE=({errorSchema:D,errorToMessage:F,isRetryable:$})=>async({response:B,url:J,requestBodyValues:Y})=>{let X=await B.text(),Q=V5(B);if(X.trim()==="")return{responseHeaders:Q,value:new KF({message:B.statusText,url:J,requestBodyValues:Y,statusCode:B.status,responseHeaders:Q,responseBody:X,isRetryable:$==null?void 0:$(B)})};try{let w=kh({text:X,schema:D});return{responseHeaders:Q,value:new KF({message:F(w),url:J,requestBodyValues:Y,statusCode:B.status,responseHeaders:Q,responseBody:X,data:w,isRetryable:$==null?void 0:$(B,w)})}}catch(w){return{responseHeaders:Q,value:new KF({message:B.statusText,url:J,requestBodyValues:Y,statusCode:B.status,responseHeaders:Q,responseBody:X,isRetryable:$==null?void 0:$(B)})}}},tE=(D)=>async({response:F})=>{let $=V5(F);if(F.body==null)throw new lX({});return{responseHeaders:$,value:F.body.pipeThrough(new TextDecoderStream).pipeThrough(oX()).pipeThrough(new TransformStream({transform({data:B},J){if(B==="[DONE]")return;J.enqueue(b2({text:B,schema:D}))}}))}},sE=(D)=>async({response:F,url:$,requestBodyValues:B})=>{let J=await F.text(),Y=b2({text:J,schema:D}),X=V5(F);if(!Y.success)throw new KF({message:"Invalid JSON response",cause:Y.error,statusCode:F.status,responseHeaders:X,responseBody:J,url:$,requestBodyValues:B});return{responseHeaders:X,value:Y.value,rawValue:Y.rawValue}},gh,mh;var O1=k(()=>{bD();xE();bD();bD();tX=Y2(mE(),1);bD();bD();bD();bD();rX=G2();W$=Symbol.for("vercel.ai.validator");({btoa:gh,atob:mh}=globalThis)});var DK,eE,FK=(D)=>typeof D==="string"?{...eE,name:D}:{...eE,...D};var A5=k(()=>{DK=Symbol("Let zodToJsonSchema decide on which parser to use"),eE={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"}});var $K=(D)=>{let F=FK(D),$=F.name!==void 0?[...F.basePath,F.definitionPath,F.name]:F.basePath;return{...F,currentPath:$,propertyPath:void 0,seen:new Map(Object.entries(F.definitions).map(([B,J])=>[J._def,{def:J._def,path:[...F.basePath,F.definitionPath,B],jsonSchema:void 0}]))}};var aX=k(()=>{A5()});function eX(D,F,$,B){if(!B?.errorMessages)return;if($)D.errorMessage={...D.errorMessage,[F]:$}}function CD(D,F,$,B,J){D[F]=$,eX(D,F,B,J)}function BK(){return{}}function JK(D,F){let $={type:"array"};if(D.type?._def&&D.type?._def?.typeName!==J0.ZodAny)$.items=o0(D.type._def,{...F,currentPath:[...F.currentPath,"items"]});if(D.minLength)CD($,"minItems",D.minLength.value,D.minLength.message,F);if(D.maxLength)CD($,"maxItems",D.maxLength.value,D.maxLength.message,F);if(D.exactLength)CD($,"minItems",D.exactLength.value,D.exactLength.message,F),CD($,"maxItems",D.exactLength.value,D.exactLength.message,F);return $}var DQ=k(()=>{C0();N1()});function YK(D,F){let $={type:"integer",format:"int64"};if(!D.checks)return $;for(let B of D.checks)switch(B.kind){case"min":if(F.target==="jsonSchema7")if(B.inclusive)CD($,"minimum",B.value,B.message,F);else CD($,"exclusiveMinimum",B.value,B.message,F);else{if(!B.inclusive)$.exclusiveMinimum=!0;CD($,"minimum",B.value,B.message,F)}break;case"max":if(F.target==="jsonSchema7")if(B.inclusive)CD($,"maximum",B.value,B.message,F);else CD($,"exclusiveMaximum",B.value,B.message,F);else{if(!B.inclusive)$.exclusiveMaximum=!0;CD($,"maximum",B.value,B.message,F)}break;case"multipleOf":CD($,"multipleOf",B.value,B.message,F);break}return $}var FQ=()=>{};function XK(){return{type:"boolean"}}function O5(D,F){return o0(D.type._def,F)}var j5=k(()=>{N1()});var QK=(D,F)=>{return o0(D.innerType._def,F)};var $Q=k(()=>{N1()});function BQ(D,F,$){let B=$??F.dateStrategy;if(Array.isArray(B))return{anyOf:B.map((J,Y)=>BQ(D,F,J))};switch(B){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return ch(D,F)}}var ch=(D,F)=>{let $={type:"integer",format:"unix-time"};if(F.target==="openApi3")return $;for(let B of D.checks)switch(B.kind){case"min":CD($,"minimum",B.value,B.message,F);break;case"max":CD($,"maximum",B.value,B.message,F);break}return $};var JQ=()=>{};function wK(D,F){return{...o0(D.innerType._def,F),default:D.defaultValue()}}var YQ=k(()=>{N1()});function fK(D,F){return F.effectStrategy==="input"?o0(D.schema._def,F):{}}var XQ=k(()=>{N1()});function WK(D){return{type:"string",enum:Array.from(D.values)}}function GK(D,F){let $=[o0(D.left._def,{...F,currentPath:[...F.currentPath,"allOf","0"]}),o0(D.right._def,{...F,currentPath:[...F.currentPath,"allOf","1"]})].filter((Y)=>!!Y),B=F.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,J=[];return $.forEach((Y)=>{if(ph(Y)){if(J.push(...Y.allOf),Y.unevaluatedProperties===void 0)B=void 0}else{let X=Y;if("additionalProperties"in Y&&Y.additionalProperties===!1){let{additionalProperties:Q,...w}=Y;X=w}else B=void 0;J.push(X)}}),J.length?{allOf:J,...B}:void 0}var ph=(D)=>{if("type"in D&&D.type==="string")return!1;return"allOf"in D};var QQ=k(()=>{N1()});function HK(D,F){let $=typeof D.value;if($!=="bigint"&&$!=="number"&&$!=="boolean"&&$!=="string")return{type:Array.isArray(D.value)?"array":"object"};if(F.target==="openApi3")return{type:$==="bigint"?"integer":$,enum:[D.value]};return{type:$==="bigint"?"integer":$,const:D.value}}function U5(D,F){let $={type:"string"};if(D.checks)for(let B of D.checks)switch(B.kind){case"min":CD($,"minLength",typeof $.minLength==="number"?Math.max($.minLength,B.value):B.value,B.message,F);break;case"max":CD($,"maxLength",typeof $.maxLength==="number"?Math.min($.maxLength,B.value):B.value,B.message,F);break;case"email":switch(F.emailStrategy){case"format:email":E2($,"email",B.message,F);break;case"format:idn-email":E2($,"idn-email",B.message,F);break;case"pattern:zod":wF($,H2.email,B.message,F);break}break;case"url":E2($,"uri",B.message,F);break;case"uuid":E2($,"uuid",B.message,F);break;case"regex":wF($,B.regex,B.message,F);break;case"cuid":wF($,H2.cuid,B.message,F);break;case"cuid2":wF($,H2.cuid2,B.message,F);break;case"startsWith":wF($,RegExp(`^${fQ(B.value,F)}`),B.message,F);break;case"endsWith":wF($,RegExp(`${fQ(B.value,F)}$`),B.message,F);break;case"datetime":E2($,"date-time",B.message,F);break;case"date":E2($,"date",B.message,F);break;case"time":E2($,"time",B.message,F);break;case"duration":E2($,"duration",B.message,F);break;case"length":CD($,"minLength",typeof $.minLength==="number"?Math.max($.minLength,B.value):B.value,B.message,F),CD($,"maxLength",typeof $.maxLength==="number"?Math.min($.maxLength,B.value):B.value,B.message,F);break;case"includes":{wF($,RegExp(fQ(B.value,F)),B.message,F);break}case"ip":{if(B.version!=="v6")E2($,"ipv4",B.message,F);if(B.version!=="v4")E2($,"ipv6",B.message,F);break}case"base64url":wF($,H2.base64url,B.message,F);break;case"jwt":wF($,H2.jwt,B.message,F);break;case"cidr":{if(B.version!=="v6")wF($,H2.ipv4Cidr,B.message,F);if(B.version!=="v4")wF($,H2.ipv6Cidr,B.message,F);break}case"emoji":wF($,H2.emoji(),B.message,F);break;case"ulid":{wF($,H2.ulid,B.message,F);break}case"base64":{switch(F.base64Strategy){case"format:binary":{E2($,"binary",B.message,F);break}case"contentEncoding:base64":{CD($,"contentEncoding","base64",B.message,F);break}case"pattern:zod":{wF($,H2.base64,B.message,F);break}}break}case"nanoid":wF($,H2.nanoid,B.message,F);case"toLowerCase":case"toUpperCase":case"trim":break;default:((J)=>{})(B)}return $}function fQ(D,F){return F.patternStrategy==="escape"?dh(D):D}function dh(D){let F="";for(let $=0;$<D.length;$++){if(!ih.has(D[$]))F+="\\";F+=D[$]}return F}function E2(D,F,$,B){if(D.format||D.anyOf?.some((J)=>J.format)){if(!D.anyOf)D.anyOf=[];if(D.format){if(D.anyOf.push({format:D.format,...D.errorMessage&&B.errorMessages&&{errorMessage:{format:D.errorMessage.format}}}),delete D.format,D.errorMessage){if(delete D.errorMessage.format,Object.keys(D.errorMessage).length===0)delete D.errorMessage}}D.anyOf.push({format:F,...$&&B.errorMessages&&{errorMessage:{format:$}}})}else CD(D,"format",F,$,B)}function wF(D,F,$,B){if(D.pattern||D.allOf?.some((J)=>J.pattern)){if(!D.allOf)D.allOf=[];if(D.pattern){if(D.allOf.push({pattern:D.pattern,...D.errorMessage&&B.errorMessages&&{errorMessage:{pattern:D.errorMessage.pattern}}}),delete D.pattern,D.errorMessage){if(delete D.errorMessage.pattern,Object.keys(D.errorMessage).length===0)delete D.errorMessage}}D.allOf.push({pattern:EK(F,B),...$&&B.errorMessages&&{errorMessage:{pattern:$}}})}else CD(D,"pattern",EK(F,B),$,B)}function EK(D,F){if(!F.applyRegexFlags||!D.flags)return D.source;let $={i:D.flags.includes("i"),m:D.flags.includes("m"),s:D.flags.includes("s")},B=$.i?D.source.toLowerCase():D.source,J="",Y=!1,X=!1,Q=!1;for(let w=0;w<B.length;w++){if(Y){J+=B[w],Y=!1;continue}if($.i){if(X){if(B[w].match(/[a-z]/)){if(Q)J+=B[w],J+=`${B[w-2]}-${B[w]}`.toUpperCase(),Q=!1;else if(B[w+1]==="-"&&B[w+2]?.match(/[a-z]/))J+=B[w],Q=!0;else J+=`${B[w]}${B[w].toUpperCase()}`;continue}}else if(B[w].match(/[a-z]/)){J+=`[${B[w]}${B[w].toUpperCase()}]`;continue}}if($.m){if(B[w]==="^"){J+=`(^|(?<=[\r
]))`;continue}else if(B[w]==="$"){J+=`($|(?=[\r
]))`;continue}}if($.s&&B[w]==="."){J+=X?`${B[w]}\r
`:`[${B[w]}\r
]`;continue}if(J+=B[w],B[w]==="\\")Y=!0;else if(X&&B[w]==="]")X=!1;else if(!X&&B[w]==="[")X=!0}try{new RegExp(J)}catch{return console.warn(`Could not convert regex pattern at ${F.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),D.source}return J}var wQ=void 0,H2,ih;var R5=k(()=>{H2={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>{if(wQ===void 0)wQ=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u");return wQ},uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};ih=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789")});function C5(D,F){if(F.target==="openAi")console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead.");if(F.target==="openApi3"&&D.keyType?._def.typeName===J0.ZodEnum)return{type:"object",required:D.keyType._def.values,properties:D.keyType._def.values.reduce((B,J)=>({...B,[J]:o0(D.valueType._def,{...F,currentPath:[...F.currentPath,"properties",J]})??{}}),{}),additionalProperties:F.rejectedAdditionalProperties};let $={type:"object",additionalProperties:o0(D.valueType._def,{...F,currentPath:[...F.currentPath,"additionalProperties"]})??F.allowedAdditionalProperties};if(F.target==="openApi3")return $;if(D.keyType?._def.typeName===J0.ZodString&&D.keyType._def.checks?.length){let{type:B,...J}=U5(D.keyType._def,F);return{...$,propertyNames:J}}else if(D.keyType?._def.typeName===J0.ZodEnum)return{...$,propertyNames:{enum:D.keyType._def.values}};else if(D.keyType?._def.typeName===J0.ZodBranded&&D.keyType._def.type._def.typeName===J0.ZodString&&D.keyType._def.type._def.checks?.length){let{type:B,...J}=O5(D.keyType._def,F);return{...$,propertyNames:J}}return $}var Z5=k(()=>{C0();N1();R5();j5()});function KK(D,F){if(F.mapStrategy==="record")return C5(D,F);let $=o0(D.keyType._def,{...F,currentPath:[...F.currentPath,"items","items","0"]})||{},B=o0(D.valueType._def,{...F,currentPath:[...F.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[$,B],minItems:2,maxItems:2}}}var WQ=k(()=>{N1();Z5()});function qK(D){let F=D.values,B=Object.keys(D.values).filter((Y)=>{return typeof F[F[Y]]!=="number"}).map((Y)=>F[Y]),J=Array.from(new Set(B.map((Y)=>typeof Y)));return{type:J.length===1?J[0]==="string"?"string":"number":["string","number"],enum:B}}function VK(){return{not:{}}}function AK(D){return D.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}function jK(D,F){if(F.target==="openApi3")return OK(D,F);let $=D.options instanceof Map?Array.from(D.options.values()):D.options;if($.every((B)=>(B._def.typeName in G$)&&(!B._def.checks||!B._def.checks.length))){let B=$.reduce((J,Y)=>{let X=G$[Y._def.typeName];return X&&!J.includes(X)?[...J,X]:J},[]);return{type:B.length>1?B:B[0]}}else if($.every((B)=>B._def.typeName==="ZodLiteral"&&!B.description)){let B=$.reduce((J,Y)=>{let X=typeof Y._def.value;switch(X){case"string":case"number":case"boolean":return[...J,X];case"bigint":return[...J,"integer"];case"object":if(Y._def.value===null)return[...J,"null"];case"symbol":case"undefined":case"function":default:return J}},[]);if(B.length===$.length){let J=B.filter((Y,X,Q)=>Q.indexOf(Y)===X);return{type:J.length>1?J:J[0],enum:$.reduce((Y,X)=>{return Y.includes(X._def.value)?Y:[...Y,X._def.value]},[])}}}else if($.every((B)=>B._def.typeName==="ZodEnum"))return{type:"string",enum:$.reduce((B,J)=>[...B,...J._def.values.filter((Y)=>!B.includes(Y))],[])};return OK(D,F)}var G$,OK=(D,F)=>{let $=(D.options instanceof Map?Array.from(D.options.values()):D.options).map((B,J)=>o0(B._def,{...F,currentPath:[...F.currentPath,"anyOf",`${J}`]})).filter((B)=>!!B&&(!F.strictUnions||typeof B==="object"&&Object.keys(B).length>0));return $.length?{anyOf:$}:void 0};var N5=k(()=>{N1();G$={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"}});function UK(D,F){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(D.innerType._def.typeName)&&(!D.innerType._def.checks||!D.innerType._def.checks.length)){if(F.target==="openApi3")return{type:G$[D.innerType._def.typeName],nullable:!0};return{type:[G$[D.innerType._def.typeName],"null"]}}if(F.target==="openApi3"){let B=o0(D.innerType._def,{...F,currentPath:[...F.currentPath]});if(B&&"$ref"in B)return{allOf:[B],nullable:!0};return B&&{...B,nullable:!0}}let $=o0(D.innerType._def,{...F,currentPath:[...F.currentPath,"anyOf","0"]});return $&&{anyOf:[$,{type:"null"}]}}var GQ=k(()=>{N1();N5()});function RK(D,F){let $={type:"number"};if(!D.checks)return $;for(let B of D.checks)switch(B.kind){case"int":$.type="integer",eX($,"type",B.message,F);break;case"min":if(F.target==="jsonSchema7")if(B.inclusive)CD($,"minimum",B.value,B.message,F);else CD($,"exclusiveMinimum",B.value,B.message,F);else{if(!B.inclusive)$.exclusiveMinimum=!0;CD($,"minimum",B.value,B.message,F)}break;case"max":if(F.target==="jsonSchema7")if(B.inclusive)CD($,"maximum",B.value,B.message,F);else CD($,"exclusiveMaximum",B.value,B.message,F);else{if(!B.inclusive)$.exclusiveMaximum=!0;CD($,"maximum",B.value,B.message,F)}break;case"multipleOf":CD($,"multipleOf",B.value,B.message,F);break}return $}var HQ=()=>{};function CK(D,F){let $=F.target==="openAi",B={type:"object",properties:{}},J=[],Y=D.shape();for(let Q in Y){let w=Y[Q];if(w===void 0||w._def===void 0)continue;let f=nh(w);if(f&&$){if(w instanceof ZF)w=w._def.innerType;if(!w.isNullable())w=w.nullable();f=!1}let G=o0(w._def,{...F,currentPath:[...F.currentPath,"properties",Q],propertyPath:[...F.currentPath,"properties",Q]});if(G===void 0)continue;if(B.properties[Q]=G,!f)J.push(Q)}if(J.length)B.required=J;let X=lh(D,F);if(X!==void 0)B.additionalProperties=X;return B}function lh(D,F){if(D.catchall._def.typeName!=="ZodNever")return o0(D.catchall._def,{...F,currentPath:[...F.currentPath,"additionalProperties"]});switch(D.unknownKeys){case"passthrough":return F.allowedAdditionalProperties;case"strict":return F.rejectedAdditionalProperties;case"strip":return F.removeAdditionalStrategy==="strict"?F.allowedAdditionalProperties:F.rejectedAdditionalProperties}}function nh(D){try{return D.isOptional()}catch{return!0}}var EQ=k(()=>{C0();N1()});var ZK=(D,F)=>{if(F.currentPath.toString()===F.propertyPath?.toString())return o0(D.innerType._def,F);let $=o0(D.innerType._def,{...F,currentPath:[...F.currentPath,"anyOf","1"]});return $?{anyOf:[{not:{}},$]}:{}};var KQ=k(()=>{N1()});var NK=(D,F)=>{if(F.pipeStrategy==="input")return o0(D.in._def,F);else if(F.pipeStrategy==="output")return o0(D.out._def,F);let $=o0(D.in._def,{...F,currentPath:[...F.currentPath,"allOf","0"]}),B=o0(D.out._def,{...F,currentPath:[...F.currentPath,"allOf",$?"1":"0"]});return{allOf:[$,B].filter((J)=>J!==void 0)}};var qQ=k(()=>{N1()});function MK(D,F){return o0(D.type._def,F)}var VQ=k(()=>{N1()});function _K(D,F){let B={type:"array",uniqueItems:!0,items:o0(D.valueType._def,{...F,currentPath:[...F.currentPath,"items"]})};if(D.minSize)CD(B,"minItems",D.minSize.value,D.minSize.message,F);if(D.maxSize)CD(B,"maxItems",D.maxSize.value,D.maxSize.message,F);return B}var AQ=k(()=>{N1()});function LK(D,F){if(D.rest)return{type:"array",minItems:D.items.length,items:D.items.map(($,B)=>o0($._def,{...F,currentPath:[...F.currentPath,"items",`${B}`]})).reduce(($,B)=>B===void 0?$:[...$,B],[]),additionalItems:o0(D.rest._def,{...F,currentPath:[...F.currentPath,"additionalItems"]})};else return{type:"array",minItems:D.items.length,maxItems:D.items.length,items:D.items.map(($,B)=>o0($._def,{...F,currentPath:[...F.currentPath,"items",`${B}`]})).reduce(($,B)=>B===void 0?$:[...$,B],[])}}var OQ=k(()=>{N1()});function zK(){return{not:{}}}function IK(){return{}}var TK=(D,F)=>{return o0(D.innerType._def,F)};var jQ=k(()=>{N1()});var PK=(D,F,$)=>{switch(F){case J0.ZodString:return U5(D,$);case J0.ZodNumber:return RK(D,$);case J0.ZodObject:return CK(D,$);case J0.ZodBigInt:return YK(D,$);case J0.ZodBoolean:return XK();case J0.ZodDate:return BQ(D,$);case J0.ZodUndefined:return zK();case J0.ZodNull:return AK($);case J0.ZodArray:return JK(D,$);case J0.ZodUnion:case J0.ZodDiscriminatedUnion:return jK(D,$);case J0.ZodIntersection:return GK(D,$);case J0.ZodTuple:return LK(D,$);case J0.ZodRecord:return C5(D,$);case J0.ZodLiteral:return HK(D,$);case J0.ZodEnum:return WK(D);case J0.ZodNativeEnum:return qK(D);case J0.ZodNullable:return UK(D,$);case J0.ZodOptional:return ZK(D,$);case J0.ZodMap:return KK(D,$);case J0.ZodSet:return _K(D,$);case J0.ZodLazy:return()=>D.getter()._def;case J0.ZodPromise:return MK(D,$);case J0.ZodNaN:case J0.ZodNever:return VK();case J0.ZodEffects:return fK(D,$);case J0.ZodAny:return BK();case J0.ZodUnknown:return IK();case J0.ZodDefault:return wK(D,$);case J0.ZodBranded:return O5(D,$);case J0.ZodReadonly:return TK(D,$);case J0.ZodCatch:return QK(D,$);case J0.ZodPipeline:return NK(D,$);case J0.ZodFunction:case J0.ZodVoid:case J0.ZodSymbol:return;default:return((B)=>{return})(F)}};var UQ=k(()=>{C0();DQ();FQ();j5();$Q();JQ();YQ();XQ();QQ();WQ();GQ();HQ();EQ();KQ();qQ();VQ();Z5();AQ();R5();OQ();N5();jQ()});function o0(D,F,$=!1){let B=F.seen.get(D);if(F.override){let Q=F.override?.(D,F,B,$);if(Q!==DK)return Q}if(B&&!$){let Q=oh(B,F);if(Q!==void 0)return Q}let J={def:D,path:F.currentPath,jsonSchema:void 0};F.seen.set(D,J);let Y=PK(D,D.typeName,F),X=typeof Y==="function"?o0(Y(),F):Y;if(X)th(D,F,X);if(F.postProcess){let Q=F.postProcess(X,D,F);return J.jsonSchema=X,Q}return J.jsonSchema=X,X}var oh=(D,F)=>{switch(F.$refStrategy){case"root":return{$ref:D.path.join("/")};case"relative":return{$ref:rh(F.currentPath,D.path)};case"none":case"seen":{if(D.path.length<F.currentPath.length&&D.path.every(($,B)=>F.currentPath[B]===$))return console.warn(`Recursive reference detected at ${F.currentPath.join("/")}! Defaulting to any`),{};return F.$refStrategy==="seen"?{}:void 0}}},rh=(D,F)=>{let $=0;for(;$<D.length&&$<F.length;$++)if(D[$]!==F[$])break;return[(D.length-$).toString(),...F.slice($)].join("/")},th=(D,F,$)=>{if(D.description){if($.description=D.description,F.markdownDescription)$.markdownDescription=D.description}return $};var N1=k(()=>{A5();UQ()});var bK=()=>{};var hK=(D,F)=>{let $=$K(F),B=typeof F==="object"&&F.definitions?Object.entries(F.definitions).reduce((w,[f,G])=>({...w,[f]:o0(G._def,{...$,currentPath:[...$.basePath,$.definitionPath,f]},!0)??{}}),{}):void 0,J=typeof F==="string"?F:F?.nameStrategy==="title"?void 0:F?.name,Y=o0(D._def,J===void 0?$:{...$,currentPath:[...$.basePath,$.definitionPath,J]},!1)??{},X=typeof F==="object"&&F.name!==void 0&&F.nameStrategy==="title"?F.name:void 0;if(X!==void 0)Y.title=X;let Q=J===void 0?B?{...Y,[$.definitionPath]:B}:Y:{$ref:[...$.$refStrategy==="relative"?[]:$.basePath,$.definitionPath,J].join("/"),[$.definitionPath]:{...B,[J]:Y}};if($.target==="jsonSchema7")Q.$schema="http://json-schema.org/draft-07/schema#";else if($.target==="jsonSchema2019-09"||$.target==="openAi")Q.$schema="https://json-schema.org/draft/2019-09/schema#";if($.target==="openAi"&&(("anyOf"in Q)||("oneOf"in Q)||("allOf"in Q)||("type"in Q)&&Array.isArray(Q.type)))console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property.");return Q};var RQ=k(()=>{N1();aX()});var SK;var yK=k(()=>{A5();aX();N1();bK();DQ();FQ();j5();$Q();JQ();YQ();XQ();QQ();WQ();GQ();HQ();EQ();KQ();qQ();VQ();jQ();Z5();AQ();R5();OQ();N5();UQ();RQ();RQ();SK=hK});function ah(D){let F=["ROOT"],$=-1,B=null;function J(w,f,G){switch(w){case'"':{$=f,F.pop(),F.push(G),F.push("INSIDE_STRING");break}case"f":case"t":case"n":{$=f,B=f,F.pop(),F.push(G),F.push("INSIDE_LITERAL");break}case"-":{F.pop(),F.push(G),F.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{$=f,F.pop(),F.push(G),F.push("INSIDE_NUMBER");break}case"{":{$=f,F.pop(),F.push(G),F.push("INSIDE_OBJECT_START");break}case"[":{$=f,F.pop(),F.push(G),F.push("INSIDE_ARRAY_START");break}}}function Y(w,f){switch(w){case",":{F.pop(),F.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{$=f,F.pop();break}}}function X(w,f){switch(w){case",":{F.pop(),F.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{$=f,F.pop();break}}}for(let w=0;w<D.length;w++){let f=D[w];switch(F[F.length-1]){case"ROOT":J(f,w,"FINISH");break;case"INSIDE_OBJECT_START":{switch(f){case'"':{F.pop(),F.push("INSIDE_OBJECT_KEY");break}case"}":{$=w,F.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(f){case'"':{F.pop(),F.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(f){case'"':{F.pop(),F.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(f){case":":{F.pop(),F.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{J(f,w,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{Y(f,w);break}case"INSIDE_STRING":{switch(f){case'"':{F.pop(),$=w;break}case"\\":{F.push("INSIDE_STRING_ESCAPE");break}default:$=w}break}case"INSIDE_ARRAY_START":{switch(f){case"]":{$=w,F.pop();break}default:{$=w,J(f,w,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(f){case",":{F.pop(),F.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{$=w,F.pop();break}default:{$=w;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{J(f,w,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{F.pop(),$=w;break}case"INSIDE_NUMBER":{switch(f){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{$=w;break}case"e":case"E":case"-":case".":break;case",":{if(F.pop(),F[F.length-1]==="INSIDE_ARRAY_AFTER_VALUE")X(f,w);if(F[F.length-1]==="INSIDE_OBJECT_AFTER_VALUE")Y(f,w);break}case"}":{if(F.pop(),F[F.length-1]==="INSIDE_OBJECT_AFTER_VALUE")Y(f,w);break}case"]":{if(F.pop(),F[F.length-1]==="INSIDE_ARRAY_AFTER_VALUE")X(f,w);break}default:{F.pop();break}}break}case"INSIDE_LITERAL":{let H=D.substring(B,w+1);if(!"false".startsWith(H)&&!"true".startsWith(H)&&!"null".startsWith(H)){if(F.pop(),F[F.length-1]==="INSIDE_OBJECT_AFTER_VALUE")Y(f,w);else if(F[F.length-1]==="INSIDE_ARRAY_AFTER_VALUE")X(f,w)}else $=w;break}}}let Q=D.slice(0,$+1);for(let w=F.length-1;w>=0;w--)switch(F[w]){case"INSIDE_STRING":{Q+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{Q+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{Q+="]";break}case"INSIDE_LITERAL":{let G=D.substring(B,D.length);if("true".startsWith(G))Q+="true".slice(G.length);else if("false".startsWith(G))Q+="false".slice(G.length);else if("null".startsWith(G))Q+="null".slice(G.length)}}return Q}function xK(D){if(D===void 0)return{value:void 0,state:"undefined-input"};let F=b2({text:D});if(F.success)return{value:F.value,state:"successful-parse"};if(F=b2({text:ah(D)}),F.success)return{value:F.value,state:"repaired-parse"};return{value:void 0,state:"failed-parse"}}function M1(D,F){let $=M5.find((B)=>B.name===D);if(!$)throw new Error(`Invalid stream part type: ${D}`);return`${$.code}:${JSON.stringify(F)}
`}function qS(D,F){var $;let B=($=F==null?void 0:F.useReferences)!=null?$:!1;return ZQ(SK(D,{$refStrategy:B?"root":"none",target:"jsonSchema7"}),{validate:(J)=>{let Y=D.safeParse(J);return Y.success?{success:!0,value:Y.data}:{success:!1,error:Y.error}}})}function ZQ(D,{validate:F}={}){return{[CQ]:!0,_type:void 0,[W$]:!0,jsonSchema:D,validate:F}}function VS(D){return typeof D==="object"&&D!==null&&CQ in D&&D[CQ]===!0&&"jsonSchema"in D&&"validate"in D}function P8(D){return VS(D)?D:qS(D)}var H$,E$,K$,q$,V$,sh,W60,G60,H60,eh,DS,FS,$S,BS,JS,YS,XS,QS,wS,fS,WS,GS,HS,ES,KS,M5,K60,q60,V60,CQ;var Q6=k(()=>{O1();O1();O1();yK();H$={code:"0",name:"text",parse:(D)=>{if(typeof D!=="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:D}}},E$={code:"3",name:"error",parse:(D)=>{if(typeof D!=="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:D}}},K$={code:"4",name:"assistant_message",parse:(D)=>{if(D==null||typeof D!=="object"||!("id"in D)||!("role"in D)||!("content"in D)||typeof D.id!=="string"||typeof D.role!=="string"||D.role!=="assistant"||!Array.isArray(D.content)||!D.content.every((F)=>F!=null&&typeof F==="object"&&("type"in F)&&F.type==="text"&&("text"in F)&&F.text!=null&&typeof F.text==="object"&&("value"in F.text)&&typeof F.text.value==="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:D}}},q$={code:"5",name:"assistant_control_data",parse:(D)=>{if(D==null||typeof D!=="object"||!("threadId"in D)||!("messageId"in D)||typeof D.threadId!=="string"||typeof D.messageId!=="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:D.threadId,messageId:D.messageId}}}},V$={code:"6",name:"data_message",parse:(D)=>{if(D==null||typeof D!=="object"||!("role"in D)||!("data"in D)||typeof D.role!=="string"||D.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:D}}},sh=[H$,E$,K$,q$,V$],W60={[H$.code]:H$,[E$.code]:E$,[K$.code]:K$,[q$.code]:q$,[V$.code]:V$},G60={[H$.name]:H$.code,[E$.name]:E$.code,[K$.name]:K$.code,[q$.name]:q$.code,[V$.name]:V$.code},H60=sh.map((D)=>D.code);eh={code:"0",name:"text",parse:(D)=>{if(typeof D!=="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:D}}},DS={code:"2",name:"data",parse:(D)=>{if(!Array.isArray(D))throw new Error('"data" parts expect an array value.');return{type:"data",value:D}}},FS={code:"3",name:"error",parse:(D)=>{if(typeof D!=="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:D}}},$S={code:"8",name:"message_annotations",parse:(D)=>{if(!Array.isArray(D))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:D}}},BS={code:"9",name:"tool_call",parse:(D)=>{if(D==null||typeof D!=="object"||!("toolCallId"in D)||typeof D.toolCallId!=="string"||!("toolName"in D)||typeof D.toolName!=="string"||!("args"in D)||typeof D.args!=="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:D}}},JS={code:"a",name:"tool_result",parse:(D)=>{if(D==null||typeof D!=="object"||!("toolCallId"in D)||typeof D.toolCallId!=="string"||!("result"in D))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:D}}},YS={code:"b",name:"tool_call_streaming_start",parse:(D)=>{if(D==null||typeof D!=="object"||!("toolCallId"in D)||typeof D.toolCallId!=="string"||!("toolName"in D)||typeof D.toolName!=="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:D}}},XS={code:"c",name:"tool_call_delta",parse:(D)=>{if(D==null||typeof D!=="object"||!("toolCallId"in D)||typeof D.toolCallId!=="string"||!("argsTextDelta"in D)||typeof D.argsTextDelta!=="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:D}}},QS={code:"d",name:"finish_message",parse:(D)=>{if(D==null||typeof D!=="object"||!("finishReason"in D)||typeof D.finishReason!=="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');let F={finishReason:D.finishReason};if("usage"in D&&D.usage!=null&&typeof D.usage==="object"&&"promptTokens"in D.usage&&"completionTokens"in D.usage)F.usage={promptTokens:typeof D.usage.promptTokens==="number"?D.usage.promptTokens:Number.NaN,completionTokens:typeof D.usage.completionTokens==="number"?D.usage.completionTokens:Number.NaN};return{type:"finish_message",value:F}}},wS={code:"e",name:"finish_step",parse:(D)=>{if(D==null||typeof D!=="object"||!("finishReason"in D)||typeof D.finishReason!=="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');let F={finishReason:D.finishReason,isContinued:!1};if("usage"in D&&D.usage!=null&&typeof D.usage==="object"&&"promptTokens"in D.usage&&"completionTokens"in D.usage)F.usage={promptTokens:typeof D.usage.promptTokens==="number"?D.usage.promptTokens:Number.NaN,completionTokens:typeof D.usage.completionTokens==="number"?D.usage.completionTokens:Number.NaN};if("isContinued"in D&&typeof D.isContinued==="boolean")F.isContinued=D.isContinued;return{type:"finish_step",value:F}}},fS={code:"f",name:"start_step",parse:(D)=>{if(D==null||typeof D!=="object"||!("messageId"in D)||typeof D.messageId!=="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:D.messageId}}}},WS={code:"g",name:"reasoning",parse:(D)=>{if(typeof D!=="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:D}}},GS={code:"h",name:"source",parse:(D)=>{if(D==null||typeof D!=="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:D}}},HS={code:"i",name:"redacted_reasoning",parse:(D)=>{if(D==null||typeof D!=="object"||!("data"in D)||typeof D.data!=="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:D.data}}}},ES={code:"j",name:"reasoning_signature",parse:(D)=>{if(D==null||typeof D!=="object"||!("signature"in D)||typeof D.signature!=="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:D.signature}}}},KS={code:"k",name:"file",parse:(D)=>{if(D==null||typeof D!=="object"||!("data"in D)||typeof D.data!=="string"||!("mimeType"in D)||typeof D.mimeType!=="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:D}}},M5=[eh,DS,FS,$S,BS,JS,YS,XS,QS,wS,fS,WS,GS,HS,ES,KS],K60=Object.fromEntries(M5.map((D)=>[D.code,D])),q60=Object.fromEntries(M5.map((D)=>[D.name,D.code])),V60=M5.map((D)=>D.code);CQ=Symbol.for("vercel.ai.schema")});var vK=t((kK)=>{Object.defineProperty(kK,"__esModule",{value:!0});kK._globalThis=void 0;kK._globalThis=typeof globalThis==="object"?globalThis:global});var gK=t((b8)=>{var AS=b8&&b8.__createBinding||(Object.create?function(D,F,$,B){if(B===void 0)B=$;Object.defineProperty(D,B,{enumerable:!0,get:function(){return F[$]}})}:function(D,F,$,B){if(B===void 0)B=$;D[B]=F[$]}),OS=b8&&b8.__exportStar||function(D,F){for(var $ in D)if($!=="default"&&!Object.prototype.hasOwnProperty.call(F,$))AS(F,D,$)};Object.defineProperty(b8,"__esModule",{value:!0});OS(vK(),b8)});var mK=t((h8)=>{var jS=h8&&h8.__createBinding||(Object.create?function(D,F,$,B){if(B===void 0)B=$;Object.defineProperty(D,B,{enumerable:!0,get:function(){return F[$]}})}:function(D,F,$,B){if(B===void 0)B=$;D[B]=F[$]}),US=h8&&h8.__exportStar||function(D,F){for(var $ in D)if($!=="default"&&!Object.prototype.hasOwnProperty.call(F,$))jS(F,D,$)};Object.defineProperty(h8,"__esModule",{value:!0});US(gK(),h8)});var NQ=t((cK)=>{Object.defineProperty(cK,"__esModule",{value:!0});cK.VERSION=void 0;cK.VERSION="1.9.0"});var oK=t((lK)=>{Object.defineProperty(lK,"__esModule",{value:!0});lK.isCompatible=lK._makeCompatibilityCheck=void 0;var RS=NQ(),iK=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function dK(D){let F=new Set([D]),$=new Set,B=D.match(iK);if(!B)return()=>!1;let J={major:+B[1],minor:+B[2],patch:+B[3],prerelease:B[4]};if(J.prerelease!=null)return function Q(w){return w===D};function Y(Q){return $.add(Q),!1}function X(Q){return F.add(Q),!0}return function Q(w){if(F.has(w))return!0;if($.has(w))return!1;let f=w.match(iK);if(!f)return Y(w);let G={major:+f[1],minor:+f[2],patch:+f[3],prerelease:f[4]};if(G.prerelease!=null)return Y(w);if(J.major!==G.major)return Y(w);if(J.major===0){if(J.minor===G.minor&&J.patch<=G.patch)return X(w);return Y(w)}if(J.minor<=G.minor)return X(w);return Y(w)}}lK._makeCompatibilityCheck=dK;lK.isCompatible=dK(RS.VERSION)});var S8=t((rK)=>{Object.defineProperty(rK,"__esModule",{value:!0});rK.unregisterGlobal=rK.getGlobal=rK.registerGlobal=void 0;var ZS=mK(),y7=NQ(),NS=oK(),MS=y7.VERSION.split(".")[0],A$=Symbol.for(`opentelemetry.js.api.${MS}`),O$=ZS._globalThis;function _S(D,F,$,B=!1){var J;let Y=O$[A$]=(J=O$[A$])!==null&&J!==void 0?J:{version:y7.VERSION};if(!B&&Y[D]){let X=new Error(`@opentelemetry/api: Attempted duplicate registration of API: ${D}`);return $.error(X.stack||X.message),!1}if(Y.version!==y7.VERSION){let X=new Error(`@opentelemetry/api: Registration of version v${Y.version} for ${D} does not match previously registered API v${y7.VERSION}`);return $.error(X.stack||X.message),!1}return Y[D]=F,$.debug(`@opentelemetry/api: Registered a global for ${D} v${y7.VERSION}.`),!0}rK.registerGlobal=_S;function LS(D){var F,$;let B=(F=O$[A$])===null||F===void 0?void 0:F.version;if(!B||!NS.isCompatible(B))return;return($=O$[A$])===null||$===void 0?void 0:$[D]}rK.getGlobal=LS;function zS(D,F){F.debug(`@opentelemetry/api: Unregistering a global for ${D} v${y7.VERSION}.`);let $=O$[A$];if($)delete $[D]}rK.unregisterGlobal=zS});var Dq=t((aK)=>{Object.defineProperty(aK,"__esModule",{value:!0});aK.DiagComponentLogger=void 0;var PS=S8();class sK{constructor(D){this._namespace=D.namespace||"DiagComponentLogger"}debug(...D){return j$("debug",this._namespace,D)}error(...D){return j$("error",this._namespace,D)}info(...D){return j$("info",this._namespace,D)}warn(...D){return j$("warn",this._namespace,D)}verbose(...D){return j$("verbose",this._namespace,D)}}aK.DiagComponentLogger=sK;function j$(D,F,$){let B=PS.getGlobal("diag");if(!B)return;return $.unshift(F),B[D](...$)}});var _5=t((Fq)=>{Object.defineProperty(Fq,"__esModule",{value:!0});Fq.DiagLogLevel=void 0;var bS;(function(D){D[D.NONE=0]="NONE",D[D.ERROR=30]="ERROR",D[D.WARN=50]="WARN",D[D.INFO=60]="INFO",D[D.DEBUG=70]="DEBUG",D[D.VERBOSE=80]="VERBOSE",D[D.ALL=9999]="ALL"})(bS=Fq.DiagLogLevel||(Fq.DiagLogLevel={}))});var Jq=t(($q)=>{Object.defineProperty($q,"__esModule",{value:!0});$q.createLogLevelDiagLogger=void 0;var w6=_5();function hS(D,F){if(D<w6.DiagLogLevel.NONE)D=w6.DiagLogLevel.NONE;else if(D>w6.DiagLogLevel.ALL)D=w6.DiagLogLevel.ALL;F=F||{};function $(B,J){let Y=F[B];if(typeof Y==="function"&&D>=J)return Y.bind(F);return function(){}}return{error:$("error",w6.DiagLogLevel.ERROR),warn:$("warn",w6.DiagLogLevel.WARN),info:$("info",w6.DiagLogLevel.INFO),debug:$("debug",w6.DiagLogLevel.DEBUG),verbose:$("verbose",w6.DiagLogLevel.VERBOSE)}}$q.createLogLevelDiagLogger=hS});var y8=t((Xq)=>{Object.defineProperty(Xq,"__esModule",{value:!0});Xq.DiagAPI=void 0;var SS=Dq(),yS=Jq(),Yq=_5(),L5=S8(),xS="diag";class _Q{constructor(){function D(B){return function(...J){let Y=L5.getGlobal("diag");if(!Y)return;return Y[B](...J)}}let F=this,$=(B,J={logLevel:Yq.DiagLogLevel.INFO})=>{var Y,X,Q;if(B===F){let G=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return F.error((Y=G.stack)!==null&&Y!==void 0?Y:G.message),!1}if(typeof J==="number")J={logLevel:J};let w=L5.getGlobal("diag"),f=yS.createLogLevelDiagLogger((X=J.logLevel)!==null&&X!==void 0?X:Yq.DiagLogLevel.INFO,B);if(w&&!J.suppressOverrideMessage){let G=(Q=new Error().stack)!==null&&Q!==void 0?Q:"<failed to generate stacktrace>";w.warn(`Current logger will be overwritten from ${G}`),f.warn(`Current logger will overwrite one already registered from ${G}`)}return L5.registerGlobal("diag",f,F,!0)};F.setLogger=$,F.disable=()=>{L5.unregisterGlobal(xS,F)},F.createComponentLogger=(B)=>{return new SS.DiagComponentLogger(B)},F.verbose=D("verbose"),F.debug=D("debug"),F.info=D("info"),F.warn=D("warn"),F.error=D("error")}static instance(){if(!this._instance)this._instance=new _Q;return this._instance}}Xq.DiagAPI=_Q});var Wq=t((wq)=>{Object.defineProperty(wq,"__esModule",{value:!0});wq.BaggageImpl=void 0;class x7{constructor(D){this._entries=D?new Map(D):new Map}getEntry(D){let F=this._entries.get(D);if(!F)return;return Object.assign({},F)}getAllEntries(){return Array.from(this._entries.entries()).map(([D,F])=>[D,F])}setEntry(D,F){let $=new x7(this._entries);return $._entries.set(D,F),$}removeEntry(D){let F=new x7(this._entries);return F._entries.delete(D),F}removeEntries(...D){let F=new x7(this._entries);for(let $ of D)F._entries.delete($);return F}clear(){return new x7}}wq.BaggageImpl=x7});var Eq=t((Gq)=>{Object.defineProperty(Gq,"__esModule",{value:!0});Gq.baggageEntryMetadataSymbol=void 0;Gq.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")});var LQ=t((Kq)=>{Object.defineProperty(Kq,"__esModule",{value:!0});Kq.baggageEntryMetadataFromString=Kq.createBaggage=void 0;var kS=y8(),uS=Wq(),vS=Eq(),gS=kS.DiagAPI.instance();function mS(D={}){return new uS.BaggageImpl(new Map(Object.entries(D)))}Kq.createBaggage=mS;function cS(D){if(typeof D!=="string")gS.error(`Cannot create baggage metadata from unknown type: ${typeof D}`),D="";return{__TYPE__:vS.baggageEntryMetadataSymbol,toString(){return D}}}Kq.baggageEntryMetadataFromString=cS});var U$=t((Vq)=>{Object.defineProperty(Vq,"__esModule",{value:!0});Vq.ROOT_CONTEXT=Vq.createContextKey=void 0;function iS(D){return Symbol.for(D)}Vq.createContextKey=iS;class z5{constructor(D){let F=this;F._currentContext=D?new Map(D):new Map,F.getValue=($)=>F._currentContext.get($),F.setValue=($,B)=>{let J=new z5(F._currentContext);return J._currentContext.set($,B),J},F.deleteValue=($)=>{let B=new z5(F._currentContext);return B._currentContext.delete($),B}}}Vq.ROOT_CONTEXT=new z5});var Rq=t((jq)=>{Object.defineProperty(jq,"__esModule",{value:!0});jq.DiagConsoleLogger=void 0;var zQ=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];class Oq{constructor(){function D(F){return function(...$){if(console){let B=console[F];if(typeof B!=="function")B=console.log;if(typeof B==="function")return B.apply(console,$)}}}for(let F=0;F<zQ.length;F++)this[zQ[F].n]=D(zQ[F].c)}}jq.DiagConsoleLogger=Oq});var kQ=t((Cq)=>{Object.defineProperty(Cq,"__esModule",{value:!0});Cq.createNoopMeter=Cq.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=Cq.NOOP_OBSERVABLE_GAUGE_METRIC=Cq.NOOP_OBSERVABLE_COUNTER_METRIC=Cq.NOOP_UP_DOWN_COUNTER_METRIC=Cq.NOOP_HISTOGRAM_METRIC=Cq.NOOP_GAUGE_METRIC=Cq.NOOP_COUNTER_METRIC=Cq.NOOP_METER=Cq.NoopObservableUpDownCounterMetric=Cq.NoopObservableGaugeMetric=Cq.NoopObservableCounterMetric=Cq.NoopObservableMetric=Cq.NoopHistogramMetric=Cq.NoopGaugeMetric=Cq.NoopUpDownCounterMetric=Cq.NoopCounterMetric=Cq.NoopMetric=Cq.NoopMeter=void 0;class IQ{constructor(){}createGauge(D,F){return Cq.NOOP_GAUGE_METRIC}createHistogram(D,F){return Cq.NOOP_HISTOGRAM_METRIC}createCounter(D,F){return Cq.NOOP_COUNTER_METRIC}createUpDownCounter(D,F){return Cq.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(D,F){return Cq.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(D,F){return Cq.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(D,F){return Cq.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(D,F){}removeBatchObservableCallback(D){}}Cq.NoopMeter=IQ;class k7{}Cq.NoopMetric=k7;class TQ extends k7{add(D,F){}}Cq.NoopCounterMetric=TQ;class PQ extends k7{add(D,F){}}Cq.NoopUpDownCounterMetric=PQ;class bQ extends k7{record(D,F){}}Cq.NoopGaugeMetric=bQ;class hQ extends k7{record(D,F){}}Cq.NoopHistogramMetric=hQ;class R${addCallback(D){}removeCallback(D){}}Cq.NoopObservableMetric=R$;class SQ extends R${}Cq.NoopObservableCounterMetric=SQ;class yQ extends R${}Cq.NoopObservableGaugeMetric=yQ;class xQ extends R${}Cq.NoopObservableUpDownCounterMetric=xQ;Cq.NOOP_METER=new IQ;Cq.NOOP_COUNTER_METRIC=new TQ;Cq.NOOP_GAUGE_METRIC=new bQ;Cq.NOOP_HISTOGRAM_METRIC=new hQ;Cq.NOOP_UP_DOWN_COUNTER_METRIC=new PQ;Cq.NOOP_OBSERVABLE_COUNTER_METRIC=new SQ;Cq.NOOP_OBSERVABLE_GAUGE_METRIC=new yQ;Cq.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new xQ;function lS(){return Cq.NOOP_METER}Cq.createNoopMeter=lS});var hq=t((bq)=>{Object.defineProperty(bq,"__esModule",{value:!0});bq.ValueType=void 0;var By;(function(D){D[D.INT=0]="INT",D[D.DOUBLE=1]="DOUBLE"})(By=bq.ValueType||(bq.ValueType={}))});var vQ=t((Sq)=>{Object.defineProperty(Sq,"__esModule",{value:!0});Sq.defaultTextMapSetter=Sq.defaultTextMapGetter=void 0;Sq.defaultTextMapGetter={get(D,F){if(D==null)return;return D[F]},keys(D){if(D==null)return[];return Object.keys(D)}};Sq.defaultTextMapSetter={set(D,F,$){if(D==null)return;D[F]=$}}});var vq=t((kq)=>{Object.defineProperty(kq,"__esModule",{value:!0});kq.NoopContextManager=void 0;var Yy=U$();class xq{active(){return Yy.ROOT_CONTEXT}with(D,F,$,...B){return F.call($,...B)}bind(D,F){return F}enable(){return this}disable(){return this}}kq.NoopContextManager=xq});var C$=t((mq)=>{Object.defineProperty(mq,"__esModule",{value:!0});mq.ContextAPI=void 0;var Xy=vq(),gQ=S8(),gq=y8(),mQ="context",Qy=new Xy.NoopContextManager;class cQ{constructor(){}static getInstance(){if(!this._instance)this._instance=new cQ;return this._instance}setGlobalContextManager(D){return gQ.registerGlobal(mQ,D,gq.DiagAPI.instance())}active(){return this._getContextManager().active()}with(D,F,$,...B){return this._getContextManager().with(D,F,$,...B)}bind(D,F){return this._getContextManager().bind(D,F)}_getContextManager(){return gQ.getGlobal(mQ)||Qy}disable(){this._getContextManager().disable(),gQ.unregisterGlobal(mQ,gq.DiagAPI.instance())}}mq.ContextAPI=cQ});var iQ=t((pq)=>{Object.defineProperty(pq,"__esModule",{value:!0});pq.TraceFlags=void 0;var wy;(function(D){D[D.NONE=0]="NONE",D[D.SAMPLED=1]="SAMPLED"})(wy=pq.TraceFlags||(pq.TraceFlags={}))});var I5=t((iq)=>{Object.defineProperty(iq,"__esModule",{value:!0});iq.INVALID_SPAN_CONTEXT=iq.INVALID_TRACEID=iq.INVALID_SPANID=void 0;var fy=iQ();iq.INVALID_SPANID="0000000000000000";iq.INVALID_TRACEID="00000000000000000000000000000000";iq.INVALID_SPAN_CONTEXT={traceId:iq.INVALID_TRACEID,spanId:iq.INVALID_SPANID,traceFlags:fy.TraceFlags.NONE}});var T5=t((rq)=>{Object.defineProperty(rq,"__esModule",{value:!0});rq.NonRecordingSpan=void 0;var Wy=I5();class oq{constructor(D=Wy.INVALID_SPAN_CONTEXT){this._spanContext=D}spanContext(){return this._spanContext}setAttribute(D,F){return this}setAttributes(D){return this}addEvent(D,F){return this}addLink(D){return this}addLinks(D){return this}setStatus(D){return this}updateName(D){return this}end(D){}isRecording(){return!1}recordException(D,F){}}rq.NonRecordingSpan=oq});var nQ=t((aq)=>{Object.defineProperty(aq,"__esModule",{value:!0});aq.getSpanContext=aq.setSpanContext=aq.deleteSpan=aq.setSpan=aq.getActiveSpan=aq.getSpan=void 0;var Gy=U$(),Hy=T5(),Ey=C$(),dQ=Gy.createContextKey("OpenTelemetry Context Key SPAN");function lQ(D){return D.getValue(dQ)||void 0}aq.getSpan=lQ;function Ky(){return lQ(Ey.ContextAPI.getInstance().active())}aq.getActiveSpan=Ky;function sq(D,F){return D.setValue(dQ,F)}aq.setSpan=sq;function qy(D){return D.deleteValue(dQ)}aq.deleteSpan=qy;function Vy(D,F){return sq(D,new Hy.NonRecordingSpan(F))}aq.setSpanContext=Vy;function Ay(D){var F;return(F=lQ(D))===null||F===void 0?void 0:F.spanContext()}aq.getSpanContext=Ay});var P5=t((BV)=>{Object.defineProperty(BV,"__esModule",{value:!0});BV.wrapSpanContext=BV.isSpanContextValid=BV.isValidSpanId=BV.isValidTraceId=void 0;var DV=I5(),Zy=T5(),Ny=/^([0-9a-f]{32})$/i,My=/^[0-9a-f]{16}$/i;function FV(D){return Ny.test(D)&&D!==DV.INVALID_TRACEID}BV.isValidTraceId=FV;function $V(D){return My.test(D)&&D!==DV.INVALID_SPANID}BV.isValidSpanId=$V;function _y(D){return FV(D.traceId)&&$V(D.spanId)}BV.isSpanContextValid=_y;function Ly(D){return new Zy.NonRecordingSpan(D)}BV.wrapSpanContext=Ly});var tQ=t((QV)=>{Object.defineProperty(QV,"__esModule",{value:!0});QV.NoopTracer=void 0;var Py=C$(),YV=nQ(),oQ=T5(),by=P5(),rQ=Py.ContextAPI.getInstance();class XV{startSpan(D,F,$=rQ.active()){if(Boolean(F===null||F===void 0?void 0:F.root))return new oQ.NonRecordingSpan;let J=$&&YV.getSpanContext($);if(hy(J)&&by.isSpanContextValid(J))return new oQ.NonRecordingSpan(J);else return new oQ.NonRecordingSpan}startActiveSpan(D,F,$,B){let J,Y,X;if(arguments.length<2)return;else if(arguments.length===2)X=F;else if(arguments.length===3)J=F,X=$;else J=F,Y=$,X=B;let Q=Y!==null&&Y!==void 0?Y:rQ.active(),w=this.startSpan(D,J,Q),f=YV.setSpan(Q,w);return rQ.with(f,X,void 0,w)}}QV.NoopTracer=XV;function hy(D){return typeof D==="object"&&typeof D.spanId==="string"&&typeof D.traceId==="string"&&typeof D.traceFlags==="number"}});var sQ=t((WV)=>{Object.defineProperty(WV,"__esModule",{value:!0});WV.ProxyTracer=void 0;var Sy=tQ(),yy=new Sy.NoopTracer;class fV{constructor(D,F,$,B){this._provider=D,this.name=F,this.version=$,this.options=B}startSpan(D,F,$){return this._getTracer().startSpan(D,F,$)}startActiveSpan(D,F,$,B){let J=this._getTracer();return Reflect.apply(J.startActiveSpan,J,arguments)}_getTracer(){if(this._delegate)return this._delegate;let D=this._provider.getDelegateTracer(this.name,this.version,this.options);if(!D)return yy;return this._delegate=D,this._delegate}}WV.ProxyTracer=fV});var qV=t((EV)=>{Object.defineProperty(EV,"__esModule",{value:!0});EV.NoopTracerProvider=void 0;var xy=tQ();class HV{getTracer(D,F,$){return new xy.NoopTracer}}EV.NoopTracerProvider=HV});var aQ=t((AV)=>{Object.defineProperty(AV,"__esModule",{value:!0});AV.ProxyTracerProvider=void 0;var ky=sQ(),uy=qV(),vy=new uy.NoopTracerProvider;class VV{getTracer(D,F,$){var B;return(B=this.getDelegateTracer(D,F,$))!==null&&B!==void 0?B:new ky.ProxyTracer(this,D,F,$)}getDelegate(){var D;return(D=this._delegate)!==null&&D!==void 0?D:vy}setDelegate(D){this._delegate=D}getDelegateTracer(D,F,$){var B;return(B=this._delegate)===null||B===void 0?void 0:B.getTracer(D,F,$)}}AV.ProxyTracerProvider=VV});var UV=t((jV)=>{Object.defineProperty(jV,"__esModule",{value:!0});jV.SamplingDecision=void 0;var gy;(function(D){D[D.NOT_RECORD=0]="NOT_RECORD",D[D.RECORD=1]="RECORD",D[D.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(gy=jV.SamplingDecision||(jV.SamplingDecision={}))});var CV=t((RV)=>{Object.defineProperty(RV,"__esModule",{value:!0});RV.SpanKind=void 0;var my;(function(D){D[D.INTERNAL=0]="INTERNAL",D[D.SERVER=1]="SERVER",D[D.CLIENT=2]="CLIENT",D[D.PRODUCER=3]="PRODUCER",D[D.CONSUMER=4]="CONSUMER"})(my=RV.SpanKind||(RV.SpanKind={}))});var NV=t((ZV)=>{Object.defineProperty(ZV,"__esModule",{value:!0});ZV.SpanStatusCode=void 0;var cy;(function(D){D[D.UNSET=0]="UNSET",D[D.OK=1]="OK",D[D.ERROR=2]="ERROR"})(cy=ZV.SpanStatusCode||(ZV.SpanStatusCode={}))});var LV=t((MV)=>{Object.defineProperty(MV,"__esModule",{value:!0});MV.validateValue=MV.validateKey=void 0;var $4="[_0-9a-z-*/]",py=`[a-z]${$4}{0,255}`,iy=`[a-z0-9]${$4}{0,240}@[a-z]${$4}{0,13}`,dy=new RegExp(`^(?:${py}|${iy})$`),ly=/^[ -~]{0,255}[!-~]$/,ny=/,|=/;function oy(D){return dy.test(D)}MV.validateKey=oy;function ry(D){return ly.test(D)&&!ny.test(D)}MV.validateValue=ry});var SV=t((bV)=>{Object.defineProperty(bV,"__esModule",{value:!0});bV.TraceStateImpl=void 0;var zV=LV(),IV=32,sy=512,TV=",",PV="=";class B4{constructor(D){if(this._internalState=new Map,D)this._parse(D)}set(D,F){let $=this._clone();if($._internalState.has(D))$._internalState.delete(D);return $._internalState.set(D,F),$}unset(D){let F=this._clone();return F._internalState.delete(D),F}get(D){return this._internalState.get(D)}serialize(){return this._keys().reduce((D,F)=>{return D.push(F+PV+this.get(F)),D},[]).join(TV)}_parse(D){if(D.length>sy)return;if(this._internalState=D.split(TV).reverse().reduce((F,$)=>{let B=$.trim(),J=B.indexOf(PV);if(J!==-1){let Y=B.slice(0,J),X=B.slice(J+1,$.length);if(zV.validateKey(Y)&&zV.validateValue(X))F.set(Y,X)}return F},new Map),this._internalState.size>IV)this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,IV))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let D=new B4;return D._internalState=new Map(this._internalState),D}}bV.TraceStateImpl=B4});var kV=t((yV)=>{Object.defineProperty(yV,"__esModule",{value:!0});yV.createTraceState=void 0;var ay=SV();function ey(D){return new ay.TraceStateImpl(D)}yV.createTraceState=ey});var gV=t((uV)=>{Object.defineProperty(uV,"__esModule",{value:!0});uV.context=void 0;var Dx=C$();uV.context=Dx.ContextAPI.getInstance()});var pV=t((mV)=>{Object.defineProperty(mV,"__esModule",{value:!0});mV.diag=void 0;var Fx=y8();mV.diag=Fx.DiagAPI.instance()});var lV=t((iV)=>{Object.defineProperty(iV,"__esModule",{value:!0});iV.NOOP_METER_PROVIDER=iV.NoopMeterProvider=void 0;var $x=kQ();class J4{getMeter(D,F,$){return $x.NOOP_METER}}iV.NoopMeterProvider=J4;iV.NOOP_METER_PROVIDER=new J4});var tV=t((oV)=>{Object.defineProperty(oV,"__esModule",{value:!0});oV.MetricsAPI=void 0;var Jx=lV(),Y4=S8(),nV=y8(),X4="metrics";class Q4{constructor(){}static getInstance(){if(!this._instance)this._instance=new Q4;return this._instance}setGlobalMeterProvider(D){return Y4.registerGlobal(X4,D,nV.DiagAPI.instance())}getMeterProvider(){return Y4.getGlobal(X4)||Jx.NOOP_METER_PROVIDER}getMeter(D,F,$){return this.getMeterProvider().getMeter(D,F,$)}disable(){Y4.unregisterGlobal(X4,nV.DiagAPI.instance())}}oV.MetricsAPI=Q4});var eV=t((sV)=>{Object.defineProperty(sV,"__esModule",{value:!0});sV.metrics=void 0;var Yx=tV();sV.metrics=Yx.MetricsAPI.getInstance()});var BA=t((FA)=>{Object.defineProperty(FA,"__esModule",{value:!0});FA.NoopTextMapPropagator=void 0;class DA{inject(D,F){}extract(D,F){return D}fields(){return[]}}FA.NoopTextMapPropagator=DA});var QA=t((YA)=>{Object.defineProperty(YA,"__esModule",{value:!0});YA.deleteBaggage=YA.setBaggage=YA.getActiveBaggage=YA.getBaggage=void 0;var Xx=C$(),Qx=U$(),w4=Qx.createContextKey("OpenTelemetry Baggage Key");function JA(D){return D.getValue(w4)||void 0}YA.getBaggage=JA;function wx(){return JA(Xx.ContextAPI.getInstance().active())}YA.getActiveBaggage=wx;function fx(D,F){return D.setValue(w4,F)}YA.setBaggage=fx;function Wx(D){return D.deleteValue(w4)}YA.deleteBaggage=Wx});var HA=t((WA)=>{Object.defineProperty(WA,"__esModule",{value:!0});WA.PropagationAPI=void 0;var f4=S8(),Kx=BA(),wA=vQ(),b5=QA(),qx=LQ(),fA=y8(),W4="propagation",Vx=new Kx.NoopTextMapPropagator;class G4{constructor(){this.createBaggage=qx.createBaggage,this.getBaggage=b5.getBaggage,this.getActiveBaggage=b5.getActiveBaggage,this.setBaggage=b5.setBaggage,this.deleteBaggage=b5.deleteBaggage}static getInstance(){if(!this._instance)this._instance=new G4;return this._instance}setGlobalPropagator(D){return f4.registerGlobal(W4,D,fA.DiagAPI.instance())}inject(D,F,$=wA.defaultTextMapSetter){return this._getGlobalPropagator().inject(D,F,$)}extract(D,F,$=wA.defaultTextMapGetter){return this._getGlobalPropagator().extract(D,F,$)}fields(){return this._getGlobalPropagator().fields()}disable(){f4.unregisterGlobal(W4,fA.DiagAPI.instance())}_getGlobalPropagator(){return f4.getGlobal(W4)||Vx}}WA.PropagationAPI=G4});var qA=t((EA)=>{Object.defineProperty(EA,"__esModule",{value:!0});EA.propagation=void 0;var Ax=HA();EA.propagation=Ax.PropagationAPI.getInstance()});var RA=t((jA)=>{Object.defineProperty(jA,"__esModule",{value:!0});jA.TraceAPI=void 0;var H4=S8(),VA=aQ(),AA=P5(),u7=nQ(),OA=y8(),E4="trace";class K4{constructor(){this._proxyTracerProvider=new VA.ProxyTracerProvider,this.wrapSpanContext=AA.wrapSpanContext,this.isSpanContextValid=AA.isSpanContextValid,this.deleteSpan=u7.deleteSpan,this.getSpan=u7.getSpan,this.getActiveSpan=u7.getActiveSpan,this.getSpanContext=u7.getSpanContext,this.setSpan=u7.setSpan,this.setSpanContext=u7.setSpanContext}static getInstance(){if(!this._instance)this._instance=new K4;return this._instance}setGlobalTracerProvider(D){let F=H4.registerGlobal(E4,this._proxyTracerProvider,OA.DiagAPI.instance());if(F)this._proxyTracerProvider.setDelegate(D);return F}getTracerProvider(){return H4.getGlobal(E4)||this._proxyTracerProvider}getTracer(D,F){return this.getTracerProvider().getTracer(D,F)}disable(){H4.unregisterGlobal(E4,OA.DiagAPI.instance()),this._proxyTracerProvider=new VA.ProxyTracerProvider}}jA.TraceAPI=K4});var NA=t((CA)=>{Object.defineProperty(CA,"__esModule",{value:!0});CA.trace=void 0;var Ox=RA();CA.trace=Ox.TraceAPI.getInstance()});var A4=t((vD)=>{Object.defineProperty(vD,"__esModule",{value:!0});vD.trace=vD.propagation=vD.metrics=vD.diag=vD.context=vD.INVALID_SPAN_CONTEXT=vD.INVALID_TRACEID=vD.INVALID_SPANID=vD.isValidSpanId=vD.isValidTraceId=vD.isSpanContextValid=vD.createTraceState=vD.TraceFlags=vD.SpanStatusCode=vD.SpanKind=vD.SamplingDecision=vD.ProxyTracerProvider=vD.ProxyTracer=vD.defaultTextMapSetter=vD.defaultTextMapGetter=vD.ValueType=vD.createNoopMeter=vD.DiagLogLevel=vD.DiagConsoleLogger=vD.ROOT_CONTEXT=vD.createContextKey=vD.baggageEntryMetadataFromString=void 0;var jx=LQ();Object.defineProperty(vD,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return jx.baggageEntryMetadataFromString}});var MA=U$();Object.defineProperty(vD,"createContextKey",{enumerable:!0,get:function(){return MA.createContextKey}});Object.defineProperty(vD,"ROOT_CONTEXT",{enumerable:!0,get:function(){return MA.ROOT_CONTEXT}});var Ux=Rq();Object.defineProperty(vD,"DiagConsoleLogger",{enumerable:!0,get:function(){return Ux.DiagConsoleLogger}});var Rx=_5();Object.defineProperty(vD,"DiagLogLevel",{enumerable:!0,get:function(){return Rx.DiagLogLevel}});var Cx=kQ();Object.defineProperty(vD,"createNoopMeter",{enumerable:!0,get:function(){return Cx.createNoopMeter}});var Zx=hq();Object.defineProperty(vD,"ValueType",{enumerable:!0,get:function(){return Zx.ValueType}});var _A=vQ();Object.defineProperty(vD,"defaultTextMapGetter",{enumerable:!0,get:function(){return _A.defaultTextMapGetter}});Object.defineProperty(vD,"defaultTextMapSetter",{enumerable:!0,get:function(){return _A.defaultTextMapSetter}});var Nx=sQ();Object.defineProperty(vD,"ProxyTracer",{enumerable:!0,get:function(){return Nx.ProxyTracer}});var Mx=aQ();Object.defineProperty(vD,"ProxyTracerProvider",{enumerable:!0,get:function(){return Mx.ProxyTracerProvider}});var _x=UV();Object.defineProperty(vD,"SamplingDecision",{enumerable:!0,get:function(){return _x.SamplingDecision}});var Lx=CV();Object.defineProperty(vD,"SpanKind",{enumerable:!0,get:function(){return Lx.SpanKind}});var zx=NV();Object.defineProperty(vD,"SpanStatusCode",{enumerable:!0,get:function(){return zx.SpanStatusCode}});var Ix=iQ();Object.defineProperty(vD,"TraceFlags",{enumerable:!0,get:function(){return Ix.TraceFlags}});var Tx=kV();Object.defineProperty(vD,"createTraceState",{enumerable:!0,get:function(){return Tx.createTraceState}});var q4=P5();Object.defineProperty(vD,"isSpanContextValid",{enumerable:!0,get:function(){return q4.isSpanContextValid}});Object.defineProperty(vD,"isValidTraceId",{enumerable:!0,get:function(){return q4.isValidTraceId}});Object.defineProperty(vD,"isValidSpanId",{enumerable:!0,get:function(){return q4.isValidSpanId}});var V4=I5();Object.defineProperty(vD,"INVALID_SPANID",{enumerable:!0,get:function(){return V4.INVALID_SPANID}});Object.defineProperty(vD,"INVALID_TRACEID",{enumerable:!0,get:function(){return V4.INVALID_TRACEID}});Object.defineProperty(vD,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return V4.INVALID_SPAN_CONTEXT}});var LA=gV();Object.defineProperty(vD,"context",{enumerable:!0,get:function(){return LA.context}});var zA=pV();Object.defineProperty(vD,"diag",{enumerable:!0,get:function(){return zA.diag}});var IA=eV();Object.defineProperty(vD,"metrics",{enumerable:!0,get:function(){return IA.metrics}});var TA=qA();Object.defineProperty(vD,"propagation",{enumerable:!0,get:function(){return TA.propagation}});var PA=NA();Object.defineProperty(vD,"trace",{enumerable:!0,get:function(){return PA.trace}});vD.default={context:LA.context,diag:zA.diag,metrics:IA.metrics,propagation:TA.propagation,trace:PA.trace}});function S5(D,{contentType:F,dataStreamVersion:$}){let B=new Headers(D!=null?D:{});if(!B.has("Content-Type"))B.set("Content-Type",F);if($!==void 0)B.set("X-Vercel-AI-Data-Stream",$);return B}function bA(D,{contentType:F,dataStreamVersion:$}){let B={};if(D!=null)for(let[J,Y]of Object.entries(D))B[J]=Y;if(B["Content-Type"]==null)B["Content-Type"]=F;if($!==void 0)B["X-Vercel-AI-Data-Stream"]=$;return B}function hA({response:D,status:F,statusText:$,headers:B,stream:J}){D.writeHead(F!=null?F:200,$,B);let Y=J.getReader();(async()=>{try{while(!0){let{done:Q,value:w}=await Y.read();if(Q)break;D.write(w)}}catch(Q){throw Q}finally{D.end()}})()}async function oA(D,{maxRetries:F,delayInMs:$,backoffFactor:B},J=[]){try{return await D()}catch(Y){if(f$(Y))throw Y;if(F===0)throw Y;let X=dE(Y),Q=[...J,Y],w=Q.length;if(w>F)throw new SA({message:`Failed after ${w} attempts. Last error: ${X}`,reason:"maxRetriesExceeded",errors:Q});if(Y instanceof Error&&KF.isInstance(Y)&&Y.isRetryable===!0&&w<=F)return await iE($),oA(D,{maxRetries:F,delayInMs:B*$,backoffFactor:B},Q);if(w===1)throw Y;throw new SA({message:`Failed after ${w} attempts with non-retryable error: '${X}'`,reason:"errorNotRetryable",errors:Q})}}function rA({maxRetries:D}){if(D!=null){if(!Number.isInteger(D))throw new nF({parameter:"maxRetries",value:D,message:"maxRetries must be an integer"});if(D<0)throw new nF({parameter:"maxRetries",value:D,message:"maxRetries must be >= 0"})}let F=D!=null?D:2;return{maxRetries:F,retry:xx({maxRetries:F})}}function v7({operationId:D,telemetry:F}){return{"operation.name":`${D}${(F==null?void 0:F.functionId)!=null?` ${F.functionId}`:""}`,"resource.name":F==null?void 0:F.functionId,"ai.operationId":D,"ai.telemetry.functionId":F==null?void 0:F.functionId}}function tA({model:D,settings:F,telemetry:$,headers:B}){var J;return{"ai.model.provider":D.provider,"ai.model.id":D.modelId,...Object.entries(F).reduce((Y,[X,Q])=>{return Y[`ai.settings.${X}`]=Q,Y},{}),...Object.entries((J=$==null?void 0:$.metadata)!=null?J:{}).reduce((Y,[X,Q])=>{return Y[`ai.telemetry.metadata.${X}`]=Q,Y},{}),...Object.entries(B!=null?B:{}).reduce((Y,[X,Q])=>{if(Q!==void 0)Y[`ai.request.headers.${X}`]=Q;return Y},{})}}function aA({isEnabled:D=!1,tracer:F}={}){if(!D)return kx;if(F)return F;return sA.trace.getTracer("ai")}function g7({name:D,tracer:F,attributes:$,fn:B,endWhenDone:J=!0}){return F.startActiveSpan(D,{attributes:$},async(Y)=>{try{let X=await B(Y);if(J)Y.end();return X}catch(X){try{if(X instanceof Error)Y.recordException({name:X.name,message:X.message,stack:X.stack}),Y.setStatus({code:C4.SpanStatusCode.ERROR,message:X.message});else Y.setStatus({code:C4.SpanStatusCode.ERROR})}finally{Y.end()}throw X}})}function oF({telemetry:D,attributes:F}){if((D==null?void 0:D.isEnabled)!==!0)return{};return Object.entries(F).reduce(($,[B,J])=>{if(J===void 0)return $;if(typeof J==="object"&&"input"in J&&typeof J.input==="function"){if((D==null?void 0:D.recordInputs)===!1)return $;let Y=J.input();return Y===void 0?$:{...$,[B]:Y}}if(typeof J==="object"&&"output"in J&&typeof J.output==="function"){if((D==null?void 0:D.recordOutputs)===!1)return $;let Y=J.output();return Y===void 0?$:{...$,[B]:Y}}return{...$,[B]:J}},{})}function lx(D){return typeof D==="string"&&D.startsWith("SUQz")||typeof D!=="string"&&D.length>10&&D[0]===73&&D[1]===68&&D[2]===51?dx(D):D}function nx({data:D,signatures:F}){let $=lx(D);for(let B of F)if(typeof $==="string"?$.startsWith(B.base64Prefix):$.length>=B.bytesPrefix.length&&B.bytesPrefix.every((J,Y)=>$[Y]===J))return B.mimeType;return}async function tx({url:D}){var F;let $=D.toString();try{let B=await fetch($);if(!B.ok)throw new O4({url:$,statusCode:B.status,statusText:B.statusText});return{data:new Uint8Array(await B.arrayBuffer()),mimeType:(F=B.headers.get("content-type"))!=null?F:void 0}}catch(B){if(O4.isInstance(B))throw B;throw new O4({url:$,cause:B})}}function z4(D){if(typeof D==="string")return D;if(D instanceof ArrayBuffer)return T8(new Uint8Array(D));return T8(D)}function y5(D){if(D instanceof Uint8Array)return D;if(typeof D==="string")try{return S7(D)}catch(F){throw new xA({message:"Invalid data content. Content string is not a base64-encoded media.",content:D,cause:F})}if(D instanceof ArrayBuffer)return new Uint8Array(D);throw new xA({content:D})}function ax(D){try{return new TextDecoder().decode(D)}catch(F){throw new Error("Error decoding Uint8Array to text")}}function Fk(D){try{let[F,$]=D.split(",");return{mimeType:F.split(";")[0].split(":")[1],base64Content:$}}catch(F){return{mimeType:void 0,base64Content:void 0}}}async function EO({prompt:D,modelSupportsImageUrls:F=!0,modelSupportsUrl:$=()=>!1,downloadImplementation:B=tx}){let J=await Bk(D.messages,B,F,$);return[...D.system!=null?[{role:"system",content:D.system}]:[],...D.messages.map((Y)=>$k(Y,J))]}function $k(D,F){var $,B,J,Y,X,Q;let w=D.role;switch(w){case"system":return{role:"system",content:D.content,providerMetadata:($=D.providerOptions)!=null?$:D.experimental_providerMetadata};case"user":{if(typeof D.content==="string")return{role:"user",content:[{type:"text",text:D.content}],providerMetadata:(B=D.providerOptions)!=null?B:D.experimental_providerMetadata};return{role:"user",content:D.content.map((f)=>Jk(f,F)).filter((f)=>f.type!=="text"||f.text!==""),providerMetadata:(J=D.providerOptions)!=null?J:D.experimental_providerMetadata}}case"assistant":{if(typeof D.content==="string")return{role:"assistant",content:[{type:"text",text:D.content}],providerMetadata:(Y=D.providerOptions)!=null?Y:D.experimental_providerMetadata};return{role:"assistant",content:D.content.filter((f)=>f.type!=="text"||f.text!=="").map((f)=>{var G;let H=(G=f.providerOptions)!=null?G:f.experimental_providerMetadata;switch(f.type){case"file":return{type:"file",data:f.data instanceof URL?f.data:z4(f.data),filename:f.filename,mimeType:f.mimeType,providerMetadata:H};case"reasoning":return{type:"reasoning",text:f.text,signature:f.signature,providerMetadata:H};case"redacted-reasoning":return{type:"redacted-reasoning",data:f.data,providerMetadata:H};case"text":return{type:"text",text:f.text,providerMetadata:H};case"tool-call":return{type:"tool-call",toolCallId:f.toolCallId,toolName:f.toolName,args:f.args,providerMetadata:H}}}),providerMetadata:(X=D.providerOptions)!=null?X:D.experimental_providerMetadata}}case"tool":return{role:"tool",content:D.content.map((f)=>{var G;return{type:"tool-result",toolCallId:f.toolCallId,toolName:f.toolName,result:f.result,content:f.experimental_content,isError:f.isError,providerMetadata:(G=f.providerOptions)!=null?G:f.experimental_providerMetadata}}),providerMetadata:(Q=D.providerOptions)!=null?Q:D.experimental_providerMetadata};default:throw new Dk({role:w})}}async function Bk(D,F,$,B){let J=D.filter((X)=>X.role==="user").map((X)=>X.content).filter((X)=>Array.isArray(X)).flat().filter((X)=>X.type==="image"||X.type==="file").filter((X)=>!(X.type==="image"&&$===!0)).map((X)=>X.type==="image"?X.image:X.data).map((X)=>typeof X==="string"&&(X.startsWith("http:")||X.startsWith("https:"))?new URL(X):X).filter((X)=>X instanceof URL).filter((X)=>!B(X)),Y=await Promise.all(J.map(async(X)=>({url:X,data:await F({url:X})})));return Object.fromEntries(Y.map(({url:X,data:Q})=>[X.toString(),Q]))}function Jk(D,F){var $,B,J,Y;if(D.type==="text")return{type:"text",text:D.text,providerMetadata:($=D.providerOptions)!=null?$:D.experimental_providerMetadata};let X=D.mimeType,Q,w,f,G=D.type;switch(G){case"image":Q=D.image;break;case"file":Q=D.data;break;default:throw new Error(`Unsupported part type: ${G}`)}try{w=typeof Q==="string"?new URL(Q):Q}catch(H){w=Q}if(w instanceof URL)if(w.protocol==="data:"){let{mimeType:H,base64Content:K}=Fk(w.toString());if(H==null||K==null)throw new Error(`Invalid data URL format in part ${G}`);X=H,f=y5(K)}else{let H=F[w.toString()];if(H)f=H.data,X!=null||(X=H.mimeType);else f=w}else f=y5(w);switch(G){case"image":{if(f instanceof Uint8Array)X=(B=nx({data:f,signatures:ix}))!=null?B:X;return{type:"image",image:f,mimeType:X,providerMetadata:(J=D.providerOptions)!=null?J:D.experimental_providerMetadata}}case"file":{if(X==null)throw new Error("Mime type is missing for file part");return{type:"file",data:f instanceof Uint8Array?z4(f):f,filename:D.filename,mimeType:X,providerMetadata:(Y=D.providerOptions)!=null?Y:D.experimental_providerMetadata}}}}function KO({maxTokens:D,temperature:F,topP:$,topK:B,presencePenalty:J,frequencyPenalty:Y,stopSequences:X,seed:Q}){if(D!=null){if(!Number.isInteger(D))throw new nF({parameter:"maxTokens",value:D,message:"maxTokens must be an integer"});if(D<1)throw new nF({parameter:"maxTokens",value:D,message:"maxTokens must be >= 1"})}if(F!=null){if(typeof F!=="number")throw new nF({parameter:"temperature",value:F,message:"temperature must be a number"})}if($!=null){if(typeof $!=="number")throw new nF({parameter:"topP",value:$,message:"topP must be a number"})}if(B!=null){if(typeof B!=="number")throw new nF({parameter:"topK",value:B,message:"topK must be a number"})}if(J!=null){if(typeof J!=="number")throw new nF({parameter:"presencePenalty",value:J,message:"presencePenalty must be a number"})}if(Y!=null){if(typeof Y!=="number")throw new nF({parameter:"frequencyPenalty",value:Y,message:"frequencyPenalty must be a number"})}if(Q!=null){if(!Number.isInteger(Q))throw new nF({parameter:"seed",value:Q,message:"seed must be an integer"})}return{maxTokens:D,temperature:F,topP:$,topK:B,presencePenalty:J,frequencyPenalty:Y,stopSequences:X!=null&&X.length>0?X:void 0,seed:Q}}function kA(D){var F,$,B;let J=[];for(let Y of D){let X;try{X=new URL(Y.url)}catch(Q){throw new Error(`Invalid URL: ${Y.url}`)}switch(X.protocol){case"http:":case"https:":{if((F=Y.contentType)==null?void 0:F.startsWith("image/"))J.push({type:"image",image:X});else{if(!Y.contentType)throw new Error("If the attachment is not an image, it must specify a content type");J.push({type:"file",data:X,mimeType:Y.contentType})}break}case"data:":{let Q,w,f;try{[Q,w]=Y.url.split(","),f=Q.split(";")[0].split(":")[1]}catch(G){throw new Error(`Error processing data URL: ${Y.url}`)}if(f==null||w==null)throw new Error(`Invalid data URL format: ${Y.url}`);if(($=Y.contentType)==null?void 0:$.startsWith("image/"))J.push({type:"image",image:y5(w)});else if((B=Y.contentType)==null?void 0:B.startsWith("text/"))J.push({type:"text",text:ax(y5(w))});else{if(!Y.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");J.push({type:"file",data:w,mimeType:Y.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${X.protocol}`)}}return J}function N$(D,F){var $,B;let J=($=F==null?void 0:F.tools)!=null?$:{},Y=[];for(let Q=0;Q<D.length;Q++){let w=D[Q],f=Q===D.length-1,{role:G,content:H,experimental_attachments:K}=w;switch(G){case"system":{Y.push({role:"system",content:H});break}case"user":{if(w.parts==null)Y.push({role:"user",content:K?[{type:"text",text:H},...kA(K)]:H});else{let E=w.parts.filter((O)=>O.type==="text").map((O)=>({type:"text",text:O.text}));Y.push({role:"user",content:K?[...E,...kA(K)]:E})}break}case"assistant":{if(w.parts!=null){let q=function(){let C=[];for(let I of L)switch(I.type){case"file":case"text":{C.push(I);break}case"reasoning":{for(let h of I.details)switch(h.type){case"text":C.push({type:"reasoning",text:h.text,signature:h.signature});break;case"redacted":C.push({type:"redacted-reasoning",data:h.data});break}break}case"tool-invocation":C.push({type:"tool-call",toolCallId:I.toolInvocation.toolCallId,toolName:I.toolInvocation.toolName,args:I.toolInvocation.args});break;default:throw new Error(`Unsupported part: ${I}`)}Y.push({role:"assistant",content:C});let R=L.filter((I)=>I.type==="tool-invocation").map((I)=>I.toolInvocation);if(R.length>0)Y.push({role:"tool",content:R.map((I)=>{if(!("result"in I))throw new j4({originalMessage:w,message:"ToolInvocation must have a result: "+JSON.stringify(I)});let{toolCallId:h,toolName:p,result:P}=I,v=J[p];return(v==null?void 0:v.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:h,toolName:p,result:v.experimental_toToolResultContent(P),experimental_content:v.experimental_toToolResultContent(P)}:{type:"tool-result",toolCallId:h,toolName:p,result:P}})});L=[],N=!1,U++};var X=q;let U=0,N=!1,L=[];for(let C of w.parts)switch(C.type){case"text":{if(N)q();L.push(C);break}case"file":case"reasoning":{L.push(C);break}case"tool-invocation":{if(((B=C.toolInvocation.step)!=null?B:0)!==U)q();L.push(C),N=!0;break}}q();break}let E=w.toolInvocations;if(E==null||E.length===0){Y.push({role:"assistant",content:H});break}let O=E.reduce((q,U)=>{var N;return Math.max(q,(N=U.step)!=null?N:0)},0);for(let q=0;q<=O;q++){let U=E.filter((N)=>{var L;return((L=N.step)!=null?L:0)===q});if(U.length===0)continue;Y.push({role:"assistant",content:[...f&&H&&q===0?[{type:"text",text:H}]:[],...U.map(({toolCallId:N,toolName:L,args:C})=>({type:"tool-call",toolCallId:N,toolName:L,args:C}))]}),Y.push({role:"tool",content:U.map((N)=>{if(!("result"in N))throw new j4({originalMessage:w,message:"ToolInvocation must have a result: "+JSON.stringify(N)});let{toolCallId:L,toolName:C,result:R}=N,I=J[C];return(I==null?void 0:I.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:L,toolName:C,result:I.experimental_toToolResultContent(R),experimental_content:I.experimental_toToolResultContent(R)}:{type:"tool-result",toolCallId:L,toolName:C,result:R}})})}if(H&&!f)Y.push({role:"assistant",content:H});break}case"data":break;default:throw new j4({originalMessage:w,message:`Unsupported role: ${G}`})}}return Y}function UO({prompt:D,tools:F}){if(D.prompt==null&&D.messages==null)throw new P2({prompt:D,message:"prompt or messages must be defined"});if(D.prompt!=null&&D.messages!=null)throw new P2({prompt:D,message:"prompt and messages cannot be defined at the same time"});if(D.system!=null&&typeof D.system!=="string")throw new P2({prompt:D,message:"system must be a string"});if(D.prompt!=null){if(typeof D.prompt!=="string")throw new P2({prompt:D,message:"prompt must be a string"});return{type:"prompt",system:D.system,messages:[{role:"user",content:D.prompt}]}}if(D.messages!=null){let B=Ak(D.messages)==="ui-messages"?N$(D.messages,{tools:F}):D.messages;if(B.length===0)throw new P2({prompt:D,message:"messages must not be empty"});let J=X6({value:B,schema:W.array(Vk)});if(!J.success)throw new P2({prompt:D,message:["message must be a CoreMessage or a UI message",`Validation error: ${J.error.message}`].join(`
`),cause:J.error});return{type:"messages",messages:B,system:D.system}}throw new Error("unreachable")}function Ak(D){if(!Array.isArray(D))throw new P2({prompt:D,message:["messages must be an array of CoreMessage or UIMessage",`Received non-array value: ${JSON.stringify(D)}`].join(`
`),cause:D});if(D.length===0)return"messages";let F=D.map(Ok);if(F.some((B)=>B==="has-ui-specific-parts"))return"ui-messages";let $=F.findIndex((B)=>B!=="has-core-specific-parts"&&B!=="message");if($===-1)return"messages";throw new P2({prompt:D,message:["messages must be an array of CoreMessage or UIMessage",`Received message of type: "${F[$]}" at index ${$}`,`messages[${$}]: ${JSON.stringify(D[$])}`].join(`
`),cause:D})}function Ok(D){if(typeof D==="object"&&D!==null&&(D.role==="function"||D.role==="data"||("toolInvocations"in D)||("parts"in D)||("experimental_attachments"in D)))return"has-ui-specific-parts";else if(typeof D==="object"&&D!==null&&"content"in D&&(Array.isArray(D.content)||("experimental_providerMetadata"in D)||("providerOptions"in D)))return"has-core-specific-parts";else if(typeof D==="object"&&D!==null&&"role"in D&&"content"in D&&typeof D.content==="string"&&["system","user","assistant","tool"].includes(D.role))return"message";else return"other"}function RO({promptTokens:D,completionTokens:F}){return{promptTokens:D,completionTokens:F,totalTokens:D+F}}function CO(D,F){return{promptTokens:D.promptTokens+F.promptTokens,completionTokens:D.completionTokens+F.completionTokens,totalTokens:D.totalTokens+F.totalTokens}}function Ck({prompt:D,schema:F,schemaPrefix:$=F!=null?jk:void 0,schemaSuffix:B=F!=null?Uk:Rk}){return[D!=null&&D.length>0?D:void 0,D!=null&&D.length>0?"":void 0,$,F!=null?JSON.stringify(F):void 0,B].filter((J)=>J!=null).join(`
`)}function U4(D){let F=D.pipeThrough(new TransformStream);return F[Symbol.asyncIterator]=()=>{let $=F.getReader();return{async next(){let{done:B,value:J}=await $.read();return B?{done:!0,value:void 0}:{done:!1,value:J}}}},F}function ZO(D){let F=D.map(($)=>{return{...$,content:typeof $.content==="string"?$.content:$.content.map(Zk)}});return JSON.stringify(F)}function Zk(D){if(D.type==="image")return{...D,image:D.image instanceof Uint8Array?z4(D.image):D.image};return D}function uA(){let D,F;return{promise:new Promise((B,J)=>{D=B,F=J}),resolve:D,reject:F}}function Nk(){let D=[],F=null,$=!1,B=uA(),J=async()=>{if($&&D.length===0){F==null||F.close();return}if(D.length===0)return B=uA(),await B.promise,J();try{let{value:Y,done:X}=await D[0].read();if(X){if(D.shift(),D.length>0)await J();else if($)F==null||F.close()}else F==null||F.enqueue(Y)}catch(Y){if(F==null||F.error(Y),D.shift(),$&&D.length===0)F==null||F.close()}};return{stream:new ReadableStream({start(Y){F=Y},pull:J,async cancel(){for(let Y of D)await Y.cancel();D=[],$=!0}}),addStream:(Y)=>{if($)throw new Error("Cannot add inner stream: outer stream is closed");D.push(Y.getReader()),B.resolve()},close:()=>{if($=!0,B.resolve(),D.length===0)F==null||F.close()},terminate:()=>{$=!0,B.resolve(),D.forEach((Y)=>Y.cancel()),D=[],F==null||F.close()}}}function Mk(){var D,F;return(F=(D=globalThis==null?void 0:globalThis.performance)==null?void 0:D.now())!=null?F:Date.now()}function zk(D){return D!=null&&Object.keys(D).length>0}function bO({tools:D,toolChoice:F,activeTools:$}){if(!zk(D))return{tools:void 0,toolChoice:void 0};return{tools:($!=null?Object.entries(D).filter(([J])=>$.includes(J)):Object.entries(D)).map(([J,Y])=>{let X=Y.type;switch(X){case void 0:case"function":return{type:"function",name:J,description:Y.description,parameters:P8(Y.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:J,id:Y.id,args:Y.args};default:throw new Error(`Unsupported tool type: ${X}`)}}),toolChoice:F==null?{type:"auto"}:typeof F==="string"?{type:F}:{type:"tool",toolName:F.toolName}}}function hO(D){let F=D.match(Ik);return F?{prefix:F[1],whitespace:F[2],suffix:F[3]}:void 0}function Tk(D){let F=hO(D);return F?F.prefix+F.whitespace:D}async function iO({toolCall:D,tools:F,repairToolCall:$,system:B,messages:J}){if(F==null)throw new N4({toolName:D.toolName});try{return await vA({toolCall:D,tools:F})}catch(Y){if($==null||!(N4.isInstance(Y)||kO.isInstance(Y)))throw Y;let X=null;try{X=await $({toolCall:D,tools:F,parameterSchema:({toolName:Q})=>P8(F[Q].parameters).jsonSchema,system:B,messages:J,error:Y})}catch(Q){throw new Sk({cause:Q,originalError:Y})}if(X==null)throw Y;return await vA({toolCall:X,tools:F})}}async function vA({toolCall:D,tools:F}){let $=D.toolName,B=F[$];if(B==null)throw new N4({toolName:D.toolName,availableTools:Object.keys(F)});let J=P8(B.parameters),Y=D.args.trim()===""?X6({value:{},schema:J}):b2({text:D.args,schema:J});if(Y.success===!1)throw new kO({toolName:$,toolArgs:D.args,cause:Y.error});return{type:"tool-call",toolCallId:D.toolCallId,toolName:$,args:Y.value}}function M4(D){let F=D.filter(($)=>$.type==="text").map(($)=>$.text).join("");return F.length>0?F:void 0}function _4({text:D="",files:F,reasoning:$,tools:B,toolCalls:J,toolResults:Y,messageId:X,generateMessageId:Q}){let w=[],f=[];if($.length>0)f.push(...$.map((G)=>G.type==="text"?{...G,type:"reasoning"}:{...G,type:"redacted-reasoning"}));if(F.length>0)f.push(...F.map((G)=>({type:"file",data:G.base64,mimeType:G.mimeType})));if(D.length>0)f.push({type:"text",text:D});if(J.length>0)f.push(...J);if(f.length>0)w.push({role:"assistant",content:f,id:X});if(Y.length>0)w.push({role:"tool",id:Q(),content:Y.map((G)=>{let H=B[G.toolName];return(H==null?void 0:H.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:G.toolCallId,toolName:G.toolName,result:H.experimental_toToolResultContent(G.result),experimental_content:H.experimental_toToolResultContent(G.result)}:{type:"tool-result",toolCallId:G.toolCallId,toolName:G.toolName,result:G.result}})});return w}async function x5({model:D,tools:F,toolChoice:$,system:B,prompt:J,messages:Y,maxRetries:X,abortSignal:Q,headers:w,maxSteps:f=1,experimental_generateMessageId:G=xk,experimental_output:H,experimental_continueSteps:K=!1,experimental_telemetry:E,experimental_providerMetadata:O,providerOptions:q=O,experimental_activeTools:U,experimental_prepareStep:N,experimental_repairToolCall:L,_internal:{generateId:C=yk,currentDate:R=()=>new Date}={},onStepFinish:I,...h}){var p;if(f<1)throw new nF({parameter:"maxSteps",value:f,message:"maxSteps must be at least 1"});let{maxRetries:P,retry:v}=rA({maxRetries:X}),n=tA({model:D,telemetry:E,headers:w,settings:{...h,maxRetries:P}}),_=UO({prompt:{system:(p=H==null?void 0:H.injectIntoSystemPrompt({system:B,model:D}))!=null?p:B,prompt:J,messages:Y},tools:F}),x=aA(E);return g7({name:"ai.generateText",attributes:oF({telemetry:E,attributes:{...v7({operationId:"ai.generateText",telemetry:E}),...n,"ai.model.provider":D.provider,"ai.model.id":D.modelId,"ai.prompt":{input:()=>JSON.stringify({system:B,prompt:J,messages:Y})},"ai.settings.maxSteps":f}}),tracer:x,fn:async(o)=>{var M,r,$0,V0,s0,U0,A0,PD,zD,W0,a,mD,G0,YD;let T0=KO(h),Y0,WD=[],UD=[],l=[],_D=0,b=[],y="",c=[],g=[],S={completionTokens:0,promptTokens:0,totalTokens:0},u="initial";do{let D0=_D===0?_.type:"messages",H0=[..._.messages,...b],g0=await(N==null?void 0:N({model:D,steps:g,maxSteps:f,stepNumber:_D})),z0=(M=g0==null?void 0:g0.toolChoice)!=null?M:$,WF=(r=g0==null?void 0:g0.experimental_activeTools)!=null?r:U,ED=($0=g0==null?void 0:g0.model)!=null?$0:D,Z1=await EO({prompt:{type:D0,system:_.system,messages:H0},modelSupportsImageUrls:ED.supportsImageUrls,modelSupportsUrl:(V0=ED.supportsUrl)==null?void 0:V0.bind(ED)}),q1={type:"regular",...bO({tools:F,toolChoice:z0,activeTools:WF})};Y0=await v(()=>g7({name:"ai.generateText.doGenerate",attributes:oF({telemetry:E,attributes:{...v7({operationId:"ai.generateText.doGenerate",telemetry:E}),...n,"ai.model.provider":ED.provider,"ai.model.id":ED.modelId,"ai.prompt.format":{input:()=>D0},"ai.prompt.messages":{input:()=>ZO(Z1)},"ai.prompt.tools":{input:()=>{var f0;return(f0=q1.tools)==null?void 0:f0.map((x0)=>JSON.stringify(x0))}},"ai.prompt.toolChoice":{input:()=>q1.toolChoice!=null?JSON.stringify(q1.toolChoice):void 0},"gen_ai.system":ED.provider,"gen_ai.request.model":ED.modelId,"gen_ai.request.frequency_penalty":h.frequencyPenalty,"gen_ai.request.max_tokens":h.maxTokens,"gen_ai.request.presence_penalty":h.presencePenalty,"gen_ai.request.stop_sequences":h.stopSequences,"gen_ai.request.temperature":h.temperature,"gen_ai.request.top_k":h.topK,"gen_ai.request.top_p":h.topP}}),tracer:x,fn:async(f0)=>{var x0,KD,d0,RD,l0,j0;let VD=await ED.doGenerate({mode:q1,...T0,inputFormat:D0,responseFormat:H==null?void 0:H.responseFormat({model:D}),prompt:Z1,providerMetadata:q,abortSignal:Q,headers:w}),sD={id:(KD=(x0=VD.response)==null?void 0:x0.id)!=null?KD:C(),timestamp:(RD=(d0=VD.response)==null?void 0:d0.timestamp)!=null?RD:R(),modelId:(j0=(l0=VD.response)==null?void 0:l0.modelId)!=null?j0:ED.modelId};return f0.setAttributes(oF({telemetry:E,attributes:{"ai.response.finishReason":VD.finishReason,"ai.response.text":{output:()=>VD.text},"ai.response.toolCalls":{output:()=>JSON.stringify(VD.toolCalls)},"ai.response.id":sD.id,"ai.response.model":sD.modelId,"ai.response.timestamp":sD.timestamp.toISOString(),"ai.usage.promptTokens":VD.usage.promptTokens,"ai.usage.completionTokens":VD.usage.completionTokens,"gen_ai.response.finish_reasons":[VD.finishReason],"gen_ai.response.id":sD.id,"gen_ai.response.model":sD.modelId,"gen_ai.usage.input_tokens":VD.usage.promptTokens,"gen_ai.usage.output_tokens":VD.usage.completionTokens}})),{...VD,response:sD}}})),WD=await Promise.all(((s0=Y0.toolCalls)!=null?s0:[]).map((f0)=>iO({toolCall:f0,tools:F,repairToolCall:L,system:B,messages:H0}))),UD=F==null?[]:await kk({toolCalls:WD,tools:F,tracer:x,telemetry:E,messages:H0,abortSignal:Q});let P1=RO(Y0.usage);S=CO(S,P1);let T="done";if(++_D<f){if(K&&Y0.finishReason==="length"&&WD.length===0)T="continue";else if(WD.length>0&&UD.length===WD.length)T="tool-result"}let i=(U0=Y0.text)!=null?U0:"",Q0=u==="continue"&&y.trimEnd()!==y?i.trimStart():i,O0=T==="continue"?Tk(Q0):Q0;if(y=T==="continue"||u==="continue"?y+O0:O0,l=gA(Y0.reasoning),c.push(...(A0=Y0.sources)!=null?A0:[]),u==="continue"){let f0=b[b.length-1];if(typeof f0.content==="string")f0.content+=O0;else f0.content.push({text:O0,type:"text"})}else b.push(..._4({text:y,files:R4(Y0.files),reasoning:gA(Y0.reasoning),tools:F!=null?F:{},toolCalls:WD,toolResults:UD,messageId:G(),generateMessageId:G}));let M0={stepType:u,text:O0,reasoning:M4(l),reasoningDetails:l,files:R4(Y0.files),sources:(PD=Y0.sources)!=null?PD:[],toolCalls:WD,toolResults:UD,finishReason:Y0.finishReason,usage:P1,warnings:Y0.warnings,logprobs:Y0.logprobs,request:(zD=Y0.request)!=null?zD:{},response:{...Y0.response,headers:(W0=Y0.rawResponse)==null?void 0:W0.headers,body:(a=Y0.rawResponse)==null?void 0:a.body,messages:structuredClone(b)},providerMetadata:Y0.providerMetadata,experimental_providerMetadata:Y0.providerMetadata,isContinued:T==="continue"};g.push(M0),await(I==null?void 0:I(M0)),u=T}while(u!=="done");return o.setAttributes(oF({telemetry:E,attributes:{"ai.response.finishReason":Y0.finishReason,"ai.response.text":{output:()=>Y0.text},"ai.response.toolCalls":{output:()=>JSON.stringify(Y0.toolCalls)},"ai.usage.promptTokens":Y0.usage.promptTokens,"ai.usage.completionTokens":Y0.usage.completionTokens}})),new uk({text:y,files:R4(Y0.files),reasoning:M4(l),reasoningDetails:l,sources:c,outputResolver:()=>{if(H==null)throw new LO;return H.parseOutput({text:y},{response:Y0.response,usage:S,finishReason:Y0.finishReason})},toolCalls:WD,toolResults:UD,finishReason:Y0.finishReason,usage:S,warnings:Y0.warnings,request:(mD=Y0.request)!=null?mD:{},response:{...Y0.response,headers:(G0=Y0.rawResponse)==null?void 0:G0.headers,body:(YD=Y0.rawResponse)==null?void 0:YD.body,messages:b},logprobs:Y0.logprobs,steps:g,providerMetadata:Y0.providerMetadata})}})}async function kk({toolCalls:D,tools:F,tracer:$,telemetry:B,messages:J,abortSignal:Y}){return(await Promise.all(D.map(async({toolCallId:Q,toolName:w,args:f})=>{let G=F[w];if((G==null?void 0:G.execute)==null)return;let H=await g7({name:"ai.toolCall",attributes:oF({telemetry:B,attributes:{...v7({operationId:"ai.toolCall",telemetry:B}),"ai.toolCall.name":w,"ai.toolCall.id":Q,"ai.toolCall.args":{output:()=>JSON.stringify(f)}}}),tracer:$,fn:async(K)=>{try{let E=await G.execute(f,{toolCallId:Q,messages:J,abortSignal:Y});try{K.setAttributes(oF({telemetry:B,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(E)}}}))}catch(O){}return E}catch(E){throw new PO({toolCallId:Q,toolName:w,toolArgs:f,cause:E})}}});return{type:"tool-result",toolCallId:Q,toolName:w,args:f,result:H}}))).filter((Q)=>Q!=null)}function gA(D){if(D==null)return[];if(typeof D==="string")return[{type:"text",text:D}];return D}function R4(D){var F;return(F=D==null?void 0:D.map(($)=>new eA($)))!=null?F:[]}function tO(D){return D===void 0?[]:Array.isArray(D)?D:[D]}async function lk({stream:D,onError:F}){let $=D.getReader();try{while(!0){let{done:B}=await $.read();if(B)break}}catch(B){F==null||F(B)}finally{$.releaseLock()}}function I4(D,F){let $=D.getReader(),B=F.getReader(),J=void 0,Y=void 0,X=!1,Q=!1;async function w(G){try{if(J==null)J=$.read();let H=await J;if(J=void 0,!H.done)G.enqueue(H.value);else G.close()}catch(H){G.error(H)}}async function f(G){try{if(Y==null)Y=B.read();let H=await Y;if(Y=void 0,!H.done)G.enqueue(H.value);else G.close()}catch(H){G.error(H)}}return new ReadableStream({async pull(G){try{if(X){await f(G);return}if(Q){await w(G);return}if(J==null)J=$.read();if(Y==null)Y=B.read();let{result:H,reader:K}=await Promise.race([J.then((E)=>({result:E,reader:$})),Y.then((E)=>({result:E,reader:B}))]);if(!H.done)G.enqueue(H.value);if(K===$){if(J=void 0,H.done)await f(G),X=!0}else if(Y=void 0,H.done)Q=!0,await w(G)}catch(H){G.error(H)}},cancel(){$.cancel(),B.cancel()}})}function nk({tools:D,generatorStream:F,toolCallStreaming:$,tracer:B,telemetry:J,system:Y,messages:X,abortSignal:Q,repairToolCall:w}){let f=null,G=new ReadableStream({start(N){f=N}}),H={},K=new Set,E=!1,O=void 0;function q(){if(E&&K.size===0){if(O!=null)f.enqueue(O);f.close()}}let U=new TransformStream({async transform(N,L){let C=N.type;switch(C){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{L.enqueue(N);break}case"file":{L.enqueue(new px({data:N.data,mimeType:N.mimeType}));break}case"tool-call-delta":{if($){if(!H[N.toolCallId])L.enqueue({type:"tool-call-streaming-start",toolCallId:N.toolCallId,toolName:N.toolName}),H[N.toolCallId]=!0;L.enqueue({type:"tool-call-delta",toolCallId:N.toolCallId,toolName:N.toolName,argsTextDelta:N.argsTextDelta})}break}case"tool-call":{try{let R=await iO({toolCall:N,tools:D,repairToolCall:w,system:Y,messages:X});L.enqueue(R);let I=D[R.toolName];if(I.execute!=null){let h=rX();K.add(h),g7({name:"ai.toolCall",attributes:oF({telemetry:J,attributes:{...v7({operationId:"ai.toolCall",telemetry:J}),"ai.toolCall.name":R.toolName,"ai.toolCall.id":R.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(R.args)}}}),tracer:B,fn:async(p)=>I.execute(R.args,{toolCallId:R.toolCallId,messages:X,abortSignal:Q}).then((P)=>{f.enqueue({...R,type:"tool-result",result:P}),K.delete(h),q();try{p.setAttributes(oF({telemetry:J,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(P)}}}))}catch(v){}},(P)=>{f.enqueue({type:"error",error:new PO({toolCallId:R.toolCallId,toolName:R.toolName,toolArgs:R.args,cause:P})}),K.delete(h),q()})})}}catch(R){f.enqueue({type:"error",error:R})}break}case"finish":{O={type:"finish",finishReason:N.finishReason,logprobs:N.logprobs,usage:RO(N.usage),experimental_providerMetadata:N.providerMetadata};break}default:throw new Error(`Unhandled chunk type: ${C}`)}},flush(){E=!0,q()}});return new ReadableStream({async start(N){return Promise.all([F.pipeThrough(U).pipeTo(new WritableStream({write(L){N.enqueue(L)},close(){}})),G.pipeTo(new WritableStream({write(L){N.enqueue(L)},close(){N.close()}}))])}})}function T4({model:D,tools:F,toolChoice:$,system:B,prompt:J,messages:Y,maxRetries:X,abortSignal:Q,headers:w,maxSteps:f=1,experimental_generateMessageId:G=rk,experimental_output:H,experimental_continueSteps:K=!1,experimental_telemetry:E,experimental_providerMetadata:O,providerOptions:q=O,experimental_toolCallStreaming:U=!1,toolCallStreaming:N=U,experimental_activeTools:L,experimental_repairToolCall:C,experimental_transform:R,onChunk:I,onError:h,onFinish:p,onStepFinish:P,_internal:{now:v=Mk,generateId:n=ok,currentDate:_=()=>new Date}={},...x}){return new sk({model:D,telemetry:E,headers:w,settings:x,maxRetries:X,abortSignal:Q,system:B,prompt:J,messages:Y,tools:F,toolChoice:$,toolCallStreaming:N,transforms:tO(R),activeTools:L,repairToolCall:C,maxSteps:f,output:H,continueSteps:K,providerOptions:q,onChunk:I,onError:h,onFinish:p,onStepFinish:P,now:v,currentDate:_,generateId:n,generateMessageId:G})}function tk(D){if(!D)return new TransformStream({transform(Y,X){X.enqueue({part:Y,partialOutput:void 0})}});let F="",$="",B="";function J({controller:Y,partialOutput:X=void 0}){Y.enqueue({part:{type:"text-delta",textDelta:$},partialOutput:X}),$=""}return new TransformStream({transform(Y,X){if(Y.type==="step-finish")J({controller:X});if(Y.type!=="text-delta"){X.enqueue({part:Y,partialOutput:void 0});return}F+=Y.textDelta,$+=Y.textDelta;let Q=D.parsePartial({text:F});if(Q!=null){let w=JSON.stringify(Q.partial);if(w!==B)J({controller:X,partialOutput:Q.partial}),B=w}},flush(Y){if($.length>0)J({controller:Y})}})}function P4(D){return D}function Zu(D){if(D.type!=="sse")throw new S1({message:"Unsupported or invalid transport configuration. If you are using a custom transport, make sure it implements the MCPTransport interface."});return new Cu(D)}function Nu(D){return"start"in D&&typeof D.start==="function"&&"send"in D&&typeof D.send==="function"&&"close"in D&&typeof D.close==="function"}async function h4(D){let F=new _u(D);return await F.init(),F}function Dj(D={}){let F=new TextEncoder,$="";return new TransformStream({async start(){if(D.onStart)await D.onStart()},async transform(B,J){if(J.enqueue(F.encode(B)),$+=B,D.onToken)await D.onToken(B);if(D.onText&&typeof B==="string")await D.onText(B)},async flush(){if(D.onCompletion)await D.onCompletion($);if(D.onFinal)await D.onFinal($)}})}function S4(D,F){return D.pipeThrough(new TransformStream({transform:async($,B)=>{var J;if(typeof $==="string"){B.enqueue($);return}if("event"in $){if($.event==="on_chat_model_stream")mA((J=$.data)==null?void 0:J.chunk,B);return}mA($,B)}})).pipeThrough(Dj(F)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async($,B)=>{B.enqueue(M1("text",$))}}))}function zu(D,F){return S4(D,F).pipeThrough(new TextEncoderStream)}function Iu(D,F){var $;let B=S4(D,F==null?void 0:F.callbacks).pipeThrough(new TextEncoderStream),J=F==null?void 0:F.data,Y=F==null?void 0:F.init,X=J?I4(J.stream,B):B;return new Response(X,{status:($=Y==null?void 0:Y.status)!=null?$:200,statusText:Y==null?void 0:Y.statusText,headers:S5(Y==null?void 0:Y.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Tu(D,F){F.dataStream.merge(S4(D,F.callbacks))}function mA(D,F){if(typeof D.content==="string")F.enqueue(D.content);else{let $=D.content;for(let B of $)if(B.type==="text")F.enqueue(B.text)}}function y4(D,F){let $=yu();return pE(D[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(B,J){J.enqueue($(B.delta))}})).pipeThrough(Dj(F)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(B,J)=>{J.enqueue(M1("text",B))}}))}function bu(D,F){return y4(D,F).pipeThrough(new TextEncoderStream)}function hu(D,F={}){var $;let{init:B,data:J,callbacks:Y}=F,X=y4(D,Y).pipeThrough(new TextEncoderStream),Q=J?I4(J.stream,X):X;return new Response(Q,{status:($=B==null?void 0:B.status)!=null?$:200,statusText:B==null?void 0:B.statusText,headers:S5(B==null?void 0:B.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Su(D,F){F.dataStream.merge(y4(D,F.callbacks))}function yu(){let D=!0;return(F)=>{if(D){if(F=F.trimStart(),F)D=!1}return F}}var sA,C4,hx,L4=(D,F)=>{for(var $ in F)hx(D,$,{get:F[$],enumerable:!0})},cA="AI_InvalidArgumentError",pA,Sx,iA,nF,dA="AI_RetryError",lA,yx,nA,SA,xx=({maxRetries:D=2,initialDelayInMs:F=2000,backoffFactor:$=2}={})=>async(B)=>oA(B,{maxRetries:D,delayInMs:F,backoffFactor:$}),kx,h5,ux,vx="AI_NoImageGeneratedError",gx,mx,cx,eA=class{constructor({data:D,mimeType:F}){let $=D instanceof Uint8Array;this.base64Data=$?void 0:D,this.uint8ArrayData=$?D:void 0,this.mimeType=F}get base64(){if(this.base64Data==null)this.base64Data=T8(this.uint8ArrayData);return this.base64Data}get uint8Array(){if(this.uint8ArrayData==null)this.uint8ArrayData=S7(this.base64Data);return this.uint8ArrayData}},px,ix,dx=(D)=>{let F=typeof D==="string"?S7(D):D,$=(F[6]&127)<<21|(F[7]&127)<<14|(F[8]&127)<<7|F[9]&127;return F.slice($+10)},DO="AI_NoObjectGeneratedError",FO,ox,$O,yA,BO="AI_DownloadError",JO,rx,YO,O4,XO="AI_InvalidDataContentError",QO,sx,wO,xA,fO,WO="AI_InvalidMessageRoleError",GO,ex,HO,Dk,qO="AI_MessageConversionError",VO,Yk,AO,j4,Z4,W1,Xk,OO,Qk,jO,wk,fk,Wk,Gk,Hk,Ek,Kk,qk,Vk,jk="JSON schema:",Uk="You MUST answer with a JSON object that matches the JSON schema above.",Rk="You MUST answer with JSON.",f70,qF=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){if(this.promise)return this.promise;return this.promise=new Promise((D,F)=>{if(this.status.type==="resolved")D(this.status.value);else if(this.status.type==="rejected")F(this.status.error);this._resolve=D,this._reject=F}),this.promise}resolve(D){var F;if(this.status={type:"resolved",value:D},this.promise)(F=this._resolve)==null||F.call(this,D)}reject(D){var F;if(this.status={type:"rejected",error:D},this.promise)(F=this._reject)==null||F.call(this,D)}},G70,NO="AI_NoOutputSpecifiedError",MO,_k,_O,LO,zO="AI_ToolExecutionError",IO,Lk,TO,PO,Ik,SO="AI_InvalidToolArgumentsError",yO,Pk,xO,kO,uO="AI_NoSuchToolError",vO,bk,gO,N4,mO="AI_ToolCallRepairError",cO,hk,pO,Sk,yk,xk,uk=class{constructor(D){this.text=D.text,this.files=D.files,this.reasoning=D.reasoning,this.reasoningDetails=D.reasoningDetails,this.toolCalls=D.toolCalls,this.toolResults=D.toolResults,this.finishReason=D.finishReason,this.usage=D.usage,this.warnings=D.warnings,this.request=D.request,this.response=D.response,this.steps=D.steps,this.experimental_providerMetadata=D.providerMetadata,this.providerMetadata=D.providerMetadata,this.logprobs=D.logprobs,this.outputResolver=D.outputResolver,this.sources=D.sources}get experimental_output(){return this.outputResolver()}},vk,dO="AI_InvalidStreamPartError",lO,gk,nO,mk,ck="AI_MCPClientError",oO,pk,rO,S1,ik=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:D}){return D},parsePartial({text:D}){return{partial:D}},parseOutput({text:D}){return D}}),dk=({schema:D})=>{let F=P8(D);return{type:"object",responseFormat:({model:$})=>({type:"json",schema:$.supportsStructuredOutputs?F.jsonSchema:void 0}),injectIntoSystemPrompt({system:$,model:B}){return B.supportsStructuredOutputs?$:Ck({prompt:$,schema:F.jsonSchema})},parsePartial({text:$}){let B=xK($);switch(B.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:B.value};default:{let J=B.state;throw new Error(`Unsupported parse state: ${J}`)}}},parseOutput({text:$},B){let J=b2({text:$});if(!J.success)throw new yA({message:"No object generated: could not parse the response.",cause:J.error,text:$,response:B.response,usage:B.usage,finishReason:B.finishReason});let Y=X6({value:J.value,schema:F});if(!Y.success)throw new yA({message:"No object generated: response did not match schema.",cause:Y.error,text:$,response:B.response,usage:B.usage,finishReason:B.finishReason});return Y.value}}},ok,rk,sk=class{constructor({model:D,telemetry:F,headers:$,settings:B,maxRetries:J,abortSignal:Y,system:X,prompt:Q,messages:w,tools:f,toolChoice:G,toolCallStreaming:H,transforms:K,activeTools:E,repairToolCall:O,maxSteps:q,output:U,continueSteps:N,providerOptions:L,now:C,currentDate:R,generateId:I,generateMessageId:h,onChunk:p,onError:P,onFinish:v,onStepFinish:n}){this.warningsPromise=new qF,this.usagePromise=new qF,this.finishReasonPromise=new qF,this.providerMetadataPromise=new qF,this.textPromise=new qF,this.reasoningPromise=new qF,this.reasoningDetailsPromise=new qF,this.sourcesPromise=new qF,this.filesPromise=new qF,this.toolCallsPromise=new qF,this.toolResultsPromise=new qF,this.requestPromise=new qF,this.responsePromise=new qF,this.stepsPromise=new qF;var _;if(q<1)throw new nF({parameter:"maxSteps",value:q,message:"maxSteps must be at least 1"});this.output=U;let x="",o="",M="",r=[],$0=[],V0=void 0,s0=[],U0=[],A0={id:I(),timestamp:R(),modelId:D.modelId,messages:[]},PD=[],zD=[],W0=void 0,a=void 0,mD="initial",G0=[],YD,T0=new TransformStream({async transform(g,S){S.enqueue(g);let{part:u}=g;if(u.type==="text-delta"||u.type==="reasoning"||u.type==="source"||u.type==="tool-call"||u.type==="tool-result"||u.type==="tool-call-streaming-start"||u.type==="tool-call-delta")await(p==null?void 0:p({chunk:u}));if(u.type==="error")await(P==null?void 0:P({error:u.error}));if(u.type==="text-delta")x+=u.textDelta,o+=u.textDelta,M+=u.textDelta;if(u.type==="reasoning")if(V0==null)V0={type:"text",text:u.textDelta},r.push(V0);else V0.text+=u.textDelta;if(u.type==="reasoning-signature"){if(V0==null)throw new N0({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});V0.signature=u.signature,V0=void 0}if(u.type==="redacted-reasoning")r.push({type:"redacted",data:u.data});if(u.type==="file")$0.push(u);if(u.type==="source")U0.push(u.source),s0.push(u.source);if(u.type==="tool-call")PD.push(u);if(u.type==="tool-result")zD.push(u);if(u.type==="step-finish"){let D0=_4({text:o,files:$0,reasoning:r,tools:f!=null?f:{},toolCalls:PD,toolResults:zD,messageId:u.messageId,generateMessageId:h}),H0=G0.length,g0="done";if(H0+1<q){if(N&&u.finishReason==="length"&&PD.length===0)g0="continue";else if(PD.length>0&&zD.length===PD.length)g0="tool-result"}let z0={stepType:mD,text:x,reasoning:M4(r),reasoningDetails:r,files:$0,sources:s0,toolCalls:PD,toolResults:zD,finishReason:u.finishReason,usage:u.usage,warnings:u.warnings,logprobs:u.logprobs,request:u.request,response:{...u.response,messages:[...A0.messages,...D0]},providerMetadata:u.experimental_providerMetadata,experimental_providerMetadata:u.experimental_providerMetadata,isContinued:u.isContinued};if(await(n==null?void 0:n(z0)),G0.push(z0),PD=[],zD=[],x="",s0=[],r=[],$0=[],V0=void 0,g0!=="done")mD=g0;if(g0!=="continue")A0.messages.push(...D0),o=""}if(u.type==="finish")A0.id=u.response.id,A0.timestamp=u.response.timestamp,A0.modelId=u.response.modelId,A0.headers=u.response.headers,a=u.usage,W0=u.finishReason},async flush(g){var S;try{if(G0.length===0)return;let u=G0[G0.length-1];c.warningsPromise.resolve(u.warnings),c.requestPromise.resolve(u.request),c.responsePromise.resolve(u.response),c.toolCallsPromise.resolve(u.toolCalls),c.toolResultsPromise.resolve(u.toolResults),c.providerMetadataPromise.resolve(u.experimental_providerMetadata),c.reasoningPromise.resolve(u.reasoning),c.reasoningDetailsPromise.resolve(u.reasoningDetails);let D0=W0!=null?W0:"unknown",H0=a!=null?a:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};c.finishReasonPromise.resolve(D0),c.usagePromise.resolve(H0),c.textPromise.resolve(M),c.sourcesPromise.resolve(U0),c.filesPromise.resolve(u.files),c.stepsPromise.resolve(G0),await(v==null?void 0:v({finishReason:D0,logprobs:void 0,usage:H0,text:M,reasoning:u.reasoning,reasoningDetails:u.reasoningDetails,files:u.files,sources:u.sources,toolCalls:u.toolCalls,toolResults:u.toolResults,request:(S=u.request)!=null?S:{},response:u.response,warnings:u.warnings,providerMetadata:u.providerMetadata,experimental_providerMetadata:u.experimental_providerMetadata,steps:G0})),YD.setAttributes(oF({telemetry:F,attributes:{"ai.response.finishReason":D0,"ai.response.text":{output:()=>M},"ai.response.toolCalls":{output:()=>{var g0;return((g0=u.toolCalls)==null?void 0:g0.length)?JSON.stringify(u.toolCalls):void 0}},"ai.usage.promptTokens":H0.promptTokens,"ai.usage.completionTokens":H0.completionTokens}}))}catch(u){g.error(u)}finally{YD.end()}}}),Y0=Nk();this.addStream=Y0.addStream,this.closeStream=Y0.close;let WD=Y0.stream;for(let g of K)WD=WD.pipeThrough(g({tools:f,stopStream(){Y0.terminate()}}));this.baseStream=WD.pipeThrough(tk(U)).pipeThrough(T0);let{maxRetries:UD,retry:l}=rA({maxRetries:J}),_D=aA(F),b=tA({model:D,telemetry:F,headers:$,settings:{...B,maxRetries:UD}}),y=UO({prompt:{system:(_=U==null?void 0:U.injectIntoSystemPrompt({system:X,model:D}))!=null?_:X,prompt:Q,messages:w},tools:f}),c=this;g7({name:"ai.streamText",attributes:oF({telemetry:F,attributes:{...v7({operationId:"ai.streamText",telemetry:F}),...b,"ai.prompt":{input:()=>JSON.stringify({system:X,prompt:Q,messages:w})},"ai.settings.maxSteps":q}}),tracer:_D,endWhenDone:!1,fn:async(g)=>{YD=g;async function S({currentStep:u,responseMessages:D0,usage:H0,stepType:g0,previousStepText:z0,hasLeadingWhitespace:WF,messageId:ED}){var Z1;let q1=D0.length===0?y.type:"messages",P1=[...y.messages,...D0],T=await EO({prompt:{type:q1,system:y.system,messages:P1},modelSupportsImageUrls:D.supportsImageUrls,modelSupportsUrl:(Z1=D.supportsUrl)==null?void 0:Z1.bind(D)}),i={type:"regular",...bO({tools:f,toolChoice:G,activeTools:E})},{result:{stream:Q0,warnings:O0,rawResponse:M0,request:f0},doStreamSpan:x0,startTimestampMs:KD}=await l(()=>g7({name:"ai.streamText.doStream",attributes:oF({telemetry:F,attributes:{...v7({operationId:"ai.streamText.doStream",telemetry:F}),...b,"ai.prompt.format":{input:()=>q1},"ai.prompt.messages":{input:()=>ZO(T)},"ai.prompt.tools":{input:()=>{var e0;return(e0=i.tools)==null?void 0:e0.map((yD)=>JSON.stringify(yD))}},"ai.prompt.toolChoice":{input:()=>i.toolChoice!=null?JSON.stringify(i.toolChoice):void 0},"gen_ai.system":D.provider,"gen_ai.request.model":D.modelId,"gen_ai.request.frequency_penalty":B.frequencyPenalty,"gen_ai.request.max_tokens":B.maxTokens,"gen_ai.request.presence_penalty":B.presencePenalty,"gen_ai.request.stop_sequences":B.stopSequences,"gen_ai.request.temperature":B.temperature,"gen_ai.request.top_k":B.topK,"gen_ai.request.top_p":B.topP}}),tracer:_D,endWhenDone:!1,fn:async(e0)=>({startTimestampMs:C(),doStreamSpan:e0,result:await D.doStream({mode:i,...KO(B),inputFormat:q1,responseFormat:U==null?void 0:U.responseFormat({model:D}),prompt:T,providerMetadata:L,abortSignal:Y,headers:$})})})),d0=nk({tools:f,generatorStream:Q0,toolCallStreaming:H,tracer:_D,telemetry:F,system:X,messages:P1,repairToolCall:O,abortSignal:Y}),RD=f0!=null?f0:{},l0=[],j0=[],VD=[],sD=[],SF=void 0,yF="unknown",GF={promptTokens:0,completionTokens:0,totalTokens:0},R2,_B=!0,s2="",b1=g0==="continue"?z0:"",A6,RF={id:I(),timestamp:R(),modelId:D.modelId},O6="",C2=!1,b0=!0,GD=!1;async function xF({controller:e0,chunk:yD}){e0.enqueue(yD),s2+=yD.textDelta,b1+=yD.textDelta,C2=!0,GD=yD.textDelta.trimEnd()!==yD.textDelta}c.addStream(d0.pipeThrough(new TransformStream({async transform(e0,yD){var HF,D8,a2;if(_B){let B2=C()-KD;_B=!1,x0.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":B2}),x0.setAttributes({"ai.response.msToFirstChunk":B2}),yD.enqueue({type:"step-start",messageId:ED,request:RD,warnings:O0!=null?O0:[]})}if(e0.type==="text-delta"&&e0.textDelta.length===0)return;let k9=e0.type;switch(k9){case"text-delta":{if(N){let B2=b0&&WF?e0.textDelta.trimStart():e0.textDelta;if(B2.length===0)break;b0=!1,O6+=B2;let Q7=hO(O6);if(Q7!=null)O6=Q7.suffix,await xF({controller:yD,chunk:{type:"text-delta",textDelta:Q7.prefix+Q7.whitespace}})}else await xF({controller:yD,chunk:e0});break}case"reasoning":{if(yD.enqueue(e0),SF==null)SF={type:"text",text:e0.textDelta},VD.push(SF);else SF.text+=e0.textDelta;break}case"reasoning-signature":{if(yD.enqueue(e0),SF==null)throw new mk({chunk:e0,message:"reasoning-signature without reasoning"});SF.signature=e0.signature,SF=void 0;break}case"redacted-reasoning":{yD.enqueue(e0),VD.push({type:"redacted",data:e0.data});break}case"tool-call":{yD.enqueue(e0),l0.push(e0);break}case"tool-result":{yD.enqueue(e0),j0.push(e0);break}case"response-metadata":{RF={id:(HF=e0.id)!=null?HF:RF.id,timestamp:(D8=e0.timestamp)!=null?D8:RF.timestamp,modelId:(a2=e0.modelId)!=null?a2:RF.modelId};break}case"finish":{GF=e0.usage,yF=e0.finishReason,R2=e0.experimental_providerMetadata,A6=e0.logprobs;let B2=C()-KD;x0.addEvent("ai.stream.finish"),x0.setAttributes({"ai.response.msToFinish":B2,"ai.response.avgCompletionTokensPerSecond":1000*GF.completionTokens/B2});break}case"file":{sD.push(e0),yD.enqueue(e0);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{yD.enqueue(e0);break}case"error":{yD.enqueue(e0),yF="error";break}default:throw new Error(`Unknown chunk type: ${k9}`)}},async flush(e0){let yD=l0.length>0?JSON.stringify(l0):void 0,HF="done";if(u+1<q){if(N&&yF==="length"&&l0.length===0)HF="continue";else if(l0.length>0&&j0.length===l0.length)HF="tool-result"}if(N&&O6.length>0&&(HF!=="continue"||g0==="continue"&&!C2))await xF({controller:e0,chunk:{type:"text-delta",textDelta:O6}}),O6="";try{x0.setAttributes(oF({telemetry:F,attributes:{"ai.response.finishReason":yF,"ai.response.text":{output:()=>s2},"ai.response.toolCalls":{output:()=>yD},"ai.response.id":RF.id,"ai.response.model":RF.modelId,"ai.response.timestamp":RF.timestamp.toISOString(),"ai.usage.promptTokens":GF.promptTokens,"ai.usage.completionTokens":GF.completionTokens,"gen_ai.response.finish_reasons":[yF],"gen_ai.response.id":RF.id,"gen_ai.response.model":RF.modelId,"gen_ai.usage.input_tokens":GF.promptTokens,"gen_ai.usage.output_tokens":GF.completionTokens}}))}catch(a2){}finally{x0.end()}e0.enqueue({type:"step-finish",finishReason:yF,usage:GF,providerMetadata:R2,experimental_providerMetadata:R2,logprobs:A6,request:RD,response:{...RF,headers:M0==null?void 0:M0.headers},warnings:O0,isContinued:HF==="continue",messageId:ED});let D8=CO(H0,GF);if(HF==="done")e0.enqueue({type:"finish",finishReason:yF,usage:D8,providerMetadata:R2,experimental_providerMetadata:R2,logprobs:A6,response:{...RF,headers:M0==null?void 0:M0.headers}}),c.closeStream();else{if(g0==="continue"){let a2=D0[D0.length-1];if(typeof a2.content==="string")a2.content+=s2;else a2.content.push({text:s2,type:"text"})}else D0.push(..._4({text:s2,files:sD,reasoning:VD,tools:f!=null?f:{},toolCalls:l0,toolResults:j0,messageId:ED,generateMessageId:h}));await S({currentStep:u+1,responseMessages:D0,usage:D8,stepType:HF,previousStepText:b1,hasLeadingWhitespace:GD,messageId:HF==="continue"?ED:h()})}}})))}await S({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:h()})}}).catch((g)=>{c.addStream(new ReadableStream({start(S){S.enqueue({type:"error",error:g}),S.close()}})),c.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){let[D,F]=this.baseStream.tee();return this.baseStream=F,D}get textStream(){return U4(this.teeStream().pipeThrough(new TransformStream({transform({part:D},F){if(D.type==="text-delta")F.enqueue(D.textDelta)}})))}get fullStream(){return U4(this.teeStream().pipeThrough(new TransformStream({transform({part:D},F){F.enqueue(D)}})))}async consumeStream(D){var F;try{await lk({stream:this.fullStream,onError:D==null?void 0:D.onError})}catch($){(F=D==null?void 0:D.onError)==null||F.call(D,$)}}get experimental_partialOutputStream(){if(this.output==null)throw new LO;return U4(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:D},F){if(D!=null)F.enqueue(D)}})))}toDataStreamInternal({getErrorMessage:D=()=>"An error occurred.",sendUsage:F=!0,sendReasoning:$=!1,sendSources:B=!1,experimental_sendFinish:J=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(Y,X)=>{let Q=Y.type;switch(Q){case"text-delta":{X.enqueue(M1("text",Y.textDelta));break}case"reasoning":{if($)X.enqueue(M1("reasoning",Y.textDelta));break}case"redacted-reasoning":{if($)X.enqueue(M1("redacted_reasoning",{data:Y.data}));break}case"reasoning-signature":{if($)X.enqueue(M1("reasoning_signature",{signature:Y.signature}));break}case"file":{X.enqueue(M1("file",{mimeType:Y.mimeType,data:Y.base64}));break}case"source":{if(B)X.enqueue(M1("source",Y.source));break}case"tool-call-streaming-start":{X.enqueue(M1("tool_call_streaming_start",{toolCallId:Y.toolCallId,toolName:Y.toolName}));break}case"tool-call-delta":{X.enqueue(M1("tool_call_delta",{toolCallId:Y.toolCallId,argsTextDelta:Y.argsTextDelta}));break}case"tool-call":{X.enqueue(M1("tool_call",{toolCallId:Y.toolCallId,toolName:Y.toolName,args:Y.args}));break}case"tool-result":{X.enqueue(M1("tool_result",{toolCallId:Y.toolCallId,result:Y.result}));break}case"error":{X.enqueue(M1("error",D(Y.error)));break}case"step-start":{X.enqueue(M1("start_step",{messageId:Y.messageId}));break}case"step-finish":{X.enqueue(M1("finish_step",{finishReason:Y.finishReason,usage:F?{promptTokens:Y.usage.promptTokens,completionTokens:Y.usage.completionTokens}:void 0,isContinued:Y.isContinued}));break}case"finish":{if(J)X.enqueue(M1("finish_message",{finishReason:Y.finishReason,usage:F?{promptTokens:Y.usage.promptTokens,completionTokens:Y.usage.completionTokens}:void 0}));break}default:throw new Error(`Unknown chunk type: ${Q}`)}}}))}pipeDataStreamToResponse(D,{status:F,statusText:$,headers:B,data:J,getErrorMessage:Y,sendUsage:X,sendReasoning:Q,sendSources:w,experimental_sendFinish:f}={}){hA({response:D,status:F,statusText:$,headers:bA(B,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:J,getErrorMessage:Y,sendUsage:X,sendReasoning:Q,sendSources:w,experimental_sendFinish:f})})}pipeTextStreamToResponse(D,F){hA({response:D,status:F==null?void 0:F.status,statusText:F==null?void 0:F.statusText,headers:bA(F==null?void 0:F.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(D){let F=this.toDataStreamInternal({getErrorMessage:D==null?void 0:D.getErrorMessage,sendUsage:D==null?void 0:D.sendUsage,sendReasoning:D==null?void 0:D.sendReasoning,sendSources:D==null?void 0:D.sendSources,experimental_sendFinish:D==null?void 0:D.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return(D==null?void 0:D.data)?I4(D==null?void 0:D.data.stream,F):F}mergeIntoDataStream(D,F){D.merge(this.toDataStreamInternal({getErrorMessage:D.onError,sendUsage:F==null?void 0:F.sendUsage,sendReasoning:F==null?void 0:F.sendReasoning,sendSources:F==null?void 0:F.sendSources,experimental_sendFinish:F==null?void 0:F.experimental_sendFinish}))}toDataStreamResponse({headers:D,status:F,statusText:$,data:B,getErrorMessage:J,sendUsage:Y,sendReasoning:X,sendSources:Q,experimental_sendFinish:w}={}){return new Response(this.toDataStream({data:B,getErrorMessage:J,sendUsage:Y,sendReasoning:X,sendSources:Q,experimental_sendFinish:w}),{status:F,statusText:$,headers:S5(D,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(D){var F;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(F=D==null?void 0:D.status)!=null?F:200,headers:S5(D==null?void 0:D.headers,{contentType:"text/plain; charset=utf-8"})})}},sO=({model:D,middleware:F,modelId:$,providerId:B})=>{return tO(F).reverse().reduce((J,Y)=>{return ak({model:J,middleware:Y,modelId:$,providerId:B})},D)},ak=({model:D,middleware:{transformParams:F,wrapGenerate:$,wrapStream:B},modelId:J,providerId:Y})=>{var X;async function Q({params:w,type:f}){return F?await F({params:w,type:f}):w}return{specificationVersion:"v1",provider:Y!=null?Y:D.provider,modelId:J!=null?J:D.modelId,defaultObjectGenerationMode:D.defaultObjectGenerationMode,supportsImageUrls:D.supportsImageUrls,supportsUrl:(X=D.supportsUrl)==null?void 0:X.bind(D),supportsStructuredOutputs:D.supportsStructuredOutputs,async doGenerate(w){let f=await Q({params:w,type:"generate"}),G=async()=>D.doGenerate(f);return $?$({doGenerate:G,doStream:async()=>D.doStream(f),params:f,model:D}):G()},async doStream(w){let f=await Q({params:w,type:"stream"}),G=async()=>D.doGenerate(f),H=async()=>D.doStream(f);return B?B({doGenerate:G,doStream:H,params:f,model:D}):H()}}},ek="AI_NoSuchProviderError",Du,Fu,$u,aO="2024-11-05",Bu,Ju,b4,Z$,Yu,Xu,Qu,wu,fu,Wu,Gu,Hu,eO,Eu,Ku,qu,Vu,k5="2.0",Au,Ou,ju,Uu,Ru,Cu=class{constructor({url:D,headers:F}){this.connected=!1,this.url=new URL(D),this.headers=F}async start(){return new Promise((D,F)=>{if(this.connected)return D();this.abortController=new AbortController,(async()=>{var B,J,Y;try{let X=new Headers(this.headers);X.set("Accept","text/event-stream");let Q=await fetch(this.url.href,{headers:X,signal:(B=this.abortController)==null?void 0:B.signal});if(!Q.ok||!Q.body){let H=new S1({message:`MCP SSE Transport Error: ${Q.status} ${Q.statusText}`});return(J=this.onerror)==null||J.call(this,H),F(H)}let f=Q.body.pipeThrough(new TextDecoderStream).pipeThrough(oX()).getReader(),G=async()=>{var H,K,E;try{while(!0){let{done:O,value:q}=await f.read();if(O){if(this.connected)throw this.connected=!1,new S1({message:"MCP SSE Transport Error: Connection closed unexpectedly"});return}let{event:U,data:N}=q;if(U==="endpoint"){if(this.endpoint=new URL(N,this.url),this.endpoint.origin!==this.url.origin)throw new S1({message:`MCP SSE Transport Error: Endpoint origin does not match connection origin: ${this.endpoint.origin}`});this.connected=!0,D()}else if(U==="message")try{let L=Ru.parse(JSON.parse(N));(H=this.onmessage)==null||H.call(this,L)}catch(L){let C=new S1({message:"MCP SSE Transport Error: Failed to parse message",cause:L});(K=this.onerror)==null||K.call(this,C)}}}catch(O){if(O instanceof Error&&O.name==="AbortError")return;(E=this.onerror)==null||E.call(this,O),F(O)}};this.sseConnection={close:()=>f.cancel()},G()}catch(X){if(X instanceof Error&&X.name==="AbortError")return;(Y=this.onerror)==null||Y.call(this,X),F(X)}})()})}async close(){var D,F,$;this.connected=!1,(D=this.sseConnection)==null||D.close(),(F=this.abortController)==null||F.abort(),($=this.onclose)==null||$.call(this)}async send(D){var F,$,B;if(!this.endpoint||!this.connected)throw new S1({message:"MCP SSE Transport Error: Not connected"});try{let J=new Headers(this.headers);J.set("Content-Type","application/json");let Y={method:"POST",headers:J,body:JSON.stringify(D),signal:(F=this.abortController)==null?void 0:F.signal},X=await fetch(this.endpoint,Y);if(!X.ok){let Q=await X.text().catch(()=>null),w=new S1({message:`MCP SSE Transport Error: POSTing to endpoint (HTTP ${X.status}): ${Q}`});($=this.onerror)==null||$.call(this,w);return}}catch(J){(B=this.onerror)==null||B.call(this,J);return}}},Mu="1.0.0",_u=class{constructor({transport:D,name:F="ai-sdk-mcp-client",onUncaughtError:$}){if(this.requestMessageId=0,this.responseHandlers=new Map,this.serverCapabilities={},this.isClosed=!0,this.onUncaughtError=$,Nu(D))this.transport=D;else this.transport=Zu(D);this.transport.onclose=()=>this.onClose(),this.transport.onerror=(B)=>this.onError(B),this.transport.onmessage=(B)=>{if("method"in B){this.onError(new S1({message:"Unsupported message type"}));return}this.onResponse(B)},this.clientInfo={name:F,version:Mu}}async init(){try{await this.transport.start(),this.isClosed=!1;let D=await this.request({request:{method:"initialize",params:{protocolVersion:aO,capabilities:{},clientInfo:this.clientInfo}},resultSchema:Qu});if(D===void 0)throw new S1({message:"Server sent invalid initialize result"});if(!Bu.includes(D.protocolVersion))throw new S1({message:`Server's protocol version is not supported: ${D.protocolVersion}`});return this.serverCapabilities=D.capabilities,await this.notification({method:"notifications/initialized"}),this}catch(D){throw await this.close(),D}}async close(){var D;if(this.isClosed)return;await((D=this.transport)==null?void 0:D.close()),this.onClose()}assertCapability(D){switch(D){case"initialize":break;case"tools/list":case"tools/call":if(!this.serverCapabilities.tools)throw new S1({message:"Server does not support tools"});break;default:throw new S1({message:`Unsupported method: ${D}`})}}async request({request:D,resultSchema:F,options:$}){return new Promise((B,J)=>{if(this.isClosed)return J(new S1({message:"Attempted to send a request from a closed client"}));this.assertCapability(D.method);let Y=$==null?void 0:$.signal;Y==null||Y.throwIfAborted();let X=this.requestMessageId++,Q={...D,jsonrpc:"2.0",id:X},w=()=>{this.responseHandlers.delete(X)};this.responseHandlers.set(X,(f)=>{if(Y==null?void 0:Y.aborted)return J(new S1({message:"Request was aborted",cause:Y.reason}));if(f instanceof Error)return J(f);try{let G=F.parse(f.result);B(G)}catch(G){let H=new S1({message:"Failed to parse server response",cause:G});J(H)}}),this.transport.send(Q).catch((f)=>{w(),J(f)})})}async listTools({params:D,options:F}={}){try{return this.request({request:{method:"tools/list",params:D},resultSchema:Wu,options:F})}catch($){throw $}}async callTool({name:D,args:F,options:$}){try{return this.request({request:{method:"tools/call",params:{name:D,arguments:F}},resultSchema:Vu,options:{signal:$==null?void 0:$.abortSignal}})}catch(B){throw B}}async notification(D){let F={...D,jsonrpc:"2.0"};await this.transport.send(F)}async tools({schemas:D="automatic"}={}){var F;let $={};try{let B=await this.listTools();for(let{name:J,description:Y,inputSchema:X}of B.tools){if(D!=="automatic"&&!(J in D))continue;let Q=D==="automatic"?ZQ({...X,properties:(F=X.properties)!=null?F:{},additionalProperties:!1}):D[J].parameters,w=this,f=P4({description:Y,parameters:Q,execute:async(G,H)=>{var K;return(K=H==null?void 0:H.abortSignal)==null||K.throwIfAborted(),w.callTool({name:J,args:G,options:H})}});$[J]=f}return $}catch(B){throw B}}onClose(){if(this.isClosed)return;this.isClosed=!0;let D=new S1({message:"Connection closed"});for(let F of this.responseHandlers.values())F(D);this.responseHandlers.clear()}onError(D){if(this.onUncaughtError)this.onUncaughtError(D)}onResponse(D){let F=Number(D.id),$=this.responseHandlers.get(F);if($===void 0)throw new S1({message:`Protocol error: Received a response for an unknown message ID: ${JSON.stringify(D)}`});this.responseHandlers.delete(F),$("result"in D?D:new S1({message:D.error.message,cause:D.error}))}},Lu,Pu;var M$=k(()=>{bD();bD();O1();bD();sA=Y2(A4(),1),C4=Y2(A4(),1);O1();O1();O1();bD();bD();O1();bD();C0();bD();bD();O1();C0();bD();C0();C0();C0();C0();C0();O1();O1();bD();bD();Q6();O1();Q6();bD();bD();bD();O1();Q6();bD();bD();bD();bD();O1();Q6();Q6();Q6();O1();C0();C0();Q6();O1();Q6();hx=Object.defineProperty;pA=`vercel.ai.error.${cA}`,Sx=Symbol.for(pA),nF=class extends N0{constructor({parameter:D,value:F,message:$}){super({name:cA,message:`Invalid argument for parameter ${D}: ${$}`});this[iA]=!0,this.parameter=D,this.value=F}static isInstance(D){return N0.hasMarker(D,pA)}};iA=Sx;lA=`vercel.ai.error.${dA}`,yx=Symbol.for(lA),SA=class extends N0{constructor({message:D,reason:F,errors:$}){super({name:dA,message:D});this[nA]=!0,this.reason=F,this.errors=$,this.lastError=$[$.length-1]}static isInstance(D){return N0.hasMarker(D,lA)}};nA=yx;kx={startSpan(){return h5},startActiveSpan(D,F,$,B){if(typeof F==="function")return F(h5);if(typeof $==="function")return $(h5);if(typeof B==="function")return B(h5)}},h5={spanContext(){return ux},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},ux={traceId:"",spanId:"",traceFlags:0};gx=`vercel.ai.error.${vx}`,mx=Symbol.for(gx);cx=mx;px=class extends eA{constructor(D){super(D);this.type="file"}},ix=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}];FO=`vercel.ai.error.${DO}`,ox=Symbol.for(FO),yA=class extends N0{constructor({message:D="No object generated.",cause:F,text:$,response:B,usage:J,finishReason:Y}){super({name:DO,message:D,cause:F});this[$O]=!0,this.text=$,this.response=B,this.usage=J,this.finishReason=Y}static isInstance(D){return N0.hasMarker(D,FO)}};$O=ox;JO=`vercel.ai.error.${BO}`,rx=Symbol.for(JO),O4=class extends N0{constructor({url:D,statusCode:F,statusText:$,cause:B,message:J=B==null?`Failed to download ${D}: ${F} ${$}`:`Failed to download ${D}: ${B}`}){super({name:BO,message:J,cause:B});this[YO]=!0,this.url=D,this.statusCode=F,this.statusText=$}static isInstance(D){return N0.hasMarker(D,JO)}};YO=rx;QO=`vercel.ai.error.${XO}`,sx=Symbol.for(QO),xA=class extends N0{constructor({content:D,cause:F,message:$=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof D}.`}){super({name:XO,message:$,cause:F});this[wO]=!0,this.content=D}static isInstance(D){return N0.hasMarker(D,QO)}};wO=sx;fO=W.union([W.string(),W.instanceof(Uint8Array),W.instanceof(ArrayBuffer),W.custom((D)=>{var F,$;return($=(F=globalThis.Buffer)==null?void 0:F.isBuffer(D))!=null?$:!1},{message:"Must be a Buffer"})]);GO=`vercel.ai.error.${WO}`,ex=Symbol.for(GO),Dk=class extends N0{constructor({role:D,message:F=`Invalid message role: '${D}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:WO,message:F});this[HO]=!0,this.role=D}static isInstance(D){return N0.hasMarker(D,GO)}};HO=ex;VO=`vercel.ai.error.${qO}`,Yk=Symbol.for(VO),j4=class extends N0{constructor({originalMessage:D,message:F}){super({name:qO,message:F});this[AO]=!0,this.originalMessage=D}static isInstance(D){return N0.hasMarker(D,VO)}};AO=Yk;Z4=W.lazy(()=>W.union([W.null(),W.string(),W.number(),W.boolean(),W.record(W.string(),Z4),W.array(Z4)])),W1=W.record(W.string(),W.record(W.string(),Z4)),Xk=W.array(W.union([W.object({type:W.literal("text"),text:W.string()}),W.object({type:W.literal("image"),data:W.string(),mimeType:W.string().optional()})])),OO=W.object({type:W.literal("text"),text:W.string(),providerOptions:W1.optional(),experimental_providerMetadata:W1.optional()}),Qk=W.object({type:W.literal("image"),image:W.union([fO,W.instanceof(URL)]),mimeType:W.string().optional(),providerOptions:W1.optional(),experimental_providerMetadata:W1.optional()}),jO=W.object({type:W.literal("file"),data:W.union([fO,W.instanceof(URL)]),filename:W.string().optional(),mimeType:W.string(),providerOptions:W1.optional(),experimental_providerMetadata:W1.optional()}),wk=W.object({type:W.literal("reasoning"),text:W.string(),providerOptions:W1.optional(),experimental_providerMetadata:W1.optional()}),fk=W.object({type:W.literal("redacted-reasoning"),data:W.string(),providerOptions:W1.optional(),experimental_providerMetadata:W1.optional()}),Wk=W.object({type:W.literal("tool-call"),toolCallId:W.string(),toolName:W.string(),args:W.unknown(),providerOptions:W1.optional(),experimental_providerMetadata:W1.optional()}),Gk=W.object({type:W.literal("tool-result"),toolCallId:W.string(),toolName:W.string(),result:W.unknown(),content:Xk.optional(),isError:W.boolean().optional(),providerOptions:W1.optional(),experimental_providerMetadata:W1.optional()}),Hk=W.object({role:W.literal("system"),content:W.string(),providerOptions:W1.optional(),experimental_providerMetadata:W1.optional()}),Ek=W.object({role:W.literal("user"),content:W.union([W.string(),W.array(W.union([OO,Qk,jO]))]),providerOptions:W1.optional(),experimental_providerMetadata:W1.optional()}),Kk=W.object({role:W.literal("assistant"),content:W.union([W.string(),W.array(W.union([OO,jO,wk,fk,Wk]))]),providerOptions:W1.optional(),experimental_providerMetadata:W1.optional()}),qk=W.object({role:W.literal("tool"),content:W.array(Gk),providerOptions:W1.optional(),experimental_providerMetadata:W1.optional()}),Vk=W.union([Hk,Ek,Kk,qk]);f70=G2({prefix:"aiobj",size:24});G70=G2({prefix:"aiobj",size:24}),MO=`vercel.ai.error.${NO}`,_k=Symbol.for(MO),LO=class extends N0{constructor({message:D="No output specified."}={}){super({name:NO,message:D});this[_O]=!0}static isInstance(D){return N0.hasMarker(D,MO)}};_O=_k;IO=`vercel.ai.error.${zO}`,Lk=Symbol.for(IO),PO=class extends N0{constructor({toolArgs:D,toolName:F,toolCallId:$,cause:B,message:J=`Error executing tool ${F}: ${k6(B)}`}){super({name:zO,message:J,cause:B});this[TO]=!0,this.toolArgs=D,this.toolName=F,this.toolCallId=$}static isInstance(D){return N0.hasMarker(D,IO)}};TO=Lk;Ik=/^([\s\S]*?)(\s+)(\S*)$/;yO=`vercel.ai.error.${SO}`,Pk=Symbol.for(yO),kO=class extends N0{constructor({toolArgs:D,toolName:F,cause:$,message:B=`Invalid arguments for tool ${F}: ${k6($)}`}){super({name:SO,message:B,cause:$});this[xO]=!0,this.toolArgs=D,this.toolName=F}static isInstance(D){return N0.hasMarker(D,yO)}};xO=Pk;vO=`vercel.ai.error.${uO}`,bk=Symbol.for(vO),N4=class extends N0{constructor({toolName:D,availableTools:F=void 0,message:$=`Model tried to call unavailable tool '${D}'. ${F===void 0?"No tools are available.":`Available tools: ${F.join(", ")}.`}`}){super({name:uO,message:$});this[gO]=!0,this.toolName=D,this.availableTools=F}static isInstance(D){return N0.hasMarker(D,vO)}};gO=bk;cO=`vercel.ai.error.${mO}`,hk=Symbol.for(cO),Sk=class extends N0{constructor({cause:D,originalError:F,message:$=`Error repairing tool call: ${k6(D)}`}){super({name:mO,message:$,cause:D});this[pO]=!0,this.originalError=F}static isInstance(D){return N0.hasMarker(D,cO)}};pO=hk;yk=G2({prefix:"aitxt",size:24}),xk=G2({prefix:"msg",size:24});vk={};L4(vk,{object:()=>dk,text:()=>ik});lO=`vercel.ai.error.${dO}`,gk=Symbol.for(lO),mk=class extends N0{constructor({chunk:D,message:F}){super({name:dO,message:F});this[nO]=!0,this.chunk=D}static isInstance(D){return N0.hasMarker(D,lO)}};nO=gk;oO=`vercel.ai.error.${ck}`,pk=Symbol.for(oO),S1=class extends N0{constructor({name:D="MCPClientError",message:F,cause:$}){super({name:D,message:F,cause:$});this[rO]=!0}static isInstance(D){return N0.hasMarker(D,oO)}};rO=pk;ok=G2({prefix:"aitxt",size:24}),rk=G2({prefix:"msg",size:24});Du=`vercel.ai.error.${ek}`,Fu=Symbol.for(Du);$u=Fu;Bu=[aO,"2024-10-07"],Ju=W.object({name:W.string(),version:W.string()}).passthrough(),b4=W.object({_meta:W.optional(W.object({}).passthrough())}).passthrough(),Z$=b4,Yu=W.object({method:W.string(),params:W.optional(b4)}),Xu=W.object({experimental:W.optional(W.object({}).passthrough()),logging:W.optional(W.object({}).passthrough()),prompts:W.optional(W.object({listChanged:W.optional(W.boolean())}).passthrough()),resources:W.optional(W.object({subscribe:W.optional(W.boolean()),listChanged:W.optional(W.boolean())}).passthrough()),tools:W.optional(W.object({listChanged:W.optional(W.boolean())}).passthrough())}).passthrough(),Qu=Z$.extend({protocolVersion:W.string(),capabilities:Xu,serverInfo:Ju,instructions:W.optional(W.string())}),wu=Z$.extend({nextCursor:W.optional(W.string())}),fu=W.object({name:W.string(),description:W.optional(W.string()),inputSchema:W.object({type:W.literal("object"),properties:W.optional(W.object({}).passthrough())}).passthrough()}).passthrough(),Wu=wu.extend({tools:W.array(fu)}),Gu=W.object({type:W.literal("text"),text:W.string()}).passthrough(),Hu=W.object({type:W.literal("image"),data:W.string().base64(),mimeType:W.string()}).passthrough(),eO=W.object({uri:W.string(),mimeType:W.optional(W.string())}).passthrough(),Eu=eO.extend({text:W.string()}),Ku=eO.extend({blob:W.string().base64()}),qu=W.object({type:W.literal("resource"),resource:W.union([Eu,Ku])}).passthrough(),Vu=Z$.extend({content:W.array(W.union([Gu,Hu,qu])),isError:W.boolean().default(!1).optional()}).or(Z$.extend({toolResult:W.unknown()})),Au=W.object({jsonrpc:W.literal(k5),id:W.union([W.string(),W.number().int()])}).merge(Yu).strict(),Ou=W.object({jsonrpc:W.literal(k5),id:W.union([W.string(),W.number().int()]),result:Z$}).strict(),ju=W.object({jsonrpc:W.literal(k5),id:W.union([W.string(),W.number().int()]),error:W.object({code:W.number().int(),message:W.string(),data:W.optional(W.unknown())})}).strict(),Uu=W.object({jsonrpc:W.literal(k5)}).merge(W.object({method:W.string(),params:W.optional(b4)})).strict(),Ru=W.union([Au,Uu,Ou,ju]);Lu={};L4(Lu,{mergeIntoDataStream:()=>Tu,toDataStream:()=>zu,toDataStreamResponse:()=>Iu});Pu={};L4(Pu,{mergeIntoDataStream:()=>Su,toDataStream:()=>bu,toDataStreamResponse:()=>hu})});import Fj from"path";var{readableStreamToText:$j}=globalThis.Bun;var rF;var u5=k(async()=>{C0();await d1();await xD();QF();((x4)=>{let D=Z0.create({service:"bun"});async function F(Y,X){D.info("running",{cmd:[$(),...Y],...X});let Q=Bun.spawn([$(),...Y],{...X,stdout:"pipe",stderr:"pipe",env:{...process.env,...X?.env,BUN_BE_BUN:"1"}}),w=await Q.exited,f=Q.stdout?typeof Q.stdout==="number"?Q.stdout:await $j(Q.stdout):void 0,G=Q.stderr?typeof Q.stderr==="number"?Q.stderr:await $j(Q.stderr):void 0;if(D.info("done",{code:w,stdout:f,stderr:G}),w!==0)throw new Error(`Command failed with exit code ${Q.exitCode}`);return Q}x4.run=F;function $(){return process.execPath}x4.which=$,x4.InstallFailedError=BD.create("BunInstallFailedError",W.object({pkg:W.string(),version:W.string()}));async function J(Y,X="latest"){let Q=Fj.join(P0.Path.cache,"node_modules",Y),w=Bun.file(Fj.join(P0.Path.cache,"package.json")),f=await w.json().catch(()=>({dependencies:{}}));if(f.dependencies[Y]===X)return Q;return f.dependencies[Y]=X,await Bun.write(w,JSON.stringify(f,null,2)),await rF.run(["install","--registry=https://registry.npmjs.org"],{cwd:P0.Path.cache}).catch((G)=>{throw new x4.InstallFailedError({pkg:Y,version:X},{cause:G})}),Q}x4.install=J})(rF||={})});var dD;var zF=k(()=>{((H90)=>{function D(F){return F}H90.define=D})(dD||={})});var Jj=`Executes a given bash command in a persistent shell session with optional timeout, ensuring proper handling and security measures.\r
\r
Before executing the command, please follow these steps:\r
\r
1. Directory Verification:\r
   - If the command will create new directories or files, first use the LS tool to verify the parent directory exists and is the correct location\r
   - For example, before running "mkdir foo/bar", first use LS to check that "foo" exists and is the intended parent directory\r
\r
2. Command Execution:\r
   - Always quote file paths that contain spaces with double quotes (e.g., cd "path with spaces/file.txt")\r
   - Examples of proper quoting:\r
     - cd "/Users/name/My Documents" (correct)\r
     - cd /Users/name/My Documents (incorrect - will fail)\r
     - python "/path/with spaces/script.py" (correct)\r
     - python /path/with spaces/script.py (incorrect - will fail)\r
   - After ensuring proper quoting, execute the command.\r
   - Capture the output of the command.\r
\r
Usage notes:\r
  - The command argument is required.\r
  - You can specify an optional timeout in milliseconds (up to 600000ms / 10 minutes). If not specified, commands will timeout after 120000ms (2 minutes).\r
  - It is very helpful if you write a clear, concise description of what this command does in 5-10 words.\r
  - If the output exceeds 30000 characters, output will be truncated before being returned to you.\r
  - VERY IMPORTANT: You MUST avoid using search commands like \`find\` and \`grep\`. Instead use Grep, Glob, or Task to search. You MUST avoid read tools like \`cat\`, \`head\`, \`tail\`, and \`ls\`, and use Read and LS to read files.\r
  - If you _still_ need to run \`grep\`, STOP. ALWAYS USE ripgrep at \`rg\` (or /usr/bin/rg) first, which all opencode users have pre-installed.\r
  - When issuing multiple commands, use the ';' or '&&' operator to separate them. DO NOT use newlines (newlines are ok in quoted strings).\r
  - Try to maintain your current working directory throughout the session by using absolute paths and avoiding usage of \`cd\`. You may use \`cd\` if the User explicitly requests it.\r
    <good-example>\r
    pytest /foo/bar/tests\r
    </good-example>\r
    <bad-example>\r
    cd /foo/bar && pytest tests\r
    </bad-example>\r
\r
\r
# Committing changes with git\r
\r
When the user asks you to create a new git commit, follow these steps carefully:\r
\r
1. You have the capability to call multiple tools in a single response. When multiple independent pieces of information are requested, batch your tool calls together for optimal performance. ALWAYS run the following bash commands in parallel, each using the Bash tool:\r
   - Run a git status command to see all untracked files.\r
   - Run a git diff command to see both staged and unstaged changes that will be committed.\r
   - Run a git log command to see recent commit messages, so that you can follow this repository's commit message style.\r
\r
2. Analyze all staged changes (both previously staged and newly added) and draft a commit message. Wrap your analysis process in <commit_analysis> tags:\r
\r
<commit_analysis>\r
- List the files that have been changed or added\r
- Summarize the nature of the changes (eg. new feature, enhancement to an existing feature, bug fix, refactoring, test, docs, etc.)\r
- Brainstorm the purpose or motivation behind these changes\r
- Assess the impact of these changes on the overall project\r
- Check for any sensitive information that shouldn't be committed\r
- Draft a concise (1-2 sentences) commit message that focuses on the "why" rather than the "what"\r
- Ensure your language is clear, concise, and to the point\r
- Ensure the message accurately reflects the changes and their purpose (i.e. "add" means a wholly new feature, "update" means an enhancement to an existing feature, "fix" means a bug fix, etc.)\r
- Ensure the message is not generic (avoid words like "Update" or "Fix" without context)\r
- Review the draft message to ensure it accurately reflects the changes and their purpose\r
</commit_analysis>\r
\r
3. You have the capability to call multiple tools in a single response. When multiple independent pieces of information are requested, batch your tool calls together for optimal performance. ALWAYS run the following commands in parallel:\r
   - Add relevant untracked files to the staging area.\r
   - Create the commit with a message ending with:\r
   \uD83E\uDD16 Generated with [opencode](https://opencode.ai)\r
\r
   Co-Authored-By: opencode <noreply@opencode.ai>\r
   - Run git status to make sure the commit succeeded.\r
\r
4. If the commit fails due to pre-commit hook changes, retry the commit ONCE to include these automated changes. If it fails again, it usually means a pre-commit hook is preventing the commit. If the commit succeeds but you notice that files were modified by the pre-commit hook, you MUST amend your commit to include them.\r
\r
Important notes:\r
- Use the git context at the start of this conversation to determine which files are relevant to your commit. Be careful not to stage and commit files (e.g. with \`git add .\`) that aren't relevant to your commit.\r
- NEVER update the git config\r
- DO NOT run additional commands to read or explore code, beyond what is available in the git context\r
- DO NOT push to the remote repository\r
- IMPORTANT: Never use git commands with the -i flag (like git rebase -i or git add -i) since they require interactive input which is not supported.\r
- If there are no changes to commit (i.e., no untracked files and no modifications), do not create an empty commit\r
- Ensure your commit message is meaningful and concise. It should explain the purpose of the changes, not just describe them.\r
- Return an empty response - the user will see the git output directly\r
- In order to ensure good formatting, ALWAYS pass the commit message via a HEREDOC, a la this example:\r
<example>\r
git commit -m "$(cat <<'EOF'\r
   Commit message here.\r
\r
   \uD83E\uDD16 Generated with [opencode](https://opencode.ai)\r
\r
   Co-Authored-By: opencode <noreply@opencode.ai>\r
   EOF\r
   )"\r
</example>\r
\r
# Creating pull requests\r
Use the gh command via the Bash tool for ALL GitHub-related tasks including working with issues, pull requests, checks, and releases. If given a Github URL use the gh command to get the information needed.\r
\r
IMPORTANT: When the user asks you to create a pull request, follow these steps carefully:\r
\r
1. You have the capability to call multiple tools in a single response. When multiple independent pieces of information are requested, batch your tool calls together for optimal performance. ALWAYS run the following bash commands in parallel using the Bash tool, in order to understand the current state of the branch since it diverged from the main branch:\r
   - Run a git status command to see all untracked files\r
   - Run a git diff command to see both staged and unstaged changes that will be committed\r
   - Check if the current branch tracks a remote branch and is up to date with the remote, so you know if you need to push to the remote\r
   - Run a git log command and \`git diff main...HEAD\` to understand the full commit history for the current branch (from the time it diverged from the \`main\` branch)\r
\r
2. Analyze all changes that will be included in the pull request, making sure to look at all relevant commits (NOT just the latest commit, but ALL commits that will be included in the pull request!!!), and draft a pull request summary. Wrap your analysis process in <pr_analysis> tags:\r
\r
<pr_analysis>\r
- List the commits since diverging from the main branch\r
- Summarize the nature of the changes (eg. new feature, enhancement to an existing feature, bug fix, refactoring, test, docs, etc.)\r
- Brainstorm the purpose or motivation behind these changes\r
- Assess the impact of these changes on the overall project\r
- Do not use tools to explore code, beyond what is available in the git context\r
- Check for any sensitive information that shouldn't be committed\r
- Draft a concise (1-2 bullet points) pull request summary that focuses on the "why" rather than the "what"\r
- Ensure the summary accurately reflects all changes since diverging from the main branch\r
- Ensure your language is clear, concise, and to the point\r
- Ensure the summary accurately reflects the changes and their purpose (ie. "add" means a wholly new feature, "update" means an enhancement to an existing feature, "fix" means a bug fix, etc.)\r
- Ensure the summary is not generic (avoid words like "Update" or "Fix" without context)\r
- Review the draft summary to ensure it accurately reflects the changes and their purpose\r
</pr_analysis>\r
\r
3. You have the capability to call multiple tools in a single response. When multiple independent pieces of information are requested, batch your tool calls together for optimal performance. ALWAYS run the following commands in parallel:\r
   - Create new branch if needed\r
   - Push to remote with -u flag if needed\r
   - Create PR using gh pr create with the format below. Use a HEREDOC to pass the body to ensure correct formatting.\r
<example>\r
gh pr create --title "the pr title" --body "$(cat <<'EOF'\r
## Summary\r
<1-3 bullet points>\r
\r
## Test plan\r
[Checklist of TODOs for testing the pull request...]\r
\r
\uD83E\uDD16 Generated with [opencode](https://opencode.ai)\r
EOF\r
)"\r
</example>\r
\r
Important:\r
- NEVER update the git config\r
- Return the PR URL when you're done, so the user can see it\r
\r
# Other common operations\r
- View comments on a Github PR: gh api repos/foo/bar/pulls/123/comments\r
`;var Bj=()=>{};var ku=30000,uu,vu=60000,Yj=600000,Xj;var Qj=k(async()=>{C0();zF();Bj();await MD();uu=["alias","curl","curlie","wget","axel","aria2c","nc","telnet","lynx","w3m","links","httpie","xh","http-prompt","chrome","firefox","safari"],Xj=dD.define({id:"bash",description:Jj,parameters:W.object({command:W.string().describe("The command to execute"),timeout:W.number().min(0).max(Yj).describe("Optional timeout in milliseconds").optional(),description:W.string().describe(`Clear, concise description of what this command does in 5-10 words. Examples:
Input: ls
Output: Lists files in current directory

Input: git status
Output: Shows working tree status

Input: npm install
Output: Installs package dependencies

Input: mkdir foo
Output: Creates directory 'foo'`)}),async execute(D,F){let $=Math.min(D.timeout??vu,Yj);if(uu.some((X)=>D.command.startsWith(X)))throw new Error(`Command '${D.command}' is not allowed`);let B=Bun.spawn({cmd:["bash","-c",D.command],cwd:w0.info().path.cwd,maxBuffer:ku,signal:F.abort,timeout:$,stdout:"pipe",stderr:"pipe"});await B.exited;let J=await new Response(B.stdout).text(),Y=await new Response(B.stderr).text();return{metadata:{stderr:Y,stdout:J,exit:B.exitCode,description:D.description,title:D.command},output:["<stdout>",J??"","</stdout>","<stderr>",Y??"","</stderr>"].join(`
`)}}})});var m7=t((Wj)=>{Object.defineProperty(Wj,"__esModule",{value:!0});Wj.stringArray=Wj.array=Wj.func=Wj.error=Wj.number=Wj.string=Wj.boolean=void 0;function gu(D){return D===!0||D===!1}Wj.boolean=gu;function wj(D){return typeof D==="string"||D instanceof String}Wj.string=wj;function mu(D){return typeof D==="number"||D instanceof Number}Wj.number=mu;function cu(D){return D instanceof Error}Wj.error=cu;function pu(D){return typeof D==="function"}Wj.func=pu;function fj(D){return Array.isArray(D)}Wj.array=fj;function iu(D){return fj(D)&&D.every((F)=>wj(F))}Wj.stringArray=iu});var v4=t((yj)=>{Object.defineProperty(yj,"__esModule",{value:!0});yj.Message=yj.NotificationType9=yj.NotificationType8=yj.NotificationType7=yj.NotificationType6=yj.NotificationType5=yj.NotificationType4=yj.NotificationType3=yj.NotificationType2=yj.NotificationType1=yj.NotificationType0=yj.NotificationType=yj.RequestType9=yj.RequestType8=yj.RequestType7=yj.RequestType6=yj.RequestType5=yj.RequestType4=yj.RequestType3=yj.RequestType2=yj.RequestType1=yj.RequestType=yj.RequestType0=yj.AbstractMessageSignature=yj.ParameterStructures=yj.ResponseError=yj.ErrorCodes=void 0;var x8=m7(),k4;(function(D){D.ParseError=-32700,D.InvalidRequest=-32600,D.MethodNotFound=-32601,D.InvalidParams=-32602,D.InternalError=-32603,D.jsonrpcReservedErrorRangeStart=-32099,D.serverErrorStart=-32099,D.MessageWriteError=-32099,D.MessageReadError=-32098,D.PendingResponseRejected=-32097,D.ConnectionInactive=-32096,D.ServerNotInitialized=-32002,D.UnknownErrorCode=-32001,D.jsonrpcReservedErrorRangeEnd=-32000,D.serverErrorEnd=-32000})(k4||(yj.ErrorCodes=k4={}));class u4 extends Error{constructor(D,F,$){super(F);this.code=x8.number(D)?D:k4.UnknownErrorCode,this.data=$,Object.setPrototypeOf(this,u4.prototype)}toJson(){let D={code:this.code,message:this.message};if(this.data!==void 0)D.data=this.data;return D}}yj.ResponseError=u4;class l1{constructor(D){this.kind=D}static is(D){return D===l1.auto||D===l1.byName||D===l1.byPosition}toString(){return this.kind}}yj.ParameterStructures=l1;l1.auto=new l1("auto");l1.byPosition=new l1("byPosition");l1.byName=new l1("byName");class D1{constructor(D,F){this.method=D,this.numberOfParams=F}get parameterStructures(){return l1.auto}}yj.AbstractMessageSignature=D1;class Ej extends D1{constructor(D){super(D,0)}}yj.RequestType0=Ej;class Kj extends D1{constructor(D,F=l1.auto){super(D,1);this._parameterStructures=F}get parameterStructures(){return this._parameterStructures}}yj.RequestType=Kj;class qj extends D1{constructor(D,F=l1.auto){super(D,1);this._parameterStructures=F}get parameterStructures(){return this._parameterStructures}}yj.RequestType1=qj;class Vj extends D1{constructor(D){super(D,2)}}yj.RequestType2=Vj;class Aj extends D1{constructor(D){super(D,3)}}yj.RequestType3=Aj;class Oj extends D1{constructor(D){super(D,4)}}yj.RequestType4=Oj;class jj extends D1{constructor(D){super(D,5)}}yj.RequestType5=jj;class Uj extends D1{constructor(D){super(D,6)}}yj.RequestType6=Uj;class Rj extends D1{constructor(D){super(D,7)}}yj.RequestType7=Rj;class Cj extends D1{constructor(D){super(D,8)}}yj.RequestType8=Cj;class Zj extends D1{constructor(D){super(D,9)}}yj.RequestType9=Zj;class Nj extends D1{constructor(D,F=l1.auto){super(D,1);this._parameterStructures=F}get parameterStructures(){return this._parameterStructures}}yj.NotificationType=Nj;class Mj extends D1{constructor(D){super(D,0)}}yj.NotificationType0=Mj;class _j extends D1{constructor(D,F=l1.auto){super(D,1);this._parameterStructures=F}get parameterStructures(){return this._parameterStructures}}yj.NotificationType1=_j;class Lj extends D1{constructor(D){super(D,2)}}yj.NotificationType2=Lj;class zj extends D1{constructor(D){super(D,3)}}yj.NotificationType3=zj;class Ij extends D1{constructor(D){super(D,4)}}yj.NotificationType4=Ij;class Tj extends D1{constructor(D){super(D,5)}}yj.NotificationType5=Tj;class Pj extends D1{constructor(D){super(D,6)}}yj.NotificationType6=Pj;class bj extends D1{constructor(D){super(D,7)}}yj.NotificationType7=bj;class hj extends D1{constructor(D){super(D,8)}}yj.NotificationType8=hj;class Sj extends D1{constructor(D){super(D,9)}}yj.NotificationType9=Sj;var Hj;(function(D){function F(J){let Y=J;return Y&&x8.string(Y.method)&&(x8.string(Y.id)||x8.number(Y.id))}D.isRequest=F;function $(J){let Y=J;return Y&&x8.string(Y.method)&&J.id===void 0}D.isNotification=$;function B(J){let Y=J;return Y&&(Y.result!==void 0||!!Y.error)&&(x8.string(Y.id)||x8.number(Y.id)||Y.id===null)}D.isResponse=B})(Hj||(yj.Message=Hj={}))});var m4=t((vj)=>{var kj;Object.defineProperty(vj,"__esModule",{value:!0});vj.LRUCache=vj.LinkedMap=vj.Touch=void 0;var n1;(function(D){D.None=0,D.First=1,D.AsOld=D.First,D.Last=2,D.AsNew=D.Last})(n1||(vj.Touch=n1={}));class g4{constructor(){this[kj]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(D){return this._map.has(D)}get(D,F=n1.None){let $=this._map.get(D);if(!$)return;if(F!==n1.None)this.touch($,F);return $.value}set(D,F,$=n1.None){let B=this._map.get(D);if(B){if(B.value=F,$!==n1.None)this.touch(B,$)}else{switch(B={key:D,value:F,next:void 0,previous:void 0},$){case n1.None:this.addItemLast(B);break;case n1.First:this.addItemFirst(B);break;case n1.Last:this.addItemLast(B);break;default:this.addItemLast(B);break}this._map.set(D,B),this._size++}return this}delete(D){return!!this.remove(D)}remove(D){let F=this._map.get(D);if(!F)return;return this._map.delete(D),this.removeItem(F),this._size--,F.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let D=this._head;return this._map.delete(D.key),this.removeItem(D),this._size--,D.value}forEach(D,F){let $=this._state,B=this._head;while(B){if(F)D.bind(F)(B.value,B.key,this);else D(B.value,B.key,this);if(this._state!==$)throw new Error("LinkedMap got modified during iteration.");B=B.next}}keys(){let D=this._state,F=this._head,$={[Symbol.iterator]:()=>{return $},next:()=>{if(this._state!==D)throw new Error("LinkedMap got modified during iteration.");if(F){let B={value:F.key,done:!1};return F=F.next,B}else return{value:void 0,done:!0}}};return $}values(){let D=this._state,F=this._head,$={[Symbol.iterator]:()=>{return $},next:()=>{if(this._state!==D)throw new Error("LinkedMap got modified during iteration.");if(F){let B={value:F.value,done:!1};return F=F.next,B}else return{value:void 0,done:!0}}};return $}entries(){let D=this._state,F=this._head,$={[Symbol.iterator]:()=>{return $},next:()=>{if(this._state!==D)throw new Error("LinkedMap got modified during iteration.");if(F){let B={value:[F.key,F.value],done:!1};return F=F.next,B}else return{value:void 0,done:!0}}};return $}[(kj=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(D){if(D>=this.size)return;if(D===0){this.clear();return}let F=this._head,$=this.size;while(F&&$>D)this._map.delete(F.key),F=F.next,$--;if(this._head=F,this._size=$,F)F.previous=void 0;this._state++}addItemFirst(D){if(!this._head&&!this._tail)this._tail=D;else if(!this._head)throw new Error("Invalid list");else D.next=this._head,this._head.previous=D;this._head=D,this._state++}addItemLast(D){if(!this._head&&!this._tail)this._head=D;else if(!this._tail)throw new Error("Invalid list");else D.previous=this._tail,this._tail.next=D;this._tail=D,this._state++}removeItem(D){if(D===this._head&&D===this._tail)this._head=void 0,this._tail=void 0;else if(D===this._head){if(!D.next)throw new Error("Invalid list");D.next.previous=void 0,this._head=D.next}else if(D===this._tail){if(!D.previous)throw new Error("Invalid list");D.previous.next=void 0,this._tail=D.previous}else{let{next:F,previous:$}=D;if(!F||!$)throw new Error("Invalid list");F.previous=$,$.next=F}D.next=void 0,D.previous=void 0,this._state++}touch(D,F){if(!this._head||!this._tail)throw new Error("Invalid list");if(F!==n1.First&&F!==n1.Last)return;if(F===n1.First){if(D===this._head)return;let{next:$,previous:B}=D;if(D===this._tail)B.next=void 0,this._tail=B;else $.previous=B,B.next=$;D.previous=void 0,D.next=this._head,this._head.previous=D,this._head=D,this._state++}else if(F===n1.Last){if(D===this._tail)return;let{next:$,previous:B}=D;if(D===this._head)$.previous=void 0,this._head=$;else $.previous=B,B.next=$;D.next=void 0,D.previous=this._tail,this._tail.next=D,this._tail=D,this._state++}}toJSON(){let D=[];return this.forEach((F,$)=>{D.push([$,F])}),D}fromJSON(D){this.clear();for(let[F,$]of D)this.set(F,$)}}vj.LinkedMap=g4;class uj extends g4{constructor(D,F=1){super();this._limit=D,this._ratio=Math.min(Math.max(0,F),1)}get limit(){return this._limit}set limit(D){this._limit=D,this.checkTrim()}get ratio(){return this._ratio}set ratio(D){this._ratio=Math.min(Math.max(0,D),1),this.checkTrim()}get(D,F=n1.AsNew){return super.get(D,F)}peek(D){return super.get(D,n1.None)}set(D,F){return super.set(D,F,n1.Last),this.checkTrim(),this}checkTrim(){if(this.size>this._limit)this.trimOld(Math.round(this._limit*this._ratio))}}vj.LRUCache=uj});var ij=t((cj)=>{Object.defineProperty(cj,"__esModule",{value:!0});cj.Disposable=void 0;var mj;(function(D){function F($){return{dispose:$}}D.create=F})(mj||(cj.Disposable=mj={}))});var u6=t((dj)=>{Object.defineProperty(dj,"__esModule",{value:!0});var c4;function p4(){if(c4===void 0)throw new Error("No runtime abstraction layer installed");return c4}(function(D){function F($){if($===void 0)throw new Error("No runtime abstraction layer provided");c4=$}D.install=F})(p4||(p4={}));dj.default=p4});var c7=t((oj)=>{Object.defineProperty(oj,"__esModule",{value:!0});oj.Emitter=oj.Event=void 0;var _v=u6(),lj;(function(D){let F={dispose(){}};D.None=function(){return F}})(lj||(oj.Event=lj={}));class nj{add(D,F=null,$){if(!this._callbacks)this._callbacks=[],this._contexts=[];if(this._callbacks.push(D),this._contexts.push(F),Array.isArray($))$.push({dispose:()=>this.remove(D,F)})}remove(D,F=null){if(!this._callbacks)return;let $=!1;for(let B=0,J=this._callbacks.length;B<J;B++)if(this._callbacks[B]===D)if(this._contexts[B]===F){this._callbacks.splice(B,1),this._contexts.splice(B,1);return}else $=!0;if($)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...D){if(!this._callbacks)return[];let F=[],$=this._callbacks.slice(0),B=this._contexts.slice(0);for(let J=0,Y=$.length;J<Y;J++)try{F.push($[J].apply(B[J],D))}catch(X){_v.default().console.error(X)}return F}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class v5{constructor(D){this._options=D}get event(){if(!this._event)this._event=(D,F,$)=>{if(!this._callbacks)this._callbacks=new nj;if(this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty())this._options.onFirstListenerAdd(this);this._callbacks.add(D,F);let B={dispose:()=>{if(!this._callbacks)return;if(this._callbacks.remove(D,F),B.dispose=v5._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty())this._options.onLastListenerRemove(this)}};if(Array.isArray($))$.push(B);return B};return this._event}fire(D){if(this._callbacks)this._callbacks.invoke.call(this._callbacks,D)}dispose(){if(this._callbacks)this._callbacks.dispose(),this._callbacks=void 0}}oj.Emitter=v5;v5._noop=function(){}});var m5=t((sj)=>{Object.defineProperty(sj,"__esModule",{value:!0});sj.CancellationTokenSource=sj.CancellationToken=void 0;var zv=u6(),Iv=m7(),i4=c7(),g5;(function(D){D.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:i4.Event.None}),D.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:i4.Event.None});function F($){let B=$;return B&&(B===D.None||B===D.Cancelled||Iv.boolean(B.isCancellationRequested)&&!!B.onCancellationRequested)}D.is=F})(g5||(sj.CancellationToken=g5={}));var Tv=Object.freeze(function(D,F){let $=zv.default().timer.setTimeout(D.bind(F),0);return{dispose(){$.dispose()}}});class d4{constructor(){this._isCancelled=!1}cancel(){if(!this._isCancelled){if(this._isCancelled=!0,this._emitter)this._emitter.fire(void 0),this.dispose()}}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){if(this._isCancelled)return Tv;if(!this._emitter)this._emitter=new i4.Emitter;return this._emitter.event}dispose(){if(this._emitter)this._emitter.dispose(),this._emitter=void 0}}class tj{get token(){if(!this._token)this._token=new d4;return this._token}cancel(){if(!this._token)this._token=g5.Cancelled;else this._token.cancel()}dispose(){if(!this._token)this._token=g5.None;else if(this._token instanceof d4)this._token.dispose()}}sj.CancellationTokenSource=tj});var YU=t((BU)=>{Object.defineProperty(BU,"__esModule",{value:!0});BU.SharedArrayReceiverStrategy=BU.SharedArraySenderStrategy=void 0;var bv=m5(),_$;(function(D){D.Continue=0,D.Cancelled=1})(_$||(_$={}));class ej{constructor(){this.buffers=new Map}enableCancellation(D){if(D.id===null)return;let F=new SharedArrayBuffer(4),$=new Int32Array(F,0,1);$[0]=_$.Continue,this.buffers.set(D.id,F),D.$cancellationData=F}async sendCancellation(D,F){let $=this.buffers.get(F);if($===void 0)return;let B=new Int32Array($,0,1);Atomics.store(B,0,_$.Cancelled)}cleanup(D){this.buffers.delete(D)}dispose(){this.buffers.clear()}}BU.SharedArraySenderStrategy=ej;class DU{constructor(D){this.data=new Int32Array(D,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===_$.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class FU{constructor(D){this.token=new DU(D)}cancel(){}dispose(){}}class $U{constructor(){this.kind="request"}createCancellationTokenSource(D){let F=D.$cancellationData;if(F===void 0)return new bv.CancellationTokenSource;return new FU(F)}}BU.SharedArrayReceiverStrategy=$U});var l4=t((QU)=>{Object.defineProperty(QU,"__esModule",{value:!0});QU.Semaphore=void 0;var Sv=u6();class XU{constructor(D=1){if(D<=0)throw new Error("Capacity must be greater than 0");this._capacity=D,this._active=0,this._waiting=[]}lock(D){return new Promise((F,$)=>{this._waiting.push({thunk:D,resolve:F,reject:$}),this.runNext()})}get active(){return this._active}runNext(){if(this._waiting.length===0||this._active===this._capacity)return;Sv.default().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let D=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let F=D.thunk();if(F instanceof Promise)F.then(($)=>{this._active--,D.resolve($),this.runNext()},($)=>{this._active--,D.reject($),this.runNext()});else this._active--,D.resolve(F),this.runNext()}catch(F){this._active--,D.reject(F),this.runNext()}}}QU.Semaphore=XU});var EU=t((GU)=>{Object.defineProperty(GU,"__esModule",{value:!0});GU.ReadableStreamMessageReader=GU.AbstractMessageReader=GU.MessageReader=void 0;var o4=u6(),p7=m7(),n4=c7(),yv=l4(),fU;(function(D){function F($){let B=$;return B&&p7.func(B.listen)&&p7.func(B.dispose)&&p7.func(B.onError)&&p7.func(B.onClose)&&p7.func(B.onPartialMessage)}D.is=F})(fU||(GU.MessageReader=fU={}));class t4{constructor(){this.errorEmitter=new n4.Emitter,this.closeEmitter=new n4.Emitter,this.partialMessageEmitter=new n4.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(D){this.errorEmitter.fire(this.asError(D))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(D){this.partialMessageEmitter.fire(D)}asError(D){if(D instanceof Error)return D;else return new Error(`Reader received error. Reason: ${p7.string(D.message)?D.message:"unknown"}`)}}GU.AbstractMessageReader=t4;var r4;(function(D){function F($){let B,J,Y,X=new Map,Q,w=new Map;if($===void 0||typeof $==="string")B=$??"utf-8";else{if(B=$.charset??"utf-8",$.contentDecoder!==void 0)Y=$.contentDecoder,X.set(Y.name,Y);if($.contentDecoders!==void 0)for(let f of $.contentDecoders)X.set(f.name,f);if($.contentTypeDecoder!==void 0)Q=$.contentTypeDecoder,w.set(Q.name,Q);if($.contentTypeDecoders!==void 0)for(let f of $.contentTypeDecoders)w.set(f.name,f)}if(Q===void 0)Q=o4.default().applicationJson.decoder,w.set(Q.name,Q);return{charset:B,contentDecoder:Y,contentDecoders:X,contentTypeDecoder:Q,contentTypeDecoders:w}}D.fromOptions=F})(r4||(r4={}));class WU extends t4{constructor(D,F){super();this.readable=D,this.options=r4.fromOptions(F),this.buffer=o4.default().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new yv.Semaphore(1)}set partialMessageTimeout(D){this._partialMessageTimeout=D}get partialMessageTimeout(){return this._partialMessageTimeout}listen(D){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=D;let F=this.readable.onData(($)=>{this.onData($)});return this.readable.onError(($)=>this.fireError($)),this.readable.onClose(()=>this.fireClose()),F}onData(D){try{this.buffer.append(D);while(!0){if(this.nextMessageLength===-1){let $=this.buffer.tryReadHeaders(!0);if(!$)return;let B=$.get("content-length");if(!B){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries($))}`));return}let J=parseInt(B);if(isNaN(J)){this.fireError(new Error(`Content-Length value must be a number. Got ${B}`));return}this.nextMessageLength=J}let F=this.buffer.tryReadBody(this.nextMessageLength);if(F===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let $=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(F):F,B=await this.options.contentTypeDecoder.decode($,this.options);this.callback(B)}).catch(($)=>{this.fireError($)})}}catch(F){this.fireError(F)}}clearPartialMessageTimer(){if(this.partialMessageTimer)this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0}setPartialMessageTimer(){if(this.clearPartialMessageTimer(),this._partialMessageTimeout<=0)return;this.partialMessageTimer=o4.default().timer.setTimeout((D,F)=>{if(this.partialMessageTimer=void 0,D===this.messageToken)this.firePartialMessage({messageToken:D,waitingTime:F}),this.setPartialMessageTimer()},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout)}}GU.ReadableStreamMessageReader=WU});var RU=t((jU)=>{Object.defineProperty(jU,"__esModule",{value:!0});jU.WriteableStreamMessageWriter=jU.AbstractMessageWriter=jU.MessageWriter=void 0;var KU=u6(),L$=m7(),uv=l4(),qU=c7(),vv="Content-Length: ",VU=`\r
`,AU;(function(D){function F($){let B=$;return B&&L$.func(B.dispose)&&L$.func(B.onClose)&&L$.func(B.onError)&&L$.func(B.write)}D.is=F})(AU||(jU.MessageWriter=AU={}));class a4{constructor(){this.errorEmitter=new qU.Emitter,this.closeEmitter=new qU.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(D,F,$){this.errorEmitter.fire([this.asError(D),F,$])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(D){if(D instanceof Error)return D;else return new Error(`Writer received error. Reason: ${L$.string(D.message)?D.message:"unknown"}`)}}jU.AbstractMessageWriter=a4;var s4;(function(D){function F($){if($===void 0||typeof $==="string")return{charset:$??"utf-8",contentTypeEncoder:KU.default().applicationJson.encoder};else return{charset:$.charset??"utf-8",contentEncoder:$.contentEncoder,contentTypeEncoder:$.contentTypeEncoder??KU.default().applicationJson.encoder}}D.fromOptions=F})(s4||(s4={}));class OU extends a4{constructor(D,F){super();this.writable=D,this.options=s4.fromOptions(F),this.errorCount=0,this.writeSemaphore=new uv.Semaphore(1),this.writable.onError(($)=>this.fireError($)),this.writable.onClose(()=>this.fireClose())}async write(D){return this.writeSemaphore.lock(async()=>{return this.options.contentTypeEncoder.encode(D,this.options).then(($)=>{if(this.options.contentEncoder!==void 0)return this.options.contentEncoder.encode($);else return $}).then(($)=>{let B=[];return B.push(vv,$.byteLength.toString(),VU),B.push(VU),this.doWrite(D,B,$)},($)=>{throw this.fireError($),$})})}async doWrite(D,F,$){try{return await this.writable.write(F.join(""),"ascii"),this.writable.write($)}catch(B){return this.handleError(B,D),Promise.reject(B)}}handleError(D,F){this.errorCount++,this.fireError(D,F,this.errorCount)}end(){this.writable.end()}}jU.WriteableStreamMessageWriter=OU});var MU=t((ZU)=>{Object.defineProperty(ZU,"__esModule",{value:!0});ZU.AbstractMessageBuffer=void 0;var cv=13,pv=10,iv=`\r
`;class CU{constructor(D="utf-8"){this._encoding=D,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(D){let F=typeof D==="string"?this.fromString(D,this._encoding):D;this._chunks.push(F),this._totalLength+=F.byteLength}tryReadHeaders(D=!1){if(this._chunks.length===0)return;let F=0,$=0,B=0,J=0;D:while($<this._chunks.length){let w=this._chunks[$];B=0;F:while(B<w.length){switch(w[B]){case cv:switch(F){case 0:F=1;break;case 2:F=3;break;default:F=0}break;case pv:switch(F){case 1:F=2;break;case 3:F=4,B++;break D;default:F=0}break;default:F=0}B++}J+=w.byteLength,$++}if(F!==4)return;let Y=this._read(J+B),X=new Map,Q=this.toString(Y,"ascii").split(iv);if(Q.length<2)return X;for(let w=0;w<Q.length-2;w++){let f=Q[w],G=f.indexOf(":");if(G===-1)throw new Error(`Message header must separate key and value using ':'
${f}`);let H=f.substr(0,G),K=f.substr(G+1).trim();X.set(D?H.toLowerCase():H,K)}return X}tryReadBody(D){if(this._totalLength<D)return;return this._read(D)}get numberOfBytes(){return this._totalLength}_read(D){if(D===0)return this.emptyBuffer();if(D>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===D){let J=this._chunks[0];return this._chunks.shift(),this._totalLength-=D,this.asNative(J)}if(this._chunks[0].byteLength>D){let J=this._chunks[0],Y=this.asNative(J,D);return this._chunks[0]=J.slice(D),this._totalLength-=D,Y}let F=this.allocNative(D),$=0,B=0;while(D>0){let J=this._chunks[B];if(J.byteLength>D){let Y=J.slice(0,D);F.set(Y,$),$+=D,this._chunks[B]=J.slice(D),this._totalLength-=D,D-=D}else F.set(J,$),$+=J.byteLength,this._chunks.shift(),this._totalLength-=J.byteLength,D-=J.byteLength}return F}}ZU.AbstractMessageBuffer=CU});var xU=t((PU)=>{Object.defineProperty(PU,"__esModule",{value:!0});PU.createMessageConnection=PU.ConnectionOptions=PU.MessageStrategy=PU.CancellationStrategy=PU.CancellationSenderStrategy=PU.CancellationReceiverStrategy=PU.RequestCancellationReceiverStrategy=PU.IdCancellationReceiverStrategy=PU.ConnectionStrategy=PU.ConnectionError=PU.ConnectionErrors=PU.LogTraceNotification=PU.SetTraceNotification=PU.TraceFormat=PU.TraceValues=PU.Trace=PU.NullLogger=PU.ProgressType=PU.ProgressToken=void 0;var _U=u6(),Y1=m7(),r0=v4(),LU=m4(),z$=c7(),e4=m5(),P$;(function(D){D.type=new r0.NotificationType("$/cancelRequest")})(P$||(P$={}));var D3;(function(D){function F($){return typeof $==="string"||typeof $==="number"}D.is=F})(D3||(PU.ProgressToken=D3={}));var I$;(function(D){D.type=new r0.NotificationType("$/progress")})(I$||(I$={}));class TU{constructor(){}}PU.ProgressType=TU;var F3;(function(D){function F($){return Y1.func($)}D.is=F})(F3||(F3={}));PU.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var hD;(function(D){D[D.Off=0]="Off",D[D.Messages=1]="Messages",D[D.Compact=2]="Compact",D[D.Verbose=3]="Verbose"})(hD||(PU.Trace=hD={}));var zU;(function(D){D.Off="off",D.Messages="messages",D.Compact="compact",D.Verbose="verbose"})(zU||(PU.TraceValues=zU={}));(function(D){function F(B){if(!Y1.string(B))return D.Off;switch(B=B.toLowerCase(),B){case"off":return D.Off;case"messages":return D.Messages;case"compact":return D.Compact;case"verbose":return D.Verbose;default:return D.Off}}D.fromString=F;function $(B){switch(B){case D.Off:return"off";case D.Messages:return"messages";case D.Compact:return"compact";case D.Verbose:return"verbose";default:return"off"}}D.toString=$})(hD||(PU.Trace=hD={}));var IF;(function(D){D.Text="text",D.JSON="json"})(IF||(PU.TraceFormat=IF={}));(function(D){function F($){if(!Y1.string($))return D.Text;if($=$.toLowerCase(),$==="json")return D.JSON;else return D.Text}D.fromString=F})(IF||(PU.TraceFormat=IF={}));var $3;(function(D){D.type=new r0.NotificationType("$/setTrace")})($3||(PU.SetTraceNotification=$3={}));var c5;(function(D){D.type=new r0.NotificationType("$/logTrace")})(c5||(PU.LogTraceNotification=c5={}));var T$;(function(D){D[D.Closed=1]="Closed",D[D.Disposed=2]="Disposed",D[D.AlreadyListening=3]="AlreadyListening"})(T$||(PU.ConnectionErrors=T$={}));class i7 extends Error{constructor(D,F){super(F);this.code=D,Object.setPrototypeOf(this,i7.prototype)}}PU.ConnectionError=i7;var B3;(function(D){function F($){let B=$;return B&&Y1.func(B.cancelUndispatched)}D.is=F})(B3||(PU.ConnectionStrategy=B3={}));var p5;(function(D){function F($){let B=$;return B&&(B.kind===void 0||B.kind==="id")&&Y1.func(B.createCancellationTokenSource)&&(B.dispose===void 0||Y1.func(B.dispose))}D.is=F})(p5||(PU.IdCancellationReceiverStrategy=p5={}));var J3;(function(D){function F($){let B=$;return B&&B.kind==="request"&&Y1.func(B.createCancellationTokenSource)&&(B.dispose===void 0||Y1.func(B.dispose))}D.is=F})(J3||(PU.RequestCancellationReceiverStrategy=J3={}));var i5;(function(D){D.Message=Object.freeze({createCancellationTokenSource($){return new e4.CancellationTokenSource}});function F($){return p5.is($)||J3.is($)}D.is=F})(i5||(PU.CancellationReceiverStrategy=i5={}));var d5;(function(D){D.Message=Object.freeze({sendCancellation($,B){return $.sendNotification(P$.type,{id:B})},cleanup($){}});function F($){let B=$;return B&&Y1.func(B.sendCancellation)&&Y1.func(B.cleanup)}D.is=F})(d5||(PU.CancellationSenderStrategy=d5={}));var l5;(function(D){D.Message=Object.freeze({receiver:i5.Message,sender:d5.Message});function F($){let B=$;return B&&i5.is(B.receiver)&&d5.is(B.sender)}D.is=F})(l5||(PU.CancellationStrategy=l5={}));var n5;(function(D){function F($){let B=$;return B&&Y1.func(B.handleMessage)}D.is=F})(n5||(PU.MessageStrategy=n5={}));var IU;(function(D){function F($){let B=$;return B&&(l5.is(B.cancellationStrategy)||B3.is(B.connectionStrategy)||n5.is(B.messageStrategy))}D.is=F})(IU||(PU.ConnectionOptions=IU={}));var K2;(function(D){D[D.New=1]="New",D[D.Listening=2]="Listening",D[D.Closed=3]="Closed",D[D.Disposed=4]="Disposed"})(K2||(K2={}));function dv(D,F,$,B){let J=$!==void 0?$:PU.NullLogger,Y=0,X=0,Q=0,w="2.0",f=void 0,G=new Map,H=void 0,K=new Map,E=new Map,O,q=new LU.LinkedMap,U=new Map,N=new Set,L=new Map,C=hD.Off,R=IF.Text,I,h=K2.New,p=new z$.Emitter,P=new z$.Emitter,v=new z$.Emitter,n=new z$.Emitter,_=new z$.Emitter,x=B&&B.cancellationStrategy?B.cancellationStrategy:l5.Message;function o(T){if(T===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+T.toString()}function M(T){if(T===null)return"res-unknown-"+(++Q).toString();else return"res-"+T.toString()}function r(){return"not-"+(++X).toString()}function $0(T,i){if(r0.Message.isRequest(i))T.set(o(i.id),i);else if(r0.Message.isResponse(i))T.set(M(i.id),i);else T.set(r(),i)}function V0(T){return}function s0(){return h===K2.Listening}function U0(){return h===K2.Closed}function A0(){return h===K2.Disposed}function PD(){if(h===K2.New||h===K2.Listening)h=K2.Closed,P.fire(void 0)}function zD(T){p.fire([T,void 0,void 0])}function W0(T){p.fire(T)}D.onClose(PD),D.onError(zD),F.onClose(PD),F.onError(W0);function a(){if(O||q.size===0)return;O=_U.default().timer.setImmediate(()=>{O=void 0,G0()})}function mD(T){if(r0.Message.isRequest(T))T0(T);else if(r0.Message.isNotification(T))WD(T);else if(r0.Message.isResponse(T))Y0(T);else UD(T)}function G0(){if(q.size===0)return;let T=q.shift();try{let i=B?.messageStrategy;if(n5.is(i))i.handleMessage(T,mD);else mD(T)}finally{a()}}let YD=(T)=>{try{if(r0.Message.isNotification(T)&&T.method===P$.type.method){let i=T.params.id,Q0=o(i),O0=q.get(Q0);if(r0.Message.isRequest(O0)){let f0=B?.connectionStrategy,x0=f0&&f0.cancelUndispatched?f0.cancelUndispatched(O0,V0):V0(O0);if(x0&&(x0.error!==void 0||x0.result!==void 0)){q.delete(Q0),L.delete(i),x0.id=O0.id,y(x0,T.method,Date.now()),F.write(x0).catch(()=>J.error("Sending response for canceled message failed."));return}}let M0=L.get(i);if(M0!==void 0){M0.cancel(),g(T);return}else N.add(i)}$0(q,T)}finally{a()}};function T0(T){if(A0())return;function i(d0,RD,l0){let j0={jsonrpc:w,id:T.id};if(d0 instanceof r0.ResponseError)j0.error=d0.toJson();else j0.result=d0===void 0?null:d0;y(j0,RD,l0),F.write(j0).catch(()=>J.error("Sending response failed."))}function Q0(d0,RD,l0){let j0={jsonrpc:w,id:T.id,error:d0.toJson()};y(j0,RD,l0),F.write(j0).catch(()=>J.error("Sending response failed."))}function O0(d0,RD,l0){if(d0===void 0)d0=null;let j0={jsonrpc:w,id:T.id,result:d0};y(j0,RD,l0),F.write(j0).catch(()=>J.error("Sending response failed."))}c(T);let M0=G.get(T.method),f0,x0;if(M0)f0=M0.type,x0=M0.handler;let KD=Date.now();if(x0||f){let d0=T.id??String(Date.now()),RD=p5.is(x.receiver)?x.receiver.createCancellationTokenSource(d0):x.receiver.createCancellationTokenSource(T);if(T.id!==null&&N.has(T.id))RD.cancel();if(T.id!==null)L.set(d0,RD);try{let l0;if(x0)if(T.params===void 0){if(f0!==void 0&&f0.numberOfParams!==0){Q0(new r0.ResponseError(r0.ErrorCodes.InvalidParams,`Request ${T.method} defines ${f0.numberOfParams} params but received none.`),T.method,KD);return}l0=x0(RD.token)}else if(Array.isArray(T.params)){if(f0!==void 0&&f0.parameterStructures===r0.ParameterStructures.byName){Q0(new r0.ResponseError(r0.ErrorCodes.InvalidParams,`Request ${T.method} defines parameters by name but received parameters by position`),T.method,KD);return}l0=x0(...T.params,RD.token)}else{if(f0!==void 0&&f0.parameterStructures===r0.ParameterStructures.byPosition){Q0(new r0.ResponseError(r0.ErrorCodes.InvalidParams,`Request ${T.method} defines parameters by position but received parameters by name`),T.method,KD);return}l0=x0(T.params,RD.token)}else if(f)l0=f(T.method,T.params,RD.token);let j0=l0;if(!l0)L.delete(d0),O0(l0,T.method,KD);else if(j0.then)j0.then((VD)=>{L.delete(d0),i(VD,T.method,KD)},(VD)=>{if(L.delete(d0),VD instanceof r0.ResponseError)Q0(VD,T.method,KD);else if(VD&&Y1.string(VD.message))Q0(new r0.ResponseError(r0.ErrorCodes.InternalError,`Request ${T.method} failed with message: ${VD.message}`),T.method,KD);else Q0(new r0.ResponseError(r0.ErrorCodes.InternalError,`Request ${T.method} failed unexpectedly without providing any details.`),T.method,KD)});else L.delete(d0),i(l0,T.method,KD)}catch(l0){if(L.delete(d0),l0 instanceof r0.ResponseError)i(l0,T.method,KD);else if(l0&&Y1.string(l0.message))Q0(new r0.ResponseError(r0.ErrorCodes.InternalError,`Request ${T.method} failed with message: ${l0.message}`),T.method,KD);else Q0(new r0.ResponseError(r0.ErrorCodes.InternalError,`Request ${T.method} failed unexpectedly without providing any details.`),T.method,KD)}}else Q0(new r0.ResponseError(r0.ErrorCodes.MethodNotFound,`Unhandled method ${T.method}`),T.method,KD)}function Y0(T){if(A0())return;if(T.id===null)if(T.error)J.error(`Received response message without id: Error is: 
${JSON.stringify(T.error,void 0,4)}`);else J.error("Received response message without id. No further error information provided.");else{let i=T.id,Q0=U.get(i);if(S(T,Q0),Q0!==void 0){U.delete(i);try{if(T.error){let O0=T.error;Q0.reject(new r0.ResponseError(O0.code,O0.message,O0.data))}else if(T.result!==void 0)Q0.resolve(T.result);else throw new Error("Should never happen.")}catch(O0){if(O0.message)J.error(`Response handler '${Q0.method}' failed with message: ${O0.message}`);else J.error(`Response handler '${Q0.method}' failed unexpectedly.`)}}}}function WD(T){if(A0())return;let i=void 0,Q0;if(T.method===P$.type.method){let O0=T.params.id;N.delete(O0),g(T);return}else{let O0=K.get(T.method);if(O0)Q0=O0.handler,i=O0.type}if(Q0||H)try{if(g(T),Q0)if(T.params===void 0){if(i!==void 0){if(i.numberOfParams!==0&&i.parameterStructures!==r0.ParameterStructures.byName)J.error(`Notification ${T.method} defines ${i.numberOfParams} params but received none.`)}Q0()}else if(Array.isArray(T.params)){let O0=T.params;if(T.method===I$.type.method&&O0.length===2&&D3.is(O0[0]))Q0({token:O0[0],value:O0[1]});else{if(i!==void 0){if(i.parameterStructures===r0.ParameterStructures.byName)J.error(`Notification ${T.method} defines parameters by name but received parameters by position`);if(i.numberOfParams!==T.params.length)J.error(`Notification ${T.method} defines ${i.numberOfParams} params but received ${O0.length} arguments`)}Q0(...O0)}}else{if(i!==void 0&&i.parameterStructures===r0.ParameterStructures.byPosition)J.error(`Notification ${T.method} defines parameters by position but received parameters by name`);Q0(T.params)}else if(H)H(T.method,T.params)}catch(O0){if(O0.message)J.error(`Notification handler '${T.method}' failed with message: ${O0.message}`);else J.error(`Notification handler '${T.method}' failed unexpectedly.`)}else v.fire(T)}function UD(T){if(!T){J.error("Received empty message.");return}J.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(T,null,4)}`);let i=T;if(Y1.string(i.id)||Y1.number(i.id)){let Q0=i.id,O0=U.get(Q0);if(O0)O0.reject(new Error("The received response has neither a result nor an error property."))}}function l(T){if(T===void 0||T===null)return;switch(C){case hD.Verbose:return JSON.stringify(T,null,4);case hD.Compact:return JSON.stringify(T);default:return}}function _D(T){if(C===hD.Off||!I)return;if(R===IF.Text){let i=void 0;if((C===hD.Verbose||C===hD.Compact)&&T.params)i=`Params: ${l(T.params)}

`;I.log(`Sending request '${T.method} - (${T.id})'.`,i)}else u("send-request",T)}function b(T){if(C===hD.Off||!I)return;if(R===IF.Text){let i=void 0;if(C===hD.Verbose||C===hD.Compact)if(T.params)i=`Params: ${l(T.params)}

`;else i=`No parameters provided.

`;I.log(`Sending notification '${T.method}'.`,i)}else u("send-notification",T)}function y(T,i,Q0){if(C===hD.Off||!I)return;if(R===IF.Text){let O0=void 0;if(C===hD.Verbose||C===hD.Compact){if(T.error&&T.error.data)O0=`Error data: ${l(T.error.data)}

`;else if(T.result)O0=`Result: ${l(T.result)}

`;else if(T.error===void 0)O0=`No result returned.

`}I.log(`Sending response '${i} - (${T.id})'. Processing request took ${Date.now()-Q0}ms`,O0)}else u("send-response",T)}function c(T){if(C===hD.Off||!I)return;if(R===IF.Text){let i=void 0;if((C===hD.Verbose||C===hD.Compact)&&T.params)i=`Params: ${l(T.params)}

`;I.log(`Received request '${T.method} - (${T.id})'.`,i)}else u("receive-request",T)}function g(T){if(C===hD.Off||!I||T.method===c5.type.method)return;if(R===IF.Text){let i=void 0;if(C===hD.Verbose||C===hD.Compact)if(T.params)i=`Params: ${l(T.params)}

`;else i=`No parameters provided.

`;I.log(`Received notification '${T.method}'.`,i)}else u("receive-notification",T)}function S(T,i){if(C===hD.Off||!I)return;if(R===IF.Text){let Q0=void 0;if(C===hD.Verbose||C===hD.Compact){if(T.error&&T.error.data)Q0=`Error data: ${l(T.error.data)}

`;else if(T.result)Q0=`Result: ${l(T.result)}

`;else if(T.error===void 0)Q0=`No result returned.

`}if(i){let O0=T.error?` Request failed: ${T.error.message} (${T.error.code}).`:"";I.log(`Received response '${i.method} - (${T.id})' in ${Date.now()-i.timerStart}ms.${O0}`,Q0)}else I.log(`Received response ${T.id} without active response promise.`,Q0)}else u("receive-response",T)}function u(T,i){if(!I||C===hD.Off)return;let Q0={isLSPMessage:!0,type:T,message:i,timestamp:Date.now()};I.log(Q0)}function D0(){if(U0())throw new i7(T$.Closed,"Connection is closed.");if(A0())throw new i7(T$.Disposed,"Connection is disposed.")}function H0(){if(s0())throw new i7(T$.AlreadyListening,"Connection is already listening")}function g0(){if(!s0())throw new Error("Call listen() first.")}function z0(T){if(T===void 0)return null;else return T}function WF(T){if(T===null)return;else return T}function ED(T){return T!==void 0&&T!==null&&!Array.isArray(T)&&typeof T==="object"}function Z1(T,i){switch(T){case r0.ParameterStructures.auto:if(ED(i))return WF(i);else return[z0(i)];case r0.ParameterStructures.byName:if(!ED(i))throw new Error("Received parameters by name but param is not an object literal.");return WF(i);case r0.ParameterStructures.byPosition:return[z0(i)];default:throw new Error(`Unknown parameter structure ${T.toString()}`)}}function q1(T,i){let Q0,O0=T.numberOfParams;switch(O0){case 0:Q0=void 0;break;case 1:Q0=Z1(T.parameterStructures,i[0]);break;default:Q0=[];for(let M0=0;M0<i.length&&M0<O0;M0++)Q0.push(z0(i[M0]));if(i.length<O0)for(let M0=i.length;M0<O0;M0++)Q0.push(null);break}return Q0}let P1={sendNotification:(T,...i)=>{D0();let Q0,O0;if(Y1.string(T)){Q0=T;let f0=i[0],x0=0,KD=r0.ParameterStructures.auto;if(r0.ParameterStructures.is(f0))x0=1,KD=f0;let d0=i.length,RD=d0-x0;switch(RD){case 0:O0=void 0;break;case 1:O0=Z1(KD,i[x0]);break;default:if(KD===r0.ParameterStructures.byName)throw new Error(`Received ${RD} parameters for 'by Name' notification parameter structure.`);O0=i.slice(x0,d0).map((l0)=>z0(l0));break}}else{let f0=i;Q0=T.method,O0=q1(T,f0)}let M0={jsonrpc:w,method:Q0,params:O0};return b(M0),F.write(M0).catch((f0)=>{throw J.error("Sending notification failed."),f0})},onNotification:(T,i)=>{D0();let Q0;if(Y1.func(T))H=T;else if(i)if(Y1.string(T))Q0=T,K.set(T,{type:void 0,handler:i});else Q0=T.method,K.set(T.method,{type:T,handler:i});return{dispose:()=>{if(Q0!==void 0)K.delete(Q0);else H=void 0}}},onProgress:(T,i,Q0)=>{if(E.has(i))throw new Error(`Progress handler for token ${i} already registered`);return E.set(i,Q0),{dispose:()=>{E.delete(i)}}},sendProgress:(T,i,Q0)=>{return P1.sendNotification(I$.type,{token:i,value:Q0})},onUnhandledProgress:n.event,sendRequest:(T,...i)=>{D0(),g0();let Q0,O0,M0=void 0;if(Y1.string(T)){Q0=T;let d0=i[0],RD=i[i.length-1],l0=0,j0=r0.ParameterStructures.auto;if(r0.ParameterStructures.is(d0))l0=1,j0=d0;let VD=i.length;if(e4.CancellationToken.is(RD))VD=VD-1,M0=RD;let sD=VD-l0;switch(sD){case 0:O0=void 0;break;case 1:O0=Z1(j0,i[l0]);break;default:if(j0===r0.ParameterStructures.byName)throw new Error(`Received ${sD} parameters for 'by Name' request parameter structure.`);O0=i.slice(l0,VD).map((SF)=>z0(SF));break}}else{let d0=i;Q0=T.method,O0=q1(T,d0);let RD=T.numberOfParams;M0=e4.CancellationToken.is(d0[RD])?d0[RD]:void 0}let f0=Y++,x0;if(M0)x0=M0.onCancellationRequested(()=>{let d0=x.sender.sendCancellation(P1,f0);if(d0===void 0)return J.log(`Received no promise from cancellation strategy when cancelling id ${f0}`),Promise.resolve();else return d0.catch(()=>{J.log(`Sending cancellation messages for id ${f0} failed`)})});let KD={jsonrpc:w,id:f0,method:Q0,params:O0};if(_D(KD),typeof x.sender.enableCancellation==="function")x.sender.enableCancellation(KD);return new Promise(async(d0,RD)=>{let l0=(sD)=>{d0(sD),x.sender.cleanup(f0),x0?.dispose()},j0=(sD)=>{RD(sD),x.sender.cleanup(f0),x0?.dispose()},VD={method:Q0,timerStart:Date.now(),resolve:l0,reject:j0};try{U.set(f0,VD),await F.write(KD)}catch(sD){throw U.delete(f0),VD.reject(new r0.ResponseError(r0.ErrorCodes.MessageWriteError,sD.message?sD.message:"Unknown reason")),J.error("Sending request failed."),sD}})},onRequest:(T,i)=>{D0();let Q0=null;if(F3.is(T))Q0=void 0,f=T;else if(Y1.string(T)){if(Q0=null,i!==void 0)Q0=T,G.set(T,{handler:i,type:void 0})}else if(i!==void 0)Q0=T.method,G.set(T.method,{type:T,handler:i});return{dispose:()=>{if(Q0===null)return;if(Q0!==void 0)G.delete(Q0);else f=void 0}}},hasPendingResponse:()=>{return U.size>0},trace:async(T,i,Q0)=>{let O0=!1,M0=IF.Text;if(Q0!==void 0)if(Y1.boolean(Q0))O0=Q0;else O0=Q0.sendNotification||!1,M0=Q0.traceFormat||IF.Text;if(C=T,R=M0,C===hD.Off)I=void 0;else I=i;if(O0&&!U0()&&!A0())await P1.sendNotification($3.type,{value:hD.toString(T)})},onError:p.event,onClose:P.event,onUnhandledNotification:v.event,onDispose:_.event,end:()=>{F.end()},dispose:()=>{if(A0())return;h=K2.Disposed,_.fire(void 0);let T=new r0.ResponseError(r0.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let i of U.values())i.reject(T);if(U=new Map,L=new Map,N=new Set,q=new LU.LinkedMap,Y1.func(F.dispose))F.dispose();if(Y1.func(D.dispose))D.dispose()},listen:()=>{D0(),H0(),h=K2.Listening,D.listen(YD)},inspect:()=>{_U.default().console.log("inspect")}};return P1.onNotification(c5.type,(T)=>{if(C===hD.Off||!I)return;let i=C===hD.Verbose||C===hD.Compact;I.log(T.message,i?T.verbose:void 0)}),P1.onNotification(I$.type,(T)=>{let i=E.get(T.token);if(i)i(T.value);else n.fire(T)}),P1}PU.createMessageConnection=dv});var o5=t((I0)=>{Object.defineProperty(I0,"__esModule",{value:!0});I0.ProgressType=I0.ProgressToken=I0.createMessageConnection=I0.NullLogger=I0.ConnectionOptions=I0.ConnectionStrategy=I0.AbstractMessageBuffer=I0.WriteableStreamMessageWriter=I0.AbstractMessageWriter=I0.MessageWriter=I0.ReadableStreamMessageReader=I0.AbstractMessageReader=I0.MessageReader=I0.SharedArrayReceiverStrategy=I0.SharedArraySenderStrategy=I0.CancellationToken=I0.CancellationTokenSource=I0.Emitter=I0.Event=I0.Disposable=I0.LRUCache=I0.Touch=I0.LinkedMap=I0.ParameterStructures=I0.NotificationType9=I0.NotificationType8=I0.NotificationType7=I0.NotificationType6=I0.NotificationType5=I0.NotificationType4=I0.NotificationType3=I0.NotificationType2=I0.NotificationType1=I0.NotificationType0=I0.NotificationType=I0.ErrorCodes=I0.ResponseError=I0.RequestType9=I0.RequestType8=I0.RequestType7=I0.RequestType6=I0.RequestType5=I0.RequestType4=I0.RequestType3=I0.RequestType2=I0.RequestType1=I0.RequestType0=I0.RequestType=I0.Message=I0.RAL=void 0;I0.MessageStrategy=I0.CancellationStrategy=I0.CancellationSenderStrategy=I0.CancellationReceiverStrategy=I0.ConnectionError=I0.ConnectionErrors=I0.LogTraceNotification=I0.SetTraceNotification=I0.TraceFormat=I0.TraceValues=I0.Trace=void 0;var lD=v4();Object.defineProperty(I0,"Message",{enumerable:!0,get:function(){return lD.Message}});Object.defineProperty(I0,"RequestType",{enumerable:!0,get:function(){return lD.RequestType}});Object.defineProperty(I0,"RequestType0",{enumerable:!0,get:function(){return lD.RequestType0}});Object.defineProperty(I0,"RequestType1",{enumerable:!0,get:function(){return lD.RequestType1}});Object.defineProperty(I0,"RequestType2",{enumerable:!0,get:function(){return lD.RequestType2}});Object.defineProperty(I0,"RequestType3",{enumerable:!0,get:function(){return lD.RequestType3}});Object.defineProperty(I0,"RequestType4",{enumerable:!0,get:function(){return lD.RequestType4}});Object.defineProperty(I0,"RequestType5",{enumerable:!0,get:function(){return lD.RequestType5}});Object.defineProperty(I0,"RequestType6",{enumerable:!0,get:function(){return lD.RequestType6}});Object.defineProperty(I0,"RequestType7",{enumerable:!0,get:function(){return lD.RequestType7}});Object.defineProperty(I0,"RequestType8",{enumerable:!0,get:function(){return lD.RequestType8}});Object.defineProperty(I0,"RequestType9",{enumerable:!0,get:function(){return lD.RequestType9}});Object.defineProperty(I0,"ResponseError",{enumerable:!0,get:function(){return lD.ResponseError}});Object.defineProperty(I0,"ErrorCodes",{enumerable:!0,get:function(){return lD.ErrorCodes}});Object.defineProperty(I0,"NotificationType",{enumerable:!0,get:function(){return lD.NotificationType}});Object.defineProperty(I0,"NotificationType0",{enumerable:!0,get:function(){return lD.NotificationType0}});Object.defineProperty(I0,"NotificationType1",{enumerable:!0,get:function(){return lD.NotificationType1}});Object.defineProperty(I0,"NotificationType2",{enumerable:!0,get:function(){return lD.NotificationType2}});Object.defineProperty(I0,"NotificationType3",{enumerable:!0,get:function(){return lD.NotificationType3}});Object.defineProperty(I0,"NotificationType4",{enumerable:!0,get:function(){return lD.NotificationType4}});Object.defineProperty(I0,"NotificationType5",{enumerable:!0,get:function(){return lD.NotificationType5}});Object.defineProperty(I0,"NotificationType6",{enumerable:!0,get:function(){return lD.NotificationType6}});Object.defineProperty(I0,"NotificationType7",{enumerable:!0,get:function(){return lD.NotificationType7}});Object.defineProperty(I0,"NotificationType8",{enumerable:!0,get:function(){return lD.NotificationType8}});Object.defineProperty(I0,"NotificationType9",{enumerable:!0,get:function(){return lD.NotificationType9}});Object.defineProperty(I0,"ParameterStructures",{enumerable:!0,get:function(){return lD.ParameterStructures}});var Y3=m4();Object.defineProperty(I0,"LinkedMap",{enumerable:!0,get:function(){return Y3.LinkedMap}});Object.defineProperty(I0,"LRUCache",{enumerable:!0,get:function(){return Y3.LRUCache}});Object.defineProperty(I0,"Touch",{enumerable:!0,get:function(){return Y3.Touch}});var Qg=ij();Object.defineProperty(I0,"Disposable",{enumerable:!0,get:function(){return Qg.Disposable}});var kU=c7();Object.defineProperty(I0,"Event",{enumerable:!0,get:function(){return kU.Event}});Object.defineProperty(I0,"Emitter",{enumerable:!0,get:function(){return kU.Emitter}});var uU=m5();Object.defineProperty(I0,"CancellationTokenSource",{enumerable:!0,get:function(){return uU.CancellationTokenSource}});Object.defineProperty(I0,"CancellationToken",{enumerable:!0,get:function(){return uU.CancellationToken}});var vU=YU();Object.defineProperty(I0,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return vU.SharedArraySenderStrategy}});Object.defineProperty(I0,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return vU.SharedArrayReceiverStrategy}});var X3=EU();Object.defineProperty(I0,"MessageReader",{enumerable:!0,get:function(){return X3.MessageReader}});Object.defineProperty(I0,"AbstractMessageReader",{enumerable:!0,get:function(){return X3.AbstractMessageReader}});Object.defineProperty(I0,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return X3.ReadableStreamMessageReader}});var Q3=RU();Object.defineProperty(I0,"MessageWriter",{enumerable:!0,get:function(){return Q3.MessageWriter}});Object.defineProperty(I0,"AbstractMessageWriter",{enumerable:!0,get:function(){return Q3.AbstractMessageWriter}});Object.defineProperty(I0,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return Q3.WriteableStreamMessageWriter}});var wg=MU();Object.defineProperty(I0,"AbstractMessageBuffer",{enumerable:!0,get:function(){return wg.AbstractMessageBuffer}});var v1=xU();Object.defineProperty(I0,"ConnectionStrategy",{enumerable:!0,get:function(){return v1.ConnectionStrategy}});Object.defineProperty(I0,"ConnectionOptions",{enumerable:!0,get:function(){return v1.ConnectionOptions}});Object.defineProperty(I0,"NullLogger",{enumerable:!0,get:function(){return v1.NullLogger}});Object.defineProperty(I0,"createMessageConnection",{enumerable:!0,get:function(){return v1.createMessageConnection}});Object.defineProperty(I0,"ProgressToken",{enumerable:!0,get:function(){return v1.ProgressToken}});Object.defineProperty(I0,"ProgressType",{enumerable:!0,get:function(){return v1.ProgressType}});Object.defineProperty(I0,"Trace",{enumerable:!0,get:function(){return v1.Trace}});Object.defineProperty(I0,"TraceValues",{enumerable:!0,get:function(){return v1.TraceValues}});Object.defineProperty(I0,"TraceFormat",{enumerable:!0,get:function(){return v1.TraceFormat}});Object.defineProperty(I0,"SetTraceNotification",{enumerable:!0,get:function(){return v1.SetTraceNotification}});Object.defineProperty(I0,"LogTraceNotification",{enumerable:!0,get:function(){return v1.LogTraceNotification}});Object.defineProperty(I0,"ConnectionErrors",{enumerable:!0,get:function(){return v1.ConnectionErrors}});Object.defineProperty(I0,"ConnectionError",{enumerable:!0,get:function(){return v1.ConnectionError}});Object.defineProperty(I0,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return v1.CancellationReceiverStrategy}});Object.defineProperty(I0,"CancellationSenderStrategy",{enumerable:!0,get:function(){return v1.CancellationSenderStrategy}});Object.defineProperty(I0,"CancellationStrategy",{enumerable:!0,get:function(){return v1.CancellationStrategy}});Object.defineProperty(I0,"MessageStrategy",{enumerable:!0,get:function(){return v1.MessageStrategy}});var fg=u6();I0.RAL=fg.default});var dU=t((iU)=>{Object.defineProperty(iU,"__esModule",{value:!0});var gU=Z6("util"),f6=o5();class r5 extends f6.AbstractMessageBuffer{constructor(D="utf-8"){super(D)}emptyBuffer(){return r5.emptyBuffer}fromString(D,F){return Buffer.from(D,F)}toString(D,F){if(D instanceof Buffer)return D.toString(F);else return new gU.TextDecoder(F).decode(D)}asNative(D,F){if(F===void 0)return D instanceof Buffer?D:Buffer.from(D);else return D instanceof Buffer?D.slice(0,F):Buffer.from(D,0,F)}allocNative(D){return Buffer.allocUnsafe(D)}}r5.emptyBuffer=Buffer.allocUnsafe(0);class mU{constructor(D){this.stream=D}onClose(D){return this.stream.on("close",D),f6.Disposable.create(()=>this.stream.off("close",D))}onError(D){return this.stream.on("error",D),f6.Disposable.create(()=>this.stream.off("error",D))}onEnd(D){return this.stream.on("end",D),f6.Disposable.create(()=>this.stream.off("end",D))}onData(D){return this.stream.on("data",D),f6.Disposable.create(()=>this.stream.off("data",D))}}class cU{constructor(D){this.stream=D}onClose(D){return this.stream.on("close",D),f6.Disposable.create(()=>this.stream.off("close",D))}onError(D){return this.stream.on("error",D),f6.Disposable.create(()=>this.stream.off("error",D))}onEnd(D){return this.stream.on("end",D),f6.Disposable.create(()=>this.stream.off("end",D))}write(D,F){return new Promise(($,B)=>{let J=(Y)=>{if(Y===void 0||Y===null)$();else B(Y)};if(typeof D==="string")this.stream.write(D,F,J);else this.stream.write(D,J)})}end(){this.stream.end()}}var pU=Object.freeze({messageBuffer:Object.freeze({create:(D)=>new r5(D)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(D,F)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(D,void 0,0),F.charset))}catch($){return Promise.reject($)}}}),decoder:Object.freeze({name:"application/json",decode:(D,F)=>{try{if(D instanceof Buffer)return Promise.resolve(JSON.parse(D.toString(F.charset)));else return Promise.resolve(JSON.parse(new gU.TextDecoder(F.charset).decode(D)))}catch($){return Promise.reject($)}}})}),stream:Object.freeze({asReadableStream:(D)=>new mU(D),asWritableStream:(D)=>new cU(D)}),console,timer:Object.freeze({setTimeout(D,F,...$){let B=setTimeout(D,F,...$);return{dispose:()=>clearTimeout(B)}},setImmediate(D,...F){let $=setImmediate(D,...F);return{dispose:()=>clearImmediate($)}},setInterval(D,F,...$){let B=setInterval(D,F,...$);return{dispose:()=>clearInterval(B)}}})});function w3(){return pU}(function(D){function F(){f6.RAL.install(pU)}D.install=F})(w3||(w3={}));iU.default=w3});var aU=t((ZD)=>{var Kg=ZD&&ZD.__createBinding||(Object.create?function(D,F,$,B){if(B===void 0)B=$;var J=Object.getOwnPropertyDescriptor(F,$);if(!J||("get"in J?!F.__esModule:J.writable||J.configurable))J={enumerable:!0,get:function(){return F[$]}};Object.defineProperty(D,B,J)}:function(D,F,$,B){if(B===void 0)B=$;D[B]=F[$]}),qg=ZD&&ZD.__exportStar||function(D,F){for(var $ in D)if($!=="default"&&!Object.prototype.hasOwnProperty.call(F,$))Kg(F,D,$)};Object.defineProperty(ZD,"__esModule",{value:!0});ZD.createMessageConnection=ZD.createServerSocketTransport=ZD.createClientSocketTransport=ZD.createServerPipeTransport=ZD.createClientPipeTransport=ZD.generateRandomPipeName=ZD.StreamMessageWriter=ZD.StreamMessageReader=ZD.SocketMessageWriter=ZD.SocketMessageReader=ZD.PortMessageWriter=ZD.PortMessageReader=ZD.IPCMessageWriter=ZD.IPCMessageReader=void 0;var d7=dU();d7.default.install();var lU=Z6("path"),Vg=Z6("os"),Ag=Z6("crypto"),t5=Z6("net"),TF=o5();qg(o5(),ZD);class oU extends TF.AbstractMessageReader{constructor(D){super();this.process=D;let F=this.process;F.on("error",($)=>this.fireError($)),F.on("close",()=>this.fireClose())}listen(D){return this.process.on("message",D),TF.Disposable.create(()=>this.process.off("message",D))}}ZD.IPCMessageReader=oU;class rU extends TF.AbstractMessageWriter{constructor(D){super();this.process=D,this.errorCount=0;let F=this.process;F.on("error",($)=>this.fireError($)),F.on("close",()=>this.fireClose)}write(D){try{if(typeof this.process.send==="function")this.process.send(D,void 0,void 0,(F)=>{if(F)this.errorCount++,this.handleError(F,D);else this.errorCount=0});return Promise.resolve()}catch(F){return this.handleError(F,D),Promise.reject(F)}}handleError(D,F){this.errorCount++,this.fireError(D,F,this.errorCount)}end(){}}ZD.IPCMessageWriter=rU;class tU extends TF.AbstractMessageReader{constructor(D){super();this.onData=new TF.Emitter,D.on("close",()=>this.fireClose),D.on("error",(F)=>this.fireError(F)),D.on("message",(F)=>{this.onData.fire(F)})}listen(D){return this.onData.event(D)}}ZD.PortMessageReader=tU;class sU extends TF.AbstractMessageWriter{constructor(D){super();this.port=D,this.errorCount=0,D.on("close",()=>this.fireClose()),D.on("error",(F)=>this.fireError(F))}write(D){try{return this.port.postMessage(D),Promise.resolve()}catch(F){return this.handleError(F,D),Promise.reject(F)}}handleError(D,F){this.errorCount++,this.fireError(D,F,this.errorCount)}end(){}}ZD.PortMessageWriter=sU;class l7 extends TF.ReadableStreamMessageReader{constructor(D,F="utf-8"){super(d7.default().stream.asReadableStream(D),F)}}ZD.SocketMessageReader=l7;class n7 extends TF.WriteableStreamMessageWriter{constructor(D,F){super(d7.default().stream.asWritableStream(D),F);this.socket=D}dispose(){super.dispose(),this.socket.destroy()}}ZD.SocketMessageWriter=n7;class f3 extends TF.ReadableStreamMessageReader{constructor(D,F){super(d7.default().stream.asReadableStream(D),F)}}ZD.StreamMessageReader=f3;class W3 extends TF.WriteableStreamMessageWriter{constructor(D,F){super(d7.default().stream.asWritableStream(D),F)}}ZD.StreamMessageWriter=W3;var nU=process.env.XDG_RUNTIME_DIR,Og=new Map([["linux",107],["darwin",103]]);function jg(){let D=Ag.randomBytes(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${D}-sock`;let F;if(nU)F=lU.join(nU,`vscode-ipc-${D}.sock`);else F=lU.join(Vg.tmpdir(),`vscode-${D}.sock`);let $=Og.get(process.platform);if($!==void 0&&F.length>$)d7.default().console.warn(`WARNING: IPC handle "${F}" is longer than ${$} characters.`);return F}ZD.generateRandomPipeName=jg;function Ug(D,F="utf-8"){let $,B=new Promise((J,Y)=>{$=J});return new Promise((J,Y)=>{let X=t5.createServer((Q)=>{X.close(),$([new l7(Q,F),new n7(Q,F)])});X.on("error",Y),X.listen(D,()=>{X.removeListener("error",Y),J({onConnected:()=>{return B}})})})}ZD.createClientPipeTransport=Ug;function Rg(D,F="utf-8"){let $=t5.createConnection(D);return[new l7($,F),new n7($,F)]}ZD.createServerPipeTransport=Rg;function Cg(D,F="utf-8"){let $,B=new Promise((J,Y)=>{$=J});return new Promise((J,Y)=>{let X=t5.createServer((Q)=>{X.close(),$([new l7(Q,F),new n7(Q,F)])});X.on("error",Y),X.listen(D,"127.0.0.1",()=>{X.removeListener("error",Y),J({onConnected:()=>{return B}})})})}ZD.createClientSocketTransport=Cg;function Zg(D,F="utf-8"){let $=t5.createConnection(D,"127.0.0.1");return[new l7($,F),new n7($,F)]}ZD.createServerSocketTransport=Zg;function Ng(D){let F=D;return F.read!==void 0&&F.addListener!==void 0}function Mg(D){let F=D;return F.write!==void 0&&F.addListener!==void 0}function _g(D,F,$,B){if(!$)$=TF.NullLogger;let J=Ng(D)?new f3(D):D,Y=Mg(F)?new W3(F):F;if(TF.ConnectionStrategy.is(B))B={connectionStrategy:B};return TF.createMessageConnection(J,Y,$,B)}ZD.createMessageConnection=_g});var eU;var DR=k(()=>{eU={".abap":"abap",".bat":"bat",".bib":"bibtex",".bibtex":"bibtex",".clj":"clojure",".coffee":"coffeescript",".c":"c",".cpp":"cpp",".cxx":"cpp",".cc":"cpp",".c++":"cpp",".cs":"csharp",".css":"css",".d":"d",".pas":"pascal",".pascal":"pascal",".diff":"diff",".patch":"diff",".dart":"dart",".dockerfile":"dockerfile",".ex":"elixir",".exs":"elixir",".erl":"erlang",".hrl":"erlang",".fs":"fsharp",".fsi":"fsharp",".fsx":"fsharp",".fsscript":"fsharp",".gitcommit":"git-commit",".gitrebase":"git-rebase",".go":"go",".groovy":"groovy",".hbs":"handlebars",".handlebars":"handlebars",".hs":"haskell",".html":"html",".htm":"html",".ini":"ini",".java":"java",".js":"javascript",".jsx":"javascriptreact",".json":"json",".tex":"latex",".latex":"latex",".less":"less",".lua":"lua",".makefile":"makefile",makefile:"makefile",".md":"markdown",".markdown":"markdown",".m":"objective-c",".mm":"objective-cpp",".pl":"perl",".pm":"perl6",".php":"php",".ps1":"powershell",".psm1":"powershell",".pug":"jade",".jade":"jade",".py":"python",".r":"r",".cshtml":"razor",".razor":"razor",".rb":"ruby",".rake":"ruby",".gemspec":"ruby",".ru":"ruby",".erb":"erb",".html.erb":"erb",".js.erb":"erb",".css.erb":"erb",".json.erb":"erb",".rs":"rust",".scss":"scss",".sass":"sass",".scala":"scala",".shader":"shaderlab",".sh":"shellscript",".bash":"shellscript",".zsh":"shellscript",".ksh":"shellscript",".sql":"sql",".swift":"swift",".ts":"typescript",".tsx":"typescriptreact",".mts":"typescript",".cts":"typescript",".mtsx":"typescriptreact",".ctsx":"typescriptreact",".xml":"xml",".xsl":"xsl",".yaml":"yaml",".yml":"yaml",".mjs":"javascript",".cjs":"javascript"}});function G3(D,F){let $;return Promise.race([D.then((B)=>{return clearTimeout($),B}),new Promise((B,J)=>{$=setTimeout(()=>{J(new Error(`Operation timed out after ${F}ms`))},F)})])}import b$ from"path";var o7,H3;var FR=k(async()=>{o7=Y2(aU(),1);await MD();await xD();DR();await eD();C0();QF();((k8)=>{let D=Z0.create({service:"lsp.client"});k8.InitializeError=BD.create("LSPInitializeError",W.object({serverID:W.string()})),k8.Event={Diagnostics:F0.event("lsp.client.diagnostics",W.object({serverID:W.string(),path:W.string()}))};async function B(J,Y){let X=w0.info();D.info("starting client",{id:J});let Q=o7.createMessageConnection(new o7.StreamMessageReader(Y.process.stdout),new o7.StreamMessageWriter(Y.process.stdin)),w=new Map;Q.onNotification("textDocument/publishDiagnostics",(H)=>{let K=new URL(H.uri).pathname;D.info("textDocument/publishDiagnostics",{path:K});let E=w.has(K);if(w.set(K,H.diagnostics),!E&&J==="typescript")return;F0.publish(k8.Event.Diagnostics,{path:K,serverID:J})}),Q.onRequest("workspace/configuration",async()=>{return[{}]}),Q.listen(),D.info("sending initialize",{id:J}),await G3(Q.sendRequest("initialize",{processId:Y.process.pid,workspaceFolders:[{name:"workspace",uri:"file://"+X.path.cwd}],initializationOptions:{...Y.initialization},capabilities:{workspace:{configuration:!0},textDocument:{synchronization:{didOpen:!0,didChange:!0},publishDiagnostics:{versionSupport:!0}}}}),5000).catch(()=>{throw new k8.InitializeError({serverID:J})}),await Q.sendNotification("initialized",{}),D.info("initialized");let f={},G={get serverID(){return J},get connection(){return Q},notify:{async open(H){H.path=b$.isAbsolute(H.path)?H.path:b$.resolve(X.path.cwd,H.path);let E=await Bun.file(H.path).text();if(f[H.path]!==void 0)w.delete(H.path),await Q.sendNotification("textDocument/didClose",{textDocument:{uri:"file://"+H.path}});D.info("textDocument/didOpen",H),w.delete(H.path);let q=b$.extname(H.path),U=eU[q]??"plaintext";await Q.sendNotification("textDocument/didOpen",{textDocument:{uri:"file://"+H.path,languageId:U,version:0,text:E}}),f[H.path]=0;return}},get diagnostics(){return w},async waitForDiagnostics(H){H.path=b$.isAbsolute(H.path)?H.path:b$.resolve(X.path.cwd,H.path),D.info("waiting for diagnostics",H);let K;return await G3(new Promise((E)=>{K=F0.subscribe(k8.Event.Diagnostics,(O)=>{if(O.properties.path===H.path&&O.properties.serverID===G.serverID)D.info("got diagnostics",H),K?.(),E()})}),5000).finally(()=>{K?.()})},async shutdown(){D.info("shutting down",{serverID:J}),Q.end(),Q.dispose(),Y.process.kill("SIGTERM"),D.info("shutdown",{serverID:J})}};return G}k8.create=B})(H3||={})});import{spawn as s5}from"child_process";import $R from"path";var a5;var BR=k(async()=>{await d1();await xD();await u5();((v6)=>{let D=Z0.create({service:"lsp.server"});v6.Typescript={id:"typescript",extensions:[".ts",".tsx",".js",".jsx",".mjs",".cjs",".mts",".cts"],async spawn(Y){let X=await Bun.resolve("typescript/lib/tsserver.js",Y.path.cwd).catch(()=>{});if(!X)return;return{process:s5(rF.which(),["x","typescript-language-server","--stdio"],{env:{...process.env,BUN_BE_BUN:"1"}}),initialization:{tsserver:{path:X}}}}},v6.Gopls={id:"golang",extensions:[".go"],async spawn(){let Y=Bun.which("gopls",{PATH:process.env.PATH+":"+P0.Path.bin});if(!Y){let X=Bun.which("go",{PATH:process.env.PATH});if(!X){D.info("Go is not installed, skipping gopls installation");return}if(D.info("installing gopls"),await Bun.spawn({cmd:[X,"install","golang.org/x/tools/gopls@latest"],env:{...process.env,GOBIN:P0.Path.bin},stdout:"pipe",stderr:"pipe",stdin:"pipe"}).exited!==0){D.error("Failed to install gopls");return}Y=$R.join(P0.Path.bin,"gopls"+(process.platform==="win32"?".exe":"")),D.info("installed gopls",{bin:Y})}return{process:s5(Y)}}},v6.RubyLsp={id:"ruby-lsp",extensions:[".rb",".rake",".gemspec",".ru"],async spawn(){let Y=Bun.which("ruby-lsp",{PATH:process.env.PATH+":"+P0.Path.bin});if(!Y){let X=Bun.which("ruby"),Q=Bun.which("gem");if(!X||!Q){D.info("Ruby not found, please install Ruby first");return}if(D.info("installing ruby-lsp"),await Bun.spawn({cmd:["gem","install","ruby-lsp","--bindir",P0.Path.bin],stdout:"pipe",stderr:"pipe",stdin:"pipe"}).exited!==0){D.error("Failed to install ruby-lsp");return}Y=$R.join(P0.Path.bin,"ruby-lsp"+(process.platform==="win32"?".exe":"")),D.info("installed ruby-lsp",{bin:Y})}return{process:s5(Y,["--stdio"])}}},v6.Pyright={id:"pyright",extensions:[".py",".pyi"],async spawn(){return{process:s5(rF.which(),["x","pyright-langserver","--stdio"],{env:{...process.env,BUN_BE_BUN:"1"}})}}}})(a5||={})});import JR from"path";import YR from"fs/promises";var E3;var XR=k(async()=>{await d1();C0();QF();await xD();((h2)=>{let D=Z0.create({service:"fzf"}),F="0.62.0",$={darwin:{extension:"tar.gz"},linux:{extension:"tar.gz"},win32:{extension:"zip"}};h2.ExtractionFailedError=BD.create("FzfExtractionFailedError",W.object({filepath:W.string(),stderr:W.string()})),h2.UnsupportedPlatformError=BD.create("FzfUnsupportedPlatformError",W.object({platform:W.string()})),h2.DownloadFailedError=BD.create("FzfDownloadFailedError",W.object({url:W.string(),status:W.number()}));let X=x6(async()=>{let w=Bun.which("fzf");if(w)return D.info("found",{filepath:w}),{filepath:w};if(w=JR.join(P0.Path.bin,"fzf"+(process.platform==="win32"?".exe":"")),!await Bun.file(w).exists()){let H={x64:"amd64",arm64:"arm64"}[process.arch]??"amd64",K=$[process.platform];if(!K)throw new h2.UnsupportedPlatformError({platform:process.platform});let E="0.62.0",O=process.platform==="win32"?"windows":process.platform,q=`fzf-${E}-${O}_${H}.${K.extension}`,U=`https://github.com/junegunn/fzf/releases/download/v${E}/${q}`,N=await fetch(U);if(!N.ok)throw new h2.DownloadFailedError({url:U,status:N.status});let L=await N.arrayBuffer(),C=JR.join(P0.Path.bin,q);if(await Bun.write(C,L),K.extension==="tar.gz"){let R=Bun.spawn(["tar","-xzf",C,"fzf"],{cwd:P0.Path.bin,stderr:"pipe",stdout:"pipe"});if(await R.exited,R.exitCode!==0)throw new h2.ExtractionFailedError({filepath:w,stderr:await Bun.readableStreamToText(R.stderr)})}if(K.extension==="zip"){let R=Bun.spawn(["unzip","-j",C,"fzf.exe","-d",P0.Path.bin],{cwd:P0.Path.bin,stderr:"pipe",stdout:"ignore"});if(await R.exited,R.exitCode!==0)throw new h2.ExtractionFailedError({filepath:C,stderr:await Bun.readableStreamToText(R.stderr)})}if(await YR.unlink(C),process.platform!=="win32")await YR.chmod(w,493)}return{filepath:w}});async function Q(){let{filepath:w}=await X();return w}h2.filepath=Q})(E3||={})});import K3 from"path";import QR from"fs/promises";var{$:wR}=globalThis.Bun;var o1;var u8=k(async()=>{await d1();C0();QF();await XR();((S2)=>{let D=W.object({elapsed:W.object({secs:W.number(),nanos:W.number(),human:W.string()}),searches:W.number(),searches_with_match:W.number(),bytes_searched:W.number(),bytes_printed:W.number(),matched_lines:W.number(),matches:W.number()}),F=W.object({type:W.literal("begin"),data:W.object({path:W.object({text:W.string()})})}),$=W.object({type:W.literal("match"),data:W.object({path:W.object({text:W.string()}),lines:W.object({text:W.string()}),line_number:W.number(),absolute_offset:W.number(),submatches:W.array(W.object({match:W.object({text:W.string()}),start:W.number(),end:W.number()}))})}),B=W.object({type:W.literal("end"),data:W.object({path:W.object({text:W.string()}),binary_offset:W.number().nullable(),stats:D})}),J=W.object({type:W.literal("summary"),data:W.object({elapsed_total:W.object({human:W.string(),nanos:W.number(),secs:W.number()}),stats:D})}),Y=W.union([F,$,B,J]),X={darwin:{platform:"apple-darwin",extension:"tar.gz"},linux:{platform:"unknown-linux-musl",extension:"tar.gz"},win32:{platform:"pc-windows-msvc",extension:"zip"}};S2.ExtractionFailedError=BD.create("RipgrepExtractionFailedError",W.object({filepath:W.string(),stderr:W.string()})),S2.UnsupportedPlatformError=BD.create("RipgrepUnsupportedPlatformError",W.object({platform:W.string()})),S2.DownloadFailedError=BD.create("RipgrepDownloadFailedError",W.object({url:W.string(),status:W.number()}));let G=x6(async()=>{let q=Bun.which("rg");if(q)return{filepath:q};if(q=K3.join(P0.Path.bin,"rg"+(process.platform==="win32"?".exe":"")),!await Bun.file(q).exists()){let L={x64:"x86_64",arm64:"aarch64"}[process.arch]??process.arch,C=X[process.platform];if(!C)throw new S2.UnsupportedPlatformError({platform:process.platform});let R="14.1.1",I=`ripgrep-${R}-${L}-${C.platform}.${C.extension}`,h=`https://github.com/BurntSushi/ripgrep/releases/download/${R}/${I}`,p=await fetch(h);if(!p.ok)throw new S2.DownloadFailedError({url:h,status:p.status});let P=await p.arrayBuffer(),v=K3.join(P0.Path.bin,I);if(await Bun.write(v,P),C.extension==="tar.gz"){let n=["tar","-xzf",v,"--strip-components=1"];if(process.platform==="darwin")n.push("--include=*/rg");if(process.platform==="linux")n.push("--wildcards","*/rg");let _=Bun.spawn(n,{cwd:P0.Path.bin,stderr:"pipe",stdout:"pipe"});if(await _.exited,_.exitCode!==0)throw new S2.ExtractionFailedError({filepath:q,stderr:await Bun.readableStreamToText(_.stderr)})}if(C.extension==="zip"){let n=Bun.spawn(["unzip","-j",v,"*/rg.exe","-d",P0.Path.bin],{cwd:P0.Path.bin,stderr:"pipe",stdout:"ignore"});if(await n.exited,n.exitCode!==0)throw new S2.ExtractionFailedError({filepath:v,stderr:await Bun.readableStreamToText(n.stderr)})}if(await QR.unlink(v),process.platform!=="win32")await QR.chmod(q,493)}return{filepath:q}});async function H(){let{filepath:q}=await G();return q}S2.filepath=H;async function K(q){let U=[`${await H()} --files --hidden --glob='!.git/*' ${q.glob?`--glob='${q.glob}'`:""}`];if(q.query)U.push(`${await E3.filepath()} --filter=${q.query}`);if(q.limit)U.push(`head -n ${q.limit}`);let N=U.join(" | ");return(await wR`${{raw:N}}`.cwd(q.cwd).nothrow().text()).split(`
`).filter(Boolean)}S2.files=K;async function E(q){let U=await o1.files({cwd:q.cwd});function N(n,_,x){if(_.length===0)return n;let o=n;for(let M of _){let r=o.children.find(($0)=>$0.path.at(-1)===M);if(!r){if(!x)return;r={path:o.path.concat(M),children:[]},o.children.push(r)}o=r}return o}let L={path:[],children:[]};for(let n of U){let _=n.split(K3.sep);N(L,_,!0)}function C(n){n.children.sort((_,x)=>{if(!_.children.length&&x.children.length)return 1;if(!x.children.length&&_.children.length)return-1;return _.path.at(-1).localeCompare(x.path.at(-1))});for(let _ of n.children)C(_)}C(L);let R=[L],I={path:[],children:[]},h=0,p=q.limit??50;while(R.length>0){let n=[];for(let x of R)if(x.children.length)n.push(...x.children);let _=Math.max(...R.map((x)=>x.children.length));for(let x=0;x<_&&h<p;x++)for(let o of R){let M=o.children[x];if(!M)continue;if(N(I,M.path,!0),h++,h>=p)break}if(h>=p){for(let x of[...R,...n]){let o=N(I,x.path,!1);if(!o)continue;if(o?.children.length!==x.children.length){let M=x.children.length-o.children.length;o.children.push({path:o.path.concat(`[${M} truncated]`),children:[]})}}break}R=n}let P=[];function v(n,_){let x="\t".repeat(_);P.push(x+n.path.at(-1)+(n.children.length?"/":""));for(let o of n.children)v(o,_+1)}return I.children.map((n)=>v(n,0)),P.join(`
`)}S2.tree=E;async function O(q){let U=[`${await H()}`,"--json","--hidden","--glob='!.git/*'"];if(q.glob)for(let R of q.glob)U.push(`--glob=${R}`);if(q.limit)U.push(`--max-count=${q.limit}`);U.push(q.pattern);let N=U.join(" "),L=await wR`${{raw:N}}`.cwd(q.cwd).quiet().nothrow();if(L.exitCode!==0)return[];return L.text().trim().split(`
`).filter(Boolean).map((R)=>JSON.parse(R)).map((R)=>Y.parse(R)).filter((R)=>R.type==="match").map((R)=>R.data)}S2.search=O})(o1||={})});import Lg from"path";var j1;var r7=k(async()=>{await MD();await xD();await FR();await BR();await u8();((zg)=>{let D=Z0.create({service:"lsp"}),F=w0.state("lsp",async(f)=>{D.info("initializing");let G=new Map;for(let H of Object.values(a5))for(let K of H.extensions){let[E]=await o1.files({cwd:f.path.cwd,glob:"*"+K});if(!E)continue;let O=await H.spawn(w0.info());if(!O)break;let q=await H3.create(H.id,O).catch(()=>{});if(!q)break;G.set(H.id,q);break}return D.info("initialized"),{clients:G}},async(f)=>{for(let G of f.clients.values())await G.shutdown()});async function $(){return F()}zg.init=$;async function B(f,G){let H=Lg.parse(f).ext,K=Object.values(a5).filter((E)=>E.extensions.includes(H)).map((E)=>E.id);await Q(async(E)=>{if(!K.includes(E.serverID))return;let O=G?E.waitForDiagnostics({path:f}):Promise.resolve();return await E.notify.open({path:f}),O})}zg.touchFile=B;async function J(){let f={};for(let G of await Q(async(H)=>H.diagnostics))for(let[H,K]of G.entries()){let E=f[H]||[];E.push(...K),f[H]=E}return f}zg.diagnostics=J;async function Y(f){return Q((G)=>{return G.connection.sendRequest("textDocument/hover",{textDocument:{uri:`file://${f.file}`},position:{line:f.line,character:f.character}})})}zg.hover=Y;async function X(f){return Q((G)=>G.connection.sendRequest("workspace/symbol",{query:f}))}zg.workspaceSymbol=X;async function Q(f){let H=(await F().then((K)=>[...K.clients.values()])).map((K)=>f(K));return Promise.all(H)}let w;((_B0)=>{function f(G){let K={1:"ERROR",2:"WARN",3:"INFO",4:"HINT"}[G.severity||1],E=G.range.start.line+1,O=G.range.start.character+1;return`${K} [${E}:${O}] ${G.message}`}_B0.pretty=f})(w=zg.Diagnostic||={})})(j1||={})});class y1{diff(D,F,$={}){let B;if(typeof $==="function")B=$,$={};else if("callback"in $)B=$.callback;let J=this.castInput(D,$),Y=this.castInput(F,$),X=this.removeEmpty(this.tokenize(J,$)),Q=this.removeEmpty(this.tokenize(Y,$));return this.diffWithOptionsObj(X,Q,$,B)}diffWithOptionsObj(D,F,$,B){var J;let Y=(N)=>{if(N=this.postProcess(N,$),B){setTimeout(function(){B(N)},0);return}else return N},X=F.length,Q=D.length,w=1,f=X+Q;if($.maxEditLength!=null)f=Math.min(f,$.maxEditLength);let G=(J=$.timeout)!==null&&J!==void 0?J:1/0,H=Date.now()+G,K=[{oldPos:-1,lastComponent:void 0}],E=this.extractCommon(K[0],F,D,0,$);if(K[0].oldPos+1>=Q&&E+1>=X)return Y(this.buildValues(K[0].lastComponent,F,D));let O=-1/0,q=1/0,U=()=>{for(let N=Math.max(O,-w);N<=Math.min(q,w);N+=2){let L,C=K[N-1],R=K[N+1];if(C)K[N-1]=void 0;let I=!1;if(R){let p=R.oldPos-N;I=R&&0<=p&&p<X}let h=C&&C.oldPos+1<Q;if(!I&&!h){K[N]=void 0;continue}if(!h||I&&C.oldPos<R.oldPos)L=this.addToPath(R,!0,!1,0,$);else L=this.addToPath(C,!1,!0,1,$);if(E=this.extractCommon(L,F,D,N,$),L.oldPos+1>=Q&&E+1>=X)return Y(this.buildValues(L.lastComponent,F,D))||!0;else{if(K[N]=L,L.oldPos+1>=Q)q=Math.min(q,N-1);if(E+1>=X)O=Math.max(O,N+1)}}w++};if(B)(function N(){setTimeout(function(){if(w>f||Date.now()>H)return B(void 0);if(!U())N()},0)})();else while(w<=f&&Date.now()<=H){let N=U();if(N)return N}}addToPath(D,F,$,B,J){let Y=D.lastComponent;if(Y&&!J.oneChangePerToken&&Y.added===F&&Y.removed===$)return{oldPos:D.oldPos+B,lastComponent:{count:Y.count+1,added:F,removed:$,previousComponent:Y.previousComponent}};else return{oldPos:D.oldPos+B,lastComponent:{count:1,added:F,removed:$,previousComponent:Y}}}extractCommon(D,F,$,B,J){let Y=F.length,X=$.length,Q=D.oldPos,w=Q-B,f=0;while(w+1<Y&&Q+1<X&&this.equals($[Q+1],F[w+1],J))if(w++,Q++,f++,J.oneChangePerToken)D.lastComponent={count:1,previousComponent:D.lastComponent,added:!1,removed:!1};if(f&&!J.oneChangePerToken)D.lastComponent={count:f,previousComponent:D.lastComponent,added:!1,removed:!1};return D.oldPos=Q,w}equals(D,F,$){if($.comparator)return $.comparator(D,F);else return D===F||!!$.ignoreCase&&D.toLowerCase()===F.toLowerCase()}removeEmpty(D){let F=[];for(let $=0;$<D.length;$++)if(D[$])F.push(D[$]);return F}castInput(D,F){return D}tokenize(D,F){return Array.from(D)}join(D){return D.join("")}postProcess(D,F){return D}get useLongestToken(){return!1}buildValues(D,F,$){let B=[],J;while(D)B.push(D),J=D.previousComponent,delete D.previousComponent,D=J;B.reverse();let Y=B.length,X=0,Q=0,w=0;for(;X<Y;X++){let f=B[X];if(!f.removed){if(!f.added&&this.useLongestToken){let G=F.slice(Q,Q+f.count);G=G.map(function(H,K){let E=$[w+K];return E.length>H.length?E:H}),f.value=this.join(G)}else f.value=this.join(F.slice(Q,Q+f.count));if(Q+=f.count,!f.added)w+=f.count}else f.value=this.join($.slice(w,w+f.count)),w+=f.count}return B}}var fR,Ig;var WR=k(()=>{fR=class fR extends y1{};Ig=new fR});function q3(D,F){let $;for($=0;$<D.length&&$<F.length;$++)if(D[$]!=F[$])return D.slice(0,$);return D.slice(0,$)}function V3(D,F){let $;if(!D||!F||D[D.length-1]!=F[F.length-1])return"";for($=0;$<D.length&&$<F.length;$++)if(D[D.length-($+1)]!=F[F.length-($+1)])return D.slice(-$);return D.slice(-$)}function e5(D,F,$){if(D.slice(0,F.length)!=F)throw Error(`string ${JSON.stringify(D)} doesn't start with prefix ${JSON.stringify(F)}; this is a bug`);return $+D.slice(F.length)}function DJ(D,F,$){if(!F)return D+$;if(D.slice(-F.length)!=F)throw Error(`string ${JSON.stringify(D)} doesn't end with suffix ${JSON.stringify(F)}; this is a bug`);return D.slice(0,-F.length)+$}function t7(D,F){return e5(D,F,"")}function h$(D,F){return DJ(D,F,"")}function A3(D,F){return F.slice(0,Tg(D,F))}function Tg(D,F){let $=0;if(D.length>F.length)$=D.length-F.length;let B=F.length;if(D.length<F.length)B=D.length;let J=Array(B),Y=0;J[0]=0;for(let X=1;X<B;X++){if(F[X]==F[Y])J[X]=J[Y];else J[X]=Y;while(Y>0&&F[X]!=F[Y])Y=J[Y];if(F[X]==F[Y])Y++}Y=0;for(let X=$;X<D.length;X++){while(Y>0&&D[X]!=F[Y])Y=J[Y];if(D[X]==F[Y])Y++}return Y}function s7(D){let F;for(F=D.length-1;F>=0;F--)if(!D[F].match(/\s/))break;return D.substring(F+1)}function W6(D){let F=D.match(/^\s*/);return F?F[0]:""}function GR(D,F,$,B){if(F&&$){let J=W6(F.value),Y=s7(F.value),X=W6($.value),Q=s7($.value);if(D){let w=q3(J,X);D.value=DJ(D.value,X,w),F.value=t7(F.value,w),$.value=t7($.value,w)}if(B){let w=V3(Y,Q);B.value=e5(B.value,Q,w),F.value=h$(F.value,w),$.value=h$($.value,w)}}else if($){if(D){let J=W6($.value);$.value=$.value.substring(J.length)}if(B){let J=W6(B.value);B.value=B.value.substring(J.length)}}else if(D&&B){let J=W6(B.value),Y=W6(F.value),X=s7(F.value),Q=q3(J,Y);F.value=t7(F.value,Q);let w=V3(t7(J,Q),X);F.value=h$(F.value,w),B.value=e5(B.value,J,w),D.value=DJ(D.value,J,J.slice(0,J.length-w.length))}else if(B){let J=W6(B.value),Y=s7(F.value),X=A3(Y,J);F.value=h$(F.value,X)}else if(D){let J=s7(D.value),Y=W6(F.value),X=A3(J,Y);F.value=t7(F.value,X)}}var FJ="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Pg,HR,bg,ER,hg;var KR=k(()=>{Pg=new RegExp(`[${FJ}]+|\\s+|[^${FJ}]`,"ug");HR=class HR extends y1{equals(D,F,$){if($.ignoreCase)D=D.toLowerCase(),F=F.toLowerCase();return D.trim()===F.trim()}tokenize(D,F={}){let $;if(F.intlSegmenter){let Y=F.intlSegmenter;if(Y.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');$=Array.from(Y.segment(D),(X)=>X.segment)}else $=D.match(Pg)||[];let B=[],J=null;return $.forEach((Y)=>{if(/\s/.test(Y))if(J==null)B.push(Y);else B.push(B.pop()+Y);else if(J!=null&&/\s/.test(J))if(B[B.length-1]==J)B.push(B.pop()+Y);else B.push(J+Y);else B.push(Y);J=Y}),B}join(D){return D.map((F,$)=>{if($==0)return F;else return F.replace(/^\s+/,"")}).join("")}postProcess(D,F){if(!D||F.oneChangePerToken)return D;let $=null,B=null,J=null;if(D.forEach((Y)=>{if(Y.added)B=Y;else if(Y.removed)J=Y;else{if(B||J)GR($,J,B,Y);$=Y,B=null,J=null}}),B||J)GR($,J,B,null);return D}};bg=new HR;ER=class ER extends y1{tokenize(D){let F=new RegExp(`(\\r?\\n)|[${FJ}]+|[^\\S\\n\\r]+|[^${FJ}]`,"ug");return D.match(F)||[]}};hg=new ER});function $J(D,F,$){return VR.diff(D,F,$)}function O3(D,F){if(F.stripTrailingCr)D=D.replace(/\r\n/g,`
`);let $=[],B=D.split(/(\n|\r\n)/);if(!B[B.length-1])B.pop();for(let J=0;J<B.length;J++){let Y=B[J];if(J%2&&!F.newlineIsToken)$[$.length-1]+=Y;else $.push(Y)}return $}var qR,VR;var BJ=k(()=>{qR=class qR extends y1{constructor(){super(...arguments);this.tokenize=O3}equals(D,F,$){if($.ignoreWhitespace){if(!$.newlineIsToken||!D.includes(`
`))D=D.trim();if(!$.newlineIsToken||!F.includes(`
`))F=F.trim()}else if($.ignoreNewlineAtEof&&!$.newlineIsToken){if(D.endsWith(`
`))D=D.slice(0,-1);if(F.endsWith(`
`))F=F.slice(0,-1)}return super.equals(D,F,$)}};VR=new qR});function Sg(D){return D=="."||D=="!"||D=="?"}var AR,yg;var OR=k(()=>{AR=class AR extends y1{tokenize(D){var F;let $=[],B=0;for(let J=0;J<D.length;J++){if(J==D.length-1){$.push(D.slice(B));break}if(Sg(D[J])&&D[J+1].match(/\s/)){$.push(D.slice(B,J+1)),J=B=J+1;while((F=D[J+1])===null||F===void 0?void 0:F.match(/\s/))J++;$.push(D.slice(B,J+1)),B=J+1}}return $}};yg=new AR});var jR,xg;var UR=k(()=>{jR=class jR extends y1{tokenize(D){return D.split(/([{}:;,]|\s+)/)}};xg=new jR});function JJ(D,F,$,B,J){if(F=F||[],$=$||[],B)D=B(J===void 0?"":J,D);let Y;for(Y=0;Y<F.length;Y+=1)if(F[Y]===D)return $[Y];let X;if(Object.prototype.toString.call(D)==="[object Array]"){F.push(D),X=new Array(D.length),$.push(X);for(Y=0;Y<D.length;Y+=1)X[Y]=JJ(D[Y],F,$,B,String(Y));return F.pop(),$.pop(),X}if(D&&D.toJSON)D=D.toJSON();if(typeof D==="object"&&D!==null){F.push(D),X={},$.push(X);let Q=[],w;for(w in D)if(Object.prototype.hasOwnProperty.call(D,w))Q.push(w);Q.sort();for(Y=0;Y<Q.length;Y+=1)w=Q[Y],X[w]=JJ(D[w],F,$,B,w);F.pop(),$.pop()}else X=D;return X}var RR,kg;var CR=k(()=>{BJ();RR=class RR extends y1{constructor(){super(...arguments);this.tokenize=O3}get useLongestToken(){return!0}castInput(D,F){let{undefinedReplacement:$,stringifyReplacer:B=(J,Y)=>typeof Y==="undefined"?$:Y}=F;return typeof D==="string"?D:JSON.stringify(JJ(D,null,null,B),null,"  ")}equals(D,F,$){return super.equals(D.replace(/,([\r\n])/g,"$1"),F.replace(/,([\r\n])/g,"$1"),$)}};kg=new RR});var ZR,ug;var NR=k(()=>{ZR=class ZR extends y1{tokenize(D){return D.slice()}join(D){return D}removeEmpty(D){return D}};ug=new ZR});var MR=()=>{};function j3(D,F,$,B,J,Y,X){let Q;if(!X)Q={};else if(typeof X==="function")Q={callback:X};else Q=X;if(typeof Q.context==="undefined")Q.context=4;let w=Q.context;if(Q.newlineIsToken)throw new Error("newlineIsToken may not be used with patch-generation functions, only with diffing functions");if(!Q.callback)return f($J($,B,Q));else{let{callback:G}=Q;$J($,B,Object.assign(Object.assign({},Q),{callback:(H)=>{let K=f(H);G(K)}}))}function f(G){if(!G)return;G.push({value:"",lines:[]});function H(L){return L.map(function(C){return" "+C})}let K=[],E=0,O=0,q=[],U=1,N=1;for(let L=0;L<G.length;L++){let C=G[L],R=C.lines||gg(C.value);if(C.lines=R,C.added||C.removed){if(!E){let I=G[L-1];if(E=U,O=N,I)q=w>0?H(I.lines.slice(-w)):[],E-=q.length,O-=q.length}for(let I of R)q.push((C.added?"+":"-")+I);if(C.added)N+=R.length;else U+=R.length}else{if(E)if(R.length<=w*2&&L<G.length-2)for(let I of H(R))q.push(I);else{let I=Math.min(R.length,w);for(let p of H(R.slice(0,I)))q.push(p);let h={oldStart:E,oldLines:U-E+I,newStart:O,newLines:N-O+I,lines:q};K.push(h),E=0,O=0,q=[]}U+=R.length,N+=R.length}}for(let L of K)for(let C=0;C<L.lines.length;C++)if(L.lines[C].endsWith(`
`))L.lines[C]=L.lines[C].slice(0,-1);else L.lines.splice(C+1,0,"\\ No newline at end of file"),C++;return{oldFileName:D,newFileName:F,oldHeader:J,newHeader:Y,hunks:K}}}function YJ(D){if(Array.isArray(D))return D.map(YJ).join(`
`);let F=[];if(D.oldFileName==D.newFileName)F.push("Index: "+D.oldFileName);F.push("==================================================================="),F.push("--- "+D.oldFileName+(typeof D.oldHeader==="undefined"?"":"\t"+D.oldHeader)),F.push("+++ "+D.newFileName+(typeof D.newHeader==="undefined"?"":"\t"+D.newHeader));for(let $=0;$<D.hunks.length;$++){let B=D.hunks[$];if(B.oldLines===0)B.oldStart-=1;if(B.newLines===0)B.newStart-=1;F.push("@@ -"+B.oldStart+","+B.oldLines+" +"+B.newStart+","+B.newLines+" @@");for(let J of B.lines)F.push(J)}return F.join(`
`)+`
`}function XJ(D,F,$,B,J,Y,X){if(typeof X==="function")X={callback:X};if(!(X===null||X===void 0?void 0:X.callback)){let Q=j3(D,F,$,B,J,Y,X);if(!Q)return;return YJ(Q)}else{let{callback:Q}=X;j3(D,F,$,B,J,Y,Object.assign(Object.assign({},X),{callback:(w)=>{if(!w)Q(void 0);else Q(YJ(w))}}))}}function U3(D,F,$,B,J,Y){return XJ(D,D,F,$,B,J,Y)}function gg(D){let F=D.endsWith(`
`),$=D.split(`
`).map((B)=>B+`
`);if(F)$.pop();else $.push($.pop().slice(0,-1));return $}var _R=k(()=>{BJ()});var R3=k(()=>{WR();KR();BJ();OR();UR();CR();NR();MR();_R()});var S$;var C3=k(async()=>{await MD();C0();await eD();await xD();((a7)=>{let D=Z0.create({service:"permission"});a7.Info=W.object({id:W.string(),sessionID:W.string(),title:W.string(),metadata:W.record(W.any()),time:W.object({created:W.number()})}).openapi({ref:"permission.info"}),a7.Event={Updated:F0.event("permission.updated",a7.Info)};let B=w0.state("permission",()=>{return{pending:{},approved:{}}},async(Q)=>{for(let w of Object.values(Q.pending))for(let f of Object.values(w))f.reject(new X(f.info.sessionID,f.info.id))});function J(Q){return}a7.ask=J;function Y(Q){D.info("response",Q);let{pending:w,approved:f}=B(),G=w[Q.sessionID]?.[Q.permissionID];if(!G)return;if(delete w[Q.sessionID][Q.permissionID],Q.response==="reject"){G.reject(new X(Q.sessionID,Q.permissionID));return}if(G.resolve(),Q.response==="always")f[Q.sessionID]=f[Q.sessionID]||{},f[Q.sessionID][Q.permissionID]=G.info}a7.respond=Y;class X extends Error{sessionID;permissionID;constructor(Q,w){super("The user rejected permission to use this functionality");this.sessionID=Q;this.permissionID=w}}a7.RejectedError=X})(S$||={})});var zR="Performs exact string replacements in files. \r\n\r\nUsage:\r\n- You must use your `Read` tool at least once in the conversation before editing. This tool will error if you attempt an edit without reading the file. \r\n- When editing text from Read tool output, ensure you preserve the exact indentation (tabs/spaces) as it appears AFTER the line number prefix. The line number prefix format is: spaces + line number + tab. Everything after that tab is the actual file content to match. Never include any part of the line number prefix in the old_string or new_string.\r\n- ALWAYS prefer editing existing files in the codebase. NEVER write new files unless explicitly required.\r\n- Only use emojis if the user explicitly requests it. Avoid adding emojis to files unless asked.\r\n- The edit will FAIL if `old_string` is not unique in the file. Either provide a larger string with more surrounding context to make it unique or use `replace_all` to change every instance of `old_string`. \r\n- Use `replace_all` for replacing and renaming strings across the file. This parameter is useful if you want to rename a variable for instance.\r\n";var LR=()=>{};var{$:IR}=globalThis.Bun;import TR from"path";var tF;var e7=k(async()=>{C0();await eD();R3();((PR)=>{PR.Event={Edited:F0.event("file.edited",W.object({file:W.string()}))};async function F($){let B=await Bun.file($).text();if((await IR`git diff HEAD -- ${$}`.cwd(TR.dirname($)).quiet().nothrow().text()).trim()){let Y=TR.relative(process.cwd(),$),X=await IR`git show HEAD:./${Y}`.cwd(process.cwd()).quiet().nothrow().text();if(X.trim())return U3($,X,B)}return B.trim()}PR.read=F})(tF||={})});var sF;var y$=k(async()=>{await MD();((QJ)=>{QJ.state=w0.state("tool.filetimes",()=>{return{read:{}}});function F(J,Y){let{read:X}=QJ.state();X[J]=X[J]||{},X[J][Y]=new Date}QJ.read=F;function $(J,Y){return QJ.state().read[J]?.[Y]}QJ.get=$;async function B(J,Y){let X=$(J,Y);if(!X)throw new Error(`You must read the file ${Y} before overwriting it. Use the Read tool first`);let Q=await Bun.file(Y).stat();if(Q.mtime.getTime()>X.getTime())throw new Error(`File ${Y} has been modified since it was last read.
Last modification: ${Q.mtime.toISOString()}
Last read: ${X.toISOString()}

Please read the file again before modifying it.`)}QJ.assert=B})(sF||={})});import*as D9 from"path";function sg(D){let F=D.split(`
`),$=F.filter((Y)=>(Y.startsWith("+")||Y.startsWith("-")||Y.startsWith(" "))&&!Y.startsWith("---")&&!Y.startsWith("+++"));if($.length===0)return D;let B=1/0;for(let Y of $){let X=Y.slice(1);if(X.trim().length>0){let Q=X.match(/^(\s*)/);if(Q)B=Math.min(B,Q[1].length)}}if(B===1/0||B===0)return D;return F.map((Y)=>{if((Y.startsWith("+")||Y.startsWith("-")||Y.startsWith(" "))&&!Y.startsWith("---")&&!Y.startsWith("+++")){let X=Y[0],Q=Y.slice(1);return X+Q.slice(B)}return Y}).join(`
`)}function ag(D,F,$,B=!1){if(F===$)throw new Error("oldString and newString must be different");for(let J of[cg,pg,ig,dg,lg,ng,rg,tg,og])for(let Y of J(D,F)){let X=D.indexOf(Y);if(X===-1)continue;if(B)return D.replaceAll(Y,$);let Q=D.lastIndexOf(Y);if(X!==Q)continue;return D.substring(0,X)+$+D.substring(X+Y.length)}throw new Error("oldString not found in content or was found multiple times")}var bR,cg=function*(D,F){yield F},pg=function*(D,F){let $=D.split(`
`),B=F.split(`
`);if(B[B.length-1]==="")B.pop();for(let J=0;J<=$.length-B.length;J++){let Y=!0;for(let X=0;X<B.length;X++){let Q=$[J+X].trim(),w=B[X].trim();if(Q!==w){Y=!1;break}}if(Y){let X=0;for(let w=0;w<J;w++)X+=$[w].length+1;let Q=X;for(let w=0;w<B.length;w++)Q+=$[J+w].length+1;yield D.substring(X,Q)}}},ig=function*(D,F){let $=D.split(`
`),B=F.split(`
`);if(B.length<3)return;if(B[B.length-1]==="")B.pop();let J=B[0].trim(),Y=B[B.length-1].trim();for(let X=0;X<$.length;X++){if($[X].trim()!==J)continue;for(let Q=X+2;Q<$.length;Q++)if($[Q].trim()===Y){let w=0;for(let G=0;G<X;G++)w+=$[G].length+1;let f=w;for(let G=0;G<=Q-X;G++)if(f+=$[X+G].length,G<Q-X)f+=1;yield D.substring(w,f);break}}},dg=function*(D,F){let $=(X)=>X.replace(/\s+/g," ").trim(),B=$(F),J=D.split(`
`);for(let X=0;X<J.length;X++){let Q=J[X];if($(Q)===B)yield Q;if($(Q).includes(B)){let f=F.trim().split(/\s+/);if(f.length>0){let G=f.map((H)=>H.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("\\s+");try{let H=new RegExp(G),K=Q.match(H);if(K)yield K[0]}catch(H){}}}}let Y=F.split(`
`);if(Y.length>1)for(let X=0;X<=J.length-Y.length;X++){let Q=J.slice(X,X+Y.length);if($(Q.join(`
`))===B)yield Q.join(`
`)}},lg=function*(D,F){let $=(X)=>{let Q=X.split(`
`),w=Q.filter((G)=>G.trim().length>0);if(w.length===0)return X;let f=Math.min(...w.map((G)=>{let H=G.match(/^(\s*)/);return H?H[1].length:0}));return Q.map((G)=>G.trim().length===0?G:G.slice(f)).join(`
`)},B=$(F),J=D.split(`
`),Y=F.split(`
`);for(let X=0;X<=J.length-Y.length;X++){let Q=J.slice(X,X+Y.length).join(`
`);if($(Q)===B)yield Q}},ng=function*(D,F){let $=(X)=>{return X.replace(/\\(n|t|r|'|"|`|\\|\n|\$)/g,(Q,w)=>{switch(w){case"n":return`
`;case"t":return"\t";case"r":return"\r";case"'":return"'";case'"':return'"';case"`":return"`";case"\\":return"\\";case`
`:return`
`;case"$":return"$";default:return Q}})},B=$(F);if(D.includes(B))yield B;let J=D.split(`
`),Y=B.split(`
`);for(let X=0;X<=J.length-Y.length;X++){let Q=J.slice(X,X+Y.length).join(`
`);if($(Q)===B)yield Q}},og=function*(D,F){let $=0;while(!0){let B=D.indexOf(F,$);if(B===-1)break;yield F,$=B+F.length}},rg=function*(D,F){let $=F.trim();if($===F)return;if(D.includes($))yield $;let B=D.split(`
`),J=F.split(`
`);for(let Y=0;Y<=B.length-J.length;Y++){let X=B.slice(Y,Y+J.length).join(`
`);if(X.trim()===$)yield X}},tg=function*(D,F){let $=F.split(`
`);if($.length<3)return;if($[$.length-1]==="")$.pop();let B=D.split(`
`),J=$[0].trim(),Y=$[$.length-1].trim();for(let X=0;X<B.length;X++){if(B[X].trim()!==J)continue;for(let Q=X+2;Q<B.length;Q++)if(B[Q].trim()===Y){let w=B.slice(X,Q+1),f=w.join(`
`);if(w.length===$.length){let G=0,H=0;for(let K=1;K<w.length-1;K++){let E=w[K].trim(),O=$[K].trim();if(E.length>0||O.length>0){if(H++,E===O)G++}}if(H===0||G/H>=0.5){yield f;break}}break}}};var hR=k(async()=>{C0();zF();await r7();R3();await C3();LR();await MD();await e7();await eD();await y$();bR=dD.define({id:"edit",description:zR,parameters:W.object({filePath:W.string().describe("The absolute path to the file to modify"),oldString:W.string().describe("The text to replace"),newString:W.string().describe("The text to replace it with (must be different from old_string)"),replaceAll:W.boolean().optional().describe("Replace all occurrences of old_string (default false)")}),async execute(D,F){if(!D.filePath)throw new Error("filePath is required");if(D.oldString===D.newString)throw new Error("oldString and newString must be different");let $=w0.info(),B=D9.isAbsolute(D.filePath)?D.filePath:D9.join($.path.cwd,D.filePath);await S$.ask({id:"edit",sessionID:F.sessionID,title:"Edit this file: "+B,metadata:{filePath:B,oldString:D.oldString,newString:D.newString}});let J="",Y="";await(async()=>{if(D.oldString===""){Y=D.newString,await Bun.write(B,D.newString),await F0.publish(tF.Event.Edited,{file:B});return}let f=Bun.file(B),G=await f.stat().catch(()=>{});if(!G)throw new Error(`File ${B} not found`);if(G.isDirectory())throw new Error(`Path is a directory, not a file: ${B}`);await sF.assert(F.sessionID,B),J=await f.text(),Y=ag(J,D.oldString,D.newString,D.replaceAll),await f.write(Y),await F0.publish(tF.Event.Edited,{file:B}),Y=await f.text()})();let X=sg(XJ(B,B,J,Y));sF.read(F.sessionID,B);let Q="";await j1.touchFile(B,!0);let w=await j1.diagnostics();for(let[f,G]of Object.entries(w)){if(G.length===0)continue;if(f===B){Q+=`
This file has errors, please fix
<file_diagnostics>
${G.map(j1.Diagnostic.pretty).join(`
`)}
</file_diagnostics>
`;continue}Q+=`
<project_diagnostics>
${f}
${G.map(j1.Diagnostic.pretty).join(`
`)}
</project_diagnostics>
`}return{metadata:{diagnostics:w,diff:X,title:`${D9.relative($.path.root,B)}`},output:Q}}})});var F9=t((KJ0,SR)=>{SR.exports=v8;v8.CAPTURING_PHASE=1;v8.AT_TARGET=2;v8.BUBBLING_PHASE=3;function v8(D,F){if(this.type="",this.target=null,this.currentTarget=null,this.eventPhase=v8.AT_TARGET,this.bubbles=!1,this.cancelable=!1,this.isTrusted=!1,this.defaultPrevented=!1,this.timeStamp=Date.now(),this._propagationStopped=!1,this._immediatePropagationStopped=!1,this._initialized=!0,this._dispatching=!1,D)this.type=D;if(F)for(var $ in F)this[$]=F[$]}v8.prototype=Object.create(Object.prototype,{constructor:{value:v8},stopPropagation:{value:function D(){this._propagationStopped=!0}},stopImmediatePropagation:{value:function D(){this._propagationStopped=!0,this._immediatePropagationStopped=!0}},preventDefault:{value:function D(){if(this.cancelable)this.defaultPrevented=!0}},initEvent:{value:function D(F,$,B){if(this._initialized=!0,this._dispatching)return;this._propagationStopped=!1,this._immediatePropagationStopped=!1,this.defaultPrevented=!1,this.isTrusted=!1,this.target=null,this.type=F,this.bubbles=$,this.cancelable=B}}})});var N3=t((qJ0,xR)=>{var yR=F9();xR.exports=Z3;function Z3(){yR.call(this),this.view=null,this.detail=0}Z3.prototype=Object.create(yR.prototype,{constructor:{value:Z3},initUIEvent:{value:function(D,F,$,B,J){this.initEvent(D,F,$),this.view=B,this.detail=J}}})});var _3=t((VJ0,uR)=>{var kR=N3();uR.exports=M3;function M3(){kR.call(this),this.screenX=this.screenY=this.clientX=this.clientY=0,this.ctrlKey=this.altKey=this.shiftKey=this.metaKey=!1,this.button=0,this.buttons=1,this.relatedTarget=null}M3.prototype=Object.create(kR.prototype,{constructor:{value:M3},initMouseEvent:{value:function(D,F,$,B,J,Y,X,Q,w,f,G,H,K,E,O){switch(this.initEvent(D,F,$,B,J),this.screenX=Y,this.screenY=X,this.clientX=Q,this.clientY=w,this.ctrlKey=f,this.altKey=G,this.shiftKey=H,this.metaKey=K,this.button=E,E){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2;break;default:this.buttons=0;break}this.relatedTarget=O}},getModifierState:{value:function(D){switch(D){case"Alt":return this.altKey;case"Control":return this.ctrlKey;case"Shift":return this.shiftKey;case"Meta":return this.metaKey;default:return!1}}}})});var WJ=t((AJ0,gR)=>{gR.exports=fJ;var eg=1,Dm=3,Fm=4,$m=5,Bm=7,Jm=8,Ym=9,Xm=11,Qm=12,wm=13,fm=14,Wm=15,Gm=17,Hm=18,Em=19,Km=20,qm=21,Vm=22,Am=23,Om=24,jm=25,Um=[null,"INDEX_SIZE_ERR",null,"HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR",null,"NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR",null,"TYPE_MISMATCH_ERR","SECURITY_ERR","NETWORK_ERR","ABORT_ERR","URL_MISMATCH_ERR","QUOTA_EXCEEDED_ERR","TIMEOUT_ERR","INVALID_NODE_TYPE_ERR","DATA_CLONE_ERR"],Rm=[null,"INDEX_SIZE_ERR (1): the index is not in the allowed range",null,"HIERARCHY_REQUEST_ERR (3): the operation would yield an incorrect nodes model","WRONG_DOCUMENT_ERR (4): the object is in the wrong Document, a call to importNode is required","INVALID_CHARACTER_ERR (5): the string contains invalid characters",null,"NO_MODIFICATION_ALLOWED_ERR (7): the object can not be modified","NOT_FOUND_ERR (8): the object can not be found here","NOT_SUPPORTED_ERR (9): this operation is not supported","INUSE_ATTRIBUTE_ERR (10): setAttributeNode called on owned Attribute","INVALID_STATE_ERR (11): the object is in an invalid state","SYNTAX_ERR (12): the string did not match the expected pattern","INVALID_MODIFICATION_ERR (13): the object can not be modified in this way","NAMESPACE_ERR (14): the operation is not allowed by Namespaces in XML","INVALID_ACCESS_ERR (15): the object does not support the operation or argument",null,"TYPE_MISMATCH_ERR (17): the type of the object does not match the expected type","SECURITY_ERR (18): the operation is insecure","NETWORK_ERR (19): a network error occurred","ABORT_ERR (20): the user aborted an operation","URL_MISMATCH_ERR (21): the given URL does not match another URL","QUOTA_EXCEEDED_ERR (22): the quota has been exceeded","TIMEOUT_ERR (23): a timeout occurred","INVALID_NODE_TYPE_ERR (24): the supplied node is invalid or has an invalid ancestor for this operation","DATA_CLONE_ERR (25): the object can not be cloned."],vR={INDEX_SIZE_ERR:eg,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:Dm,WRONG_DOCUMENT_ERR:Fm,INVALID_CHARACTER_ERR:$m,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:Bm,NOT_FOUND_ERR:Jm,NOT_SUPPORTED_ERR:Ym,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:Xm,SYNTAX_ERR:Qm,INVALID_MODIFICATION_ERR:wm,NAMESPACE_ERR:fm,INVALID_ACCESS_ERR:Wm,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:Gm,SECURITY_ERR:Hm,NETWORK_ERR:Em,ABORT_ERR:Km,URL_MISMATCH_ERR:qm,QUOTA_EXCEEDED_ERR:Vm,TIMEOUT_ERR:Am,INVALID_NODE_TYPE_ERR:Om,DATA_CLONE_ERR:jm};function fJ(D){Error.call(this),Error.captureStackTrace(this,this.constructor),this.code=D,this.message=Rm[D],this.name=Um[D]}fJ.prototype.__proto__=Error.prototype;for(x$ in vR)wJ={value:vR[x$]},Object.defineProperty(fJ,x$,wJ),Object.defineProperty(fJ.prototype,x$,wJ);var wJ,x$});var GJ=t((Cm)=>{Cm.isApiWritable=!globalThis.__domino_frozen__});var H1=t((Mm)=>{var G1=WJ(),U1=G1,Nm=GJ().isApiWritable;Mm.NAMESPACE={HTML:"http://www.w3.org/1999/xhtml",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/",MATHML:"http://www.w3.org/1998/Math/MathML",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink"};Mm.IndexSizeError=function(){throw new G1(U1.INDEX_SIZE_ERR)};Mm.HierarchyRequestError=function(){throw new G1(U1.HIERARCHY_REQUEST_ERR)};Mm.WrongDocumentError=function(){throw new G1(U1.WRONG_DOCUMENT_ERR)};Mm.InvalidCharacterError=function(){throw new G1(U1.INVALID_CHARACTER_ERR)};Mm.NoModificationAllowedError=function(){throw new G1(U1.NO_MODIFICATION_ALLOWED_ERR)};Mm.NotFoundError=function(){throw new G1(U1.NOT_FOUND_ERR)};Mm.NotSupportedError=function(){throw new G1(U1.NOT_SUPPORTED_ERR)};Mm.InvalidStateError=function(){throw new G1(U1.INVALID_STATE_ERR)};Mm.SyntaxError=function(){throw new G1(U1.SYNTAX_ERR)};Mm.InvalidModificationError=function(){throw new G1(U1.INVALID_MODIFICATION_ERR)};Mm.NamespaceError=function(){throw new G1(U1.NAMESPACE_ERR)};Mm.InvalidAccessError=function(){throw new G1(U1.INVALID_ACCESS_ERR)};Mm.TypeMismatchError=function(){throw new G1(U1.TYPE_MISMATCH_ERR)};Mm.SecurityError=function(){throw new G1(U1.SECURITY_ERR)};Mm.NetworkError=function(){throw new G1(U1.NETWORK_ERR)};Mm.AbortError=function(){throw new G1(U1.ABORT_ERR)};Mm.UrlMismatchError=function(){throw new G1(U1.URL_MISMATCH_ERR)};Mm.QuotaExceededError=function(){throw new G1(U1.QUOTA_EXCEEDED_ERR)};Mm.TimeoutError=function(){throw new G1(U1.TIMEOUT_ERR)};Mm.InvalidNodeTypeError=function(){throw new G1(U1.INVALID_NODE_TYPE_ERR)};Mm.DataCloneError=function(){throw new G1(U1.DATA_CLONE_ERR)};Mm.nyi=function(){throw new Error("NotYetImplemented")};Mm.shouldOverride=function(){throw new Error("Abstract function; should be overriding in subclass.")};Mm.assert=function(D,F){if(!D)throw new Error("Assertion failed: "+(F||"")+`
`+new Error().stack)};Mm.expose=function(D,F){for(var $ in D)Object.defineProperty(F.prototype,$,{value:D[$],writable:Nm})};Mm.merge=function(D,F){for(var $ in F)D[$]=F[$]};Mm.documentOrder=function(D,F){return 3-(D.compareDocumentPosition(F)&6)};Mm.toASCIILowerCase=function(D){return D.replace(/[A-Z]+/g,function(F){return F.toLowerCase()})};Mm.toASCIIUpperCase=function(D){return D.replace(/[a-z]+/g,function(F){return F.toUpperCase()})}});var L3=t((UJ0,cR)=>{var g8=F9(),$c=_3(),Bc=H1();cR.exports=mR;function mR(){}mR.prototype={addEventListener:function D(F,$,B){if(!$)return;if(B===void 0)B=!1;if(!this._listeners)this._listeners=Object.create(null);if(!this._listeners[F])this._listeners[F]=[];var J=this._listeners[F];for(var Y=0,X=J.length;Y<X;Y++){var Q=J[Y];if(Q.listener===$&&Q.capture===B)return}var w={listener:$,capture:B};if(typeof $==="function")w.f=$;J.push(w)},removeEventListener:function D(F,$,B){if(B===void 0)B=!1;if(this._listeners){var J=this._listeners[F];if(J)for(var Y=0,X=J.length;Y<X;Y++){var Q=J[Y];if(Q.listener===$&&Q.capture===B){if(J.length===1)this._listeners[F]=void 0;else J.splice(Y,1);return}}}},dispatchEvent:function D(F){return this._dispatchEvent(F,!1)},_dispatchEvent:function D(F,$){if(typeof $!=="boolean")$=!1;function B(f,G){var{type:H,eventPhase:K}=G;if(G.currentTarget=f,K!==g8.CAPTURING_PHASE&&f._handlers&&f._handlers[H]){var E=f._handlers[H],O;if(typeof E==="function")O=E.call(G.currentTarget,G);else{var q=E.handleEvent;if(typeof q!=="function")throw new TypeError("handleEvent property of event handler object isnot a function.");O=q.call(E,G)}switch(G.type){case"mouseover":if(O===!0)G.preventDefault();break;case"beforeunload":default:if(O===!1)G.preventDefault();break}}var U=f._listeners&&f._listeners[H];if(!U)return;U=U.slice();for(var N=0,L=U.length;N<L;N++){if(G._immediatePropagationStopped)return;var C=U[N];if(K===g8.CAPTURING_PHASE&&!C.capture||K===g8.BUBBLING_PHASE&&C.capture)continue;if(C.f)C.f.call(G.currentTarget,G);else{var R=C.listener.handleEvent;if(typeof R!=="function")throw new TypeError("handleEvent property of event listener object is not a function.");R.call(C.listener,G)}}}if(!F._initialized||F._dispatching)Bc.InvalidStateError();F.isTrusted=$,F._dispatching=!0,F.target=this;var J=[];for(var Y=this.parentNode;Y;Y=Y.parentNode)J.push(Y);F.eventPhase=g8.CAPTURING_PHASE;for(var X=J.length-1;X>=0;X--)if(B(J[X],F),F._propagationStopped)break;if(!F._propagationStopped)F.eventPhase=g8.AT_TARGET,B(this,F);if(F.bubbles&&!F._propagationStopped){F.eventPhase=g8.BUBBLING_PHASE;for(var Q=0,w=J.length;Q<w;Q++)if(B(J[Q],F),F._propagationStopped)break}if(F._dispatching=!1,F.eventPhase=g8.AT_TARGET,F.currentTarget=null,$&&!F.defaultPrevented&&F instanceof $c)switch(F.type){case"mousedown":this._armed={x:F.clientX,y:F.clientY,t:F.timeStamp};break;case"mouseout":case"mouseover":this._armed=null;break;case"mouseup":if(this._isClick(F))this._doClick(F);this._armed=null;break}return!F.defaultPrevented},_isClick:function(D){return this._armed!==null&&D.type==="mouseup"&&D.isTrusted&&D.button===0&&D.timeStamp-this._armed.t<1000&&Math.abs(D.clientX-this._armed.x)<10&&Math.abs(D.clientY-this._armed.Y)<10},_doClick:function(D){if(this._click_in_progress)return;this._click_in_progress=!0;var F=this;while(F&&!F._post_click_activation_steps)F=F.parentNode;if(F&&F._pre_click_activation_steps)F._pre_click_activation_steps();var $=this.ownerDocument.createEvent("MouseEvent");$.initMouseEvent("click",!0,!0,this.ownerDocument.defaultView,1,D.screenX,D.screenY,D.clientX,D.clientY,D.ctrlKey,D.altKey,D.shiftKey,D.metaKey,D.button,null);var B=this._dispatchEvent($,!0);if(F){if(B){if(F._post_click_activation_steps)F._post_click_activation_steps($)}else if(F._cancelled_activation_steps)F._cancelled_activation_steps()}},_setEventHandler:function D(F,$){if(!this._handlers)this._handlers=Object.create(null);this._handlers[F]=$},_getEventHandler:function D(F){return this._handlers&&this._handlers[F]||null}}});var z3=t((RJ0,pR)=>{var G6=H1(),aF=pR.exports={valid:function(D){return G6.assert(D,"list falsy"),G6.assert(D._previousSibling,"previous falsy"),G6.assert(D._nextSibling,"next falsy"),!0},insertBefore:function(D,F){G6.assert(aF.valid(D)&&aF.valid(F));var $=D,B=D._previousSibling,J=F,Y=F._previousSibling;$._previousSibling=Y,B._nextSibling=J,Y._nextSibling=$,J._previousSibling=B,G6.assert(aF.valid(D)&&aF.valid(F))},replace:function(D,F){if(G6.assert(aF.valid(D)&&(F===null||aF.valid(F))),F!==null)aF.insertBefore(F,D);aF.remove(D),G6.assert(aF.valid(D)&&(F===null||aF.valid(F)))},remove:function(D){G6.assert(aF.valid(D));var F=D._previousSibling;if(F===D)return;var $=D._nextSibling;F._nextSibling=$,$._previousSibling=F,D._previousSibling=D._nextSibling=D,G6.assert(aF.valid(D))}}});var I3=t((CJ0,sR)=>{sR.exports={serializeOne:Wc,\u{275}escapeMatchingClosingTag:oR,\u{275}escapeClosingCommentTag:rR,\u{275}escapeProcessingInstructionContent:tR};var nR=H1(),m8=nR.NAMESPACE,iR={STYLE:!0,SCRIPT:!0,XMP:!0,IFRAME:!0,NOEMBED:!0,NOFRAMES:!0,PLAINTEXT:!0},Jc={area:!0,base:!0,basefont:!0,bgsound:!0,br:!0,col:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Yc={},dR=/[&<>\u00A0]/g,lR=/[&"<>\u00A0]/g;function Xc(D){if(!dR.test(D))return D;return D.replace(dR,(F)=>{switch(F){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case"\xA0":return"&nbsp;"}})}function Qc(D){if(!lR.test(D))return D;return D.replace(lR,(F)=>{switch(F){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;";case"\xA0":return"&nbsp;"}})}function wc(D){var F=D.namespaceURI;if(!F)return D.localName;if(F===m8.XML)return"xml:"+D.localName;if(F===m8.XLINK)return"xlink:"+D.localName;if(F===m8.XMLNS)if(D.localName==="xmlns")return"xmlns";else return"xmlns:"+D.localName;return D.name}function oR(D,F){let $="</"+F;if(!D.toLowerCase().includes($))return D;let B=[...D],J=D.matchAll(new RegExp($,"ig"));for(let Y of J)B[Y.index]="&lt;";return B.join("")}var fc=/--!?>/;function rR(D){if(!fc.test(D))return D;return D.replace(/(--\!?)>/g,"$1&gt;")}function tR(D){return D.includes(">")?D.replaceAll(">","&gt;"):D}function Wc(D,F){var $="";switch(D.nodeType){case 1:var B=D.namespaceURI,J=B===m8.HTML,Y=J||B===m8.SVG||B===m8.MATHML?D.localName:D.tagName;$+="<"+Y;for(var X=0,Q=D._numattrs;X<Q;X++){var w=D._attr(X);if($+=" "+wc(w),w.value!==void 0)$+='="'+Qc(w.value)+'"'}if($+=">",!(J&&Jc[Y])){var f=D.serialize();if(iR[Y.toUpperCase()])f=oR(f,Y);if(J&&Yc[Y]&&f.charAt(0)===`
`)$+=`
`;$+=f,$+="</"+Y+">"}break;case 3:case 4:var G;if(F.nodeType===1&&F.namespaceURI===m8.HTML)G=F.tagName;else G="";if(iR[G]||G==="NOSCRIPT"&&F.ownerDocument._scripting_enabled)$+=D.data;else $+=Xc(D.data);break;case 8:$+="<!--"+rR(D.data)+"-->";break;case 7:let H=tR(D.data);$+="<?"+D.target+" "+H+"?>";break;case 10:$+="<!DOCTYPE "+D.name,$+=">";break;default:nR.InvalidStateError()}return $}});var g1=t((ZJ0,BC)=>{BC.exports=F1;var $C=L3(),HJ=z3(),aR=I3(),SD=H1();function F1(){$C.call(this),this.parentNode=null,this._nextSibling=this._previousSibling=this,this._index=void 0}var VF=F1.ELEMENT_NODE=1,T3=F1.ATTRIBUTE_NODE=2,EJ=F1.TEXT_NODE=3,Gc=F1.CDATA_SECTION_NODE=4,Hc=F1.ENTITY_REFERENCE_NODE=5,P3=F1.ENTITY_NODE=6,eR=F1.PROCESSING_INSTRUCTION_NODE=7,DC=F1.COMMENT_NODE=8,k$=F1.DOCUMENT_NODE=9,eF=F1.DOCUMENT_TYPE_NODE=10,g6=F1.DOCUMENT_FRAGMENT_NODE=11,b3=F1.NOTATION_NODE=12,h3=F1.DOCUMENT_POSITION_DISCONNECTED=1,S3=F1.DOCUMENT_POSITION_PRECEDING=2,y3=F1.DOCUMENT_POSITION_FOLLOWING=4,FC=F1.DOCUMENT_POSITION_CONTAINS=8,x3=F1.DOCUMENT_POSITION_CONTAINED_BY=16,k3=F1.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;F1.prototype=Object.create($C.prototype,{baseURI:{get:SD.nyi},parentElement:{get:function(){return this.parentNode&&this.parentNode.nodeType===VF?this.parentNode:null}},hasChildNodes:{value:SD.shouldOverride},firstChild:{get:SD.shouldOverride},lastChild:{get:SD.shouldOverride},isConnected:{get:function(){let D=this;while(D!=null){if(D.nodeType===F1.DOCUMENT_NODE)return!0;if(D=D.parentNode,D!=null&&D.nodeType===F1.DOCUMENT_FRAGMENT_NODE)D=D.host}return!1}},previousSibling:{get:function(){var D=this.parentNode;if(!D)return null;if(this===D.firstChild)return null;return this._previousSibling}},nextSibling:{get:function(){var D=this.parentNode,F=this._nextSibling;if(!D)return null;if(F===D.firstChild)return null;return F}},textContent:{get:function(){return null},set:function(D){}},innerText:{get:function(){return null},set:function(D){}},_countChildrenOfType:{value:function(D){var F=0;for(var $=this.firstChild;$!==null;$=$.nextSibling)if($.nodeType===D)F++;return F}},_ensureInsertValid:{value:function D(F,$,B){var J=this,Y,X;if(!F.nodeType)throw new TypeError("not a node");switch(J.nodeType){case k$:case g6:case VF:break;default:SD.HierarchyRequestError()}if(F.isAncestor(J))SD.HierarchyRequestError();if($!==null||!B){if($.parentNode!==J)SD.NotFoundError()}switch(F.nodeType){case g6:case eF:case VF:case EJ:case eR:case DC:break;default:SD.HierarchyRequestError()}if(J.nodeType===k$)switch(F.nodeType){case EJ:SD.HierarchyRequestError();break;case g6:if(F._countChildrenOfType(EJ)>0)SD.HierarchyRequestError();switch(F._countChildrenOfType(VF)){case 0:break;case 1:if($!==null){if(B&&$.nodeType===eF)SD.HierarchyRequestError();for(X=$.nextSibling;X!==null;X=X.nextSibling)if(X.nodeType===eF)SD.HierarchyRequestError()}if(Y=J._countChildrenOfType(VF),B){if(Y>0)SD.HierarchyRequestError()}else if(Y>1||Y===1&&$.nodeType!==VF)SD.HierarchyRequestError();break;default:SD.HierarchyRequestError()}break;case VF:if($!==null){if(B&&$.nodeType===eF)SD.HierarchyRequestError();for(X=$.nextSibling;X!==null;X=X.nextSibling)if(X.nodeType===eF)SD.HierarchyRequestError()}if(Y=J._countChildrenOfType(VF),B){if(Y>0)SD.HierarchyRequestError()}else if(Y>1||Y===1&&$.nodeType!==VF)SD.HierarchyRequestError();break;case eF:if($===null){if(J._countChildrenOfType(VF))SD.HierarchyRequestError()}else for(X=J.firstChild;X!==null;X=X.nextSibling){if(X===$)break;if(X.nodeType===VF)SD.HierarchyRequestError()}if(Y=J._countChildrenOfType(eF),B){if(Y>0)SD.HierarchyRequestError()}else if(Y>1||Y===1&&$.nodeType!==eF)SD.HierarchyRequestError();break}else if(F.nodeType===eF)SD.HierarchyRequestError()}},insertBefore:{value:function D(F,$){var B=this;B._ensureInsertValid(F,$,!0);var J=$;if(J===F)J=F.nextSibling;return B.doc.adoptNode(F),F._insertOrReplace(B,J,!1),F}},appendChild:{value:function(D){return this.insertBefore(D,null)}},_appendChild:{value:function(D){D._insertOrReplace(this,null,!1)}},removeChild:{value:function D(F){var $=this;if(!F.nodeType)throw new TypeError("not a node");if(F.parentNode!==$)SD.NotFoundError();return F.remove(),F}},replaceChild:{value:function D(F,$){var B=this;if(B._ensureInsertValid(F,$,!1),F.doc!==B.doc)B.doc.adoptNode(F);return F._insertOrReplace(B,$,!0),$}},contains:{value:function D(F){if(F===null)return!1;if(this===F)return!0;return(this.compareDocumentPosition(F)&x3)!==0}},compareDocumentPosition:{value:function D(F){if(this===F)return 0;if(this.doc!==F.doc||this.rooted!==F.rooted)return h3+k3;var $=[],B=[];for(var J=this;J!==null;J=J.parentNode)$.push(J);for(J=F;J!==null;J=J.parentNode)B.push(J);if($.reverse(),B.reverse(),$[0]!==B[0])return h3+k3;J=Math.min($.length,B.length);for(var Y=1;Y<J;Y++)if($[Y]!==B[Y])if($[Y].index<B[Y].index)return y3;else return S3;if($.length<B.length)return y3+x3;else return S3+FC}},isSameNode:{value:function D(F){return this===F}},isEqualNode:{value:function D(F){if(!F)return!1;if(F.nodeType!==this.nodeType)return!1;if(!this.isEqual(F))return!1;for(var $=this.firstChild,B=F.firstChild;$&&B;$=$.nextSibling,B=B.nextSibling)if(!$.isEqualNode(B))return!1;return $===null&&B===null}},cloneNode:{value:function(D){var F=this.clone();if(D)for(var $=this.firstChild;$!==null;$=$.nextSibling)F._appendChild($.cloneNode(!0));return F}},lookupPrefix:{value:function D(F){var $;if(F===""||F===null||F===void 0)return null;switch(this.nodeType){case VF:return this._lookupNamespacePrefix(F,this);case k$:return $=this.documentElement,$?$.lookupPrefix(F):null;case P3:case b3:case g6:case eF:return null;case T3:return $=this.ownerElement,$?$.lookupPrefix(F):null;default:return $=this.parentElement,$?$.lookupPrefix(F):null}}},lookupNamespaceURI:{value:function D(F){if(F===""||F===void 0)F=null;var $;switch(this.nodeType){case VF:return SD.shouldOverride();case k$:return $=this.documentElement,$?$.lookupNamespaceURI(F):null;case P3:case b3:case eF:case g6:return null;case T3:return $=this.ownerElement,$?$.lookupNamespaceURI(F):null;default:return $=this.parentElement,$?$.lookupNamespaceURI(F):null}}},isDefaultNamespace:{value:function D(F){if(F===""||F===void 0)F=null;var $=this.lookupNamespaceURI(null);return $===F}},index:{get:function(){var D=this.parentNode;if(this===D.firstChild)return 0;var F=D.childNodes;if(this._index===void 0||F[this._index]!==this){for(var $=0;$<F.length;$++)F[$]._index=$;SD.assert(F[this._index]===this)}return this._index}},isAncestor:{value:function(D){if(this.doc!==D.doc)return!1;if(this.rooted!==D.rooted)return!1;for(var F=D;F;F=F.parentNode)if(F===this)return!0;return!1}},ensureSameDoc:{value:function(D){if(D.ownerDocument===null)D.ownerDocument=this.doc;else if(D.ownerDocument!==this.doc)SD.WrongDocumentError()}},removeChildren:{value:SD.shouldOverride},_insertOrReplace:{value:function D(F,$,B){var J=this,Y,X;if(J.nodeType===g6&&J.rooted)SD.HierarchyRequestError();if(F._childNodes){if(Y=$===null?F._childNodes.length:$.index,J.parentNode===F){var Q=J.index;if(Q<Y)Y--}}if(B){if($.rooted)$.doc.mutateRemove($);$.parentNode=null}var w=$;if(w===null)w=F.firstChild;var f=J.rooted&&F.rooted;if(J.nodeType===g6){var G=[0,B?1:0],H;for(var K=J.firstChild;K!==null;K=H)H=K.nextSibling,G.push(K),K.parentNode=F;var E=G.length;if(B)HJ.replace(w,E>2?G[2]:null);else if(E>2&&w!==null)HJ.insertBefore(G[2],w);if(F._childNodes){G[0]=$===null?F._childNodes.length:$._index,F._childNodes.splice.apply(F._childNodes,G);for(X=2;X<E;X++)G[X]._index=G[0]+(X-2)}else if(F._firstChild===$){if(E>2)F._firstChild=G[2];else if(B)F._firstChild=null}if(J._childNodes)J._childNodes.length=0;else J._firstChild=null;if(F.rooted){F.modify();for(X=2;X<E;X++)F.doc.mutateInsert(G[X])}}else{if($===J)return;if(f)J._remove();else if(J.parentNode)J.remove();if(J.parentNode=F,B){if(HJ.replace(w,J),F._childNodes)J._index=Y,F._childNodes[Y]=J;else if(F._firstChild===$)F._firstChild=J}else{if(w!==null)HJ.insertBefore(J,w);if(F._childNodes)J._index=Y,F._childNodes.splice(Y,0,J);else if(F._firstChild===$)F._firstChild=J}if(f)F.modify(),F.doc.mutateMove(J);else if(F.rooted)F.modify(),F.doc.mutateInsert(J)}}},lastModTime:{get:function(){if(!this._lastModTime)this._lastModTime=this.doc.modclock;return this._lastModTime}},modify:{value:function(){if(this.doc.modclock){var D=++this.doc.modclock;for(var F=this;F;F=F.parentElement)if(F._lastModTime)F._lastModTime=D}}},doc:{get:function(){return this.ownerDocument||this}},rooted:{get:function(){return!!this._nid}},normalize:{value:function(){var D;for(var F=this.firstChild;F!==null;F=D){if(D=F.nextSibling,F.normalize)F.normalize();if(F.nodeType!==F1.TEXT_NODE)continue;if(F.nodeValue===""){this.removeChild(F);continue}var $=F.previousSibling;if($===null)continue;else if($.nodeType===F1.TEXT_NODE)$.appendData(F.nodeValue),this.removeChild(F)}}},serialize:{value:function(){if(this._innerHTML)return this._innerHTML;var D="";for(var F=this.firstChild;F!==null;F=F.nextSibling)D+=aR.serializeOne(F,this);return D}},outerHTML:{get:function(){return aR.serializeOne(this,{nodeType:0})},set:SD.nyi},ELEMENT_NODE:{value:VF},ATTRIBUTE_NODE:{value:T3},TEXT_NODE:{value:EJ},CDATA_SECTION_NODE:{value:Gc},ENTITY_REFERENCE_NODE:{value:Hc},ENTITY_NODE:{value:P3},PROCESSING_INSTRUCTION_NODE:{value:eR},COMMENT_NODE:{value:DC},DOCUMENT_NODE:{value:k$},DOCUMENT_TYPE_NODE:{value:eF},DOCUMENT_FRAGMENT_NODE:{value:g6},NOTATION_NODE:{value:b3},DOCUMENT_POSITION_DISCONNECTED:{value:h3},DOCUMENT_POSITION_PRECEDING:{value:S3},DOCUMENT_POSITION_FOLLOWING:{value:y3},DOCUMENT_POSITION_CONTAINS:{value:FC},DOCUMENT_POSITION_CONTAINED_BY:{value:x3},DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:{value:k3}})});var YC=t((NJ0,JC)=>{JC.exports=class D extends Array{constructor(F){super(F&&F.length||0);if(F)for(var $ in F)this[$]=F[$]}item(F){return this[F]||null}}});var QC=t((MJ0,XC)=>{function Ec(D){return this[D]||null}function Kc(D){if(!D)D=[];return D.item=Ec,D}XC.exports=Kc});var c8=t((_J0,wC)=>{var u3;try{u3=YC()}catch(D){u3=QC()}wC.exports=u3});var KJ=t((LJ0,GC)=>{GC.exports=WC;var fC=g1(),qc=c8();function WC(){fC.call(this),this._firstChild=this._childNodes=null}WC.prototype=Object.create(fC.prototype,{hasChildNodes:{value:function(){if(this._childNodes)return this._childNodes.length>0;return this._firstChild!==null}},childNodes:{get:function(){return this._ensureChildNodes(),this._childNodes}},firstChild:{get:function(){if(this._childNodes)return this._childNodes.length===0?null:this._childNodes[0];return this._firstChild}},lastChild:{get:function(){var D=this._childNodes,F;if(D)return D.length===0?null:D[D.length-1];if(F=this._firstChild,F===null)return null;return F._previousSibling}},_ensureChildNodes:{value:function(){if(this._childNodes)return;var D=this._firstChild,F=D,$=this._childNodes=new qc;if(D)do $.push(F),F=F._nextSibling;while(F!==D);this._firstChild=null}},removeChildren:{value:function D(){var F=this.rooted?this.ownerDocument:null,$=this.firstChild,B;while($!==null){if(B=$,$=B.nextSibling,F)F.mutateRemove(B);B.parentNode=null}if(this._childNodes)this._childNodes.length=0;else this._firstChild=null;this.modify()}}})});var qJ=t((Nc)=>{Nc.isValidName=Cc;Nc.isValidQName=Zc;var Vc=/^[_:A-Za-z][-.:\w]+$/,Ac=/^([_A-Za-z][-.\w]+|[_A-Za-z][-.\w]+:[_A-Za-z][-.\w]+)$/,u$="_A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD",v$="-._A-Za-z0-9\xB7\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0300-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD",p8="["+u$+"]["+v$+"]*",v3=u$+":",g3=v$+":",Oc=new RegExp("^["+v3+"]["+g3+"]*$"),jc=new RegExp("^("+p8+"|"+p8+":"+p8+")$"),HC=/[\uD800-\uDB7F\uDC00-\uDFFF]/,EC=/[\uD800-\uDB7F\uDC00-\uDFFF]/g,KC=/[\uD800-\uDB7F][\uDC00-\uDFFF]/g;u$+="\uD800-\uDB7F\uDC00-\uDFFF";v$+="\uD800-\uDB7F\uDC00-\uDFFF";p8="["+u$+"]["+v$+"]*";v3=u$+":";g3=v$+":";var Uc=new RegExp("^["+v3+"]["+g3+"]*$"),Rc=new RegExp("^("+p8+"|"+p8+":"+p8+")$");function Cc(D){if(Vc.test(D))return!0;if(Oc.test(D))return!0;if(!HC.test(D))return!1;if(!Uc.test(D))return!1;var F=D.match(EC),$=D.match(KC);return $!==null&&2*$.length===F.length}function Zc(D){if(Ac.test(D))return!0;if(jc.test(D))return!0;if(!HC.test(D))return!1;if(!Rc.test(D))return!1;var F=D.match(EC),$=D.match(KC);return $!==null&&2*$.length===F.length}});var m3=t((zc)=>{var qC=H1();zc.property=function(D){if(Array.isArray(D.type)){var F=Object.create(null);D.type.forEach(function(J){F[J.value||J]=J.alias||J});var $=D.missing;if($===void 0)$=null;var B=D.invalid;if(B===void 0)B=$;return{get:function(){var J=this._getattr(D.name);if(J===null)return $;if(J=F[J.toLowerCase()],J!==void 0)return J;if(B!==null)return B;return J},set:function(J){this._setattr(D.name,J)}}}else if(D.type===Boolean)return{get:function(){return this.hasAttribute(D.name)},set:function(J){if(J)this._setattr(D.name,"");else this.removeAttribute(D.name)}};else if(D.type===Number||D.type==="long"||D.type==="unsigned long"||D.type==="limited unsigned long with fallback")return Lc(D);else if(!D.type||D.type===String)return{get:function(){return this._getattr(D.name)||""},set:function(J){if(D.treatNullAsEmptyString&&J===null)J="";this._setattr(D.name,J)}};else if(typeof D.type==="function")return D.type(D.name,D);throw new Error("Invalid attribute definition")};function Lc(D){var F;if(typeof D.default==="function")F=D.default;else if(typeof D.default==="number")F=function(){return D.default};else F=function(){qC.assert(!1,typeof D.default)};var $=D.type==="unsigned long",B=D.type==="long",J=D.type==="limited unsigned long with fallback",Y=D.min,X=D.max,Q=D.setmin;if(Y===void 0){if($)Y=0;if(B)Y=-2147483648;if(J)Y=1}if(X===void 0){if($||B||J)X=2147483647}return{get:function(){var w=this._getattr(D.name),f=D.float?parseFloat(w):parseInt(w,10);if(w===null||!isFinite(f)||Y!==void 0&&f<Y||X!==void 0&&f>X)return F.call(this);if($||B||J){if(!/^[ \t\n\f\r]*[-+]?[0-9]/.test(w))return F.call(this);f=f|0}return f},set:function(w){if(!D.float)w=Math.floor(w);if(Q!==void 0&&w<Q)qC.IndexSizeError(D.name+" set to "+w);if($)w=w<0||w>2147483647?F.call(this):w|0;else if(J)w=w<1||w>2147483647?F.call(this):w|0;else if(B)w=w<-2147483648||w>2147483647?F.call(this):w|0;this._setattr(D.name,String(w))}}}zc.registerChangeHandler=function(D,F,$){var B=D.prototype;if(!Object.prototype.hasOwnProperty.call(B,"_attributeChangeHandlers"))B._attributeChangeHandlers=Object.create(B._attributeChangeHandlers||null);B._attributeChangeHandlers[F]=$}});var OC=t((TJ0,AC)=>{AC.exports=VC;var Pc=g1();function VC(D,F){this.root=D,this.filter=F,this.lastModTime=D.lastModTime,this.done=!1,this.cache=[],this.traverse()}VC.prototype=Object.create(Object.prototype,{length:{get:function(){if(this.checkcache(),!this.done)this.traverse();return this.cache.length}},item:{value:function(D){if(this.checkcache(),!this.done&&D>=this.cache.length)this.traverse();return this.cache[D]}},checkcache:{value:function(){if(this.lastModTime!==this.root.lastModTime){for(var D=this.cache.length-1;D>=0;D--)this[D]=void 0;this.cache.length=0,this.done=!1,this.lastModTime=this.root.lastModTime}}},traverse:{value:function(D){if(D!==void 0)D++;var F;while((F=this.next())!==null)if(this[this.cache.length]=F,this.cache.push(F),D&&this.cache.length===D)return;this.done=!0}},next:{value:function(){var D=this.cache.length===0?this.root:this.cache[this.cache.length-1],F;if(D.nodeType===Pc.DOCUMENT_NODE)F=D.documentElement;else F=D.nextElement(this.root);while(F){if(this.filter(F))return F;F=F.nextElement(this.root)}return null}}})});var p3=t((PJ0,RC)=>{var c3=H1();RC.exports=UC;function UC(D,F){this._getString=D,this._setString=F,this._length=0,this._lastStringValue="",this._update()}Object.defineProperties(UC.prototype,{length:{get:function(){return this._length}},item:{value:function(D){var F=$9(this);if(D<0||D>=F.length)return null;return F[D]}},contains:{value:function(D){D=String(D);var F=$9(this);return F.indexOf(D)>-1}},add:{value:function(){var D=$9(this);for(var F=0,$=arguments.length;F<$;F++){var B=g$(arguments[F]);if(D.indexOf(B)<0)D.push(B)}this._update(D)}},remove:{value:function(){var D=$9(this);for(var F=0,$=arguments.length;F<$;F++){var B=g$(arguments[F]),J=D.indexOf(B);if(J>-1)D.splice(J,1)}this._update(D)}},toggle:{value:function D(F,$){if(F=g$(F),this.contains(F)){if($===void 0||$===!1)return this.remove(F),!1;return!0}else{if($===void 0||$===!0)return this.add(F),!0;return!1}}},replace:{value:function D(F,$){if(String($)==="")c3.SyntaxError();F=g$(F),$=g$($);var B=$9(this),J=B.indexOf(F);if(J<0)return!1;var Y=B.indexOf($);if(Y<0)B[J]=$;else if(J<Y)B[J]=$,B.splice(Y,1);else B.splice(J,1);return this._update(B),!0}},toString:{value:function(){return this._getString()}},value:{get:function(){return this._getString()},set:function(D){this._setString(D),this._update()}},_update:{value:function(D){if(D)jC(this,D),this._setString(D.join(" ").trim());else jC(this,$9(this));this._lastStringValue=this._getString()}}});function jC(D,F){var $=D._length,B;D._length=F.length;for(B=0;B<F.length;B++)D[B]=F[B];for(;B<$;B++)D[B]=void 0}function g$(D){if(D=String(D),D==="")c3.SyntaxError();if(/[ \t\r\n\f]/.test(D))c3.InvalidCharacterError();return D}function bc(D){var F=D._length,$=Array(F);for(var B=0;B<F;B++)$[B]=D[B];return $}function $9(D){var F=D._getString();if(F===D._lastStringValue)return bc(D);var $=F.replace(/(^[ \t\r\n\f]+)|([ \t\r\n\f]+$)/g,"");if($==="")return[];else{var B=Object.create(null);return $.split(/[ \t\r\n\f]+/g).filter(function(J){var Y="$"+J;if(B[Y])return!1;return B[Y]=!0,!0})}}});var jJ=t((Y9,LC)=>{var VJ=Object.create(null,{location:{get:function(){throw new Error("window.location is not supported.")}}}),hc=function(D,F){return D.compareDocumentPosition(F)},Sc=function(D,F){return hc(D,F)&2?1:-1},OJ=function(D){while((D=D.nextSibling)&&D.nodeType!==1);return D},J9=function(D){while((D=D.previousSibling)&&D.nodeType!==1);return D},yc=function(D){if(D=D.firstChild)while(D.nodeType!==1&&(D=D.nextSibling));return D},xc=function(D){if(D=D.lastChild)while(D.nodeType!==1&&(D=D.previousSibling));return D},B9=function(D){if(!D.parentNode)return!1;var F=D.parentNode.nodeType;return F===1||F===9},CC=function(D){if(!D)return D;var F=D[0];if(F==='"'||F==="'"){if(D[D.length-1]===F)D=D.slice(1,-1);else D=D.slice(1);return D.replace(t0.str_escape,function($){var B=/^\\(?:([0-9A-Fa-f]+)|([\r\n\f]+))/.exec($);if(!B)return $.slice(1);if(B[2])return"";var J=parseInt(B[1],16);return String.fromCodePoint?String.fromCodePoint(J):String.fromCharCode(J)})}else if(t0.ident.test(D))return m6(D);else return D},m6=function(D){return D.replace(t0.escape,function(F){var $=/^\\([0-9A-Fa-f]+)/.exec(F);if(!$)return F[1];var B=parseInt($[1],16);return String.fromCodePoint?String.fromCodePoint(B):String.fromCharCode(B)})},kc=function(){if(Array.prototype.indexOf)return Array.prototype.indexOf;return function(D,F){var $=this.length;while($--)if(this[$]===F)return $;return-1}}(),NC=function(D,F){var $=t0.inside.source.replace(/</g,D).replace(/>/g,F);return new RegExp($)},AF=function(D,F,$){return D=D.source,D=D.replace(F,$.source||$),new RegExp(D)},ZC=function(D,F){return D.replace(/^(?:\w+:\/\/|\/+)/,"").replace(/(?:\/+|\/*#.*?)$/,"").split("/",F).join("/")},uc=function(D,F){var $=D.replace(/\s+/g,""),B;if($==="even")$="2n+0";else if($==="odd")$="2n+1";else if($.indexOf("n")===-1)$="0n"+$;return B=/^([+-])?(\d+)?n([+-])?(\d+)?$/.exec($),{group:B[1]==="-"?-(B[2]||1):+(B[2]||1),offset:B[4]?B[3]==="-"?-B[4]:+B[4]:0}},i3=function(D,F,$){var B=uc(D),J=B.group,Y=B.offset,X=!$?yc:xc,Q=!$?OJ:J9;return function(w){if(!B9(w))return;var f=X(w.parentNode),G=0;while(f){if(F(f,w))G++;if(f===w)return G-=Y,J&&G?G%J===0&&G<0===J<0:!G;f=Q(f)}}},x1={"*":function(){return function(){return!0}}(),type:function(D){return D=D.toLowerCase(),function(F){return F.nodeName.toLowerCase()===D}},attr:function(D,F,$,B){return F=MC[F],function(J){var Y;switch(D){case"for":Y=J.htmlFor;break;case"class":if(Y=J.className,Y===""&&J.getAttribute("class")==null)Y=null;break;case"href":case"src":Y=J.getAttribute(D,2);break;case"title":Y=J.getAttribute("title")||null;break;case"id":case"lang":case"dir":case"accessKey":case"hidden":case"tabIndex":case"style":if(J.getAttribute){Y=J.getAttribute(D);break}default:if(J.hasAttribute&&!J.hasAttribute(D))break;Y=J[D]!=null?J[D]:J.getAttribute&&J.getAttribute(D);break}if(Y==null)return;if(Y=Y+"",B)Y=Y.toLowerCase(),$=$.toLowerCase();return F(Y,$)}},":first-child":function(D){return!J9(D)&&B9(D)},":last-child":function(D){return!OJ(D)&&B9(D)},":only-child":function(D){return!J9(D)&&!OJ(D)&&B9(D)},":nth-child":function(D,F){return i3(D,function(){return!0},F)},":nth-last-child":function(D){return x1[":nth-child"](D,!0)},":root":function(D){return D.ownerDocument.documentElement===D},":empty":function(D){return!D.firstChild},":not":function(D){var F=l3(D);return function($){return!F($)}},":first-of-type":function(D){if(!B9(D))return;var F=D.nodeName;while(D=J9(D))if(D.nodeName===F)return;return!0},":last-of-type":function(D){if(!B9(D))return;var F=D.nodeName;while(D=OJ(D))if(D.nodeName===F)return;return!0},":only-of-type":function(D){return x1[":first-of-type"](D)&&x1[":last-of-type"](D)},":nth-of-type":function(D,F){return i3(D,function($,B){return $.nodeName===B.nodeName},F)},":nth-last-of-type":function(D){return x1[":nth-of-type"](D,!0)},":checked":function(D){return!!(D.checked||D.selected)},":indeterminate":function(D){return!x1[":checked"](D)},":enabled":function(D){return!D.disabled&&D.type!=="hidden"},":disabled":function(D){return!!D.disabled},":target":function(D){return D.id===VJ.location.hash.substring(1)},":focus":function(D){return D===D.ownerDocument.activeElement},":is":function(D){return l3(D)},":matches":function(D){return x1[":is"](D)},":nth-match":function(D,F){var $=D.split(/\s*,\s*/),B=$.shift(),J=l3($.join(","));return i3(B,J,F)},":nth-last-match":function(D){return x1[":nth-match"](D,!0)},":links-here":function(D){return D+""===VJ.location+""},":lang":function(D){return function(F){while(F){if(F.lang)return F.lang.indexOf(D)===0;F=F.parentNode}}},":dir":function(D){return function(F){while(F){if(F.dir)return F.dir===D;F=F.parentNode}}},":scope":function(D,F){var $=F||D.ownerDocument;if($.nodeType===9)return D===$.documentElement;return D===$},":any-link":function(D){return typeof D.href==="string"},":local-link":function(D){if(D.nodeName)return D.href&&D.host===VJ.location.host;var F=+D+1;return function($){if(!$.href)return;var B=VJ.location+"",J=$+"";return ZC(B,F)===ZC(J,F)}},":default":function(D){return!!D.defaultSelected},":valid":function(D){return D.willValidate||D.validity&&D.validity.valid},":invalid":function(D){return!x1[":valid"](D)},":in-range":function(D){return D.value>D.min&&D.value<=D.max},":out-of-range":function(D){return!x1[":in-range"](D)},":required":function(D){return!!D.required},":optional":function(D){return!D.required},":read-only":function(D){if(D.readOnly)return!0;var F=D.getAttribute("contenteditable"),$=D.contentEditable,B=D.nodeName.toLowerCase();return B=B!=="input"&&B!=="textarea",(B||D.disabled)&&F==null&&$!=="true"},":read-write":function(D){return!x1[":read-only"](D)},":hover":function(){throw new Error(":hover is not supported.")},":active":function(){throw new Error(":active is not supported.")},":link":function(){throw new Error(":link is not supported.")},":visited":function(){throw new Error(":visited is not supported.")},":column":function(){throw new Error(":column is not supported.")},":nth-column":function(){throw new Error(":nth-column is not supported.")},":nth-last-column":function(){throw new Error(":nth-last-column is not supported.")},":current":function(){throw new Error(":current is not supported.")},":past":function(){throw new Error(":past is not supported.")},":future":function(){throw new Error(":future is not supported.")},":contains":function(D){return function(F){var $=F.innerText||F.textContent||F.value||"";return $.indexOf(D)!==-1}},":has":function(D){return function(F){return _C(D,F).length>0}}},MC={"-":function(){return!0},"=":function(D,F){return D===F},"*=":function(D,F){return D.indexOf(F)!==-1},"~=":function(D,F){var $,B,J,Y;for(B=0;;B=$+1){if($=D.indexOf(F,B),$===-1)return!1;if(J=D[$-1],Y=D[$+F.length],(!J||J===" ")&&(!Y||Y===" "))return!0}},"|=":function(D,F){var $=D.indexOf(F),B;if($!==0)return;return B=D[$+F.length],B==="-"||!B},"^=":function(D,F){return D.indexOf(F)===0},"$=":function(D,F){var $=D.lastIndexOf(F);return $!==-1&&$+F.length===D.length},"!=":function(D,F){return D!==F}},m$={" ":function(D){return function(F){while(F=F.parentNode)if(D(F))return F}},">":function(D){return function(F){if(F=F.parentNode)return D(F)&&F}},"+":function(D){return function(F){if(F=J9(F))return D(F)&&F}},"~":function(D){return function(F){while(F=J9(F))if(D(F))return F}},noop:function(D){return function(F){return D(F)&&F}},ref:function(D,F){var $;function B(J){var Y=J.ownerDocument,X=Y.getElementsByTagName("*"),Q=X.length;while(Q--)if($=X[Q],B.test(J))return $=null,!0;$=null}return B.combinator=function(J){if(!$||!$.getAttribute)return;var Y=$.getAttribute(F)||"";if(Y[0]==="#")Y=Y.substring(1);if(Y===J.id&&D($))return $},B}},t0={escape:/\\(?:[^0-9A-Fa-f\r\n]|[0-9A-Fa-f]{1,6}[\r\n\t ]?)/g,str_escape:/(escape)|\\(\n|\r\n?|\f)/g,nonascii:/[\u00A0-\uFFFF]/,cssid:/(?:(?!-?[0-9])(?:escape|nonascii|[-_a-zA-Z0-9])+)/,qname:/^ *(cssid|\*)/,simple:/^(?:([.#]cssid)|pseudo|attr)/,ref:/^ *\/(cssid)\/ */,combinator:/^(?: +([^ \w*.#\\]) +|( )+|([^ \w*.#\\]))(?! *$)/,attr:/^\[(cssid)(?:([^\w]?=)(inside))?\]/,pseudo:/^(:cssid)(?:\((inside)\))?/,inside:/(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|<[^"'>]*>|\\["'>]|[^"'>])*/,ident:/^(cssid)$/};t0.cssid=AF(t0.cssid,"nonascii",t0.nonascii);t0.cssid=AF(t0.cssid,"escape",t0.escape);t0.qname=AF(t0.qname,"cssid",t0.cssid);t0.simple=AF(t0.simple,"cssid",t0.cssid);t0.ref=AF(t0.ref,"cssid",t0.cssid);t0.attr=AF(t0.attr,"cssid",t0.cssid);t0.pseudo=AF(t0.pseudo,"cssid",t0.cssid);t0.inside=AF(t0.inside,`[^"'>]*`,t0.inside);t0.attr=AF(t0.attr,"inside",NC("\\[","\\]"));t0.pseudo=AF(t0.pseudo,"inside",NC("\\(","\\)"));t0.simple=AF(t0.simple,"pseudo",t0.pseudo);t0.simple=AF(t0.simple,"attr",t0.attr);t0.ident=AF(t0.ident,"cssid",t0.cssid);t0.str_escape=AF(t0.str_escape,"escape",t0.escape);var c$=function(D){var F=D.replace(/^\s+|\s+$/g,""),$,B=[],J=[],Y,X,Q,w,f;while(F){if(Q=t0.qname.exec(F))F=F.substring(Q[0].length),X=m6(Q[1]),J.push(AJ(X,!0));else if(Q=t0.simple.exec(F))F=F.substring(Q[0].length),X="*",J.push(AJ(X,!0)),J.push(AJ(Q));else throw new SyntaxError("Invalid selector.");while(Q=t0.simple.exec(F))F=F.substring(Q[0].length),J.push(AJ(Q));if(F[0]==="!")F=F.substring(1),Y=gc(),Y.qname=X,J.push(Y.simple);if(Q=t0.ref.exec(F)){F=F.substring(Q[0].length),f=m$.ref(d3(J),m6(Q[1])),B.push(f.combinator),J=[];continue}if(Q=t0.combinator.exec(F)){if(F=F.substring(Q[0].length),w=Q[1]||Q[2]||Q[3],w===","){B.push(m$.noop(d3(J)));break}}else w="noop";if(!m$[w])throw new SyntaxError("Bad combinator.");B.push(m$[w](d3(J))),J=[]}if($=vc(B),$.qname=X,$.sel=F,Y)Y.lname=$.qname,Y.test=$,Y.qname=Y.qname,Y.sel=$.sel,$=Y;if(f)f.test=$,f.qname=$.qname,f.sel=$.sel,$=f;return $},AJ=function(D,F){if(F)return D==="*"?x1["*"]:x1.type(D);if(D[1])return D[1][0]==="."?x1.attr("class","~=",m6(D[1].substring(1)),!1):x1.attr("id","=",m6(D[1].substring(1)),!1);if(D[2])return D[3]?x1[m6(D[2])](CC(D[3])):x1[m6(D[2])];if(D[4]){var $=D[6],B=/["'\s]\s*I$/i.test($);if(B)$=$.replace(/\s*I$/i,"");return x1.attr(m6(D[4]),D[5]||"-",CC($),B)}throw new SyntaxError("Unknown Selector.")},d3=function(D){var F=D.length,$;if(F<2)return D[0];return function(B){if(!B)return;for($=0;$<F;$++)if(!D[$](B))return;return!0}},vc=function(D){if(D.length<2)return function(F){return!!D[0](F)};return function(F){var $=D.length;while($--)if(!(F=D[$](F)))return;return!0}},gc=function(){var D;function F($){var B=$.ownerDocument,J=B.getElementsByTagName(F.lname),Y=J.length;while(Y--)if(F.test(J[Y])&&D===$)return D=null,!0;D=null}return F.simple=function($){return D=$,!0},F},l3=function(D){var F=c$(D),$=[F];while(F.sel)F=c$(F.sel),$.push(F);if($.length<2)return F;return function(B){var J=$.length,Y=0;for(;Y<J;Y++)if($[Y](B))return!0}},_C=function(D,F){var $=[],B=c$(D),J=F.getElementsByTagName(B.qname),Y=0,X;while(X=J[Y++])if(B(X))$.push(X);if(B.sel){while(B.sel){B=c$(B.sel),J=F.getElementsByTagName(B.qname),Y=0;while(X=J[Y++])if(B(X)&&kc.call($,X)===-1)$.push(X)}$.sort(Sc)}return $};LC.exports=Y9=function(D,F){var $,B;if(F.nodeType!==11&&D.indexOf(" ")===-1){if(D[0]==="#"&&F.rooted&&/^#[A-Z_][-A-Z0-9_]*$/i.test(D)){if(F.doc._hasMultipleElementsWithId){if($=D.substring(1),!F.doc._hasMultipleElementsWithId($))return B=F.doc.getElementById($),B?[B]:[]}}if(D[0]==="."&&/^\.\w+$/.test(D))return F.getElementsByClassName(D.substring(1));if(/^\w+$/.test(D))return F.getElementsByTagName(D)}return _C(D,F)};Y9.selectors=x1;Y9.operators=MC;Y9.combinators=m$;Y9.matches=function(D,F){var $={sel:F};do if($=c$($.sel),$(D))return!0;while($.sel);return!1}});var UJ=t((bJ0,zC)=>{var mc=g1(),cc=z3(),n3=function(D,F){var $=D.createDocumentFragment();for(var B=0;B<F.length;B++){var J=F[B],Y=J instanceof mc;$.appendChild(Y?J:D.createTextNode(String(J)))}return $},pc={after:{value:function D(){var F=Array.prototype.slice.call(arguments),$=this.parentNode,B=this.nextSibling;if($===null)return;while(B&&F.some(function(Y){return Y===B}))B=B.nextSibling;var J=n3(this.doc,F);$.insertBefore(J,B)}},before:{value:function D(){var F=Array.prototype.slice.call(arguments),$=this.parentNode,B=this.previousSibling;if($===null)return;while(B&&F.some(function(X){return X===B}))B=B.previousSibling;var J=n3(this.doc,F),Y=B?B.nextSibling:$.firstChild;$.insertBefore(J,Y)}},remove:{value:function D(){if(this.parentNode===null)return;if(this.doc){if(this.doc._preremoveNodeIterators(this),this.rooted)this.doc.mutateRemove(this)}this._remove(),this.parentNode=null}},_remove:{value:function D(){var F=this.parentNode;if(F===null)return;if(F._childNodes)F._childNodes.splice(this.index,1);else if(F._firstChild===this)if(this._nextSibling===this)F._firstChild=null;else F._firstChild=this._nextSibling;cc.remove(this),F.modify()}},replaceWith:{value:function D(){var F=Array.prototype.slice.call(arguments),$=this.parentNode,B=this.nextSibling;if($===null)return;while(B&&F.some(function(Y){return Y===B}))B=B.nextSibling;var J=n3(this.doc,F);if(this.parentNode===$)$.replaceChild(J,this);else $.insertBefore(J,B)}}};zC.exports=pc});var o3=t((hJ0,TC)=>{var IC=g1(),ic={nextElementSibling:{get:function(){if(this.parentNode){for(var D=this.nextSibling;D!==null;D=D.nextSibling)if(D.nodeType===IC.ELEMENT_NODE)return D}return null}},previousElementSibling:{get:function(){if(this.parentNode){for(var D=this.previousSibling;D!==null;D=D.previousSibling)if(D.nodeType===IC.ELEMENT_NODE)return D}return null}}};TC.exports=ic});var r3=t((SJ0,bC)=>{bC.exports=PC;var X9=H1();function PC(D){this.element=D}Object.defineProperties(PC.prototype,{length:{get:X9.shouldOverride},item:{value:X9.shouldOverride},getNamedItem:{value:function D(F){return this.element.getAttributeNode(F)}},getNamedItemNS:{value:function D(F,$){return this.element.getAttributeNodeNS(F,$)}},setNamedItem:{value:X9.nyi},setNamedItemNS:{value:X9.nyi},removeNamedItem:{value:function D(F){var $=this.element.getAttributeNode(F);if($)return this.element.removeAttribute(F),$;X9.NotFoundError()}},removeNamedItemNS:{value:function D(F,$){var B=this.element.getAttributeNodeNS(F,$);if(B)return this.element.removeAttributeNS(F,$),B;X9.NotFoundError()}}})});var w9=t((yJ0,kC)=>{kC.exports=c6;var t3=qJ(),X1=H1(),y2=X1.NAMESPACE,CJ=m3(),q2=g1(),s3=c8(),dc=I3(),RJ=OC(),Q9=WJ(),lc=p3(),a3=jJ(),SC=KJ(),nc=UJ(),oc=o3(),yC=r3(),hC=Object.create(null);function c6(D,F,$,B){SC.call(this),this.nodeType=q2.ELEMENT_NODE,this.ownerDocument=D,this.localName=F,this.namespaceURI=$,this.prefix=B,this._tagName=void 0,this._attrsByQName=Object.create(null),this._attrsByLName=Object.create(null),this._attrKeys=[]}function e3(D,F){if(D.nodeType===q2.TEXT_NODE)F.push(D._data);else for(var $=0,B=D.childNodes.length;$<B;$++)e3(D.childNodes[$],F)}c6.prototype=Object.create(SC.prototype,{isHTML:{get:function D(){return this.namespaceURI===y2.HTML&&this.ownerDocument.isHTML}},tagName:{get:function D(){if(this._tagName===void 0){var F;if(this.prefix===null)F=this.localName;else F=this.prefix+":"+this.localName;if(this.isHTML){var $=hC[F];if(!$)hC[F]=$=X1.toASCIIUpperCase(F);F=$}this._tagName=F}return this._tagName}},nodeName:{get:function(){return this.tagName}},nodeValue:{get:function(){return null},set:function(){}},textContent:{get:function(){var D=[];return e3(this,D),D.join("")},set:function(D){if(this.removeChildren(),D!==null&&D!==void 0&&D!=="")this._appendChild(this.ownerDocument.createTextNode(D))}},innerText:{get:function(){var D=[];return e3(this,D),D.join("").replace(/[ \t\n\f\r]+/g," ").trim()},set:function(D){if(this.removeChildren(),D!==null&&D!==void 0&&D!=="")this._appendChild(this.ownerDocument.createTextNode(D))}},innerHTML:{get:function(){return this.serialize()},set:X1.nyi},outerHTML:{get:function(){return dc.serializeOne(this,{nodeType:0})},set:function(D){var F=this.ownerDocument,$=this.parentNode;if($===null)return;if($.nodeType===q2.DOCUMENT_NODE)X1.NoModificationAllowedError();if($.nodeType===q2.DOCUMENT_FRAGMENT_NODE)$=$.ownerDocument.createElement("body");var B=F.implementation.mozHTMLParser(F._address,$);B.parse(D===null?"":String(D),!0),this.replaceWith(B._asDocumentFragment())}},_insertAdjacent:{value:function D(F,$){var B=!1;switch(F){case"beforebegin":B=!0;case"afterend":var J=this.parentNode;if(J===null)return null;return J.insertBefore($,B?this:this.nextSibling);case"afterbegin":B=!0;case"beforeend":return this.insertBefore($,B?this.firstChild:null);default:return X1.SyntaxError()}}},insertAdjacentElement:{value:function D(F,$){if($.nodeType!==q2.ELEMENT_NODE)throw new TypeError("not an element");return F=X1.toASCIILowerCase(String(F)),this._insertAdjacent(F,$)}},insertAdjacentText:{value:function D(F,$){var B=this.ownerDocument.createTextNode($);F=X1.toASCIILowerCase(String(F)),this._insertAdjacent(F,B)}},insertAdjacentHTML:{value:function D(F,$){F=X1.toASCIILowerCase(String(F)),$=String($);var B;switch(F){case"beforebegin":case"afterend":if(B=this.parentNode,B===null||B.nodeType===q2.DOCUMENT_NODE)X1.NoModificationAllowedError();break;case"afterbegin":case"beforeend":B=this;break;default:X1.SyntaxError()}if(!(B instanceof c6)||B.ownerDocument.isHTML&&B.localName==="html"&&B.namespaceURI===y2.HTML)B=B.ownerDocument.createElementNS(y2.HTML,"body");var J=this.ownerDocument.implementation.mozHTMLParser(this.ownerDocument._address,B);J.parse($,!0),this._insertAdjacent(F,J._asDocumentFragment())}},children:{get:function(){if(!this._children)this._children=new xC(this);return this._children}},attributes:{get:function(){if(!this._attributes)this._attributes=new Fw(this);return this._attributes}},firstElementChild:{get:function(){for(var D=this.firstChild;D!==null;D=D.nextSibling)if(D.nodeType===q2.ELEMENT_NODE)return D;return null}},lastElementChild:{get:function(){for(var D=this.lastChild;D!==null;D=D.previousSibling)if(D.nodeType===q2.ELEMENT_NODE)return D;return null}},childElementCount:{get:function(){return this.children.length}},nextElement:{value:function(D){if(!D)D=this.ownerDocument.documentElement;var F=this.firstElementChild;if(!F){if(this===D)return null;F=this.nextElementSibling}if(F)return F;for(var $=this.parentElement;$&&$!==D;$=$.parentElement)if(F=$.nextElementSibling,F)return F;return null}},getElementsByTagName:{value:function D(F){var $;if(!F)return new s3;if(F==="*")$=function(){return!0};else if(this.isHTML)$=rc(F);else $=Dw(F);return new RJ(this,$)}},getElementsByTagNameNS:{value:function D(F,$){var B;if(F==="*"&&$==="*")B=function(){return!0};else if(F==="*")B=Dw($);else if($==="*")B=tc(F);else B=sc(F,$);return new RJ(this,B)}},getElementsByClassName:{value:function D(F){if(F=String(F).trim(),F===""){var $=new s3;return $}return F=F.split(/[ \t\r\n\f]+/),new RJ(this,ac(F))}},getElementsByName:{value:function D(F){return new RJ(this,ec(String(F)))}},clone:{value:function D(){var F;if(this.namespaceURI!==y2.HTML||this.prefix||!this.ownerDocument.isHTML)F=this.ownerDocument.createElementNS(this.namespaceURI,this.prefix!==null?this.prefix+":"+this.localName:this.localName);else F=this.ownerDocument.createElement(this.localName);for(var $=0,B=this._attrKeys.length;$<B;$++){var J=this._attrKeys[$],Y=this._attrsByLName[J],X=Y.cloneNode();X._setOwnerElement(F),F._attrsByLName[J]=X,F._addQName(X)}return F._attrKeys=this._attrKeys.concat(),F}},isEqual:{value:function D(F){if(this.localName!==F.localName||this.namespaceURI!==F.namespaceURI||this.prefix!==F.prefix||this._numattrs!==F._numattrs)return!1;for(var $=0,B=this._numattrs;$<B;$++){var J=this._attr($);if(!F.hasAttributeNS(J.namespaceURI,J.localName))return!1;if(F.getAttributeNS(J.namespaceURI,J.localName)!==J.value)return!1}return!0}},_lookupNamespacePrefix:{value:function D(F,$){if(this.namespaceURI&&this.namespaceURI===F&&this.prefix!==null&&$.lookupNamespaceURI(this.prefix)===F)return this.prefix;for(var B=0,J=this._numattrs;B<J;B++){var Y=this._attr(B);if(Y.prefix==="xmlns"&&Y.value===F&&$.lookupNamespaceURI(Y.localName)===F)return Y.localName}var X=this.parentElement;return X?X._lookupNamespacePrefix(F,$):null}},lookupNamespaceURI:{value:function D(F){if(F===""||F===void 0)F=null;if(this.namespaceURI!==null&&this.prefix===F)return this.namespaceURI;for(var $=0,B=this._numattrs;$<B;$++){var J=this._attr($);if(J.namespaceURI===y2.XMLNS){if(J.prefix==="xmlns"&&J.localName===F||F===null&&J.prefix===null&&J.localName==="xmlns")return J.value||null}}var Y=this.parentElement;return Y?Y.lookupNamespaceURI(F):null}},getAttribute:{value:function D(F){var $=this.getAttributeNode(F);return $?$.value:null}},getAttributeNS:{value:function D(F,$){var B=this.getAttributeNodeNS(F,$);return B?B.value:null}},getAttributeNode:{value:function D(F){if(F=String(F),/[A-Z]/.test(F)&&this.isHTML)F=X1.toASCIILowerCase(F);var $=this._attrsByQName[F];if(!$)return null;if(Array.isArray($))$=$[0];return $}},getAttributeNodeNS:{value:function D(F,$){F=F===void 0||F===null?"":String(F),$=String($);var B=this._attrsByLName[F+"|"+$];return B?B:null}},hasAttribute:{value:function D(F){if(F=String(F),/[A-Z]/.test(F)&&this.isHTML)F=X1.toASCIILowerCase(F);return this._attrsByQName[F]!==void 0}},hasAttributeNS:{value:function D(F,$){F=F===void 0||F===null?"":String(F),$=String($);var B=F+"|"+$;return this._attrsByLName[B]!==void 0}},hasAttributes:{value:function D(){return this._numattrs>0}},toggleAttribute:{value:function D(F,$){if(F=String(F),!t3.isValidName(F))X1.InvalidCharacterError();if(/[A-Z]/.test(F)&&this.isHTML)F=X1.toASCIILowerCase(F);var B=this._attrsByQName[F];if(B===void 0){if($===void 0||$===!0)return this._setAttribute(F,""),!0;return!1}else{if($===void 0||$===!1)return this.removeAttribute(F),!1;return!0}}},_setAttribute:{value:function D(F,$){var B=this._attrsByQName[F],J;if(!B)B=this._newattr(F),J=!0;else if(Array.isArray(B))B=B[0];if(B.value=$,this._attributes)this._attributes[F]=B;if(J&&this._newattrhook)this._newattrhook(F,$)}},setAttribute:{value:function D(F,$){if(F=String(F),!t3.isValidName(F))X1.InvalidCharacterError();if(/[A-Z]/.test(F)&&this.isHTML)F=X1.toASCIILowerCase(F);this._setAttribute(F,String($))}},_setAttributeNS:{value:function D(F,$,B){var J=$.indexOf(":"),Y,X;if(J<0)Y=null,X=$;else Y=$.substring(0,J),X=$.substring(J+1);if(F===""||F===void 0)F=null;var Q=(F===null?"":F)+"|"+X,w=this._attrsByLName[Q],f;if(!w){if(w=new p$(this,X,Y,F),f=!0,this._attrsByLName[Q]=w,this._attributes)this._attributes[this._attrKeys.length]=w;this._attrKeys.push(Q),this._addQName(w)}if(w.value=B,f&&this._newattrhook)this._newattrhook($,B)}},setAttributeNS:{value:function D(F,$,B){if(F=F===null||F===void 0||F===""?null:String(F),$=String($),!t3.isValidQName($))X1.InvalidCharacterError();var J=$.indexOf(":"),Y=J<0?null:$.substring(0,J);if(Y!==null&&F===null||Y==="xml"&&F!==y2.XML||($==="xmlns"||Y==="xmlns")&&F!==y2.XMLNS||F===y2.XMLNS&&!($==="xmlns"||Y==="xmlns"))X1.NamespaceError();this._setAttributeNS(F,$,String(B))}},setAttributeNode:{value:function D(F){if(F.ownerElement!==null&&F.ownerElement!==this)throw new Q9(Q9.INUSE_ATTRIBUTE_ERR);var $=null,B=this._attrsByQName[F.name];if(B){if(!Array.isArray(B))B=[B];if(B.some(function(J){return J===F}))return F;else if(F.ownerElement!==null)throw new Q9(Q9.INUSE_ATTRIBUTE_ERR);B.forEach(function(J){this.removeAttributeNode(J)},this),$=B[0]}return this.setAttributeNodeNS(F),$}},setAttributeNodeNS:{value:function D(F){if(F.ownerElement!==null)throw new Q9(Q9.INUSE_ATTRIBUTE_ERR);var $=F.namespaceURI,B=($===null?"":$)+"|"+F.localName,J=this._attrsByLName[B];if(J)this.removeAttributeNode(J);if(F._setOwnerElement(this),this._attrsByLName[B]=F,this._attributes)this._attributes[this._attrKeys.length]=F;if(this._attrKeys.push(B),this._addQName(F),this._newattrhook)this._newattrhook(F.name,F.value);return J||null}},removeAttribute:{value:function D(F){if(F=String(F),/[A-Z]/.test(F)&&this.isHTML)F=X1.toASCIILowerCase(F);var $=this._attrsByQName[F];if(!$)return;if(Array.isArray($))if($.length>2)$=$.shift();else this._attrsByQName[F]=$[1],$=$[0];else this._attrsByQName[F]=void 0;var B=$.namespaceURI,J=(B===null?"":B)+"|"+$.localName;this._attrsByLName[J]=void 0;var Y=this._attrKeys.indexOf(J);if(this._attributes)Array.prototype.splice.call(this._attributes,Y,1),this._attributes[F]=void 0;this._attrKeys.splice(Y,1);var X=$.onchange;if($._setOwnerElement(null),X)X.call($,this,$.localName,$.value,null);if(this.rooted)this.ownerDocument.mutateRemoveAttr($)}},removeAttributeNS:{value:function D(F,$){F=F===void 0||F===null?"":String(F),$=String($);var B=F+"|"+$,J=this._attrsByLName[B];if(!J)return;this._attrsByLName[B]=void 0;var Y=this._attrKeys.indexOf(B);if(this._attributes)Array.prototype.splice.call(this._attributes,Y,1);this._attrKeys.splice(Y,1),this._removeQName(J);var X=J.onchange;if(J._setOwnerElement(null),X)X.call(J,this,J.localName,J.value,null);if(this.rooted)this.ownerDocument.mutateRemoveAttr(J)}},removeAttributeNode:{value:function D(F){var $=F.namespaceURI,B=($===null?"":$)+"|"+F.localName;if(this._attrsByLName[B]!==F)X1.NotFoundError();return this.removeAttributeNS($,F.localName),F}},getAttributeNames:{value:function D(){var F=this;return this._attrKeys.map(function($){return F._attrsByLName[$].name})}},_getattr:{value:function D(F){var $=this._attrsByQName[F];return $?$.value:null}},_setattr:{value:function D(F,$){var B=this._attrsByQName[F],J;if(!B)B=this._newattr(F),J=!0;if(B.value=String($),this._attributes)this._attributes[F]=B;if(J&&this._newattrhook)this._newattrhook(F,$)}},_newattr:{value:function D(F){var $=new p$(this,F,null,null),B="|"+F;if(this._attrsByQName[F]=$,this._attrsByLName[B]=$,this._attributes)this._attributes[this._attrKeys.length]=$;return this._attrKeys.push(B),$}},_addQName:{value:function(D){var F=D.name,$=this._attrsByQName[F];if(!$)this._attrsByQName[F]=D;else if(Array.isArray($))$.push(D);else this._attrsByQName[F]=[$,D];if(this._attributes)this._attributes[F]=D}},_removeQName:{value:function(D){var F=D.name,$=this._attrsByQName[F];if(Array.isArray($)){var B=$.indexOf(D);if(X1.assert(B!==-1),$.length===2){if(this._attrsByQName[F]=$[1-B],this._attributes)this._attributes[F]=this._attrsByQName[F]}else if($.splice(B,1),this._attributes&&this._attributes[F]===D)this._attributes[F]=$[0]}else if(X1.assert($===D),this._attrsByQName[F]=void 0,this._attributes)this._attributes[F]=void 0}},_numattrs:{get:function(){return this._attrKeys.length}},_attr:{value:function(D){return this._attrsByLName[this._attrKeys[D]]}},id:CJ.property({name:"id"}),className:CJ.property({name:"class"}),classList:{get:function(){var D=this;if(this._classList)return this._classList;var F=new lc(function(){return D.className||""},function($){D.className=$});return this._classList=F,F},set:function(D){this.className=D}},matches:{value:function(D){return a3.matches(this,D)}},closest:{value:function(D){var F=this;do{if(F.matches&&F.matches(D))return F;F=F.parentElement||F.parentNode}while(F!==null&&F.nodeType===q2.ELEMENT_NODE);return null}},querySelector:{value:function(D){return a3(D,this)[0]}},querySelectorAll:{value:function(D){var F=a3(D,this);return F.item?F:new s3(F)}}});Object.defineProperties(c6.prototype,nc);Object.defineProperties(c6.prototype,oc);CJ.registerChangeHandler(c6,"id",function(D,F,$,B){if(D.rooted){if($)D.ownerDocument.delId($,D);if(B)D.ownerDocument.addId(B,D)}});CJ.registerChangeHandler(c6,"class",function(D,F,$,B){if(D._classList)D._classList._update()});function p$(D,F,$,B,J){this.localName=F,this.prefix=$===null||$===""?null:""+$,this.namespaceURI=B===null||B===""?null:""+B,this.data=J,this._setOwnerElement(D)}p$.prototype=Object.create(Object.prototype,{ownerElement:{get:function(){return this._ownerElement}},_setOwnerElement:{value:function D(F){if(this._ownerElement=F,this.prefix===null&&this.namespaceURI===null&&F)this.onchange=F._attributeChangeHandlers[this.localName];else this.onchange=null}},name:{get:function(){return this.prefix?this.prefix+":"+this.localName:this.localName}},specified:{get:function(){return!0}},value:{get:function(){return this.data},set:function(D){var F=this.data;if(D=D===void 0?"":D+"",D===F)return;if(this.data=D,this.ownerElement){if(this.onchange)this.onchange(this.ownerElement,this.localName,F,D);if(this.ownerElement.rooted)this.ownerElement.ownerDocument.mutateAttr(this,F)}}},cloneNode:{value:function D(F){return new p$(null,this.localName,this.prefix,this.namespaceURI,this.data)}},nodeType:{get:function(){return q2.ATTRIBUTE_NODE}},nodeName:{get:function(){return this.name}},nodeValue:{get:function(){return this.value},set:function(D){this.value=D}},textContent:{get:function(){return this.value},set:function(D){if(D===null||D===void 0)D="";this.value=D}},innerText:{get:function(){return this.value},set:function(D){if(D===null||D===void 0)D="";this.value=D}}});c6._Attr=p$;function Fw(D){yC.call(this,D);for(var F in D._attrsByQName)this[F]=D._attrsByQName[F];for(var $=0;$<D._attrKeys.length;$++)this[$]=D._attrsByLName[D._attrKeys[$]]}Fw.prototype=Object.create(yC.prototype,{length:{get:function(){return this.element._attrKeys.length},set:function(){}},item:{value:function(D){if(D=D>>>0,D>=this.length)return null;return this.element._attrsByLName[this.element._attrKeys[D]]}}});if(globalThis.Symbol?.iterator)Fw.prototype[globalThis.Symbol.iterator]=function(){var D=0,F=this.length,$=this;return{next:function(){if(D<F)return{value:$.item(D++)};return{done:!0}}}};function xC(D){this.element=D,this.updateCache()}xC.prototype=Object.create(Object.prototype,{length:{get:function(){return this.updateCache(),this.childrenByNumber.length}},item:{value:function D(F){return this.updateCache(),this.childrenByNumber[F]||null}},namedItem:{value:function D(F){return this.updateCache(),this.childrenByName[F]||null}},namedItems:{get:function(){return this.updateCache(),this.childrenByName}},updateCache:{value:function D(){var F=/^(a|applet|area|embed|form|frame|frameset|iframe|img|object)$/;if(this.lastModTime!==this.element.lastModTime){this.lastModTime=this.element.lastModTime;var $=this.childrenByNumber&&this.childrenByNumber.length||0;for(var B=0;B<$;B++)this[B]=void 0;this.childrenByNumber=[],this.childrenByName=Object.create(null);for(var J=this.element.firstChild;J!==null;J=J.nextSibling)if(J.nodeType===q2.ELEMENT_NODE){this[this.childrenByNumber.length]=J,this.childrenByNumber.push(J);var Y=J.getAttribute("id");if(Y&&!this.childrenByName[Y])this.childrenByName[Y]=J;var X=J.getAttribute("name");if(X&&this.element.namespaceURI===y2.HTML&&F.test(this.element.localName)&&!this.childrenByName[X])this.childrenByName[Y]=J}}}}});function Dw(D){return function(F){return F.localName===D}}function rc(D){var F=X1.toASCIILowerCase(D);if(F===D)return Dw(D);return function($){return $.isHTML?$.localName===F:$.localName===D}}function tc(D){return function(F){return F.namespaceURI===D}}function sc(D,F){return function($){return $.namespaceURI===D&&$.localName===F}}function ac(D){return function(F){return D.every(function($){return F.classList.contains($)})}}function ec(D){return function(F){if(F.namespaceURI!==y2.HTML)return!1;return F.getAttribute("name")===D}}});var $w=t((xJ0,cC)=>{cC.exports=mC;var vC=g1(),Dp=c8(),gC=H1(),uC=gC.HierarchyRequestError,Fp=gC.NotFoundError;function mC(){vC.call(this)}mC.prototype=Object.create(vC.prototype,{hasChildNodes:{value:function(){return!1}},firstChild:{value:null},lastChild:{value:null},insertBefore:{value:function(D,F){if(!D.nodeType)throw new TypeError("not a node");uC()}},replaceChild:{value:function(D,F){if(!D.nodeType)throw new TypeError("not a node");uC()}},removeChild:{value:function(D){if(!D.nodeType)throw new TypeError("not a node");Fp()}},removeChildren:{value:function(){}},childNodes:{get:function(){if(!this._childNodes)this._childNodes=new Dp;return this._childNodes}}})});var i$=t((kJ0,dC)=>{dC.exports=ZJ;var iC=$w(),pC=H1(),$p=UJ(),Bp=o3();function ZJ(){iC.call(this)}ZJ.prototype=Object.create(iC.prototype,{substringData:{value:function D(F,$){if(arguments.length<2)throw new TypeError("Not enough arguments");if(F=F>>>0,$=$>>>0,F>this.data.length||F<0||$<0)pC.IndexSizeError();return this.data.substring(F,F+$)}},appendData:{value:function D(F){if(arguments.length<1)throw new TypeError("Not enough arguments");this.data+=String(F)}},insertData:{value:function D(F,$){return this.replaceData(F,0,$)}},deleteData:{value:function D(F,$){return this.replaceData(F,$,"")}},replaceData:{value:function D(F,$,B){var J=this.data,Y=J.length;if(F=F>>>0,$=$>>>0,B=String(B),F>Y||F<0)pC.IndexSizeError();if(F+$>Y)$=Y-F;var X=J.substring(0,F),Q=J.substring(F+$);this.data=X+B+Q}},isEqual:{value:function D(F){return this._data===F._data}},length:{get:function(){return this.data.length}}});Object.defineProperties(ZJ.prototype,$p);Object.defineProperties(ZJ.prototype,Bp)});var Jw=t((uJ0,rC)=>{rC.exports=Bw;var lC=H1(),nC=g1(),oC=i$();function Bw(D,F){oC.call(this),this.nodeType=nC.TEXT_NODE,this.ownerDocument=D,this._data=F,this._index=void 0}var d$={get:function(){return this._data},set:function(D){if(D===null||D===void 0)D="";else D=String(D);if(D===this._data)return;if(this._data=D,this.rooted)this.ownerDocument.mutateValue(this);if(this.parentNode&&this.parentNode._textchangehook)this.parentNode._textchangehook(this)}};Bw.prototype=Object.create(oC.prototype,{nodeName:{value:"#text"},nodeValue:d$,textContent:d$,innerText:d$,data:{get:d$.get,set:function(D){d$.set.call(this,D===null?"":String(D))}},splitText:{value:function D(F){if(F>this._data.length||F<0)lC.IndexSizeError();var $=this._data.substring(F),B=this.ownerDocument.createTextNode($);this.data=this.data.substring(0,F);var J=this.parentNode;if(J!==null)J.insertBefore(B,this.nextSibling);return B}},wholeText:{get:function D(){var F=this.textContent;for(var $=this.nextSibling;$;$=$.nextSibling){if($.nodeType!==nC.TEXT_NODE)break;F+=$.textContent}return F}},replaceWholeText:{value:lC.nyi},clone:{value:function D(){return new Bw(this.ownerDocument,this._data)}}})});var Xw=t((vJ0,sC)=>{sC.exports=Yw;var Jp=g1(),tC=i$();function Yw(D,F){tC.call(this),this.nodeType=Jp.COMMENT_NODE,this.ownerDocument=D,this._data=F}var l$={get:function(){return this._data},set:function(D){if(D===null||D===void 0)D="";else D=String(D);if(this._data=D,this.rooted)this.ownerDocument.mutateValue(this)}};Yw.prototype=Object.create(tC.prototype,{nodeName:{value:"#comment"},nodeValue:l$,textContent:l$,innerText:l$,data:{get:l$.get,set:function(D){l$.set.call(this,D===null?"":String(D))}},clone:{value:function D(){return new Yw(this.ownerDocument,this._data)}}})});var ww=t((gJ0,DZ)=>{DZ.exports=Qw;var Yp=g1(),Xp=c8(),eC=KJ(),NJ=w9(),Qp=jJ(),aC=H1();function Qw(D){eC.call(this),this.nodeType=Yp.DOCUMENT_FRAGMENT_NODE,this.ownerDocument=D}Qw.prototype=Object.create(eC.prototype,{nodeName:{value:"#document-fragment"},nodeValue:{get:function(){return null},set:function(){}},textContent:Object.getOwnPropertyDescriptor(NJ.prototype,"textContent"),innerText:Object.getOwnPropertyDescriptor(NJ.prototype,"innerText"),querySelector:{value:function(D){var F=this.querySelectorAll(D);return F.length?F[0]:null}},querySelectorAll:{value:function(D){var F=Object.create(this);F.isHTML=!0,F.getElementsByTagName=NJ.prototype.getElementsByTagName,F.nextElement=Object.getOwnPropertyDescriptor(NJ.prototype,"firstElementChild").get;var $=Qp(D,F);return $.item?$:new Xp($)}},clone:{value:function D(){return new Qw(this.ownerDocument)}},isEqual:{value:function D(F){return!0}},innerHTML:{get:function(){return this.serialize()},set:aC.nyi},outerHTML:{get:function(){return this.serialize()},set:aC.nyi}})});var Ww=t((mJ0,$Z)=>{$Z.exports=fw;var wp=g1(),FZ=i$();function fw(D,F,$){FZ.call(this),this.nodeType=wp.PROCESSING_INSTRUCTION_NODE,this.ownerDocument=D,this.target=F,this._data=$}var n$={get:function(){return this._data},set:function(D){if(D===null||D===void 0)D="";else D=String(D);if(this._data=D,this.rooted)this.ownerDocument.mutateValue(this)}};fw.prototype=Object.create(FZ.prototype,{nodeName:{get:function(){return this.target}},nodeValue:n$,textContent:n$,innerText:n$,data:{get:n$.get,set:function(D){n$.set.call(this,D===null?"":String(D))}},clone:{value:function D(){return new fw(this.ownerDocument,this.target,this._data)}},isEqual:{value:function D(F){return this.target===F.target&&this._data===F._data}}})});var o$=t((cJ0,BZ)=>{var Gw={FILTER_ACCEPT:1,FILTER_REJECT:2,FILTER_SKIP:3,SHOW_ALL:4294967295,SHOW_ELEMENT:1,SHOW_ATTRIBUTE:2,SHOW_TEXT:4,SHOW_CDATA_SECTION:8,SHOW_ENTITY_REFERENCE:16,SHOW_ENTITY:32,SHOW_PROCESSING_INSTRUCTION:64,SHOW_COMMENT:128,SHOW_DOCUMENT:256,SHOW_DOCUMENT_TYPE:512,SHOW_DOCUMENT_FRAGMENT:1024,SHOW_NOTATION:2048};BZ.exports=Gw.constructor=Gw.prototype=Gw});var Ew=t((iJ0,YZ)=>{var pJ0=YZ.exports={nextSkippingChildren:fp,nextAncestorSibling:Hw,next:Wp,previous:Gp,deepLastChild:JZ};function fp(D,F){if(D===F)return null;if(D.nextSibling!==null)return D.nextSibling;return Hw(D,F)}function Hw(D,F){for(D=D.parentNode;D!==null;D=D.parentNode){if(D===F)return null;if(D.nextSibling!==null)return D.nextSibling}return null}function Wp(D,F){var $=D.firstChild;if($!==null)return $;if(D===F)return null;if($=D.nextSibling,$!==null)return $;return Hw(D,F)}function JZ(D){while(D.lastChild)D=D.lastChild;return D}function Gp(D,F){var $=D.previousSibling;if($!==null)return JZ($);if($=D.parentNode,$===F)return null;return $}});var HZ=t((dJ0,GZ)=>{GZ.exports=WZ;var Hp=g1(),m1=o$(),XZ=Ew(),fZ=H1(),Kw={first:"firstChild",last:"lastChild",next:"firstChild",previous:"lastChild"},qw={first:"nextSibling",last:"previousSibling",next:"nextSibling",previous:"previousSibling"};function QZ(D,F){var $,B,J,Y,X;B=D._currentNode[Kw[F]];while(B!==null){if(Y=D._internalFilter(B),Y===m1.FILTER_ACCEPT)return D._currentNode=B,B;if(Y===m1.FILTER_SKIP){if($=B[Kw[F]],$!==null){B=$;continue}}while(B!==null){if(X=B[qw[F]],X!==null){B=X;break}if(J=B.parentNode,J===null||J===D.root||J===D._currentNode)return null;else B=J}}return null}function wZ(D,F){var $,B,J;if($=D._currentNode,$===D.root)return null;while(!0){J=$[qw[F]];while(J!==null){if($=J,B=D._internalFilter($),B===m1.FILTER_ACCEPT)return D._currentNode=$,$;if(J=$[Kw[F]],B===m1.FILTER_REJECT||J===null)J=$[qw[F]]}if($=$.parentNode,$===null||$===D.root)return null;if(D._internalFilter($)===m1.FILTER_ACCEPT)return null}}function WZ(D,F,$){if(!D||!D.nodeType)fZ.NotSupportedError();this._root=D,this._whatToShow=Number(F)||0,this._filter=$||null,this._active=!1,this._currentNode=D}Object.defineProperties(WZ.prototype,{root:{get:function(){return this._root}},whatToShow:{get:function(){return this._whatToShow}},filter:{get:function(){return this._filter}},currentNode:{get:function D(){return this._currentNode},set:function D(F){if(!(F instanceof Hp))throw new TypeError("Not a Node");this._currentNode=F}},_internalFilter:{value:function D(F){var $,B;if(this._active)fZ.InvalidStateError();if(!(1<<F.nodeType-1&this._whatToShow))return m1.FILTER_SKIP;if(B=this._filter,B===null)$=m1.FILTER_ACCEPT;else{this._active=!0;try{if(typeof B==="function")$=B(F);else $=B.acceptNode(F)}finally{this._active=!1}}return+$}},parentNode:{value:function D(){var F=this._currentNode;while(F!==this.root){if(F=F.parentNode,F===null)return null;if(this._internalFilter(F)===m1.FILTER_ACCEPT)return this._currentNode=F,F}return null}},firstChild:{value:function D(){return QZ(this,"first")}},lastChild:{value:function D(){return QZ(this,"last")}},previousSibling:{value:function D(){return wZ(this,"previous")}},nextSibling:{value:function D(){return wZ(this,"next")}},previousNode:{value:function D(){var F,$,B,J;F=this._currentNode;while(F!==this._root){for(B=F.previousSibling;B;B=F.previousSibling){if(F=B,$=this._internalFilter(F),$===m1.FILTER_REJECT)continue;for(J=F.lastChild;J;J=F.lastChild)if(F=J,$=this._internalFilter(F),$===m1.FILTER_REJECT)break;if($===m1.FILTER_ACCEPT)return this._currentNode=F,F}if(F===this.root||F.parentNode===null)return null;if(F=F.parentNode,this._internalFilter(F)===m1.FILTER_ACCEPT)return this._currentNode=F,F}return null}},nextNode:{value:function D(){var F,$,B,J;F=this._currentNode,$=m1.FILTER_ACCEPT;D:while(!0){for(B=F.firstChild;B;B=F.firstChild)if(F=B,$=this._internalFilter(F),$===m1.FILTER_ACCEPT)return this._currentNode=F,F;else if($===m1.FILTER_REJECT)break;for(J=XZ.nextSkippingChildren(F,this.root);J;J=XZ.nextSkippingChildren(F,this.root))if(F=J,$=this._internalFilter(F),$===m1.FILTER_ACCEPT)return this._currentNode=F,F;else if($===m1.FILTER_SKIP)continue D;return null}}},toString:{value:function D(){return"[object TreeWalker]"}}})});var OZ=t((lJ0,AZ)=>{AZ.exports=VZ;var Vw=o$(),Aw=Ew(),qZ=H1();function Ep(D,F,$){if($)return Aw.next(D,F);else{if(D===F)return null;return Aw.previous(D,null)}}function EZ(D,F){for(;F;F=F.parentNode)if(D===F)return!0;return!1}function KZ(D,F){var $,B;$=D._referenceNode,B=D._pointerBeforeReferenceNode;while(!0){if(B===F)B=!B;else if($=Ep($,D._root,F),$===null)return null;var J=D._internalFilter($);if(J===Vw.FILTER_ACCEPT)break}return D._referenceNode=$,D._pointerBeforeReferenceNode=B,$}function VZ(D,F,$){if(!D||!D.nodeType)qZ.NotSupportedError();this._root=D,this._referenceNode=D,this._pointerBeforeReferenceNode=!0,this._whatToShow=Number(F)||0,this._filter=$||null,this._active=!1,D.doc._attachNodeIterator(this)}Object.defineProperties(VZ.prototype,{root:{get:function D(){return this._root}},referenceNode:{get:function D(){return this._referenceNode}},pointerBeforeReferenceNode:{get:function D(){return this._pointerBeforeReferenceNode}},whatToShow:{get:function D(){return this._whatToShow}},filter:{get:function D(){return this._filter}},_internalFilter:{value:function D(F){var $,B;if(this._active)qZ.InvalidStateError();if(!(1<<F.nodeType-1&this._whatToShow))return Vw.FILTER_SKIP;if(B=this._filter,B===null)$=Vw.FILTER_ACCEPT;else{this._active=!0;try{if(typeof B==="function")$=B(F);else $=B.acceptNode(F)}finally{this._active=!1}}return+$}},_preremove:{value:function D(F){if(EZ(F,this._root))return;if(!EZ(F,this._referenceNode))return;if(this._pointerBeforeReferenceNode){var $=F;while($.lastChild)$=$.lastChild;if($=Aw.next($,this.root),$){this._referenceNode=$;return}this._pointerBeforeReferenceNode=!1}if(F.previousSibling===null)this._referenceNode=F.parentNode;else{this._referenceNode=F.previousSibling;var B;for(B=this._referenceNode.lastChild;B;B=this._referenceNode.lastChild)this._referenceNode=B}}},nextNode:{value:function D(){return KZ(this,!0)}},previousNode:{value:function D(){return KZ(this,!1)}},detach:{value:function D(){}},toString:{value:function D(){return"[object NodeIterator]"}}})});var MJ=t((nJ0,jZ)=>{jZ.exports=c1;function c1(D){if(!D)return Object.create(c1.prototype);this.url=D.replace(/^[ \t\n\r\f]+|[ \t\n\r\f]+$/g,"");var F=c1.pattern.exec(this.url);if(F){if(F[2])this.scheme=F[2];if(F[4]){var $=F[4].match(c1.userinfoPattern);if($)this.username=$[1],this.password=$[3],F[4]=F[4].substring($[0].length);if(F[4].match(c1.portPattern)){var B=F[4].lastIndexOf(":");this.host=F[4].substring(0,B),this.port=F[4].substring(B+1)}else this.host=F[4]}if(F[5])this.path=F[5];if(F[6])this.query=F[7];if(F[8])this.fragment=F[9]}}c1.pattern=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/;c1.userinfoPattern=/^([^@:]*)(:([^@]*))?@/;c1.portPattern=/:\d+$/;c1.authorityPattern=/^[^:\/?#]+:\/\//;c1.hierarchyPattern=/^[^:\/?#]+:\//;c1.percentEncode=function D(F){var $=F.charCodeAt(0);if($<256)return"%"+$.toString(16);else throw Error("can't percent-encode codepoints > 255 yet")};c1.prototype={constructor:c1,isAbsolute:function(){return!!this.scheme},isAuthorityBased:function(){return c1.authorityPattern.test(this.url)},isHierarchical:function(){return c1.hierarchyPattern.test(this.url)},toString:function(){var D="";if(this.scheme!==void 0)D+=this.scheme+":";if(this.isAbsolute()){if(D+="//",this.username||this.password){if(D+=this.username||"",this.password)D+=":"+this.password;D+="@"}if(this.host)D+=this.host}if(this.port!==void 0)D+=":"+this.port;if(this.path!==void 0)D+=this.path;if(this.query!==void 0)D+="?"+this.query;if(this.fragment!==void 0)D+="#"+this.fragment;return D},resolve:function(D){var F=this,$=new c1(D),B=new c1;if($.scheme!==void 0)B.scheme=$.scheme,B.username=$.username,B.password=$.password,B.host=$.host,B.port=$.port,B.path=Y($.path),B.query=$.query;else if(B.scheme=F.scheme,$.host!==void 0)B.username=$.username,B.password=$.password,B.host=$.host,B.port=$.port,B.path=Y($.path),B.query=$.query;else if(B.username=F.username,B.password=F.password,B.host=F.host,B.port=F.port,!$.path)if(B.path=F.path,$.query!==void 0)B.query=$.query;else B.query=F.query;else{if($.path.charAt(0)==="/")B.path=Y($.path);else B.path=J(F.path,$.path),B.path=Y(B.path);B.query=$.query}return B.fragment=$.fragment,B.toString();function J(X,Q){if(F.host!==void 0&&!F.path)return"/"+Q;var w=X.lastIndexOf("/");if(w===-1)return Q;else return X.substring(0,w+1)+Q}function Y(X){if(!X)return X;var Q="";while(X.length>0){if(X==="."||X===".."){X="";break}var w=X.substring(0,2),f=X.substring(0,3),G=X.substring(0,4);if(f==="../")X=X.substring(3);else if(w==="./")X=X.substring(2);else if(f==="/./")X="/"+X.substring(3);else if(w==="/."&&X.length===2)X="/";else if(G==="/../"||f==="/.."&&X.length===3)X="/"+X.substring(4),Q=Q.replace(/\/?[^\/]*$/,"");else{var H=X.match(/(\/?([^\/]*))/)[0];Q+=H,X=X.substring(H.length)}}return Q}}}});var CZ=t((oJ0,RZ)=>{RZ.exports=Ow;var UZ=F9();function Ow(D,F){UZ.call(this,D,F)}Ow.prototype=Object.create(UZ.prototype,{constructor:{value:Ow}})});var jw=t((rJ0,ZZ)=>{ZZ.exports={Event:F9(),UIEvent:N3(),MouseEvent:_3(),CustomEvent:CZ()}});var LZ=t((MZ)=>{Object.defineProperty(MZ,"__esModule",{value:!0});MZ.hyphenate=MZ.parse=void 0;function Kp(D){let F=[],$=0,B=0,J=0,Y=0,X=0,Q=null;while($<D.length)switch(D.charCodeAt($++)){case 40:B++;break;case 41:B--;break;case 39:if(J===0)J=39;else if(J===39&&D.charCodeAt($-1)!==92)J=0;break;case 34:if(J===0)J=34;else if(J===34&&D.charCodeAt($-1)!==92)J=0;break;case 58:if(!Q&&B===0&&J===0)Q=NZ(D.substring(X,$-1).trim()),Y=$;break;case 59:if(Q&&Y>0&&B===0&&J===0){let f=D.substring(Y,$-1).trim();F.push(Q,f),X=$,Y=0,Q=null}break}if(Q&&Y){let w=D.slice(Y).trim();F.push(Q,w)}return F}MZ.parse=Kp;function NZ(D){return D.replace(/[a-z][A-Z]/g,(F)=>{return F.charAt(0)+"-"+F.charAt(1)}).toLowerCase()}MZ.hyphenate=NZ});var _J=t((sJ0,bZ)=>{var{parse:Vp}=LZ();bZ.exports=function(D){let F=new PZ(D);return new Proxy(F,{get:function(B,J){return J in B?B[J]:B.getPropertyValue(zZ(J))},has:function(B,J){return!0},set:function(B,J,Y){if(J in B)B[J]=Y;else B.setProperty(zZ(J),Y??void 0);return!0}})};function zZ(D){return D.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function PZ(D){this._element=D}var IZ="!important";function TZ(D){let F={property:{},priority:{}};if(!D)return F;let $=Vp(D);if($.length<2)return F;for(let B=0;B<$.length;B+=2){let J=$[B],Y=$[B+1];if(Y.endsWith(IZ))F.priority[J]="important",Y=Y.slice(0,-IZ.length).trim();F.property[J]=Y}return F}var f9={};PZ.prototype=Object.create(Object.prototype,{_parsed:{get:function(){if(!this._parsedStyles||this.cssText!==this._lastParsedText){var D=this.cssText;this._parsedStyles=TZ(D),this._lastParsedText=D,delete this._names}return this._parsedStyles}},_serialize:{value:function(){var D=this._parsed,F="";for(var $ in D.property){if(F)F+=" ";if(F+=$+": "+D.property[$],D.priority[$])F+=" !"+D.priority[$];F+=";"}this.cssText=F,this._lastParsedText=F,delete this._names}},cssText:{get:function(){return this._element.getAttribute("style")},set:function(D){this._element.setAttribute("style",D)}},length:{get:function(){if(!this._names)this._names=Object.getOwnPropertyNames(this._parsed.property);return this._names.length}},item:{value:function(D){if(!this._names)this._names=Object.getOwnPropertyNames(this._parsed.property);return this._names[D]}},getPropertyValue:{value:function(D){return D=D.toLowerCase(),this._parsed.property[D]||""}},getPropertyPriority:{value:function(D){return D=D.toLowerCase(),this._parsed.priority[D]||""}},setProperty:{value:function(D,F,$){if(D=D.toLowerCase(),F===null||F===void 0)F="";if($===null||$===void 0)$="";if(F!==f9)F=""+F;if(F=F.trim(),F===""){this.removeProperty(D);return}if($!==""&&$!==f9&&!/^important$/i.test($))return;var B=this._parsed;if(F===f9){if(!B.property[D])return;if($!=="")B.priority[D]="important";else delete B.priority[D]}else{if(F.indexOf(";")!==-1)return;var J=TZ(D+":"+F);if(Object.getOwnPropertyNames(J.property).length===0)return;if(Object.getOwnPropertyNames(J.priority).length!==0)return;for(var Y in J.property)if(B.property[Y]=J.property[Y],$===f9)continue;else if($!=="")B.priority[Y]="important";else if(B.priority[Y])delete B.priority[Y]}this._serialize()}},setPropertyValue:{value:function(D,F){return this.setProperty(D,F,f9)}},setPropertyPriority:{value:function(D,F){return this.setProperty(D,f9,F)}},removeProperty:{value:function(D){D=D.toLowerCase();var F=this._parsed;if(D in F.property)delete F.property[D],delete F.priority[D],this._serialize()}}})});var Uw=t((aJ0,hZ)=>{var k1=MJ();hZ.exports=r$;function r$(){}r$.prototype=Object.create(Object.prototype,{_url:{get:function(){return new k1(this.href)}},protocol:{get:function(){var D=this._url;if(D&&D.scheme)return D.scheme+":";else return":"},set:function(D){var F=this.href,$=new k1(F);if($.isAbsolute()){if(D=D.replace(/:+$/,""),D=D.replace(/[^-+\.a-zA-Z0-9]/g,k1.percentEncode),D.length>0)$.scheme=D,F=$.toString()}this.href=F}},host:{get:function(){var D=this._url;if(D.isAbsolute()&&D.isAuthorityBased())return D.host+(D.port?":"+D.port:"");else return""},set:function(D){var F=this.href,$=new k1(F);if($.isAbsolute()&&$.isAuthorityBased()){if(D=D.replace(/[^-+\._~!$&'()*,;:=a-zA-Z0-9]/g,k1.percentEncode),D.length>0)$.host=D,delete $.port,F=$.toString()}this.href=F}},hostname:{get:function(){var D=this._url;if(D.isAbsolute()&&D.isAuthorityBased())return D.host;else return""},set:function(D){var F=this.href,$=new k1(F);if($.isAbsolute()&&$.isAuthorityBased()){if(D=D.replace(/^\/+/,""),D=D.replace(/[^-+\._~!$&'()*,;:=a-zA-Z0-9]/g,k1.percentEncode),D.length>0)$.host=D,F=$.toString()}this.href=F}},port:{get:function(){var D=this._url;if(D.isAbsolute()&&D.isAuthorityBased()&&D.port!==void 0)return D.port;else return""},set:function(D){var F=this.href,$=new k1(F);if($.isAbsolute()&&$.isAuthorityBased()){if(D=""+D,D=D.replace(/[^0-9].*$/,""),D=D.replace(/^0+/,""),D.length===0)D="0";if(parseInt(D,10)<=65535)$.port=D,F=$.toString()}this.href=F}},pathname:{get:function(){var D=this._url;if(D.isAbsolute()&&D.isHierarchical())return D.path;else return""},set:function(D){var F=this.href,$=new k1(F);if($.isAbsolute()&&$.isHierarchical()){if(D.charAt(0)!=="/")D="/"+D;D=D.replace(/[^-+\._~!$&'()*,;:=@\/a-zA-Z0-9]/g,k1.percentEncode),$.path=D,F=$.toString()}this.href=F}},search:{get:function(){var D=this._url;if(D.isAbsolute()&&D.isHierarchical()&&D.query!==void 0)return"?"+D.query;else return""},set:function(D){var F=this.href,$=new k1(F);if($.isAbsolute()&&$.isHierarchical()){if(D.charAt(0)==="?")D=D.substring(1);D=D.replace(/[^-+\._~!$&'()*,;:=@\/?a-zA-Z0-9]/g,k1.percentEncode),$.query=D,F=$.toString()}this.href=F}},hash:{get:function(){var D=this._url;if(D==null||D.fragment==null||D.fragment==="")return"";else return"#"+D.fragment},set:function(D){var F=this.href,$=new k1(F);if(D.charAt(0)==="#")D=D.substring(1);D=D.replace(/[^-+\._~!$&'()*,;:=@\/?a-zA-Z0-9]/g,k1.percentEncode),$.fragment=D,F=$.toString(),this.href=F}},username:{get:function(){var D=this._url;return D.username||""},set:function(D){var F=this.href,$=new k1(F);if($.isAbsolute())D=D.replace(/[\x00-\x1F\x7F-\uFFFF "#<>?`\/@\\:]/g,k1.percentEncode),$.username=D,F=$.toString();this.href=F}},password:{get:function(){var D=this._url;return D.password||""},set:function(D){var F=this.href,$=new k1(F);if($.isAbsolute()){if(D==="")$.password=null;else D=D.replace(/[\x00-\x1F\x7F-\uFFFF "#<>?`\/@\\]/g,k1.percentEncode),$.password=D;F=$.toString()}this.href=F}},origin:{get:function(){var D=this._url;if(D==null)return"";var F=function($){var B=[D.scheme,D.host,+D.port||$];return B[0]+"://"+B[1]+(B[2]===$?"":":"+B[2])};switch(D.scheme){case"ftp":return F(21);case"gopher":return F(70);case"http":case"ws":return F(80);case"https":case"wss":return F(443);default:return D.scheme+"://"}}}});r$._inherit=function(D){Object.getOwnPropertyNames(r$.prototype).forEach(function(F){if(F==="constructor"||F==="href")return;var $=Object.getOwnPropertyDescriptor(r$.prototype,F);Object.defineProperty(D,F,$)})}});var Rw=t((eJ0,xZ)=>{var SZ=m3(),Ap=GJ().isApiWritable;xZ.exports=function(D,F,$,B){var J=D.ctor;if(J){var Y=D.props||{};if(D.attributes)for(var X in D.attributes){var Q=D.attributes[X];if(typeof Q!=="object"||Array.isArray(Q))Q={type:Q};if(!Q.name)Q.name=X.toLowerCase();Y[X]=SZ.property(Q)}if(Y.constructor={value:J,writable:Ap},J.prototype=Object.create((D.superclass||F).prototype,Y),D.events)jp(J,D.events);$[D.name]=J}else J=F;return(D.tags||D.tag&&[D.tag]||[]).forEach(function(w){B[w]=J}),J};function yZ(D,F,$,B){this.body=D,this.document=F,this.form=$,this.element=B}yZ.prototype.build=function(){return()=>{}};function Op(D,F,$,B){var J=D.ownerDocument||Object.create(null),Y=D.form||Object.create(null);D[F]=new yZ(B,J,Y,D).build()}function jp(D,F){var $=D.prototype;F.forEach(function(B){Object.defineProperty($,"on"+B,{get:function(){return this._getEventHandler(B)},set:function(J){this._setEventHandler(B,J)}}),SZ.registerChangeHandler(D,"on"+B,Op)})}});var zJ=t((Np)=>{var Cw=g1(),kZ=w9(),Up=_J(),PF=H1(),uZ=Uw(),Rp=Rw(),H6=Np.elements={},t$=Object.create(null);Np.createElement=function(D,F,$){var B=t$[F]||Zp;return new B(D,F,$)};function q0(D){return Rp(D,y0,H6,t$)}function E1(D){return{get:function(){var F=this._getattr(D);if(F===null)return"";var $=this.doc._resolve(F);return $===null?F:$},set:function(F){this._setattr(D,F)}}}function LJ(D){return{get:function(){var F=this._getattr(D);if(F===null)return null;if(F.toLowerCase()==="use-credentials")return"use-credentials";return"anonymous"},set:function(F){if(F===null||F===void 0)this.removeAttribute(D);else this._setattr(D,F)}}}var W9={type:["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],missing:""},Cp={A:!0,LINK:!0,BUTTON:!0,INPUT:!0,SELECT:!0,TEXTAREA:!0,COMMAND:!0},V2=function(D,F,$){y0.call(this,D,F,$),this._form=null},y0=Np.HTMLElement=q0({superclass:kZ,name:"HTMLElement",ctor:function D(F,$,B){kZ.call(this,F,$,PF.NAMESPACE.HTML,B)},props:{dangerouslySetInnerHTML:{set:function(D){this._innerHTML=D}},innerHTML:{get:function(){return this.serialize()},set:function(D){var F=this.ownerDocument.implementation.mozHTMLParser(this.ownerDocument._address,this);F.parse(D===null?"":String(D),!0);var $=this instanceof t$.template?this.content:this;while($.hasChildNodes())$.removeChild($.firstChild);$.appendChild(F._asDocumentFragment())}},style:{get:function(){if(!this._style)this._style=new Up(this);return this._style},set:function(D){if(D===null||D===void 0)D="";this._setattr("style",String(D))}},blur:{value:function(){}},focus:{value:function(){}},forceSpellCheck:{value:function(){}},click:{value:function(){if(this._click_in_progress)return;this._click_in_progress=!0;try{if(this._pre_click_activation_steps)this._pre_click_activation_steps();var D=this.ownerDocument.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,this.ownerDocument.defaultView,1,0,0,0,0,!1,!1,!1,!1,0,null);var F=this.dispatchEvent(D);if(F){if(this._post_click_activation_steps)this._post_click_activation_steps(D)}else if(this._cancelled_activation_steps)this._cancelled_activation_steps()}finally{this._click_in_progress=!1}}},submit:{value:PF.nyi}},attributes:{title:String,lang:String,dir:{type:["ltr","rtl","auto"],missing:""},draggable:{type:["true","false"],treatNullAsEmptyString:!0},spellcheck:{type:["true","false"],missing:""},enterKeyHint:{type:["enter","done","go","next","previous","search","send"],missing:""},autoCapitalize:{type:["off","on","none","sentences","words","characters"],missing:""},autoFocus:Boolean,accessKey:String,nonce:String,hidden:Boolean,translate:{type:["no","yes"],missing:""},tabIndex:{type:"long",default:function(){if(this.tagName in Cp||this.contentEditable)return 0;else return-1}}},events:["abort","canplay","canplaythrough","change","click","contextmenu","cuechange","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","input","invalid","keydown","keypress","keyup","loadeddata","loadedmetadata","loadstart","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","pause","play","playing","progress","ratechange","readystatechange","reset","seeked","seeking","select","show","stalled","submit","suspend","timeupdate","volumechange","waiting","blur","error","focus","load","scroll"]}),Zp=q0({name:"HTMLUnknownElement",ctor:function D(F,$,B){y0.call(this,F,$,B)}}),A2={form:{get:function(){return this._form}}};q0({tag:"a",name:"HTMLAnchorElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},props:{_post_click_activation_steps:{value:function(D){if(this.href)this.ownerDocument.defaultView.location=this.href}}},attributes:{href:E1,ping:String,download:String,target:String,rel:String,media:String,hreflang:String,type:String,referrerPolicy:W9,coords:String,charset:String,name:String,rev:String,shape:String}});uZ._inherit(t$.a.prototype);q0({tag:"area",name:"HTMLAreaElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{alt:String,target:String,download:String,rel:String,media:String,href:E1,hreflang:String,type:String,shape:String,coords:String,ping:String,referrerPolicy:W9,noHref:Boolean}});uZ._inherit(t$.area.prototype);q0({tag:"br",name:"HTMLBRElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{clear:String}});q0({tag:"base",name:"HTMLBaseElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{target:String}});q0({tag:"body",name:"HTMLBodyElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},events:["afterprint","beforeprint","beforeunload","blur","error","focus","hashchange","load","message","offline","online","pagehide","pageshow","popstate","resize","scroll","storage","unload"],attributes:{text:{type:String,treatNullAsEmptyString:!0},link:{type:String,treatNullAsEmptyString:!0},vLink:{type:String,treatNullAsEmptyString:!0},aLink:{type:String,treatNullAsEmptyString:!0},bgColor:{type:String,treatNullAsEmptyString:!0},background:String}});q0({tag:"button",name:"HTMLButtonElement",ctor:function D(F,$,B){V2.call(this,F,$,B)},props:A2,attributes:{name:String,value:String,disabled:Boolean,autofocus:Boolean,type:{type:["submit","reset","button","menu"],missing:"submit"},formTarget:String,formAction:E1,formNoValidate:Boolean,formMethod:{type:["get","post","dialog"],invalid:"get",missing:""},formEnctype:{type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:""}}});q0({tag:"dl",name:"HTMLDListElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{compact:Boolean}});q0({tag:"data",name:"HTMLDataElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{value:String}});q0({tag:"datalist",name:"HTMLDataListElement",ctor:function D(F,$,B){y0.call(this,F,$,B)}});q0({tag:"details",name:"HTMLDetailsElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{open:Boolean}});q0({tag:"div",name:"HTMLDivElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{align:String}});q0({tag:"embed",name:"HTMLEmbedElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{src:E1,type:String,width:String,height:String,align:String,name:String}});q0({tag:"fieldset",name:"HTMLFieldSetElement",ctor:function D(F,$,B){V2.call(this,F,$,B)},props:A2,attributes:{disabled:Boolean,name:String}});q0({tag:"form",name:"HTMLFormElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{action:String,autocomplete:{type:["on","off"],missing:"on"},name:String,acceptCharset:{name:"accept-charset"},target:String,noValidate:Boolean,method:{type:["get","post","dialog"],invalid:"get",missing:"get"},enctype:{type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:"application/x-www-form-urlencoded"},encoding:{name:"enctype",type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:"application/x-www-form-urlencoded"}}});q0({tag:"hr",name:"HTMLHRElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{align:String,color:String,noShade:Boolean,size:String,width:String}});q0({tag:"head",name:"HTMLHeadElement",ctor:function D(F,$,B){y0.call(this,F,$,B)}});q0({tags:["h1","h2","h3","h4","h5","h6"],name:"HTMLHeadingElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{align:String}});q0({tag:"html",name:"HTMLHtmlElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{xmlns:E1,version:String}});q0({tag:"iframe",name:"HTMLIFrameElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{src:E1,srcdoc:String,name:String,width:String,height:String,seamless:Boolean,allow:Boolean,allowFullscreen:Boolean,allowUserMedia:Boolean,allowPaymentRequest:Boolean,referrerPolicy:W9,loading:{type:["eager","lazy"],treatNullAsEmptyString:!0},align:String,scrolling:String,frameBorder:String,longDesc:E1,marginHeight:{type:String,treatNullAsEmptyString:!0},marginWidth:{type:String,treatNullAsEmptyString:!0}}});q0({tag:"img",name:"HTMLImageElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{alt:String,src:E1,srcset:String,crossOrigin:LJ,useMap:String,isMap:Boolean,sizes:String,height:{type:"unsigned long",default:0},width:{type:"unsigned long",default:0},referrerPolicy:W9,loading:{type:["eager","lazy"],missing:""},name:String,lowsrc:E1,align:String,hspace:{type:"unsigned long",default:0},vspace:{type:"unsigned long",default:0},longDesc:E1,border:{type:String,treatNullAsEmptyString:!0}}});q0({tag:"input",name:"HTMLInputElement",ctor:function D(F,$,B){V2.call(this,F,$,B)},props:{form:A2.form,_post_click_activation_steps:{value:function(D){if(this.type==="checkbox")this.checked=!this.checked;else if(this.type==="radio"){var F=this.form.getElementsByName(this.name);for(var $=F.length-1;$>=0;$--){var B=F[$];B.checked=B===this}}}}},attributes:{name:String,disabled:Boolean,autofocus:Boolean,accept:String,alt:String,max:String,min:String,pattern:String,placeholder:String,step:String,dirName:String,defaultValue:{name:"value"},multiple:Boolean,required:Boolean,readOnly:Boolean,checked:Boolean,value:String,src:E1,defaultChecked:{name:"checked",type:Boolean},size:{type:"unsigned long",default:20,min:1,setmin:1},width:{type:"unsigned long",min:0,setmin:0,default:0},height:{type:"unsigned long",min:0,setmin:0,default:0},minLength:{type:"unsigned long",min:0,setmin:0,default:-1},maxLength:{type:"unsigned long",min:0,setmin:0,default:-1},autocomplete:String,type:{type:["text","hidden","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"],missing:"text"},formTarget:String,formNoValidate:Boolean,formMethod:{type:["get","post"],invalid:"get",missing:""},formEnctype:{type:["application/x-www-form-urlencoded","multipart/form-data","text/plain"],invalid:"application/x-www-form-urlencoded",missing:""},inputMode:{type:["verbatim","latin","latin-name","latin-prose","full-width-latin","kana","kana-name","katakana","numeric","tel","email","url"],missing:""},align:String,useMap:String}});q0({tag:"keygen",name:"HTMLKeygenElement",ctor:function D(F,$,B){V2.call(this,F,$,B)},props:A2,attributes:{name:String,disabled:Boolean,autofocus:Boolean,challenge:String,keytype:{type:["rsa"],missing:""}}});q0({tag:"li",name:"HTMLLIElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{value:{type:"long",default:0},type:String}});q0({tag:"label",name:"HTMLLabelElement",ctor:function D(F,$,B){V2.call(this,F,$,B)},props:A2,attributes:{htmlFor:{name:"for",type:String}}});q0({tag:"legend",name:"HTMLLegendElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{align:String}});q0({tag:"link",name:"HTMLLinkElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{href:E1,rel:String,media:String,hreflang:String,type:String,crossOrigin:LJ,nonce:String,integrity:String,referrerPolicy:W9,imageSizes:String,imageSrcset:String,charset:String,rev:String,target:String}});q0({tag:"map",name:"HTMLMapElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{name:String}});q0({tag:"menu",name:"HTMLMenuElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{type:{type:["context","popup","toolbar"],missing:"toolbar"},label:String,compact:Boolean}});q0({tag:"meta",name:"HTMLMetaElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{name:String,content:String,httpEquiv:{name:"http-equiv",type:String},scheme:String}});q0({tag:"meter",name:"HTMLMeterElement",ctor:function D(F,$,B){V2.call(this,F,$,B)},props:A2});q0({tags:["ins","del"],name:"HTMLModElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{cite:E1,dateTime:String}});q0({tag:"ol",name:"HTMLOListElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},props:{_numitems:{get:function(){var D=0;return this.childNodes.forEach(function(F){if(F.nodeType===Cw.ELEMENT_NODE&&F.tagName==="LI")D++}),D}}},attributes:{type:String,reversed:Boolean,start:{type:"long",default:function(){if(this.reversed)return this._numitems;else return 1}},compact:Boolean}});q0({tag:"object",name:"HTMLObjectElement",ctor:function D(F,$,B){V2.call(this,F,$,B)},props:A2,attributes:{data:E1,type:String,name:String,useMap:String,typeMustMatch:Boolean,width:String,height:String,align:String,archive:String,code:String,declare:Boolean,hspace:{type:"unsigned long",default:0},standby:String,vspace:{type:"unsigned long",default:0},codeBase:E1,codeType:String,border:{type:String,treatNullAsEmptyString:!0}}});q0({tag:"optgroup",name:"HTMLOptGroupElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{disabled:Boolean,label:String}});q0({tag:"option",name:"HTMLOptionElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},props:{form:{get:function(){var D=this.parentNode;while(D&&D.nodeType===Cw.ELEMENT_NODE){if(D.localName==="select")return D.form;D=D.parentNode}}},value:{get:function(){return this._getattr("value")||this.text},set:function(D){this._setattr("value",D)}},text:{get:function(){return this.textContent.replace(/[ \t\n\f\r]+/g," ").trim()},set:function(D){this.textContent=D}}},attributes:{disabled:Boolean,defaultSelected:{name:"selected",type:Boolean},label:String}});q0({tag:"output",name:"HTMLOutputElement",ctor:function D(F,$,B){V2.call(this,F,$,B)},props:A2,attributes:{name:String}});q0({tag:"p",name:"HTMLParagraphElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{align:String}});q0({tag:"param",name:"HTMLParamElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{name:String,value:String,type:String,valueType:String}});q0({tags:["pre","listing","xmp"],name:"HTMLPreElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{width:{type:"long",default:0}}});q0({tag:"progress",name:"HTMLProgressElement",ctor:function D(F,$,B){V2.call(this,F,$,B)},props:A2,attributes:{max:{type:Number,float:!0,default:1,min:0}}});q0({tags:["q","blockquote"],name:"HTMLQuoteElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{cite:E1}});q0({tag:"script",name:"HTMLScriptElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},props:{text:{get:function(){var D="";for(var F=0,$=this.childNodes.length;F<$;F++){var B=this.childNodes[F];if(B.nodeType===Cw.TEXT_NODE)D+=B._data}return D},set:function(D){if(this.removeChildren(),D!==null&&D!=="")this.appendChild(this.ownerDocument.createTextNode(D))}}},attributes:{src:E1,type:String,charset:String,referrerPolicy:W9,defer:Boolean,async:Boolean,nomodule:Boolean,crossOrigin:LJ,nonce:String,integrity:String}});q0({tag:"select",name:"HTMLSelectElement",ctor:function D(F,$,B){V2.call(this,F,$,B)},props:{form:A2.form,options:{get:function(){return this.getElementsByTagName("option")}}},attributes:{autocomplete:String,name:String,disabled:Boolean,autofocus:Boolean,multiple:Boolean,required:Boolean,size:{type:"unsigned long",default:0}}});q0({tag:"span",name:"HTMLSpanElement",ctor:function D(F,$,B){y0.call(this,F,$,B)}});q0({tag:"style",name:"HTMLStyleElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{media:String,type:String,scoped:Boolean}});q0({tag:"caption",name:"HTMLTableCaptionElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{align:String}});q0({name:"HTMLTableCellElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{colSpan:{type:"unsigned long",default:1},rowSpan:{type:"unsigned long",default:1},scope:{type:["row","col","rowgroup","colgroup"],missing:""},abbr:String,align:String,axis:String,height:String,width:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},noWrap:Boolean,vAlign:String,bgColor:{type:String,treatNullAsEmptyString:!0}}});q0({tags:["col","colgroup"],name:"HTMLTableColElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{span:{type:"limited unsigned long with fallback",default:1,min:1},align:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},vAlign:String,width:String}});q0({tag:"table",name:"HTMLTableElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},props:{rows:{get:function(){return this.getElementsByTagName("tr")}}},attributes:{align:String,border:String,frame:String,rules:String,summary:String,width:String,bgColor:{type:String,treatNullAsEmptyString:!0},cellPadding:{type:String,treatNullAsEmptyString:!0},cellSpacing:{type:String,treatNullAsEmptyString:!0}}});q0({tag:"template",name:"HTMLTemplateElement",ctor:function D(F,$,B){y0.call(this,F,$,B),this._contentFragment=F._templateDoc.createDocumentFragment()},props:{content:{get:function(){return this._contentFragment}},serialize:{value:function(){return this.content.serialize()}}}});q0({tag:"tr",name:"HTMLTableRowElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},props:{cells:{get:function(){return this.querySelectorAll("td,th")}}},attributes:{align:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},vAlign:String,bgColor:{type:String,treatNullAsEmptyString:!0}}});q0({tags:["thead","tfoot","tbody"],name:"HTMLTableSectionElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},props:{rows:{get:function(){return this.getElementsByTagName("tr")}}},attributes:{align:String,ch:{name:"char",type:String},chOff:{name:"charoff",type:String},vAlign:String}});q0({tag:"textarea",name:"HTMLTextAreaElement",ctor:function D(F,$,B){V2.call(this,F,$,B)},props:{form:A2.form,type:{get:function(){return"textarea"}},defaultValue:{get:function(){return this.textContent},set:function(D){this.textContent=D}},value:{get:function(){return this.defaultValue},set:function(D){this.defaultValue=D}},textLength:{get:function(){return this.value.length}}},attributes:{autocomplete:String,name:String,disabled:Boolean,autofocus:Boolean,placeholder:String,wrap:String,dirName:String,required:Boolean,readOnly:Boolean,rows:{type:"limited unsigned long with fallback",default:2},cols:{type:"limited unsigned long with fallback",default:20},maxLength:{type:"unsigned long",min:0,setmin:0,default:-1},minLength:{type:"unsigned long",min:0,setmin:0,default:-1},inputMode:{type:["verbatim","latin","latin-name","latin-prose","full-width-latin","kana","kana-name","katakana","numeric","tel","email","url"],missing:""}}});q0({tag:"time",name:"HTMLTimeElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{dateTime:String,pubDate:Boolean}});q0({tag:"title",name:"HTMLTitleElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},props:{text:{get:function(){return this.textContent}}}});q0({tag:"ul",name:"HTMLUListElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{type:String,compact:Boolean}});q0({name:"HTMLMediaElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{src:E1,crossOrigin:LJ,preload:{type:["metadata","none","auto",{value:"",alias:"auto"}],missing:"auto"},loop:Boolean,autoplay:Boolean,mediaGroup:String,controls:Boolean,defaultMuted:{name:"muted",type:Boolean}}});q0({name:"HTMLAudioElement",tag:"audio",superclass:H6.HTMLMediaElement,ctor:function D(F,$,B){H6.HTMLMediaElement.call(this,F,$,B)}});q0({name:"HTMLVideoElement",tag:"video",superclass:H6.HTMLMediaElement,ctor:function D(F,$,B){H6.HTMLMediaElement.call(this,F,$,B)},attributes:{poster:E1,width:{type:"unsigned long",min:0,default:0},height:{type:"unsigned long",min:0,default:0}}});q0({tag:"td",name:"HTMLTableDataCellElement",superclass:H6.HTMLTableCellElement,ctor:function D(F,$,B){H6.HTMLTableCellElement.call(this,F,$,B)}});q0({tag:"th",name:"HTMLTableHeaderCellElement",superclass:H6.HTMLTableCellElement,ctor:function D(F,$,B){H6.HTMLTableCellElement.call(this,F,$,B)}});q0({tag:"frameset",name:"HTMLFrameSetElement",ctor:function D(F,$,B){y0.call(this,F,$,B)}});q0({tag:"frame",name:"HTMLFrameElement",ctor:function D(F,$,B){y0.call(this,F,$,B)}});q0({tag:"canvas",name:"HTMLCanvasElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},props:{getContext:{value:PF.nyi},probablySupportsContext:{value:PF.nyi},setContext:{value:PF.nyi},transferControlToProxy:{value:PF.nyi},toDataURL:{value:PF.nyi},toBlob:{value:PF.nyi}},attributes:{width:{type:"unsigned long",default:300},height:{type:"unsigned long",default:150}}});q0({tag:"dialog",name:"HTMLDialogElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},props:{show:{value:PF.nyi},showModal:{value:PF.nyi},close:{value:PF.nyi}},attributes:{open:Boolean,returnValue:String}});q0({tag:"menuitem",name:"HTMLMenuItemElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},props:{_label:{get:function(){var D=this._getattr("label");if(D!==null&&D!=="")return D;return D=this.textContent,D.replace(/[ \t\n\f\r]+/g," ").trim()}},label:{get:function(){var D=this._getattr("label");if(D!==null)return D;return this._label},set:function(D){this._setattr("label",D)}}},attributes:{type:{type:["command","checkbox","radio"],missing:"command"},icon:E1,disabled:Boolean,checked:Boolean,radiogroup:String,default:Boolean}});q0({tag:"source",name:"HTMLSourceElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{srcset:String,sizes:String,media:String,src:E1,type:String,width:String,height:String}});q0({tag:"track",name:"HTMLTrackElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{src:E1,srclang:String,label:String,default:Boolean,kind:{type:["subtitles","captions","descriptions","chapters","metadata"],missing:"subtitles",invalid:"metadata"}},props:{NONE:{get:function(){return 0}},LOADING:{get:function(){return 1}},LOADED:{get:function(){return 2}},ERROR:{get:function(){return 3}},readyState:{get:PF.nyi},track:{get:PF.nyi}}});q0({tag:"font",name:"HTMLFontElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{color:{type:String,treatNullAsEmptyString:!0},face:{type:String},size:{type:String}}});q0({tag:"dir",name:"HTMLDirectoryElement",ctor:function D(F,$,B){y0.call(this,F,$,B)},attributes:{compact:Boolean}});q0({tags:["abbr","address","article","aside","b","bdi","bdo","cite","content","code","dd","dfn","dt","em","figcaption","figure","footer","header","hgroup","i","kbd","main","mark","nav","noscript","rb","rp","rt","rtc","ruby","s","samp","section","small","strong","sub","summary","sup","u","var","wbr","acronym","basefont","big","center","nobr","noembed","noframes","plaintext","strike","tt"]})});var Mw=t((Tp)=>{var vZ=w9(),_p=Rw(),Lp=H1(),zp=_J(),Ip=Tp.elements={},gZ=Object.create(null);Tp.createElement=function(D,F,$){var B=gZ[F]||Nw;return new B(D,F,$)};function Zw(D){return _p(D,Nw,Ip,gZ)}var Nw=Zw({superclass:vZ,name:"SVGElement",ctor:function D(F,$,B){vZ.call(this,F,$,Lp.NAMESPACE.SVG,B)},props:{style:{get:function(){if(!this._style)this._style=new zp(this);return this._style}}}});Zw({name:"SVGSVGElement",ctor:function D(F,$,B){Nw.call(this,F,$,B)},tag:"svg",props:{createSVGRect:{value:function(){return Tp.createElement(this.ownerDocument,"rect",null)}}}});Zw({tags:["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]})});var pZ=t((YY0,cZ)=>{cZ.exports={VALUE:1,ATTR:2,REMOVE_ATTR:3,REMOVE:4,MOVE:5,INSERT:6}});var TJ=t((XY0,eZ)=>{eZ.exports=a$;var r1=g1(),Pp=c8(),rZ=KJ(),p6=w9(),bp=Jw(),hp=Xw(),s$=F9(),Sp=ww(),yp=Ww(),xp=e$(),kp=HZ(),up=OZ(),iZ=o$(),dZ=MJ(),lZ=jJ(),vp=jw(),IJ=qJ(),_w=zJ(),gp=Mw(),ID=H1(),G9=pZ(),E9=ID.NAMESPACE,Lw=GJ().isApiWritable;function a$(D,F){rZ.call(this),this.nodeType=r1.DOCUMENT_NODE,this.isHTML=D,this._address=F||"about:blank",this.readyState="loading",this.implementation=new xp(this),this.ownerDocument=null,this._contentType=D?"text/html":"application/xml",this.doctype=null,this.documentElement=null,this._templateDocCache=null,this._nodeIterators=null,this._nid=1,this._nextnid=2,this._nodes=[null,this],this.byId=Object.create(null),this.modclock=0}var mp={event:"Event",customevent:"CustomEvent",uievent:"UIEvent",mouseevent:"MouseEvent"},cp={events:"event",htmlevents:"event",mouseevents:"mouseevent",mutationevents:"mutationevent",uievents:"uievent"},H9=function(D,F,$){return{get:function(){var B=D.call(this);if(B)return B[F];return $},set:function(B){var J=D.call(this);if(J)J[F]=B}}};function nZ(D,F){var $,B,J;if(D==="")D=null;if(!IJ.isValidQName(F))ID.InvalidCharacterError();if($=null,B=F,J=F.indexOf(":"),J>=0)$=F.substring(0,J),B=F.substring(J+1);if($!==null&&D===null)ID.NamespaceError();if($==="xml"&&D!==E9.XML)ID.NamespaceError();if(($==="xmlns"||F==="xmlns")&&D!==E9.XMLNS)ID.NamespaceError();if(D===E9.XMLNS&&!($==="xmlns"||F==="xmlns"))ID.NamespaceError();return{namespace:D,prefix:$,localName:B}}a$.prototype=Object.create(rZ.prototype,{_setMutationHandler:{value:function(D){this.mutationHandler=D}},_dispatchRendererEvent:{value:function(D,F,$){var B=this._nodes[D];if(!B)return;B._dispatchEvent(new s$(F,$),!0)}},nodeName:{value:"#document"},nodeValue:{get:function(){return null},set:function(){}},documentURI:{get:function(){return this._address},set:ID.nyi},compatMode:{get:function(){return this._quirks?"BackCompat":"CSS1Compat"}},createTextNode:{value:function(D){return new bp(this,String(D))}},createComment:{value:function(D){return new hp(this,D)}},createDocumentFragment:{value:function(){return new Sp(this)}},createProcessingInstruction:{value:function(D,F){if(!IJ.isValidName(D)||F.indexOf("?>")!==-1)ID.InvalidCharacterError();return new yp(this,D,F)}},createAttribute:{value:function(D){if(D=String(D),!IJ.isValidName(D))ID.InvalidCharacterError();if(this.isHTML)D=ID.toASCIILowerCase(D);return new p6._Attr(null,D,null,null,"")}},createAttributeNS:{value:function(D,F){D=D===null||D===void 0||D===""?null:String(D),F=String(F);var $=nZ(D,F);return new p6._Attr(null,$.localName,$.prefix,$.namespace,"")}},createElement:{value:function(D){if(D=String(D),!IJ.isValidName(D))ID.InvalidCharacterError();if(this.isHTML){if(/[A-Z]/.test(D))D=ID.toASCIILowerCase(D);return _w.createElement(this,D,null)}else if(this.contentType==="application/xhtml+xml")return _w.createElement(this,D,null);else return new p6(this,D,null,null)},writable:Lw},createElementNS:{value:function(D,F){D=D===null||D===void 0||D===""?null:String(D),F=String(F);var $=nZ(D,F);return this._createElementNS($.localName,$.namespace,$.prefix)},writable:Lw},_createElementNS:{value:function(D,F,$){if(F===E9.HTML)return _w.createElement(this,D,$);else if(F===E9.SVG)return gp.createElement(this,D,$);return new p6(this,D,F,$)}},createEvent:{value:function D(F){F=F.toLowerCase();var $=cp[F]||F,B=vp[mp[$]];if(B){var J=new B;return J._initialized=!1,J}else ID.NotSupportedError()}},createTreeWalker:{value:function(D,F,$){if(!D)throw new TypeError("root argument is required");if(!(D instanceof r1))throw new TypeError("root not a node");return F=F===void 0?iZ.SHOW_ALL:+F,$=$===void 0?null:$,new kp(D,F,$)}},createNodeIterator:{value:function(D,F,$){if(!D)throw new TypeError("root argument is required");if(!(D instanceof r1))throw new TypeError("root not a node");return F=F===void 0?iZ.SHOW_ALL:+F,$=$===void 0?null:$,new up(D,F,$)}},_attachNodeIterator:{value:function(D){if(!this._nodeIterators)this._nodeIterators=[];this._nodeIterators.push(D)}},_detachNodeIterator:{value:function(D){var F=this._nodeIterators.indexOf(D);this._nodeIterators.splice(F,1)}},_preremoveNodeIterators:{value:function(D){if(this._nodeIterators)this._nodeIterators.forEach(function(F){F._preremove(D)})}},_updateDocTypeElement:{value:function D(){this.doctype=this.documentElement=null;for(var F=this.firstChild;F!==null;F=F.nextSibling)if(F.nodeType===r1.DOCUMENT_TYPE_NODE)this.doctype=F;else if(F.nodeType===r1.ELEMENT_NODE)this.documentElement=F}},insertBefore:{value:function D(F,$){return r1.prototype.insertBefore.call(this,F,$),this._updateDocTypeElement(),F}},replaceChild:{value:function D(F,$){return r1.prototype.replaceChild.call(this,F,$),this._updateDocTypeElement(),$}},removeChild:{value:function D(F){return r1.prototype.removeChild.call(this,F),this._updateDocTypeElement(),F}},getElementById:{value:function(D){var F=this.byId[D];if(!F)return null;if(F instanceof E6)return F.getFirst();return F}},_hasMultipleElementsWithId:{value:function(D){return this.byId[D]instanceof E6}},getElementsByName:{value:p6.prototype.getElementsByName},getElementsByTagName:{value:p6.prototype.getElementsByTagName},getElementsByTagNameNS:{value:p6.prototype.getElementsByTagNameNS},getElementsByClassName:{value:p6.prototype.getElementsByClassName},adoptNode:{value:function D(F){if(F.nodeType===r1.DOCUMENT_NODE)ID.NotSupportedError();if(F.nodeType===r1.ATTRIBUTE_NODE)return F;if(F.parentNode)F.parentNode.removeChild(F);if(F.ownerDocument!==this)aZ(F,this);return F}},importNode:{value:function D(F,$){return this.adoptNode(F.cloneNode($))},writable:Lw},origin:{get:function D(){return null}},characterSet:{get:function D(){return"UTF-8"}},contentType:{get:function D(){return this._contentType}},URL:{get:function D(){return this._address}},domain:{get:ID.nyi,set:ID.nyi},referrer:{get:ID.nyi},cookie:{get:ID.nyi,set:ID.nyi},lastModified:{get:ID.nyi},location:{get:function(){return this.defaultView?this.defaultView.location:null},set:ID.nyi},_titleElement:{get:function(){return this.getElementsByTagName("title").item(0)||null}},title:{get:function(){var D=this._titleElement,F=D?D.textContent:"";return F.replace(/[ \t\n\r\f]+/g," ").replace(/(^ )|( $)/g,"")},set:function(D){var F=this._titleElement,$=this.head;if(!F&&!$)return;if(!F)F=this.createElement("title"),$.appendChild(F);F.textContent=D}},dir:H9(function(){var D=this.documentElement;if(D&&D.tagName==="HTML")return D},"dir",""),fgColor:H9(function(){return this.body},"text",""),linkColor:H9(function(){return this.body},"link",""),vlinkColor:H9(function(){return this.body},"vLink",""),alinkColor:H9(function(){return this.body},"aLink",""),bgColor:H9(function(){return this.body},"bgColor",""),charset:{get:function(){return this.characterSet}},inputEncoding:{get:function(){return this.characterSet}},scrollingElement:{get:function(){return this._quirks?this.body:this.documentElement}},body:{get:function(){return oZ(this.documentElement,"body")},set:ID.nyi},head:{get:function(){return oZ(this.documentElement,"head")}},images:{get:ID.nyi},embeds:{get:ID.nyi},plugins:{get:ID.nyi},links:{get:ID.nyi},forms:{get:ID.nyi},scripts:{get:ID.nyi},applets:{get:function(){return[]}},activeElement:{get:function(){return null}},innerHTML:{get:function(){return this.serialize()},set:ID.nyi},outerHTML:{get:function(){return this.serialize()},set:ID.nyi},write:{value:function(D){if(!this.isHTML)ID.InvalidStateError();if(!this._parser)return;if(!this._parser);var F=arguments.join("");this._parser.parse(F)}},writeln:{value:function D(F){this.write(Array.prototype.join.call(arguments,"")+`
`)}},open:{value:function(){this.documentElement=null}},close:{value:function(){if(this.readyState="interactive",this._dispatchEvent(new s$("readystatechange"),!0),this._dispatchEvent(new s$("DOMContentLoaded"),!0),this.readyState="complete",this._dispatchEvent(new s$("readystatechange"),!0),this.defaultView)this.defaultView._dispatchEvent(new s$("load"),!0)}},clone:{value:function D(){var F=new a$(this.isHTML,this._address);return F._quirks=this._quirks,F._contentType=this._contentType,F}},cloneNode:{value:function D(F){var $=r1.prototype.cloneNode.call(this,!1);if(F)for(var B=this.firstChild;B!==null;B=B.nextSibling)$._appendChild($.importNode(B,!0));return $._updateDocTypeElement(),$}},isEqual:{value:function D(F){return!0}},mutateValue:{value:function(D){if(this.mutationHandler)this.mutationHandler({type:G9.VALUE,target:D,data:D.data})}},mutateAttr:{value:function(D,F){if(this.mutationHandler)this.mutationHandler({type:G9.ATTR,target:D.ownerElement,attr:D})}},mutateRemoveAttr:{value:function(D){if(this.mutationHandler)this.mutationHandler({type:G9.REMOVE_ATTR,target:D.ownerElement,attr:D})}},mutateRemove:{value:function(D){if(this.mutationHandler)this.mutationHandler({type:G9.REMOVE,target:D.parentNode,node:D});sZ(D)}},mutateInsert:{value:function(D){if(tZ(D),this.mutationHandler)this.mutationHandler({type:G9.INSERT,target:D.parentNode,node:D})}},mutateMove:{value:function(D){if(this.mutationHandler)this.mutationHandler({type:G9.MOVE,target:D})}},addId:{value:function D(F,$){var B=this.byId[F];if(!B)this.byId[F]=$;else{if(!(B instanceof E6))B=new E6(B),this.byId[F]=B;B.add($)}}},delId:{value:function D(F,$){var B=this.byId[F];if(ID.assert(B),B instanceof E6){if(B.del($),B.length===1)this.byId[F]=B.downgrade()}else this.byId[F]=void 0}},_resolve:{value:function(D){return new dZ(this._documentBaseURL).resolve(D)}},_documentBaseURL:{get:function(){var D=this._address;if(D==="about:blank")D="/";var F=this.querySelector("base[href]");if(F)return new dZ(D).resolve(F.getAttribute("href"));return D}},_templateDoc:{get:function(){if(!this._templateDocCache){var D=new a$(this.isHTML,this._address);this._templateDocCache=D._templateDocCache=D}return this._templateDocCache}},querySelector:{value:function(D){return lZ(D,this)[0]}},querySelectorAll:{value:function(D){var F=lZ(D,this);return F.item?F:new Pp(F)}}});var pp=["abort","canplay","canplaythrough","change","click","contextmenu","cuechange","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","durationchange","emptied","ended","input","invalid","keydown","keypress","keyup","loadeddata","loadedmetadata","loadstart","mousedown","mousemove","mouseout","mouseover","mouseup","mousewheel","pause","play","playing","progress","ratechange","readystatechange","reset","seeked","seeking","select","show","stalled","submit","suspend","timeupdate","volumechange","waiting","blur","error","focus","load","scroll"];pp.forEach(function(D){Object.defineProperty(a$.prototype,"on"+D,{get:function(){return this._getEventHandler(D)},set:function(F){this._setEventHandler(D,F)}})});function oZ(D,F){if(D&&D.isHTML){for(var $=D.firstChild;$!==null;$=$.nextSibling)if($.nodeType===r1.ELEMENT_NODE&&$.localName===F&&$.namespaceURI===E9.HTML)return $}return null}function ip(D){if(D._nid=D.ownerDocument._nextnid++,D.ownerDocument._nodes[D._nid]=D,D.nodeType===r1.ELEMENT_NODE){var F=D.getAttribute("id");if(F)D.ownerDocument.addId(F,D);if(D._roothook)D._roothook()}}function dp(D){if(D.nodeType===r1.ELEMENT_NODE){var F=D.getAttribute("id");if(F)D.ownerDocument.delId(F,D)}D.ownerDocument._nodes[D._nid]=void 0,D._nid=void 0}function tZ(D){if(ip(D),D.nodeType===r1.ELEMENT_NODE)for(var F=D.firstChild;F!==null;F=F.nextSibling)tZ(F)}function sZ(D){dp(D);for(var F=D.firstChild;F!==null;F=F.nextSibling)sZ(F)}function aZ(D,F){if(D.ownerDocument=F,D._lastModTime=void 0,Object.prototype.hasOwnProperty.call(D,"_tagName"))D._tagName=void 0;for(var $=D.firstChild;$!==null;$=$.nextSibling)aZ($,F)}function E6(D){this.nodes=Object.create(null),this.nodes[D._nid]=D,this.length=1,this.firstNode=void 0}E6.prototype.add=function(D){if(!this.nodes[D._nid])this.nodes[D._nid]=D,this.length++,this.firstNode=void 0};E6.prototype.del=function(D){if(this.nodes[D._nid])delete this.nodes[D._nid],this.length--,this.firstNode=void 0};E6.prototype.getFirst=function(){if(!this.firstNode){var D;for(D in this.nodes)if(this.firstNode===void 0||this.firstNode.compareDocumentPosition(this.nodes[D])&r1.DOCUMENT_POSITION_PRECEDING)this.firstNode=this.nodes[D]}return this.firstNode};E6.prototype.downgrade=function(){if(this.length===1){var D;for(D in this.nodes)return this.nodes[D]}return this}});var bJ=t((QY0,FN)=>{FN.exports=PJ;var lp=g1(),DN=$w(),np=UJ();function PJ(D,F,$,B){DN.call(this),this.nodeType=lp.DOCUMENT_TYPE_NODE,this.ownerDocument=D||null,this.name=F,this.publicId=$||"",this.systemId=B||""}PJ.prototype=Object.create(DN.prototype,{nodeName:{get:function(){return this.name}},nodeValue:{get:function(){return null},set:function(){}},clone:{value:function D(){return new PJ(this.ownerDocument,this.name,this.publicId,this.systemId)}},isEqual:{value:function D(F){return this.name===F.name&&this.publicId===F.publicId&&this.systemId===F.systemId}}});Object.defineProperties(PJ.prototype,np)});var vJ=t((wY0,NN)=>{NN.exports=LD;var op=TJ(),rp=bJ(),zw=g1(),v0=H1().NAMESPACE,VN=zJ(),kD=VN.elements,i8=Function.prototype.apply.bind(Array.prototype.push),hJ=-1,K9=1,t1=2,OD=3,x2=4,tp=5,sp=[],ap=/^HTML$|^-\/\/W3O\/\/DTD W3 HTML Strict 3\.0\/\/EN\/\/$|^-\/W3C\/DTD HTML 4\.0 Transitional\/EN$|^\+\/\/Silmaril\/\/dtd html Pro v0r11 19970101\/\/|^-\/\/AdvaSoft Ltd\/\/DTD HTML 3\.0 asWedit \+ extensions\/\/|^-\/\/AS\/\/DTD HTML 3\.0 asWedit \+ extensions\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Level 1\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Level 2\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Strict Level 1\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Strict Level 2\/\/|^-\/\/IETF\/\/DTD HTML 2\.0 Strict\/\/|^-\/\/IETF\/\/DTD HTML 2\.0\/\/|^-\/\/IETF\/\/DTD HTML 2\.1E\/\/|^-\/\/IETF\/\/DTD HTML 3\.0\/\/|^-\/\/IETF\/\/DTD HTML 3\.2 Final\/\/|^-\/\/IETF\/\/DTD HTML 3\.2\/\/|^-\/\/IETF\/\/DTD HTML 3\/\/|^-\/\/IETF\/\/DTD HTML Level 0\/\/|^-\/\/IETF\/\/DTD HTML Level 1\/\/|^-\/\/IETF\/\/DTD HTML Level 2\/\/|^-\/\/IETF\/\/DTD HTML Level 3\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 0\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 1\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 2\/\/|^-\/\/IETF\/\/DTD HTML Strict Level 3\/\/|^-\/\/IETF\/\/DTD HTML Strict\/\/|^-\/\/IETF\/\/DTD HTML\/\/|^-\/\/Metrius\/\/DTD Metrius Presentational\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 2\.0 HTML Strict\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 2\.0 HTML\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 2\.0 Tables\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 3\.0 HTML Strict\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 3\.0 HTML\/\/|^-\/\/Microsoft\/\/DTD Internet Explorer 3\.0 Tables\/\/|^-\/\/Netscape Comm\. Corp\.\/\/DTD HTML\/\/|^-\/\/Netscape Comm\. Corp\.\/\/DTD Strict HTML\/\/|^-\/\/O'Reilly and Associates\/\/DTD HTML 2\.0\/\/|^-\/\/O'Reilly and Associates\/\/DTD HTML Extended 1\.0\/\/|^-\/\/O'Reilly and Associates\/\/DTD HTML Extended Relaxed 1\.0\/\/|^-\/\/SoftQuad Software\/\/DTD HoTMetaL PRO 6\.0::19990601::extensions to HTML 4\.0\/\/|^-\/\/SoftQuad\/\/DTD HoTMetaL PRO 4\.0::19971010::extensions to HTML 4\.0\/\/|^-\/\/Spyglass\/\/DTD HTML 2\.0 Extended\/\/|^-\/\/SQ\/\/DTD HTML 2\.0 HoTMetaL \+ extensions\/\/|^-\/\/Sun Microsystems Corp\.\/\/DTD HotJava HTML\/\/|^-\/\/Sun Microsystems Corp\.\/\/DTD HotJava Strict HTML\/\/|^-\/\/W3C\/\/DTD HTML 3 1995-03-24\/\/|^-\/\/W3C\/\/DTD HTML 3\.2 Draft\/\/|^-\/\/W3C\/\/DTD HTML 3\.2 Final\/\/|^-\/\/W3C\/\/DTD HTML 3\.2\/\/|^-\/\/W3C\/\/DTD HTML 3\.2S Draft\/\/|^-\/\/W3C\/\/DTD HTML 4\.0 Frameset\/\/|^-\/\/W3C\/\/DTD HTML 4\.0 Transitional\/\/|^-\/\/W3C\/\/DTD HTML Experimental 19960712\/\/|^-\/\/W3C\/\/DTD HTML Experimental 970421\/\/|^-\/\/W3C\/\/DTD W3 HTML\/\/|^-\/\/W3O\/\/DTD W3 HTML 3\.0\/\/|^-\/\/WebTechs\/\/DTD Mozilla HTML 2\.0\/\/|^-\/\/WebTechs\/\/DTD Mozilla HTML\/\//i,ep="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",$N=/^-\/\/W3C\/\/DTD HTML 4\.01 Frameset\/\/|^-\/\/W3C\/\/DTD HTML 4\.01 Transitional\/\//i,Di=/^-\/\/W3C\/\/DTD XHTML 1\.0 Frameset\/\/|^-\/\/W3C\/\/DTD XHTML 1\.0 Transitional\/\//i,l8=Object.create(null);l8[v0.HTML]={__proto__:null,address:!0,applet:!0,area:!0,article:!0,aside:!0,base:!0,basefont:!0,bgsound:!0,blockquote:!0,body:!0,br:!0,button:!0,caption:!0,center:!0,col:!0,colgroup:!0,dd:!0,details:!0,dir:!0,div:!0,dl:!0,dt:!0,embed:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,frame:!0,frameset:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,head:!0,header:!0,hgroup:!0,hr:!0,html:!0,iframe:!0,img:!0,input:!0,li:!0,link:!0,listing:!0,main:!0,marquee:!0,menu:!0,meta:!0,nav:!0,noembed:!0,noframes:!0,noscript:!0,object:!0,ol:!0,p:!0,param:!0,plaintext:!0,pre:!0,script:!0,section:!0,select:!0,source:!0,style:!0,summary:!0,table:!0,tbody:!0,td:!0,template:!0,textarea:!0,tfoot:!0,th:!0,thead:!0,title:!0,tr:!0,track:!0,ul:!0,wbr:!0,xmp:!0};l8[v0.SVG]={__proto__:null,foreignObject:!0,desc:!0,title:!0};l8[v0.MATHML]={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0,"annotation-xml":!0};var Pw=Object.create(null);Pw[v0.HTML]={__proto__:null,address:!0,div:!0,p:!0};var AN=Object.create(null);AN[v0.HTML]={__proto__:null,dd:!0,dt:!0};var q9=Object.create(null);q9[v0.HTML]={__proto__:null,table:!0,thead:!0,tbody:!0,tfoot:!0,tr:!0};var ON=Object.create(null);ON[v0.HTML]={__proto__:null,dd:!0,dt:!0,li:!0,menuitem:!0,optgroup:!0,option:!0,p:!0,rb:!0,rp:!0,rt:!0,rtc:!0};var jN=Object.create(null);jN[v0.HTML]={__proto__:null,caption:!0,colgroup:!0,dd:!0,dt:!0,li:!0,optgroup:!0,option:!0,p:!0,rb:!0,rp:!0,rt:!0,rtc:!0,tbody:!0,td:!0,tfoot:!0,th:!0,thead:!0,tr:!0};var xJ=Object.create(null);xJ[v0.HTML]={__proto__:null,table:!0,template:!0,html:!0};var kJ=Object.create(null);kJ[v0.HTML]={__proto__:null,tbody:!0,tfoot:!0,thead:!0,template:!0,html:!0};var bw=Object.create(null);bw[v0.HTML]={__proto__:null,tr:!0,template:!0,html:!0};var UN=Object.create(null);UN[v0.HTML]={__proto__:null,button:!0,fieldset:!0,input:!0,keygen:!0,object:!0,output:!0,select:!0,textarea:!0,img:!0};var k2=Object.create(null);k2[v0.HTML]={__proto__:null,applet:!0,caption:!0,html:!0,table:!0,td:!0,th:!0,marquee:!0,object:!0,template:!0};k2[v0.MATHML]={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0,"annotation-xml":!0};k2[v0.SVG]={__proto__:null,foreignObject:!0,desc:!0,title:!0};var uJ=Object.create(k2);uJ[v0.HTML]=Object.create(k2[v0.HTML]);uJ[v0.HTML].ol=!0;uJ[v0.HTML].ul=!0;var hw=Object.create(k2);hw[v0.HTML]=Object.create(k2[v0.HTML]);hw[v0.HTML].button=!0;var RN=Object.create(null);RN[v0.HTML]={__proto__:null,html:!0,table:!0,template:!0};var Fi=Object.create(null);Fi[v0.HTML]={__proto__:null,optgroup:!0,option:!0};var CN=Object.create(null);CN[v0.MATHML]={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0};var ZN=Object.create(null);ZN[v0.SVG]={__proto__:null,foreignObject:!0,desc:!0,title:!0};var BN={__proto__:null,"xlink:actuate":v0.XLINK,"xlink:arcrole":v0.XLINK,"xlink:href":v0.XLINK,"xlink:role":v0.XLINK,"xlink:show":v0.XLINK,"xlink:title":v0.XLINK,"xlink:type":v0.XLINK,"xml:base":v0.XML,"xml:lang":v0.XML,"xml:space":v0.XML,xmlns:v0.XMLNS,"xmlns:xlink":v0.XMLNS},JN={__proto__:null,attributename:"attributeName",attributetype:"attributeType",basefrequency:"baseFrequency",baseprofile:"baseProfile",calcmode:"calcMode",clippathunits:"clipPathUnits",diffuseconstant:"diffuseConstant",edgemode:"edgeMode",filterunits:"filterUnits",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",limitingconeangle:"limitingConeAngle",markerheight:"markerHeight",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textlength:"textLength",viewbox:"viewBox",viewtarget:"viewTarget",xchannelselector:"xChannelSelector",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan"},YN={__proto__:null,altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"},XN={__proto__:null,0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},$i={__proto__:null,AElig:198,"AElig;":198,AMP:38,"AMP;":38,Aacute:193,"Aacute;":193,"Abreve;":258,Acirc:194,"Acirc;":194,"Acy;":1040,"Afr;":[55349,56580],Agrave:192,"Agrave;":192,"Alpha;":913,"Amacr;":256,"And;":10835,"Aogon;":260,"Aopf;":[55349,56632],"ApplyFunction;":8289,Aring:197,"Aring;":197,"Ascr;":[55349,56476],"Assign;":8788,Atilde:195,"Atilde;":195,Auml:196,"Auml;":196,"Backslash;":8726,"Barv;":10983,"Barwed;":8966,"Bcy;":1041,"Because;":8757,"Bernoullis;":8492,"Beta;":914,"Bfr;":[55349,56581],"Bopf;":[55349,56633],"Breve;":728,"Bscr;":8492,"Bumpeq;":8782,"CHcy;":1063,COPY:169,"COPY;":169,"Cacute;":262,"Cap;":8914,"CapitalDifferentialD;":8517,"Cayleys;":8493,"Ccaron;":268,Ccedil:199,"Ccedil;":199,"Ccirc;":264,"Cconint;":8752,"Cdot;":266,"Cedilla;":184,"CenterDot;":183,"Cfr;":8493,"Chi;":935,"CircleDot;":8857,"CircleMinus;":8854,"CirclePlus;":8853,"CircleTimes;":8855,"ClockwiseContourIntegral;":8754,"CloseCurlyDoubleQuote;":8221,"CloseCurlyQuote;":8217,"Colon;":8759,"Colone;":10868,"Congruent;":8801,"Conint;":8751,"ContourIntegral;":8750,"Copf;":8450,"Coproduct;":8720,"CounterClockwiseContourIntegral;":8755,"Cross;":10799,"Cscr;":[55349,56478],"Cup;":8915,"CupCap;":8781,"DD;":8517,"DDotrahd;":10513,"DJcy;":1026,"DScy;":1029,"DZcy;":1039,"Dagger;":8225,"Darr;":8609,"Dashv;":10980,"Dcaron;":270,"Dcy;":1044,"Del;":8711,"Delta;":916,"Dfr;":[55349,56583],"DiacriticalAcute;":180,"DiacriticalDot;":729,"DiacriticalDoubleAcute;":733,"DiacriticalGrave;":96,"DiacriticalTilde;":732,"Diamond;":8900,"DifferentialD;":8518,"Dopf;":[55349,56635],"Dot;":168,"DotDot;":8412,"DotEqual;":8784,"DoubleContourIntegral;":8751,"DoubleDot;":168,"DoubleDownArrow;":8659,"DoubleLeftArrow;":8656,"DoubleLeftRightArrow;":8660,"DoubleLeftTee;":10980,"DoubleLongLeftArrow;":10232,"DoubleLongLeftRightArrow;":10234,"DoubleLongRightArrow;":10233,"DoubleRightArrow;":8658,"DoubleRightTee;":8872,"DoubleUpArrow;":8657,"DoubleUpDownArrow;":8661,"DoubleVerticalBar;":8741,"DownArrow;":8595,"DownArrowBar;":10515,"DownArrowUpArrow;":8693,"DownBreve;":785,"DownLeftRightVector;":10576,"DownLeftTeeVector;":10590,"DownLeftVector;":8637,"DownLeftVectorBar;":10582,"DownRightTeeVector;":10591,"DownRightVector;":8641,"DownRightVectorBar;":10583,"DownTee;":8868,"DownTeeArrow;":8615,"Downarrow;":8659,"Dscr;":[55349,56479],"Dstrok;":272,"ENG;":330,ETH:208,"ETH;":208,Eacute:201,"Eacute;":201,"Ecaron;":282,Ecirc:202,"Ecirc;":202,"Ecy;":1069,"Edot;":278,"Efr;":[55349,56584],Egrave:200,"Egrave;":200,"Element;":8712,"Emacr;":274,"EmptySmallSquare;":9723,"EmptyVerySmallSquare;":9643,"Eogon;":280,"Eopf;":[55349,56636],"Epsilon;":917,"Equal;":10869,"EqualTilde;":8770,"Equilibrium;":8652,"Escr;":8496,"Esim;":10867,"Eta;":919,Euml:203,"Euml;":203,"Exists;":8707,"ExponentialE;":8519,"Fcy;":1060,"Ffr;":[55349,56585],"FilledSmallSquare;":9724,"FilledVerySmallSquare;":9642,"Fopf;":[55349,56637],"ForAll;":8704,"Fouriertrf;":8497,"Fscr;":8497,"GJcy;":1027,GT:62,"GT;":62,"Gamma;":915,"Gammad;":988,"Gbreve;":286,"Gcedil;":290,"Gcirc;":284,"Gcy;":1043,"Gdot;":288,"Gfr;":[55349,56586],"Gg;":8921,"Gopf;":[55349,56638],"GreaterEqual;":8805,"GreaterEqualLess;":8923,"GreaterFullEqual;":8807,"GreaterGreater;":10914,"GreaterLess;":8823,"GreaterSlantEqual;":10878,"GreaterTilde;":8819,"Gscr;":[55349,56482],"Gt;":8811,"HARDcy;":1066,"Hacek;":711,"Hat;":94,"Hcirc;":292,"Hfr;":8460,"HilbertSpace;":8459,"Hopf;":8461,"HorizontalLine;":9472,"Hscr;":8459,"Hstrok;":294,"HumpDownHump;":8782,"HumpEqual;":8783,"IEcy;":1045,"IJlig;":306,"IOcy;":1025,Iacute:205,"Iacute;":205,Icirc:206,"Icirc;":206,"Icy;":1048,"Idot;":304,"Ifr;":8465,Igrave:204,"Igrave;":204,"Im;":8465,"Imacr;":298,"ImaginaryI;":8520,"Implies;":8658,"Int;":8748,"Integral;":8747,"Intersection;":8898,"InvisibleComma;":8291,"InvisibleTimes;":8290,"Iogon;":302,"Iopf;":[55349,56640],"Iota;":921,"Iscr;":8464,"Itilde;":296,"Iukcy;":1030,Iuml:207,"Iuml;":207,"Jcirc;":308,"Jcy;":1049,"Jfr;":[55349,56589],"Jopf;":[55349,56641],"Jscr;":[55349,56485],"Jsercy;":1032,"Jukcy;":1028,"KHcy;":1061,"KJcy;":1036,"Kappa;":922,"Kcedil;":310,"Kcy;":1050,"Kfr;":[55349,56590],"Kopf;":[55349,56642],"Kscr;":[55349,56486],"LJcy;":1033,LT:60,"LT;":60,"Lacute;":313,"Lambda;":923,"Lang;":10218,"Laplacetrf;":8466,"Larr;":8606,"Lcaron;":317,"Lcedil;":315,"Lcy;":1051,"LeftAngleBracket;":10216,"LeftArrow;":8592,"LeftArrowBar;":8676,"LeftArrowRightArrow;":8646,"LeftCeiling;":8968,"LeftDoubleBracket;":10214,"LeftDownTeeVector;":10593,"LeftDownVector;":8643,"LeftDownVectorBar;":10585,"LeftFloor;":8970,"LeftRightArrow;":8596,"LeftRightVector;":10574,"LeftTee;":8867,"LeftTeeArrow;":8612,"LeftTeeVector;":10586,"LeftTriangle;":8882,"LeftTriangleBar;":10703,"LeftTriangleEqual;":8884,"LeftUpDownVector;":10577,"LeftUpTeeVector;":10592,"LeftUpVector;":8639,"LeftUpVectorBar;":10584,"LeftVector;":8636,"LeftVectorBar;":10578,"Leftarrow;":8656,"Leftrightarrow;":8660,"LessEqualGreater;":8922,"LessFullEqual;":8806,"LessGreater;":8822,"LessLess;":10913,"LessSlantEqual;":10877,"LessTilde;":8818,"Lfr;":[55349,56591],"Ll;":8920,"Lleftarrow;":8666,"Lmidot;":319,"LongLeftArrow;":10229,"LongLeftRightArrow;":10231,"LongRightArrow;":10230,"Longleftarrow;":10232,"Longleftrightarrow;":10234,"Longrightarrow;":10233,"Lopf;":[55349,56643],"LowerLeftArrow;":8601,"LowerRightArrow;":8600,"Lscr;":8466,"Lsh;":8624,"Lstrok;":321,"Lt;":8810,"Map;":10501,"Mcy;":1052,"MediumSpace;":8287,"Mellintrf;":8499,"Mfr;":[55349,56592],"MinusPlus;":8723,"Mopf;":[55349,56644],"Mscr;":8499,"Mu;":924,"NJcy;":1034,"Nacute;":323,"Ncaron;":327,"Ncedil;":325,"Ncy;":1053,"NegativeMediumSpace;":8203,"NegativeThickSpace;":8203,"NegativeThinSpace;":8203,"NegativeVeryThinSpace;":8203,"NestedGreaterGreater;":8811,"NestedLessLess;":8810,"NewLine;":10,"Nfr;":[55349,56593],"NoBreak;":8288,"NonBreakingSpace;":160,"Nopf;":8469,"Not;":10988,"NotCongruent;":8802,"NotCupCap;":8813,"NotDoubleVerticalBar;":8742,"NotElement;":8713,"NotEqual;":8800,"NotEqualTilde;":[8770,824],"NotExists;":8708,"NotGreater;":8815,"NotGreaterEqual;":8817,"NotGreaterFullEqual;":[8807,824],"NotGreaterGreater;":[8811,824],"NotGreaterLess;":8825,"NotGreaterSlantEqual;":[10878,824],"NotGreaterTilde;":8821,"NotHumpDownHump;":[8782,824],"NotHumpEqual;":[8783,824],"NotLeftTriangle;":8938,"NotLeftTriangleBar;":[10703,824],"NotLeftTriangleEqual;":8940,"NotLess;":8814,"NotLessEqual;":8816,"NotLessGreater;":8824,"NotLessLess;":[8810,824],"NotLessSlantEqual;":[10877,824],"NotLessTilde;":8820,"NotNestedGreaterGreater;":[10914,824],"NotNestedLessLess;":[10913,824],"NotPrecedes;":8832,"NotPrecedesEqual;":[10927,824],"NotPrecedesSlantEqual;":8928,"NotReverseElement;":8716,"NotRightTriangle;":8939,"NotRightTriangleBar;":[10704,824],"NotRightTriangleEqual;":8941,"NotSquareSubset;":[8847,824],"NotSquareSubsetEqual;":8930,"NotSquareSuperset;":[8848,824],"NotSquareSupersetEqual;":8931,"NotSubset;":[8834,8402],"NotSubsetEqual;":8840,"NotSucceeds;":8833,"NotSucceedsEqual;":[10928,824],"NotSucceedsSlantEqual;":8929,"NotSucceedsTilde;":[8831,824],"NotSuperset;":[8835,8402],"NotSupersetEqual;":8841,"NotTilde;":8769,"NotTildeEqual;":8772,"NotTildeFullEqual;":8775,"NotTildeTilde;":8777,"NotVerticalBar;":8740,"Nscr;":[55349,56489],Ntilde:209,"Ntilde;":209,"Nu;":925,"OElig;":338,Oacute:211,"Oacute;":211,Ocirc:212,"Ocirc;":212,"Ocy;":1054,"Odblac;":336,"Ofr;":[55349,56594],Ograve:210,"Ograve;":210,"Omacr;":332,"Omega;":937,"Omicron;":927,"Oopf;":[55349,56646],"OpenCurlyDoubleQuote;":8220,"OpenCurlyQuote;":8216,"Or;":10836,"Oscr;":[55349,56490],Oslash:216,"Oslash;":216,Otilde:213,"Otilde;":213,"Otimes;":10807,Ouml:214,"Ouml;":214,"OverBar;":8254,"OverBrace;":9182,"OverBracket;":9140,"OverParenthesis;":9180,"PartialD;":8706,"Pcy;":1055,"Pfr;":[55349,56595],"Phi;":934,"Pi;":928,"PlusMinus;":177,"Poincareplane;":8460,"Popf;":8473,"Pr;":10939,"Precedes;":8826,"PrecedesEqual;":10927,"PrecedesSlantEqual;":8828,"PrecedesTilde;":8830,"Prime;":8243,"Product;":8719,"Proportion;":8759,"Proportional;":8733,"Pscr;":[55349,56491],"Psi;":936,QUOT:34,"QUOT;":34,"Qfr;":[55349,56596],"Qopf;":8474,"Qscr;":[55349,56492],"RBarr;":10512,REG:174,"REG;":174,"Racute;":340,"Rang;":10219,"Rarr;":8608,"Rarrtl;":10518,"Rcaron;":344,"Rcedil;":342,"Rcy;":1056,"Re;":8476,"ReverseElement;":8715,"ReverseEquilibrium;":8651,"ReverseUpEquilibrium;":10607,"Rfr;":8476,"Rho;":929,"RightAngleBracket;":10217,"RightArrow;":8594,"RightArrowBar;":8677,"RightArrowLeftArrow;":8644,"RightCeiling;":8969,"RightDoubleBracket;":10215,"RightDownTeeVector;":10589,"RightDownVector;":8642,"RightDownVectorBar;":10581,"RightFloor;":8971,"RightTee;":8866,"RightTeeArrow;":8614,"RightTeeVector;":10587,"RightTriangle;":8883,"RightTriangleBar;":10704,"RightTriangleEqual;":8885,"RightUpDownVector;":10575,"RightUpTeeVector;":10588,"RightUpVector;":8638,"RightUpVectorBar;":10580,"RightVector;":8640,"RightVectorBar;":10579,"Rightarrow;":8658,"Ropf;":8477,"RoundImplies;":10608,"Rrightarrow;":8667,"Rscr;":8475,"Rsh;":8625,"RuleDelayed;":10740,"SHCHcy;":1065,"SHcy;":1064,"SOFTcy;":1068,"Sacute;":346,"Sc;":10940,"Scaron;":352,"Scedil;":350,"Scirc;":348,"Scy;":1057,"Sfr;":[55349,56598],"ShortDownArrow;":8595,"ShortLeftArrow;":8592,"ShortRightArrow;":8594,"ShortUpArrow;":8593,"Sigma;":931,"SmallCircle;":8728,"Sopf;":[55349,56650],"Sqrt;":8730,"Square;":9633,"SquareIntersection;":8851,"SquareSubset;":8847,"SquareSubsetEqual;":8849,"SquareSuperset;":8848,"SquareSupersetEqual;":8850,"SquareUnion;":8852,"Sscr;":[55349,56494],"Star;":8902,"Sub;":8912,"Subset;":8912,"SubsetEqual;":8838,"Succeeds;":8827,"SucceedsEqual;":10928,"SucceedsSlantEqual;":8829,"SucceedsTilde;":8831,"SuchThat;":8715,"Sum;":8721,"Sup;":8913,"Superset;":8835,"SupersetEqual;":8839,"Supset;":8913,THORN:222,"THORN;":222,"TRADE;":8482,"TSHcy;":1035,"TScy;":1062,"Tab;":9,"Tau;":932,"Tcaron;":356,"Tcedil;":354,"Tcy;":1058,"Tfr;":[55349,56599],"Therefore;":8756,"Theta;":920,"ThickSpace;":[8287,8202],"ThinSpace;":8201,"Tilde;":8764,"TildeEqual;":8771,"TildeFullEqual;":8773,"TildeTilde;":8776,"Topf;":[55349,56651],"TripleDot;":8411,"Tscr;":[55349,56495],"Tstrok;":358,Uacute:218,"Uacute;":218,"Uarr;":8607,"Uarrocir;":10569,"Ubrcy;":1038,"Ubreve;":364,Ucirc:219,"Ucirc;":219,"Ucy;":1059,"Udblac;":368,"Ufr;":[55349,56600],Ugrave:217,"Ugrave;":217,"Umacr;":362,"UnderBar;":95,"UnderBrace;":9183,"UnderBracket;":9141,"UnderParenthesis;":9181,"Union;":8899,"UnionPlus;":8846,"Uogon;":370,"Uopf;":[55349,56652],"UpArrow;":8593,"UpArrowBar;":10514,"UpArrowDownArrow;":8645,"UpDownArrow;":8597,"UpEquilibrium;":10606,"UpTee;":8869,"UpTeeArrow;":8613,"Uparrow;":8657,"Updownarrow;":8661,"UpperLeftArrow;":8598,"UpperRightArrow;":8599,"Upsi;":978,"Upsilon;":933,"Uring;":366,"Uscr;":[55349,56496],"Utilde;":360,Uuml:220,"Uuml;":220,"VDash;":8875,"Vbar;":10987,"Vcy;":1042,"Vdash;":8873,"Vdashl;":10982,"Vee;":8897,"Verbar;":8214,"Vert;":8214,"VerticalBar;":8739,"VerticalLine;":124,"VerticalSeparator;":10072,"VerticalTilde;":8768,"VeryThinSpace;":8202,"Vfr;":[55349,56601],"Vopf;":[55349,56653],"Vscr;":[55349,56497],"Vvdash;":8874,"Wcirc;":372,"Wedge;":8896,"Wfr;":[55349,56602],"Wopf;":[55349,56654],"Wscr;":[55349,56498],"Xfr;":[55349,56603],"Xi;":926,"Xopf;":[55349,56655],"Xscr;":[55349,56499],"YAcy;":1071,"YIcy;":1031,"YUcy;":1070,Yacute:221,"Yacute;":221,"Ycirc;":374,"Ycy;":1067,"Yfr;":[55349,56604],"Yopf;":[55349,56656],"Yscr;":[55349,56500],"Yuml;":376,"ZHcy;":1046,"Zacute;":377,"Zcaron;":381,"Zcy;":1047,"Zdot;":379,"ZeroWidthSpace;":8203,"Zeta;":918,"Zfr;":8488,"Zopf;":8484,"Zscr;":[55349,56501],aacute:225,"aacute;":225,"abreve;":259,"ac;":8766,"acE;":[8766,819],"acd;":8767,acirc:226,"acirc;":226,acute:180,"acute;":180,"acy;":1072,aelig:230,"aelig;":230,"af;":8289,"afr;":[55349,56606],agrave:224,"agrave;":224,"alefsym;":8501,"aleph;":8501,"alpha;":945,"amacr;":257,"amalg;":10815,amp:38,"amp;":38,"and;":8743,"andand;":10837,"andd;":10844,"andslope;":10840,"andv;":10842,"ang;":8736,"ange;":10660,"angle;":8736,"angmsd;":8737,"angmsdaa;":10664,"angmsdab;":10665,"angmsdac;":10666,"angmsdad;":10667,"angmsdae;":10668,"angmsdaf;":10669,"angmsdag;":10670,"angmsdah;":10671,"angrt;":8735,"angrtvb;":8894,"angrtvbd;":10653,"angsph;":8738,"angst;":197,"angzarr;":9084,"aogon;":261,"aopf;":[55349,56658],"ap;":8776,"apE;":10864,"apacir;":10863,"ape;":8778,"apid;":8779,"apos;":39,"approx;":8776,"approxeq;":8778,aring:229,"aring;":229,"ascr;":[55349,56502],"ast;":42,"asymp;":8776,"asympeq;":8781,atilde:227,"atilde;":227,auml:228,"auml;":228,"awconint;":8755,"awint;":10769,"bNot;":10989,"backcong;":8780,"backepsilon;":1014,"backprime;":8245,"backsim;":8765,"backsimeq;":8909,"barvee;":8893,"barwed;":8965,"barwedge;":8965,"bbrk;":9141,"bbrktbrk;":9142,"bcong;":8780,"bcy;":1073,"bdquo;":8222,"becaus;":8757,"because;":8757,"bemptyv;":10672,"bepsi;":1014,"bernou;":8492,"beta;":946,"beth;":8502,"between;":8812,"bfr;":[55349,56607],"bigcap;":8898,"bigcirc;":9711,"bigcup;":8899,"bigodot;":10752,"bigoplus;":10753,"bigotimes;":10754,"bigsqcup;":10758,"bigstar;":9733,"bigtriangledown;":9661,"bigtriangleup;":9651,"biguplus;":10756,"bigvee;":8897,"bigwedge;":8896,"bkarow;":10509,"blacklozenge;":10731,"blacksquare;":9642,"blacktriangle;":9652,"blacktriangledown;":9662,"blacktriangleleft;":9666,"blacktriangleright;":9656,"blank;":9251,"blk12;":9618,"blk14;":9617,"blk34;":9619,"block;":9608,"bne;":[61,8421],"bnequiv;":[8801,8421],"bnot;":8976,"bopf;":[55349,56659],"bot;":8869,"bottom;":8869,"bowtie;":8904,"boxDL;":9559,"boxDR;":9556,"boxDl;":9558,"boxDr;":9555,"boxH;":9552,"boxHD;":9574,"boxHU;":9577,"boxHd;":9572,"boxHu;":9575,"boxUL;":9565,"boxUR;":9562,"boxUl;":9564,"boxUr;":9561,"boxV;":9553,"boxVH;":9580,"boxVL;":9571,"boxVR;":9568,"boxVh;":9579,"boxVl;":9570,"boxVr;":9567,"boxbox;":10697,"boxdL;":9557,"boxdR;":9554,"boxdl;":9488,"boxdr;":9484,"boxh;":9472,"boxhD;":9573,"boxhU;":9576,"boxhd;":9516,"boxhu;":9524,"boxminus;":8863,"boxplus;":8862,"boxtimes;":8864,"boxuL;":9563,"boxuR;":9560,"boxul;":9496,"boxur;":9492,"boxv;":9474,"boxvH;":9578,"boxvL;":9569,"boxvR;":9566,"boxvh;":9532,"boxvl;":9508,"boxvr;":9500,"bprime;":8245,"breve;":728,brvbar:166,"brvbar;":166,"bscr;":[55349,56503],"bsemi;":8271,"bsim;":8765,"bsime;":8909,"bsol;":92,"bsolb;":10693,"bsolhsub;":10184,"bull;":8226,"bullet;":8226,"bump;":8782,"bumpE;":10926,"bumpe;":8783,"bumpeq;":8783,"cacute;":263,"cap;":8745,"capand;":10820,"capbrcup;":10825,"capcap;":10827,"capcup;":10823,"capdot;":10816,"caps;":[8745,65024],"caret;":8257,"caron;":711,"ccaps;":10829,"ccaron;":269,ccedil:231,"ccedil;":231,"ccirc;":265,"ccups;":10828,"ccupssm;":10832,"cdot;":267,cedil:184,"cedil;":184,"cemptyv;":10674,cent:162,"cent;":162,"centerdot;":183,"cfr;":[55349,56608],"chcy;":1095,"check;":10003,"checkmark;":10003,"chi;":967,"cir;":9675,"cirE;":10691,"circ;":710,"circeq;":8791,"circlearrowleft;":8634,"circlearrowright;":8635,"circledR;":174,"circledS;":9416,"circledast;":8859,"circledcirc;":8858,"circleddash;":8861,"cire;":8791,"cirfnint;":10768,"cirmid;":10991,"cirscir;":10690,"clubs;":9827,"clubsuit;":9827,"colon;":58,"colone;":8788,"coloneq;":8788,"comma;":44,"commat;":64,"comp;":8705,"compfn;":8728,"complement;":8705,"complexes;":8450,"cong;":8773,"congdot;":10861,"conint;":8750,"copf;":[55349,56660],"coprod;":8720,copy:169,"copy;":169,"copysr;":8471,"crarr;":8629,"cross;":10007,"cscr;":[55349,56504],"csub;":10959,"csube;":10961,"csup;":10960,"csupe;":10962,"ctdot;":8943,"cudarrl;":10552,"cudarrr;":10549,"cuepr;":8926,"cuesc;":8927,"cularr;":8630,"cularrp;":10557,"cup;":8746,"cupbrcap;":10824,"cupcap;":10822,"cupcup;":10826,"cupdot;":8845,"cupor;":10821,"cups;":[8746,65024],"curarr;":8631,"curarrm;":10556,"curlyeqprec;":8926,"curlyeqsucc;":8927,"curlyvee;":8910,"curlywedge;":8911,curren:164,"curren;":164,"curvearrowleft;":8630,"curvearrowright;":8631,"cuvee;":8910,"cuwed;":8911,"cwconint;":8754,"cwint;":8753,"cylcty;":9005,"dArr;":8659,"dHar;":10597,"dagger;":8224,"daleth;":8504,"darr;":8595,"dash;":8208,"dashv;":8867,"dbkarow;":10511,"dblac;":733,"dcaron;":271,"dcy;":1076,"dd;":8518,"ddagger;":8225,"ddarr;":8650,"ddotseq;":10871,deg:176,"deg;":176,"delta;":948,"demptyv;":10673,"dfisht;":10623,"dfr;":[55349,56609],"dharl;":8643,"dharr;":8642,"diam;":8900,"diamond;":8900,"diamondsuit;":9830,"diams;":9830,"die;":168,"digamma;":989,"disin;":8946,"div;":247,divide:247,"divide;":247,"divideontimes;":8903,"divonx;":8903,"djcy;":1106,"dlcorn;":8990,"dlcrop;":8973,"dollar;":36,"dopf;":[55349,56661],"dot;":729,"doteq;":8784,"doteqdot;":8785,"dotminus;":8760,"dotplus;":8724,"dotsquare;":8865,"doublebarwedge;":8966,"downarrow;":8595,"downdownarrows;":8650,"downharpoonleft;":8643,"downharpoonright;":8642,"drbkarow;":10512,"drcorn;":8991,"drcrop;":8972,"dscr;":[55349,56505],"dscy;":1109,"dsol;":10742,"dstrok;":273,"dtdot;":8945,"dtri;":9663,"dtrif;":9662,"duarr;":8693,"duhar;":10607,"dwangle;":10662,"dzcy;":1119,"dzigrarr;":10239,"eDDot;":10871,"eDot;":8785,eacute:233,"eacute;":233,"easter;":10862,"ecaron;":283,"ecir;":8790,ecirc:234,"ecirc;":234,"ecolon;":8789,"ecy;":1101,"edot;":279,"ee;":8519,"efDot;":8786,"efr;":[55349,56610],"eg;":10906,egrave:232,"egrave;":232,"egs;":10902,"egsdot;":10904,"el;":10905,"elinters;":9191,"ell;":8467,"els;":10901,"elsdot;":10903,"emacr;":275,"empty;":8709,"emptyset;":8709,"emptyv;":8709,"emsp13;":8196,"emsp14;":8197,"emsp;":8195,"eng;":331,"ensp;":8194,"eogon;":281,"eopf;":[55349,56662],"epar;":8917,"eparsl;":10723,"eplus;":10865,"epsi;":949,"epsilon;":949,"epsiv;":1013,"eqcirc;":8790,"eqcolon;":8789,"eqsim;":8770,"eqslantgtr;":10902,"eqslantless;":10901,"equals;":61,"equest;":8799,"equiv;":8801,"equivDD;":10872,"eqvparsl;":10725,"erDot;":8787,"erarr;":10609,"escr;":8495,"esdot;":8784,"esim;":8770,"eta;":951,eth:240,"eth;":240,euml:235,"euml;":235,"euro;":8364,"excl;":33,"exist;":8707,"expectation;":8496,"exponentiale;":8519,"fallingdotseq;":8786,"fcy;":1092,"female;":9792,"ffilig;":64259,"fflig;":64256,"ffllig;":64260,"ffr;":[55349,56611],"filig;":64257,"fjlig;":[102,106],"flat;":9837,"fllig;":64258,"fltns;":9649,"fnof;":402,"fopf;":[55349,56663],"forall;":8704,"fork;":8916,"forkv;":10969,"fpartint;":10765,frac12:189,"frac12;":189,"frac13;":8531,frac14:188,"frac14;":188,"frac15;":8533,"frac16;":8537,"frac18;":8539,"frac23;":8532,"frac25;":8534,frac34:190,"frac34;":190,"frac35;":8535,"frac38;":8540,"frac45;":8536,"frac56;":8538,"frac58;":8541,"frac78;":8542,"frasl;":8260,"frown;":8994,"fscr;":[55349,56507],"gE;":8807,"gEl;":10892,"gacute;":501,"gamma;":947,"gammad;":989,"gap;":10886,"gbreve;":287,"gcirc;":285,"gcy;":1075,"gdot;":289,"ge;":8805,"gel;":8923,"geq;":8805,"geqq;":8807,"geqslant;":10878,"ges;":10878,"gescc;":10921,"gesdot;":10880,"gesdoto;":10882,"gesdotol;":10884,"gesl;":[8923,65024],"gesles;":10900,"gfr;":[55349,56612],"gg;":8811,"ggg;":8921,"gimel;":8503,"gjcy;":1107,"gl;":8823,"glE;":10898,"gla;":10917,"glj;":10916,"gnE;":8809,"gnap;":10890,"gnapprox;":10890,"gne;":10888,"gneq;":10888,"gneqq;":8809,"gnsim;":8935,"gopf;":[55349,56664],"grave;":96,"gscr;":8458,"gsim;":8819,"gsime;":10894,"gsiml;":10896,gt:62,"gt;":62,"gtcc;":10919,"gtcir;":10874,"gtdot;":8919,"gtlPar;":10645,"gtquest;":10876,"gtrapprox;":10886,"gtrarr;":10616,"gtrdot;":8919,"gtreqless;":8923,"gtreqqless;":10892,"gtrless;":8823,"gtrsim;":8819,"gvertneqq;":[8809,65024],"gvnE;":[8809,65024],"hArr;":8660,"hairsp;":8202,"half;":189,"hamilt;":8459,"hardcy;":1098,"harr;":8596,"harrcir;":10568,"harrw;":8621,"hbar;":8463,"hcirc;":293,"hearts;":9829,"heartsuit;":9829,"hellip;":8230,"hercon;":8889,"hfr;":[55349,56613],"hksearow;":10533,"hkswarow;":10534,"hoarr;":8703,"homtht;":8763,"hookleftarrow;":8617,"hookrightarrow;":8618,"hopf;":[55349,56665],"horbar;":8213,"hscr;":[55349,56509],"hslash;":8463,"hstrok;":295,"hybull;":8259,"hyphen;":8208,iacute:237,"iacute;":237,"ic;":8291,icirc:238,"icirc;":238,"icy;":1080,"iecy;":1077,iexcl:161,"iexcl;":161,"iff;":8660,"ifr;":[55349,56614],igrave:236,"igrave;":236,"ii;":8520,"iiiint;":10764,"iiint;":8749,"iinfin;":10716,"iiota;":8489,"ijlig;":307,"imacr;":299,"image;":8465,"imagline;":8464,"imagpart;":8465,"imath;":305,"imof;":8887,"imped;":437,"in;":8712,"incare;":8453,"infin;":8734,"infintie;":10717,"inodot;":305,"int;":8747,"intcal;":8890,"integers;":8484,"intercal;":8890,"intlarhk;":10775,"intprod;":10812,"iocy;":1105,"iogon;":303,"iopf;":[55349,56666],"iota;":953,"iprod;":10812,iquest:191,"iquest;":191,"iscr;":[55349,56510],"isin;":8712,"isinE;":8953,"isindot;":8949,"isins;":8948,"isinsv;":8947,"isinv;":8712,"it;":8290,"itilde;":297,"iukcy;":1110,iuml:239,"iuml;":239,"jcirc;":309,"jcy;":1081,"jfr;":[55349,56615],"jmath;":567,"jopf;":[55349,56667],"jscr;":[55349,56511],"jsercy;":1112,"jukcy;":1108,"kappa;":954,"kappav;":1008,"kcedil;":311,"kcy;":1082,"kfr;":[55349,56616],"kgreen;":312,"khcy;":1093,"kjcy;":1116,"kopf;":[55349,56668],"kscr;":[55349,56512],"lAarr;":8666,"lArr;":8656,"lAtail;":10523,"lBarr;":10510,"lE;":8806,"lEg;":10891,"lHar;":10594,"lacute;":314,"laemptyv;":10676,"lagran;":8466,"lambda;":955,"lang;":10216,"langd;":10641,"langle;":10216,"lap;":10885,laquo:171,"laquo;":171,"larr;":8592,"larrb;":8676,"larrbfs;":10527,"larrfs;":10525,"larrhk;":8617,"larrlp;":8619,"larrpl;":10553,"larrsim;":10611,"larrtl;":8610,"lat;":10923,"latail;":10521,"late;":10925,"lates;":[10925,65024],"lbarr;":10508,"lbbrk;":10098,"lbrace;":123,"lbrack;":91,"lbrke;":10635,"lbrksld;":10639,"lbrkslu;":10637,"lcaron;":318,"lcedil;":316,"lceil;":8968,"lcub;":123,"lcy;":1083,"ldca;":10550,"ldquo;":8220,"ldquor;":8222,"ldrdhar;":10599,"ldrushar;":10571,"ldsh;":8626,"le;":8804,"leftarrow;":8592,"leftarrowtail;":8610,"leftharpoondown;":8637,"leftharpoonup;":8636,"leftleftarrows;":8647,"leftrightarrow;":8596,"leftrightarrows;":8646,"leftrightharpoons;":8651,"leftrightsquigarrow;":8621,"leftthreetimes;":8907,"leg;":8922,"leq;":8804,"leqq;":8806,"leqslant;":10877,"les;":10877,"lescc;":10920,"lesdot;":10879,"lesdoto;":10881,"lesdotor;":10883,"lesg;":[8922,65024],"lesges;":10899,"lessapprox;":10885,"lessdot;":8918,"lesseqgtr;":8922,"lesseqqgtr;":10891,"lessgtr;":8822,"lesssim;":8818,"lfisht;":10620,"lfloor;":8970,"lfr;":[55349,56617],"lg;":8822,"lgE;":10897,"lhard;":8637,"lharu;":8636,"lharul;":10602,"lhblk;":9604,"ljcy;":1113,"ll;":8810,"llarr;":8647,"llcorner;":8990,"llhard;":10603,"lltri;":9722,"lmidot;":320,"lmoust;":9136,"lmoustache;":9136,"lnE;":8808,"lnap;":10889,"lnapprox;":10889,"lne;":10887,"lneq;":10887,"lneqq;":8808,"lnsim;":8934,"loang;":10220,"loarr;":8701,"lobrk;":10214,"longleftarrow;":10229,"longleftrightarrow;":10231,"longmapsto;":10236,"longrightarrow;":10230,"looparrowleft;":8619,"looparrowright;":8620,"lopar;":10629,"lopf;":[55349,56669],"loplus;":10797,"lotimes;":10804,"lowast;":8727,"lowbar;":95,"loz;":9674,"lozenge;":9674,"lozf;":10731,"lpar;":40,"lparlt;":10643,"lrarr;":8646,"lrcorner;":8991,"lrhar;":8651,"lrhard;":10605,"lrm;":8206,"lrtri;":8895,"lsaquo;":8249,"lscr;":[55349,56513],"lsh;":8624,"lsim;":8818,"lsime;":10893,"lsimg;":10895,"lsqb;":91,"lsquo;":8216,"lsquor;":8218,"lstrok;":322,lt:60,"lt;":60,"ltcc;":10918,"ltcir;":10873,"ltdot;":8918,"lthree;":8907,"ltimes;":8905,"ltlarr;":10614,"ltquest;":10875,"ltrPar;":10646,"ltri;":9667,"ltrie;":8884,"ltrif;":9666,"lurdshar;":10570,"luruhar;":10598,"lvertneqq;":[8808,65024],"lvnE;":[8808,65024],"mDDot;":8762,macr:175,"macr;":175,"male;":9794,"malt;":10016,"maltese;":10016,"map;":8614,"mapsto;":8614,"mapstodown;":8615,"mapstoleft;":8612,"mapstoup;":8613,"marker;":9646,"mcomma;":10793,"mcy;":1084,"mdash;":8212,"measuredangle;":8737,"mfr;":[55349,56618],"mho;":8487,micro:181,"micro;":181,"mid;":8739,"midast;":42,"midcir;":10992,middot:183,"middot;":183,"minus;":8722,"minusb;":8863,"minusd;":8760,"minusdu;":10794,"mlcp;":10971,"mldr;":8230,"mnplus;":8723,"models;":8871,"mopf;":[55349,56670],"mp;":8723,"mscr;":[55349,56514],"mstpos;":8766,"mu;":956,"multimap;":8888,"mumap;":8888,"nGg;":[8921,824],"nGt;":[8811,8402],"nGtv;":[8811,824],"nLeftarrow;":8653,"nLeftrightarrow;":8654,"nLl;":[8920,824],"nLt;":[8810,8402],"nLtv;":[8810,824],"nRightarrow;":8655,"nVDash;":8879,"nVdash;":8878,"nabla;":8711,"nacute;":324,"nang;":[8736,8402],"nap;":8777,"napE;":[10864,824],"napid;":[8779,824],"napos;":329,"napprox;":8777,"natur;":9838,"natural;":9838,"naturals;":8469,nbsp:160,"nbsp;":160,"nbump;":[8782,824],"nbumpe;":[8783,824],"ncap;":10819,"ncaron;":328,"ncedil;":326,"ncong;":8775,"ncongdot;":[10861,824],"ncup;":10818,"ncy;":1085,"ndash;":8211,"ne;":8800,"neArr;":8663,"nearhk;":10532,"nearr;":8599,"nearrow;":8599,"nedot;":[8784,824],"nequiv;":8802,"nesear;":10536,"nesim;":[8770,824],"nexist;":8708,"nexists;":8708,"nfr;":[55349,56619],"ngE;":[8807,824],"nge;":8817,"ngeq;":8817,"ngeqq;":[8807,824],"ngeqslant;":[10878,824],"nges;":[10878,824],"ngsim;":8821,"ngt;":8815,"ngtr;":8815,"nhArr;":8654,"nharr;":8622,"nhpar;":10994,"ni;":8715,"nis;":8956,"nisd;":8954,"niv;":8715,"njcy;":1114,"nlArr;":8653,"nlE;":[8806,824],"nlarr;":8602,"nldr;":8229,"nle;":8816,"nleftarrow;":8602,"nleftrightarrow;":8622,"nleq;":8816,"nleqq;":[8806,824],"nleqslant;":[10877,824],"nles;":[10877,824],"nless;":8814,"nlsim;":8820,"nlt;":8814,"nltri;":8938,"nltrie;":8940,"nmid;":8740,"nopf;":[55349,56671],not:172,"not;":172,"notin;":8713,"notinE;":[8953,824],"notindot;":[8949,824],"notinva;":8713,"notinvb;":8951,"notinvc;":8950,"notni;":8716,"notniva;":8716,"notnivb;":8958,"notnivc;":8957,"npar;":8742,"nparallel;":8742,"nparsl;":[11005,8421],"npart;":[8706,824],"npolint;":10772,"npr;":8832,"nprcue;":8928,"npre;":[10927,824],"nprec;":8832,"npreceq;":[10927,824],"nrArr;":8655,"nrarr;":8603,"nrarrc;":[10547,824],"nrarrw;":[8605,824],"nrightarrow;":8603,"nrtri;":8939,"nrtrie;":8941,"nsc;":8833,"nsccue;":8929,"nsce;":[10928,824],"nscr;":[55349,56515],"nshortmid;":8740,"nshortparallel;":8742,"nsim;":8769,"nsime;":8772,"nsimeq;":8772,"nsmid;":8740,"nspar;":8742,"nsqsube;":8930,"nsqsupe;":8931,"nsub;":8836,"nsubE;":[10949,824],"nsube;":8840,"nsubset;":[8834,8402],"nsubseteq;":8840,"nsubseteqq;":[10949,824],"nsucc;":8833,"nsucceq;":[10928,824],"nsup;":8837,"nsupE;":[10950,824],"nsupe;":8841,"nsupset;":[8835,8402],"nsupseteq;":8841,"nsupseteqq;":[10950,824],"ntgl;":8825,ntilde:241,"ntilde;":241,"ntlg;":8824,"ntriangleleft;":8938,"ntrianglelefteq;":8940,"ntriangleright;":8939,"ntrianglerighteq;":8941,"nu;":957,"num;":35,"numero;":8470,"numsp;":8199,"nvDash;":8877,"nvHarr;":10500,"nvap;":[8781,8402],"nvdash;":8876,"nvge;":[8805,8402],"nvgt;":[62,8402],"nvinfin;":10718,"nvlArr;":10498,"nvle;":[8804,8402],"nvlt;":[60,8402],"nvltrie;":[8884,8402],"nvrArr;":10499,"nvrtrie;":[8885,8402],"nvsim;":[8764,8402],"nwArr;":8662,"nwarhk;":10531,"nwarr;":8598,"nwarrow;":8598,"nwnear;":10535,"oS;":9416,oacute:243,"oacute;":243,"oast;":8859,"ocir;":8858,ocirc:244,"ocirc;":244,"ocy;":1086,"odash;":8861,"odblac;":337,"odiv;":10808,"odot;":8857,"odsold;":10684,"oelig;":339,"ofcir;":10687,"ofr;":[55349,56620],"ogon;":731,ograve:242,"ograve;":242,"ogt;":10689,"ohbar;":10677,"ohm;":937,"oint;":8750,"olarr;":8634,"olcir;":10686,"olcross;":10683,"oline;":8254,"olt;":10688,"omacr;":333,"omega;":969,"omicron;":959,"omid;":10678,"ominus;":8854,"oopf;":[55349,56672],"opar;":10679,"operp;":10681,"oplus;":8853,"or;":8744,"orarr;":8635,"ord;":10845,"order;":8500,"orderof;":8500,ordf:170,"ordf;":170,ordm:186,"ordm;":186,"origof;":8886,"oror;":10838,"orslope;":10839,"orv;":10843,"oscr;":8500,oslash:248,"oslash;":248,"osol;":8856,otilde:245,"otilde;":245,"otimes;":8855,"otimesas;":10806,ouml:246,"ouml;":246,"ovbar;":9021,"par;":8741,para:182,"para;":182,"parallel;":8741,"parsim;":10995,"parsl;":11005,"part;":8706,"pcy;":1087,"percnt;":37,"period;":46,"permil;":8240,"perp;":8869,"pertenk;":8241,"pfr;":[55349,56621],"phi;":966,"phiv;":981,"phmmat;":8499,"phone;":9742,"pi;":960,"pitchfork;":8916,"piv;":982,"planck;":8463,"planckh;":8462,"plankv;":8463,"plus;":43,"plusacir;":10787,"plusb;":8862,"pluscir;":10786,"plusdo;":8724,"plusdu;":10789,"pluse;":10866,plusmn:177,"plusmn;":177,"plussim;":10790,"plustwo;":10791,"pm;":177,"pointint;":10773,"popf;":[55349,56673],pound:163,"pound;":163,"pr;":8826,"prE;":10931,"prap;":10935,"prcue;":8828,"pre;":10927,"prec;":8826,"precapprox;":10935,"preccurlyeq;":8828,"preceq;":10927,"precnapprox;":10937,"precneqq;":10933,"precnsim;":8936,"precsim;":8830,"prime;":8242,"primes;":8473,"prnE;":10933,"prnap;":10937,"prnsim;":8936,"prod;":8719,"profalar;":9006,"profline;":8978,"profsurf;":8979,"prop;":8733,"propto;":8733,"prsim;":8830,"prurel;":8880,"pscr;":[55349,56517],"psi;":968,"puncsp;":8200,"qfr;":[55349,56622],"qint;":10764,"qopf;":[55349,56674],"qprime;":8279,"qscr;":[55349,56518],"quaternions;":8461,"quatint;":10774,"quest;":63,"questeq;":8799,quot:34,"quot;":34,"rAarr;":8667,"rArr;":8658,"rAtail;":10524,"rBarr;":10511,"rHar;":10596,"race;":[8765,817],"racute;":341,"radic;":8730,"raemptyv;":10675,"rang;":10217,"rangd;":10642,"range;":10661,"rangle;":10217,raquo:187,"raquo;":187,"rarr;":8594,"rarrap;":10613,"rarrb;":8677,"rarrbfs;":10528,"rarrc;":10547,"rarrfs;":10526,"rarrhk;":8618,"rarrlp;":8620,"rarrpl;":10565,"rarrsim;":10612,"rarrtl;":8611,"rarrw;":8605,"ratail;":10522,"ratio;":8758,"rationals;":8474,"rbarr;":10509,"rbbrk;":10099,"rbrace;":125,"rbrack;":93,"rbrke;":10636,"rbrksld;":10638,"rbrkslu;":10640,"rcaron;":345,"rcedil;":343,"rceil;":8969,"rcub;":125,"rcy;":1088,"rdca;":10551,"rdldhar;":10601,"rdquo;":8221,"rdquor;":8221,"rdsh;":8627,"real;":8476,"realine;":8475,"realpart;":8476,"reals;":8477,"rect;":9645,reg:174,"reg;":174,"rfisht;":10621,"rfloor;":8971,"rfr;":[55349,56623],"rhard;":8641,"rharu;":8640,"rharul;":10604,"rho;":961,"rhov;":1009,"rightarrow;":8594,"rightarrowtail;":8611,"rightharpoondown;":8641,"rightharpoonup;":8640,"rightleftarrows;":8644,"rightleftharpoons;":8652,"rightrightarrows;":8649,"rightsquigarrow;":8605,"rightthreetimes;":8908,"ring;":730,"risingdotseq;":8787,"rlarr;":8644,"rlhar;":8652,"rlm;":8207,"rmoust;":9137,"rmoustache;":9137,"rnmid;":10990,"roang;":10221,"roarr;":8702,"robrk;":10215,"ropar;":10630,"ropf;":[55349,56675],"roplus;":10798,"rotimes;":10805,"rpar;":41,"rpargt;":10644,"rppolint;":10770,"rrarr;":8649,"rsaquo;":8250,"rscr;":[55349,56519],"rsh;":8625,"rsqb;":93,"rsquo;":8217,"rsquor;":8217,"rthree;":8908,"rtimes;":8906,"rtri;":9657,"rtrie;":8885,"rtrif;":9656,"rtriltri;":10702,"ruluhar;":10600,"rx;":8478,"sacute;":347,"sbquo;":8218,"sc;":8827,"scE;":10932,"scap;":10936,"scaron;":353,"sccue;":8829,"sce;":10928,"scedil;":351,"scirc;":349,"scnE;":10934,"scnap;":10938,"scnsim;":8937,"scpolint;":10771,"scsim;":8831,"scy;":1089,"sdot;":8901,"sdotb;":8865,"sdote;":10854,"seArr;":8664,"searhk;":10533,"searr;":8600,"searrow;":8600,sect:167,"sect;":167,"semi;":59,"seswar;":10537,"setminus;":8726,"setmn;":8726,"sext;":10038,"sfr;":[55349,56624],"sfrown;":8994,"sharp;":9839,"shchcy;":1097,"shcy;":1096,"shortmid;":8739,"shortparallel;":8741,shy:173,"shy;":173,"sigma;":963,"sigmaf;":962,"sigmav;":962,"sim;":8764,"simdot;":10858,"sime;":8771,"simeq;":8771,"simg;":10910,"simgE;":10912,"siml;":10909,"simlE;":10911,"simne;":8774,"simplus;":10788,"simrarr;":10610,"slarr;":8592,"smallsetminus;":8726,"smashp;":10803,"smeparsl;":10724,"smid;":8739,"smile;":8995,"smt;":10922,"smte;":10924,"smtes;":[10924,65024],"softcy;":1100,"sol;":47,"solb;":10692,"solbar;":9023,"sopf;":[55349,56676],"spades;":9824,"spadesuit;":9824,"spar;":8741,"sqcap;":8851,"sqcaps;":[8851,65024],"sqcup;":8852,"sqcups;":[8852,65024],"sqsub;":8847,"sqsube;":8849,"sqsubset;":8847,"sqsubseteq;":8849,"sqsup;":8848,"sqsupe;":8850,"sqsupset;":8848,"sqsupseteq;":8850,"squ;":9633,"square;":9633,"squarf;":9642,"squf;":9642,"srarr;":8594,"sscr;":[55349,56520],"ssetmn;":8726,"ssmile;":8995,"sstarf;":8902,"star;":9734,"starf;":9733,"straightepsilon;":1013,"straightphi;":981,"strns;":175,"sub;":8834,"subE;":10949,"subdot;":10941,"sube;":8838,"subedot;":10947,"submult;":10945,"subnE;":10955,"subne;":8842,"subplus;":10943,"subrarr;":10617,"subset;":8834,"subseteq;":8838,"subseteqq;":10949,"subsetneq;":8842,"subsetneqq;":10955,"subsim;":10951,"subsub;":10965,"subsup;":10963,"succ;":8827,"succapprox;":10936,"succcurlyeq;":8829,"succeq;":10928,"succnapprox;":10938,"succneqq;":10934,"succnsim;":8937,"succsim;":8831,"sum;":8721,"sung;":9834,sup1:185,"sup1;":185,sup2:178,"sup2;":178,sup3:179,"sup3;":179,"sup;":8835,"supE;":10950,"supdot;":10942,"supdsub;":10968,"supe;":8839,"supedot;":10948,"suphsol;":10185,"suphsub;":10967,"suplarr;":10619,"supmult;":10946,"supnE;":10956,"supne;":8843,"supplus;":10944,"supset;":8835,"supseteq;":8839,"supseteqq;":10950,"supsetneq;":8843,"supsetneqq;":10956,"supsim;":10952,"supsub;":10964,"supsup;":10966,"swArr;":8665,"swarhk;":10534,"swarr;":8601,"swarrow;":8601,"swnwar;":10538,szlig:223,"szlig;":223,"target;":8982,"tau;":964,"tbrk;":9140,"tcaron;":357,"tcedil;":355,"tcy;":1090,"tdot;":8411,"telrec;":8981,"tfr;":[55349,56625],"there4;":8756,"therefore;":8756,"theta;":952,"thetasym;":977,"thetav;":977,"thickapprox;":8776,"thicksim;":8764,"thinsp;":8201,"thkap;":8776,"thksim;":8764,thorn:254,"thorn;":254,"tilde;":732,times:215,"times;":215,"timesb;":8864,"timesbar;":10801,"timesd;":10800,"tint;":8749,"toea;":10536,"top;":8868,"topbot;":9014,"topcir;":10993,"topf;":[55349,56677],"topfork;":10970,"tosa;":10537,"tprime;":8244,"trade;":8482,"triangle;":9653,"triangledown;":9663,"triangleleft;":9667,"trianglelefteq;":8884,"triangleq;":8796,"triangleright;":9657,"trianglerighteq;":8885,"tridot;":9708,"trie;":8796,"triminus;":10810,"triplus;":10809,"trisb;":10701,"tritime;":10811,"trpezium;":9186,"tscr;":[55349,56521],"tscy;":1094,"tshcy;":1115,"tstrok;":359,"twixt;":8812,"twoheadleftarrow;":8606,"twoheadrightarrow;":8608,"uArr;":8657,"uHar;":10595,uacute:250,"uacute;":250,"uarr;":8593,"ubrcy;":1118,"ubreve;":365,ucirc:251,"ucirc;":251,"ucy;":1091,"udarr;":8645,"udblac;":369,"udhar;":10606,"ufisht;":10622,"ufr;":[55349,56626],ugrave:249,"ugrave;":249,"uharl;":8639,"uharr;":8638,"uhblk;":9600,"ulcorn;":8988,"ulcorner;":8988,"ulcrop;":8975,"ultri;":9720,"umacr;":363,uml:168,"uml;":168,"uogon;":371,"uopf;":[55349,56678],"uparrow;":8593,"updownarrow;":8597,"upharpoonleft;":8639,"upharpoonright;":8638,"uplus;":8846,"upsi;":965,"upsih;":978,"upsilon;":965,"upuparrows;":8648,"urcorn;":8989,"urcorner;":8989,"urcrop;":8974,"uring;":367,"urtri;":9721,"uscr;":[55349,56522],"utdot;":8944,"utilde;":361,"utri;":9653,"utrif;":9652,"uuarr;":8648,uuml:252,"uuml;":252,"uwangle;":10663,"vArr;":8661,"vBar;":10984,"vBarv;":10985,"vDash;":8872,"vangrt;":10652,"varepsilon;":1013,"varkappa;":1008,"varnothing;":8709,"varphi;":981,"varpi;":982,"varpropto;":8733,"varr;":8597,"varrho;":1009,"varsigma;":962,"varsubsetneq;":[8842,65024],"varsubsetneqq;":[10955,65024],"varsupsetneq;":[8843,65024],"varsupsetneqq;":[10956,65024],"vartheta;":977,"vartriangleleft;":8882,"vartriangleright;":8883,"vcy;":1074,"vdash;":8866,"vee;":8744,"veebar;":8891,"veeeq;":8794,"vellip;":8942,"verbar;":124,"vert;":124,"vfr;":[55349,56627],"vltri;":8882,"vnsub;":[8834,8402],"vnsup;":[8835,8402],"vopf;":[55349,56679],"vprop;":8733,"vrtri;":8883,"vscr;":[55349,56523],"vsubnE;":[10955,65024],"vsubne;":[8842,65024],"vsupnE;":[10956,65024],"vsupne;":[8843,65024],"vzigzag;":10650,"wcirc;":373,"wedbar;":10847,"wedge;":8743,"wedgeq;":8793,"weierp;":8472,"wfr;":[55349,56628],"wopf;":[55349,56680],"wp;":8472,"wr;":8768,"wreath;":8768,"wscr;":[55349,56524],"xcap;":8898,"xcirc;":9711,"xcup;":8899,"xdtri;":9661,"xfr;":[55349,56629],"xhArr;":10234,"xharr;":10231,"xi;":958,"xlArr;":10232,"xlarr;":10229,"xmap;":10236,"xnis;":8955,"xodot;":10752,"xopf;":[55349,56681],"xoplus;":10753,"xotime;":10754,"xrArr;":10233,"xrarr;":10230,"xscr;":[55349,56525],"xsqcup;":10758,"xuplus;":10756,"xutri;":9651,"xvee;":8897,"xwedge;":8896,yacute:253,"yacute;":253,"yacy;":1103,"ycirc;":375,"ycy;":1099,yen:165,"yen;":165,"yfr;":[55349,56630],"yicy;":1111,"yopf;":[55349,56682],"yscr;":[55349,56526],"yucy;":1102,yuml:255,"yuml;":255,"zacute;":378,"zcaron;":382,"zcy;":1079,"zdot;":380,"zeetrf;":8488,"zeta;":950,"zfr;":[55349,56631],"zhcy;":1078,"zigrarr;":8669,"zopf;":[55349,56683],"zscr;":[55349,56527],"zwj;":8205,"zwnj;":8204},QN=/(A(?:Elig;?|MP;?|acute;?|breve;|c(?:irc;?|y;)|fr;|grave;?|lpha;|macr;|nd;|o(?:gon;|pf;)|pplyFunction;|ring;?|s(?:cr;|sign;)|tilde;?|uml;?)|B(?:a(?:ckslash;|r(?:v;|wed;))|cy;|e(?:cause;|rnoullis;|ta;)|fr;|opf;|reve;|scr;|umpeq;)|C(?:Hcy;|OPY;?|a(?:cute;|p(?:;|italDifferentialD;)|yleys;)|c(?:aron;|edil;?|irc;|onint;)|dot;|e(?:dilla;|nterDot;)|fr;|hi;|ircle(?:Dot;|Minus;|Plus;|Times;)|lo(?:ckwiseContourIntegral;|seCurly(?:DoubleQuote;|Quote;))|o(?:lon(?:;|e;)|n(?:gruent;|int;|tourIntegral;)|p(?:f;|roduct;)|unterClockwiseContourIntegral;)|ross;|scr;|up(?:;|Cap;))|D(?:D(?:;|otrahd;)|Jcy;|Scy;|Zcy;|a(?:gger;|rr;|shv;)|c(?:aron;|y;)|el(?:;|ta;)|fr;|i(?:a(?:critical(?:Acute;|Do(?:t;|ubleAcute;)|Grave;|Tilde;)|mond;)|fferentialD;)|o(?:pf;|t(?:;|Dot;|Equal;)|uble(?:ContourIntegral;|Do(?:t;|wnArrow;)|L(?:eft(?:Arrow;|RightArrow;|Tee;)|ong(?:Left(?:Arrow;|RightArrow;)|RightArrow;))|Right(?:Arrow;|Tee;)|Up(?:Arrow;|DownArrow;)|VerticalBar;)|wn(?:Arrow(?:;|Bar;|UpArrow;)|Breve;|Left(?:RightVector;|TeeVector;|Vector(?:;|Bar;))|Right(?:TeeVector;|Vector(?:;|Bar;))|Tee(?:;|Arrow;)|arrow;))|s(?:cr;|trok;))|E(?:NG;|TH;?|acute;?|c(?:aron;|irc;?|y;)|dot;|fr;|grave;?|lement;|m(?:acr;|pty(?:SmallSquare;|VerySmallSquare;))|o(?:gon;|pf;)|psilon;|qu(?:al(?:;|Tilde;)|ilibrium;)|s(?:cr;|im;)|ta;|uml;?|x(?:ists;|ponentialE;))|F(?:cy;|fr;|illed(?:SmallSquare;|VerySmallSquare;)|o(?:pf;|rAll;|uriertrf;)|scr;)|G(?:Jcy;|T;?|amma(?:;|d;)|breve;|c(?:edil;|irc;|y;)|dot;|fr;|g;|opf;|reater(?:Equal(?:;|Less;)|FullEqual;|Greater;|Less;|SlantEqual;|Tilde;)|scr;|t;)|H(?:ARDcy;|a(?:cek;|t;)|circ;|fr;|ilbertSpace;|o(?:pf;|rizontalLine;)|s(?:cr;|trok;)|ump(?:DownHump;|Equal;))|I(?:Ecy;|Jlig;|Ocy;|acute;?|c(?:irc;?|y;)|dot;|fr;|grave;?|m(?:;|a(?:cr;|ginaryI;)|plies;)|n(?:t(?:;|e(?:gral;|rsection;))|visible(?:Comma;|Times;))|o(?:gon;|pf;|ta;)|scr;|tilde;|u(?:kcy;|ml;?))|J(?:c(?:irc;|y;)|fr;|opf;|s(?:cr;|ercy;)|ukcy;)|K(?:Hcy;|Jcy;|appa;|c(?:edil;|y;)|fr;|opf;|scr;)|L(?:Jcy;|T;?|a(?:cute;|mbda;|ng;|placetrf;|rr;)|c(?:aron;|edil;|y;)|e(?:ft(?:A(?:ngleBracket;|rrow(?:;|Bar;|RightArrow;))|Ceiling;|Do(?:ubleBracket;|wn(?:TeeVector;|Vector(?:;|Bar;)))|Floor;|Right(?:Arrow;|Vector;)|T(?:ee(?:;|Arrow;|Vector;)|riangle(?:;|Bar;|Equal;))|Up(?:DownVector;|TeeVector;|Vector(?:;|Bar;))|Vector(?:;|Bar;)|arrow;|rightarrow;)|ss(?:EqualGreater;|FullEqual;|Greater;|Less;|SlantEqual;|Tilde;))|fr;|l(?:;|eftarrow;)|midot;|o(?:ng(?:Left(?:Arrow;|RightArrow;)|RightArrow;|left(?:arrow;|rightarrow;)|rightarrow;)|pf;|wer(?:LeftArrow;|RightArrow;))|s(?:cr;|h;|trok;)|t;)|M(?:ap;|cy;|e(?:diumSpace;|llintrf;)|fr;|inusPlus;|opf;|scr;|u;)|N(?:Jcy;|acute;|c(?:aron;|edil;|y;)|e(?:gative(?:MediumSpace;|Thi(?:ckSpace;|nSpace;)|VeryThinSpace;)|sted(?:GreaterGreater;|LessLess;)|wLine;)|fr;|o(?:Break;|nBreakingSpace;|pf;|t(?:;|C(?:ongruent;|upCap;)|DoubleVerticalBar;|E(?:lement;|qual(?:;|Tilde;)|xists;)|Greater(?:;|Equal;|FullEqual;|Greater;|Less;|SlantEqual;|Tilde;)|Hump(?:DownHump;|Equal;)|Le(?:ftTriangle(?:;|Bar;|Equal;)|ss(?:;|Equal;|Greater;|Less;|SlantEqual;|Tilde;))|Nested(?:GreaterGreater;|LessLess;)|Precedes(?:;|Equal;|SlantEqual;)|R(?:everseElement;|ightTriangle(?:;|Bar;|Equal;))|S(?:quareSu(?:bset(?:;|Equal;)|perset(?:;|Equal;))|u(?:bset(?:;|Equal;)|cceeds(?:;|Equal;|SlantEqual;|Tilde;)|perset(?:;|Equal;)))|Tilde(?:;|Equal;|FullEqual;|Tilde;)|VerticalBar;))|scr;|tilde;?|u;)|O(?:Elig;|acute;?|c(?:irc;?|y;)|dblac;|fr;|grave;?|m(?:acr;|ega;|icron;)|opf;|penCurly(?:DoubleQuote;|Quote;)|r;|s(?:cr;|lash;?)|ti(?:lde;?|mes;)|uml;?|ver(?:B(?:ar;|rac(?:e;|ket;))|Parenthesis;))|P(?:artialD;|cy;|fr;|hi;|i;|lusMinus;|o(?:incareplane;|pf;)|r(?:;|ecedes(?:;|Equal;|SlantEqual;|Tilde;)|ime;|o(?:duct;|portion(?:;|al;)))|s(?:cr;|i;))|Q(?:UOT;?|fr;|opf;|scr;)|R(?:Barr;|EG;?|a(?:cute;|ng;|rr(?:;|tl;))|c(?:aron;|edil;|y;)|e(?:;|verse(?:E(?:lement;|quilibrium;)|UpEquilibrium;))|fr;|ho;|ight(?:A(?:ngleBracket;|rrow(?:;|Bar;|LeftArrow;))|Ceiling;|Do(?:ubleBracket;|wn(?:TeeVector;|Vector(?:;|Bar;)))|Floor;|T(?:ee(?:;|Arrow;|Vector;)|riangle(?:;|Bar;|Equal;))|Up(?:DownVector;|TeeVector;|Vector(?:;|Bar;))|Vector(?:;|Bar;)|arrow;)|o(?:pf;|undImplies;)|rightarrow;|s(?:cr;|h;)|uleDelayed;)|S(?:H(?:CHcy;|cy;)|OFTcy;|acute;|c(?:;|aron;|edil;|irc;|y;)|fr;|hort(?:DownArrow;|LeftArrow;|RightArrow;|UpArrow;)|igma;|mallCircle;|opf;|q(?:rt;|uare(?:;|Intersection;|Su(?:bset(?:;|Equal;)|perset(?:;|Equal;))|Union;))|scr;|tar;|u(?:b(?:;|set(?:;|Equal;))|c(?:ceeds(?:;|Equal;|SlantEqual;|Tilde;)|hThat;)|m;|p(?:;|erset(?:;|Equal;)|set;)))|T(?:HORN;?|RADE;|S(?:Hcy;|cy;)|a(?:b;|u;)|c(?:aron;|edil;|y;)|fr;|h(?:e(?:refore;|ta;)|i(?:ckSpace;|nSpace;))|ilde(?:;|Equal;|FullEqual;|Tilde;)|opf;|ripleDot;|s(?:cr;|trok;))|U(?:a(?:cute;?|rr(?:;|ocir;))|br(?:cy;|eve;)|c(?:irc;?|y;)|dblac;|fr;|grave;?|macr;|n(?:der(?:B(?:ar;|rac(?:e;|ket;))|Parenthesis;)|ion(?:;|Plus;))|o(?:gon;|pf;)|p(?:Arrow(?:;|Bar;|DownArrow;)|DownArrow;|Equilibrium;|Tee(?:;|Arrow;)|arrow;|downarrow;|per(?:LeftArrow;|RightArrow;)|si(?:;|lon;))|ring;|scr;|tilde;|uml;?)|V(?:Dash;|bar;|cy;|dash(?:;|l;)|e(?:e;|r(?:bar;|t(?:;|ical(?:Bar;|Line;|Separator;|Tilde;))|yThinSpace;))|fr;|opf;|scr;|vdash;)|W(?:circ;|edge;|fr;|opf;|scr;)|X(?:fr;|i;|opf;|scr;)|Y(?:Acy;|Icy;|Ucy;|acute;?|c(?:irc;|y;)|fr;|opf;|scr;|uml;)|Z(?:Hcy;|acute;|c(?:aron;|y;)|dot;|e(?:roWidthSpace;|ta;)|fr;|opf;|scr;)|a(?:acute;?|breve;|c(?:;|E;|d;|irc;?|ute;?|y;)|elig;?|f(?:;|r;)|grave;?|l(?:e(?:fsym;|ph;)|pha;)|m(?:a(?:cr;|lg;)|p;?)|n(?:d(?:;|and;|d;|slope;|v;)|g(?:;|e;|le;|msd(?:;|a(?:a;|b;|c;|d;|e;|f;|g;|h;))|rt(?:;|vb(?:;|d;))|s(?:ph;|t;)|zarr;))|o(?:gon;|pf;)|p(?:;|E;|acir;|e;|id;|os;|prox(?:;|eq;))|ring;?|s(?:cr;|t;|ymp(?:;|eq;))|tilde;?|uml;?|w(?:conint;|int;))|b(?:Not;|a(?:ck(?:cong;|epsilon;|prime;|sim(?:;|eq;))|r(?:vee;|wed(?:;|ge;)))|brk(?:;|tbrk;)|c(?:ong;|y;)|dquo;|e(?:caus(?:;|e;)|mptyv;|psi;|rnou;|t(?:a;|h;|ween;))|fr;|ig(?:c(?:ap;|irc;|up;)|o(?:dot;|plus;|times;)|s(?:qcup;|tar;)|triangle(?:down;|up;)|uplus;|vee;|wedge;)|karow;|l(?:a(?:ck(?:lozenge;|square;|triangle(?:;|down;|left;|right;))|nk;)|k(?:1(?:2;|4;)|34;)|ock;)|n(?:e(?:;|quiv;)|ot;)|o(?:pf;|t(?:;|tom;)|wtie;|x(?:D(?:L;|R;|l;|r;)|H(?:;|D;|U;|d;|u;)|U(?:L;|R;|l;|r;)|V(?:;|H;|L;|R;|h;|l;|r;)|box;|d(?:L;|R;|l;|r;)|h(?:;|D;|U;|d;|u;)|minus;|plus;|times;|u(?:L;|R;|l;|r;)|v(?:;|H;|L;|R;|h;|l;|r;)))|prime;|r(?:eve;|vbar;?)|s(?:cr;|emi;|im(?:;|e;)|ol(?:;|b;|hsub;))|u(?:ll(?:;|et;)|mp(?:;|E;|e(?:;|q;))))|c(?:a(?:cute;|p(?:;|and;|brcup;|c(?:ap;|up;)|dot;|s;)|r(?:et;|on;))|c(?:a(?:ps;|ron;)|edil;?|irc;|ups(?:;|sm;))|dot;|e(?:dil;?|mptyv;|nt(?:;|erdot;|))|fr;|h(?:cy;|eck(?:;|mark;)|i;)|ir(?:;|E;|c(?:;|eq;|le(?:arrow(?:left;|right;)|d(?:R;|S;|ast;|circ;|dash;)))|e;|fnint;|mid;|scir;)|lubs(?:;|uit;)|o(?:lon(?:;|e(?:;|q;))|m(?:ma(?:;|t;)|p(?:;|fn;|le(?:ment;|xes;)))|n(?:g(?:;|dot;)|int;)|p(?:f;|rod;|y(?:;|sr;|)))|r(?:arr;|oss;)|s(?:cr;|u(?:b(?:;|e;)|p(?:;|e;)))|tdot;|u(?:darr(?:l;|r;)|e(?:pr;|sc;)|larr(?:;|p;)|p(?:;|brcap;|c(?:ap;|up;)|dot;|or;|s;)|r(?:arr(?:;|m;)|ly(?:eq(?:prec;|succ;)|vee;|wedge;)|ren;?|vearrow(?:left;|right;))|vee;|wed;)|w(?:conint;|int;)|ylcty;)|d(?:Arr;|Har;|a(?:gger;|leth;|rr;|sh(?:;|v;))|b(?:karow;|lac;)|c(?:aron;|y;)|d(?:;|a(?:gger;|rr;)|otseq;)|e(?:g;?|lta;|mptyv;)|f(?:isht;|r;)|har(?:l;|r;)|i(?:am(?:;|ond(?:;|suit;)|s;)|e;|gamma;|sin;|v(?:;|ide(?:;|ontimes;|)|onx;))|jcy;|lc(?:orn;|rop;)|o(?:llar;|pf;|t(?:;|eq(?:;|dot;)|minus;|plus;|square;)|ublebarwedge;|wn(?:arrow;|downarrows;|harpoon(?:left;|right;)))|r(?:bkarow;|c(?:orn;|rop;))|s(?:c(?:r;|y;)|ol;|trok;)|t(?:dot;|ri(?:;|f;))|u(?:arr;|har;)|wangle;|z(?:cy;|igrarr;))|e(?:D(?:Dot;|ot;)|a(?:cute;?|ster;)|c(?:aron;|ir(?:;|c;?)|olon;|y;)|dot;|e;|f(?:Dot;|r;)|g(?:;|rave;?|s(?:;|dot;))|l(?:;|inters;|l;|s(?:;|dot;))|m(?:acr;|pty(?:;|set;|v;)|sp(?:1(?:3;|4;)|;))|n(?:g;|sp;)|o(?:gon;|pf;)|p(?:ar(?:;|sl;)|lus;|si(?:;|lon;|v;))|q(?:c(?:irc;|olon;)|s(?:im;|lant(?:gtr;|less;))|u(?:als;|est;|iv(?:;|DD;))|vparsl;)|r(?:Dot;|arr;)|s(?:cr;|dot;|im;)|t(?:a;|h;?)|u(?:ml;?|ro;)|x(?:cl;|ist;|p(?:ectation;|onentiale;)))|f(?:allingdotseq;|cy;|emale;|f(?:ilig;|l(?:ig;|lig;)|r;)|ilig;|jlig;|l(?:at;|lig;|tns;)|nof;|o(?:pf;|r(?:all;|k(?:;|v;)))|partint;|r(?:a(?:c(?:1(?:2;?|3;|4;?|5;|6;|8;)|2(?:3;|5;)|3(?:4;?|5;|8;)|45;|5(?:6;|8;)|78;)|sl;)|own;)|scr;)|g(?:E(?:;|l;)|a(?:cute;|mma(?:;|d;)|p;)|breve;|c(?:irc;|y;)|dot;|e(?:;|l;|q(?:;|q;|slant;)|s(?:;|cc;|dot(?:;|o(?:;|l;))|l(?:;|es;)))|fr;|g(?:;|g;)|imel;|jcy;|l(?:;|E;|a;|j;)|n(?:E;|ap(?:;|prox;)|e(?:;|q(?:;|q;))|sim;)|opf;|rave;|s(?:cr;|im(?:;|e;|l;))|t(?:;|c(?:c;|ir;)|dot;|lPar;|quest;|r(?:a(?:pprox;|rr;)|dot;|eq(?:less;|qless;)|less;|sim;)|)|v(?:ertneqq;|nE;))|h(?:Arr;|a(?:irsp;|lf;|milt;|r(?:dcy;|r(?:;|cir;|w;)))|bar;|circ;|e(?:arts(?:;|uit;)|llip;|rcon;)|fr;|ks(?:earow;|warow;)|o(?:arr;|mtht;|ok(?:leftarrow;|rightarrow;)|pf;|rbar;)|s(?:cr;|lash;|trok;)|y(?:bull;|phen;))|i(?:acute;?|c(?:;|irc;?|y;)|e(?:cy;|xcl;?)|f(?:f;|r;)|grave;?|i(?:;|i(?:int;|nt;)|nfin;|ota;)|jlig;|m(?:a(?:cr;|g(?:e;|line;|part;)|th;)|of;|ped;)|n(?:;|care;|fin(?:;|tie;)|odot;|t(?:;|cal;|e(?:gers;|rcal;)|larhk;|prod;))|o(?:cy;|gon;|pf;|ta;)|prod;|quest;?|s(?:cr;|in(?:;|E;|dot;|s(?:;|v;)|v;))|t(?:;|ilde;)|u(?:kcy;|ml;?))|j(?:c(?:irc;|y;)|fr;|math;|opf;|s(?:cr;|ercy;)|ukcy;)|k(?:appa(?:;|v;)|c(?:edil;|y;)|fr;|green;|hcy;|jcy;|opf;|scr;)|l(?:A(?:arr;|rr;|tail;)|Barr;|E(?:;|g;)|Har;|a(?:cute;|emptyv;|gran;|mbda;|ng(?:;|d;|le;)|p;|quo;?|rr(?:;|b(?:;|fs;)|fs;|hk;|lp;|pl;|sim;|tl;)|t(?:;|ail;|e(?:;|s;)))|b(?:arr;|brk;|r(?:ac(?:e;|k;)|k(?:e;|sl(?:d;|u;))))|c(?:aron;|e(?:dil;|il;)|ub;|y;)|d(?:ca;|quo(?:;|r;)|r(?:dhar;|ushar;)|sh;)|e(?:;|ft(?:arrow(?:;|tail;)|harpoon(?:down;|up;)|leftarrows;|right(?:arrow(?:;|s;)|harpoons;|squigarrow;)|threetimes;)|g;|q(?:;|q;|slant;)|s(?:;|cc;|dot(?:;|o(?:;|r;))|g(?:;|es;)|s(?:approx;|dot;|eq(?:gtr;|qgtr;)|gtr;|sim;)))|f(?:isht;|loor;|r;)|g(?:;|E;)|h(?:ar(?:d;|u(?:;|l;))|blk;)|jcy;|l(?:;|arr;|corner;|hard;|tri;)|m(?:idot;|oust(?:;|ache;))|n(?:E;|ap(?:;|prox;)|e(?:;|q(?:;|q;))|sim;)|o(?:a(?:ng;|rr;)|brk;|ng(?:left(?:arrow;|rightarrow;)|mapsto;|rightarrow;)|oparrow(?:left;|right;)|p(?:ar;|f;|lus;)|times;|w(?:ast;|bar;)|z(?:;|enge;|f;))|par(?:;|lt;)|r(?:arr;|corner;|har(?:;|d;)|m;|tri;)|s(?:aquo;|cr;|h;|im(?:;|e;|g;)|q(?:b;|uo(?:;|r;))|trok;)|t(?:;|c(?:c;|ir;)|dot;|hree;|imes;|larr;|quest;|r(?:Par;|i(?:;|e;|f;))|)|ur(?:dshar;|uhar;)|v(?:ertneqq;|nE;))|m(?:DDot;|a(?:cr;?|l(?:e;|t(?:;|ese;))|p(?:;|sto(?:;|down;|left;|up;))|rker;)|c(?:omma;|y;)|dash;|easuredangle;|fr;|ho;|i(?:cro;?|d(?:;|ast;|cir;|dot;?)|nus(?:;|b;|d(?:;|u;)))|l(?:cp;|dr;)|nplus;|o(?:dels;|pf;)|p;|s(?:cr;|tpos;)|u(?:;|ltimap;|map;))|n(?:G(?:g;|t(?:;|v;))|L(?:eft(?:arrow;|rightarrow;)|l;|t(?:;|v;))|Rightarrow;|V(?:Dash;|dash;)|a(?:bla;|cute;|ng;|p(?:;|E;|id;|os;|prox;)|tur(?:;|al(?:;|s;)))|b(?:sp;?|ump(?:;|e;))|c(?:a(?:p;|ron;)|edil;|ong(?:;|dot;)|up;|y;)|dash;|e(?:;|Arr;|ar(?:hk;|r(?:;|ow;))|dot;|quiv;|s(?:ear;|im;)|xist(?:;|s;))|fr;|g(?:E;|e(?:;|q(?:;|q;|slant;)|s;)|sim;|t(?:;|r;))|h(?:Arr;|arr;|par;)|i(?:;|s(?:;|d;)|v;)|jcy;|l(?:Arr;|E;|arr;|dr;|e(?:;|ft(?:arrow;|rightarrow;)|q(?:;|q;|slant;)|s(?:;|s;))|sim;|t(?:;|ri(?:;|e;)))|mid;|o(?:pf;|t(?:;|in(?:;|E;|dot;|v(?:a;|b;|c;))|ni(?:;|v(?:a;|b;|c;))|))|p(?:ar(?:;|allel;|sl;|t;)|olint;|r(?:;|cue;|e(?:;|c(?:;|eq;))))|r(?:Arr;|arr(?:;|c;|w;)|ightarrow;|tri(?:;|e;))|s(?:c(?:;|cue;|e;|r;)|hort(?:mid;|parallel;)|im(?:;|e(?:;|q;))|mid;|par;|qsu(?:be;|pe;)|u(?:b(?:;|E;|e;|set(?:;|eq(?:;|q;)))|cc(?:;|eq;)|p(?:;|E;|e;|set(?:;|eq(?:;|q;)))))|t(?:gl;|ilde;?|lg;|riangle(?:left(?:;|eq;)|right(?:;|eq;)))|u(?:;|m(?:;|ero;|sp;))|v(?:Dash;|Harr;|ap;|dash;|g(?:e;|t;)|infin;|l(?:Arr;|e;|t(?:;|rie;))|r(?:Arr;|trie;)|sim;)|w(?:Arr;|ar(?:hk;|r(?:;|ow;))|near;))|o(?:S;|a(?:cute;?|st;)|c(?:ir(?:;|c;?)|y;)|d(?:ash;|blac;|iv;|ot;|sold;)|elig;|f(?:cir;|r;)|g(?:on;|rave;?|t;)|h(?:bar;|m;)|int;|l(?:arr;|c(?:ir;|ross;)|ine;|t;)|m(?:acr;|ega;|i(?:cron;|d;|nus;))|opf;|p(?:ar;|erp;|lus;)|r(?:;|arr;|d(?:;|er(?:;|of;)|f;?|m;?)|igof;|or;|slope;|v;)|s(?:cr;|lash;?|ol;)|ti(?:lde;?|mes(?:;|as;))|uml;?|vbar;)|p(?:ar(?:;|a(?:;|llel;|)|s(?:im;|l;)|t;)|cy;|er(?:cnt;|iod;|mil;|p;|tenk;)|fr;|h(?:i(?:;|v;)|mmat;|one;)|i(?:;|tchfork;|v;)|l(?:an(?:ck(?:;|h;)|kv;)|us(?:;|acir;|b;|cir;|d(?:o;|u;)|e;|mn;?|sim;|two;))|m;|o(?:intint;|pf;|und;?)|r(?:;|E;|ap;|cue;|e(?:;|c(?:;|approx;|curlyeq;|eq;|n(?:approx;|eqq;|sim;)|sim;))|ime(?:;|s;)|n(?:E;|ap;|sim;)|o(?:d;|f(?:alar;|line;|surf;)|p(?:;|to;))|sim;|urel;)|s(?:cr;|i;)|uncsp;)|q(?:fr;|int;|opf;|prime;|scr;|u(?:at(?:ernions;|int;)|est(?:;|eq;)|ot;?))|r(?:A(?:arr;|rr;|tail;)|Barr;|Har;|a(?:c(?:e;|ute;)|dic;|emptyv;|ng(?:;|d;|e;|le;)|quo;?|rr(?:;|ap;|b(?:;|fs;)|c;|fs;|hk;|lp;|pl;|sim;|tl;|w;)|t(?:ail;|io(?:;|nals;)))|b(?:arr;|brk;|r(?:ac(?:e;|k;)|k(?:e;|sl(?:d;|u;))))|c(?:aron;|e(?:dil;|il;)|ub;|y;)|d(?:ca;|ldhar;|quo(?:;|r;)|sh;)|e(?:al(?:;|ine;|part;|s;)|ct;|g;?)|f(?:isht;|loor;|r;)|h(?:ar(?:d;|u(?:;|l;))|o(?:;|v;))|i(?:ght(?:arrow(?:;|tail;)|harpoon(?:down;|up;)|left(?:arrows;|harpoons;)|rightarrows;|squigarrow;|threetimes;)|ng;|singdotseq;)|l(?:arr;|har;|m;)|moust(?:;|ache;)|nmid;|o(?:a(?:ng;|rr;)|brk;|p(?:ar;|f;|lus;)|times;)|p(?:ar(?:;|gt;)|polint;)|rarr;|s(?:aquo;|cr;|h;|q(?:b;|uo(?:;|r;)))|t(?:hree;|imes;|ri(?:;|e;|f;|ltri;))|uluhar;|x;)|s(?:acute;|bquo;|c(?:;|E;|a(?:p;|ron;)|cue;|e(?:;|dil;)|irc;|n(?:E;|ap;|sim;)|polint;|sim;|y;)|dot(?:;|b;|e;)|e(?:Arr;|ar(?:hk;|r(?:;|ow;))|ct;?|mi;|swar;|tm(?:inus;|n;)|xt;)|fr(?:;|own;)|h(?:arp;|c(?:hcy;|y;)|ort(?:mid;|parallel;)|y;?)|i(?:gma(?:;|f;|v;)|m(?:;|dot;|e(?:;|q;)|g(?:;|E;)|l(?:;|E;)|ne;|plus;|rarr;))|larr;|m(?:a(?:llsetminus;|shp;)|eparsl;|i(?:d;|le;)|t(?:;|e(?:;|s;)))|o(?:ftcy;|l(?:;|b(?:;|ar;))|pf;)|pa(?:des(?:;|uit;)|r;)|q(?:c(?:ap(?:;|s;)|up(?:;|s;))|su(?:b(?:;|e;|set(?:;|eq;))|p(?:;|e;|set(?:;|eq;)))|u(?:;|ar(?:e;|f;)|f;))|rarr;|s(?:cr;|etmn;|mile;|tarf;)|t(?:ar(?:;|f;)|r(?:aight(?:epsilon;|phi;)|ns;))|u(?:b(?:;|E;|dot;|e(?:;|dot;)|mult;|n(?:E;|e;)|plus;|rarr;|s(?:et(?:;|eq(?:;|q;)|neq(?:;|q;))|im;|u(?:b;|p;)))|cc(?:;|approx;|curlyeq;|eq;|n(?:approx;|eqq;|sim;)|sim;)|m;|ng;|p(?:1;?|2;?|3;?|;|E;|d(?:ot;|sub;)|e(?:;|dot;)|hs(?:ol;|ub;)|larr;|mult;|n(?:E;|e;)|plus;|s(?:et(?:;|eq(?:;|q;)|neq(?:;|q;))|im;|u(?:b;|p;))))|w(?:Arr;|ar(?:hk;|r(?:;|ow;))|nwar;)|zlig;?)|t(?:a(?:rget;|u;)|brk;|c(?:aron;|edil;|y;)|dot;|elrec;|fr;|h(?:e(?:re(?:4;|fore;)|ta(?:;|sym;|v;))|i(?:ck(?:approx;|sim;)|nsp;)|k(?:ap;|sim;)|orn;?)|i(?:lde;|mes(?:;|b(?:;|ar;)|d;|)|nt;)|o(?:ea;|p(?:;|bot;|cir;|f(?:;|ork;))|sa;)|prime;|r(?:ade;|i(?:angle(?:;|down;|left(?:;|eq;)|q;|right(?:;|eq;))|dot;|e;|minus;|plus;|sb;|time;)|pezium;)|s(?:c(?:r;|y;)|hcy;|trok;)|w(?:ixt;|ohead(?:leftarrow;|rightarrow;)))|u(?:Arr;|Har;|a(?:cute;?|rr;)|br(?:cy;|eve;)|c(?:irc;?|y;)|d(?:arr;|blac;|har;)|f(?:isht;|r;)|grave;?|h(?:ar(?:l;|r;)|blk;)|l(?:c(?:orn(?:;|er;)|rop;)|tri;)|m(?:acr;|l;?)|o(?:gon;|pf;)|p(?:arrow;|downarrow;|harpoon(?:left;|right;)|lus;|si(?:;|h;|lon;)|uparrows;)|r(?:c(?:orn(?:;|er;)|rop;)|ing;|tri;)|scr;|t(?:dot;|ilde;|ri(?:;|f;))|u(?:arr;|ml;?)|wangle;)|v(?:Arr;|Bar(?:;|v;)|Dash;|a(?:ngrt;|r(?:epsilon;|kappa;|nothing;|p(?:hi;|i;|ropto;)|r(?:;|ho;)|s(?:igma;|u(?:bsetneq(?:;|q;)|psetneq(?:;|q;)))|t(?:heta;|riangle(?:left;|right;))))|cy;|dash;|e(?:e(?:;|bar;|eq;)|llip;|r(?:bar;|t;))|fr;|ltri;|nsu(?:b;|p;)|opf;|prop;|rtri;|s(?:cr;|u(?:bn(?:E;|e;)|pn(?:E;|e;)))|zigzag;)|w(?:circ;|e(?:d(?:bar;|ge(?:;|q;))|ierp;)|fr;|opf;|p;|r(?:;|eath;)|scr;)|x(?:c(?:ap;|irc;|up;)|dtri;|fr;|h(?:Arr;|arr;)|i;|l(?:Arr;|arr;)|map;|nis;|o(?:dot;|p(?:f;|lus;)|time;)|r(?:Arr;|arr;)|s(?:cr;|qcup;)|u(?:plus;|tri;)|vee;|wedge;)|y(?:ac(?:ute;?|y;)|c(?:irc;|y;)|en;?|fr;|icy;|opf;|scr;|u(?:cy;|ml;?))|z(?:acute;|c(?:aron;|y;)|dot;|e(?:etrf;|ta;)|fr;|hcy;|igrarr;|opf;|scr;|w(?:j;|nj;)))|[\s\S]/g,Bi=32,Ji=/[^\r"&\u0000]+/g,Yi=/[^\r'&\u0000]+/g,Xi=/[^\r\t\n\f &>\u0000]+/g,Qi=/[^\r\t\n\f \/>A-Z\u0000]+/g,wi=/[^\r\t\n\f \/=>A-Z\u0000]+/g,fi=/[^\]\r\u0000\uffff]*/g,Wi=/[^&<\r\u0000\uffff]*/g,wN=/[^<\r\u0000\uffff]*/g,Gi=/[^\r\u0000\uffff]*/g,fN=/(?:(\/)?([a-z]+)>)|[\s\S]/g,WN=/(?:([-a-z]+)[ \t\n\f]*=[ \t\n\f]*('[^'&\r\u0000]*'|"[^"&\r\u0000]*"|[^\t\n\r\f "&'\u0000>][^&> \t\n\r\f\u0000]*[ \t\n\f]))|[\s\S]/g,SJ=/[^\x09\x0A\x0C\x0D\x20]/,Iw=/[^\x09\x0A\x0C\x0D\x20]/g,Hi=/[^\x00\x09\x0A\x0C\x0D\x20]/,d8=/^[\x09\x0A\x0C\x0D\x20]+/,yJ=/\x00/g;function s1(D){var F=16384;if(D.length<F)return String.fromCharCode.apply(String,D);var $="";for(var B=0;B<D.length;B+=F)$+=String.fromCharCode.apply(String,D.slice(B,B+F));return $}function Ei(D){var F=[];for(var $=0;$<D.length;$++)F[$]=D.charCodeAt($);return F}function uD(D,F){if(typeof F==="string")return D.namespaceURI===v0.HTML&&D.localName===F;var $=F[D.namespaceURI];return $&&$[D.localName]}function GN(D){return uD(D,CN)}function HN(D){if(uD(D,ZN))return!0;if(D.namespaceURI===v0.MATHML&&D.localName==="annotation-xml"){var F=D.getAttribute("encoding");if(F)F=F.toLowerCase();if(F==="text/html"||F==="application/xhtml+xml")return!0}return!1}function Ki(D){if(D in YN)return YN[D];else return D}function EN(D){for(var F=0,$=D.length;F<$;F++)if(D[F][0]in JN)D[F][0]=JN[D[F][0]]}function KN(D){for(var F=0,$=D.length;F<$;F++)if(D[F][0]==="definitionurl"){D[F][0]="definitionURL";break}}function Tw(D){for(var F=0,$=D.length;F<$;F++)if(D[F][0]in BN)D[F].push(BN[D[F][0]])}function qN(D,F){for(var $=0,B=D.length;$<B;$++){var J=D[$][0],Y=D[$][1];if(F.hasAttribute(J))continue;F._setAttribute(J,Y)}}LD.ElementStack=function D(){this.elements=[],this.top=null};LD.ElementStack.prototype.push=function(D){this.elements.push(D),this.top=D};LD.ElementStack.prototype.pop=function(D){this.elements.pop(),this.top=this.elements[this.elements.length-1]};LD.ElementStack.prototype.popTag=function(D){for(var F=this.elements.length-1;F>0;F--){var $=this.elements[F];if(uD($,D))break}this.elements.length=F,this.top=this.elements[F-1]};LD.ElementStack.prototype.popElementType=function(D){for(var F=this.elements.length-1;F>0;F--)if(this.elements[F]instanceof D)break;this.elements.length=F,this.top=this.elements[F-1]};LD.ElementStack.prototype.popElement=function(D){for(var F=this.elements.length-1;F>0;F--)if(this.elements[F]===D)break;this.elements.length=F,this.top=this.elements[F-1]};LD.ElementStack.prototype.removeElement=function(D){if(this.top===D)this.pop();else{var F=this.elements.lastIndexOf(D);if(F!==-1)this.elements.splice(F,1)}};LD.ElementStack.prototype.clearToContext=function(D){for(var F=this.elements.length-1;F>0;F--)if(uD(this.elements[F],D))break;this.elements.length=F+1,this.top=this.elements[F]};LD.ElementStack.prototype.contains=function(D){return this.inSpecificScope(D,Object.create(null))};LD.ElementStack.prototype.inSpecificScope=function(D,F){for(var $=this.elements.length-1;$>=0;$--){var B=this.elements[$];if(uD(B,D))return!0;if(uD(B,F))return!1}return!1};LD.ElementStack.prototype.elementInSpecificScope=function(D,F){for(var $=this.elements.length-1;$>=0;$--){var B=this.elements[$];if(B===D)return!0;if(uD(B,F))return!1}return!1};LD.ElementStack.prototype.elementTypeInSpecificScope=function(D,F){for(var $=this.elements.length-1;$>=0;$--){var B=this.elements[$];if(B instanceof D)return!0;if(uD(B,F))return!1}return!1};LD.ElementStack.prototype.inScope=function(D){return this.inSpecificScope(D,k2)};LD.ElementStack.prototype.elementInScope=function(D){return this.elementInSpecificScope(D,k2)};LD.ElementStack.prototype.elementTypeInScope=function(D){return this.elementTypeInSpecificScope(D,k2)};LD.ElementStack.prototype.inButtonScope=function(D){return this.inSpecificScope(D,hw)};LD.ElementStack.prototype.inListItemScope=function(D){return this.inSpecificScope(D,uJ)};LD.ElementStack.prototype.inTableScope=function(D){return this.inSpecificScope(D,RN)};LD.ElementStack.prototype.inSelectScope=function(D){for(var F=this.elements.length-1;F>=0;F--){var $=this.elements[F];if($.namespaceURI!==v0.HTML)return!1;var B=$.localName;if(B===D)return!0;if(B!=="optgroup"&&B!=="option")return!1}return!1};LD.ElementStack.prototype.generateImpliedEndTags=function(D,F){var $=F?jN:ON;for(var B=this.elements.length-1;B>=0;B--){var J=this.elements[B];if(D&&uD(J,D))break;if(!uD(this.elements[B],$))break}this.elements.length=B+1,this.top=this.elements[B]};LD.ActiveFormattingElements=function D(){this.list=[],this.attrs=[]};LD.ActiveFormattingElements.prototype.MARKER={localName:"|"};LD.ActiveFormattingElements.prototype.insertMarker=function(){this.list.push(this.MARKER),this.attrs.push(this.MARKER)};LD.ActiveFormattingElements.prototype.push=function(D,F){var $=0;for(var B=this.list.length-1;B>=0;B--){if(this.list[B]===this.MARKER)break;if(X(D,this.list[B],this.attrs[B])){if($++,$===3){this.list.splice(B,1),this.attrs.splice(B,1);break}}}this.list.push(D);var J=[];for(var Y=0;Y<F.length;Y++)J[Y]=F[Y];this.attrs.push(J);function X(Q,w,f){if(Q.localName!==w.localName)return!1;if(Q._numattrs!==f.length)return!1;for(var G=0,H=f.length;G<H;G++){var K=f[G][0],E=f[G][1];if(!Q.hasAttribute(K))return!1;if(Q.getAttribute(K)!==E)return!1}return!0}};LD.ActiveFormattingElements.prototype.clearToMarker=function(){for(var D=this.list.length-1;D>=0;D--)if(this.list[D]===this.MARKER)break;if(D<0)D=0;this.list.length=D,this.attrs.length=D};LD.ActiveFormattingElements.prototype.findElementByTag=function(D){for(var F=this.list.length-1;F>=0;F--){var $=this.list[F];if($===this.MARKER)break;if($.localName===D)return $}return null};LD.ActiveFormattingElements.prototype.indexOf=function(D){return this.list.lastIndexOf(D)};LD.ActiveFormattingElements.prototype.remove=function(D){var F=this.list.lastIndexOf(D);if(F!==-1)this.list.splice(F,1),this.attrs.splice(F,1)};LD.ActiveFormattingElements.prototype.replace=function(D,F,$){var B=this.list.lastIndexOf(D);if(B!==-1)this.list[B]=F,this.attrs[B]=$};LD.ActiveFormattingElements.prototype.insertAfter=function(D,F){var $=this.list.lastIndexOf(D);if($!==-1)this.list.splice($,0,F),this.attrs.splice($,0,F)};function LD(D,F,$){var B=null,J=0,Y=0,X=!1,Q=!1,w=0,f=[],G="",H=!0,K=0,E=GD,O,q,U="",N="",L=[],C="",R="",I=[],h=[],p=[],P=[],v=[],n=!1,_=fT,x=null,o=[],M=new LD.ElementStack,r=new LD.ActiveFormattingElements,$0=F!==void 0,V0=null,s0=null,U0=!0;if(F)U0=F.ownerDocument._scripting_enabled;if($&&$.scripting_enabled===!1)U0=!1;var A0=!0,PD=!1,zD,W0,a=[],mD=!1,G0=!1,YD={document:function(){return T0},_asDocumentFragment:function(){var V=T0.createDocumentFragment(),A=T0.firstChild;while(A.hasChildNodes())V.appendChild(A.firstChild);return V},pause:function(){K++},resume:function(){K--,this.parse("")},parse:function(V,A,z){var m;if(K>0)return G+=V,!0;if(w===0){if(G)V=G+V,G="";if(A)V+="\uFFFF",X=!0;if(B=V,J=V.length,Y=0,H){if(H=!1,B.charCodeAt(0)===65279)Y=1}w++,m=UD(z),G=B.substring(Y,J),w--}else{if(w++,f.push(B,J,Y),B=V,J=V.length,Y=0,UD(),m=!1,G=B.substring(Y,J),Y=f.pop(),J=f.pop(),B=f.pop(),G)B=G+B.substring(Y),J=B.length,Y=0,G="";w--}return m}},T0=new op(!0,D);if(T0._parser=YD,T0._scripting_enabled=U0,F){if(F.ownerDocument._quirks)T0._quirks=!0;if(F.ownerDocument._limitedQuirks)T0._limitedQuirks=!0;if(F.namespaceURI===v0.HTML)switch(F.localName){case"title":case"textarea":E=xF;break;case"style":case"xmp":case"iframe":case"noembed":case"noframes":case"script":case"plaintext":E=HF;break}var Y0=T0.createElement("html");if(T0._appendChild(Y0),M.push(Y0),F instanceof kD.HTMLTemplateElement)o.push(tY);GF();for(var WD=F;WD!==null;WD=WD.parentElement)if(WD instanceof kD.HTMLFormElement){s0=WD;break}}function UD(V){var A,z,m,d;while(Y<J){if(K>0||V&&V())return!0;switch(typeof E.lookahead){case"undefined":if(A=B.charCodeAt(Y++),Q){if(Q=!1,A===10){Y++;continue}}switch(A){case 13:if(Y<J){if(B.charCodeAt(Y)===10)Y++}else Q=!0;E(10);break;case 65535:if(X&&Y===J){E(hJ);break}default:E(A);break}break;case"number":A=B.charCodeAt(Y);var K0=E.lookahead,c0=!0;if(K0<0)c0=!1,K0=-K0;if(K0<J-Y)z=c0?B.substring(Y,Y+K0):null,d=!1;else if(X){if(z=c0?B.substring(Y,J):null,d=!0,A===65535&&Y===J-1)A=hJ}else return!0;E(A,z,d);break;case"string":A=B.charCodeAt(Y),m=E.lookahead;var AD=B.indexOf(m,Y);if(AD!==-1)z=B.substring(Y,AD+m.length),d=!1;else{if(!X)return!0;if(z=B.substring(Y,J),A===65535&&Y===J-1)A=hJ;d=!0}E(A,z,d);break}}return!1}function l(V,A){for(var z=0;z<v.length;z++)if(v[z][0]===V)return;if(A!==void 0)v.push([V,A]);else v.push([V])}function _D(){WN.lastIndex=Y-1;var V=WN.exec(B);if(!V)throw new Error("should never happen");var A=V[1];if(!A)return!1;var z=V[2],m=z.length;switch(z[0]){case'"':case"'":z=z.substring(1,m-1),Y+=V[0].length-1,E=iY;break;default:E=N2,Y+=V[0].length-1,z=z.substring(0,m-1);break}for(var d=0;d<v.length;d++)if(v[d][0]===A)return!0;return v.push([A,z]),!0}function b(){n=!1,U="",v.length=0}function y(){n=!0,U="",v.length=0}function c(){L.length=0}function g(){C=""}function S(){R=""}function u(){I.length=0}function D0(){h.length=0,p=null,P=null}function H0(){p=[]}function g0(){P=[]}function z0(){PD=!0}function WF(){return M.top&&M.top.namespaceURI!=="http://www.w3.org/1999/xhtml"}function ED(V){return N===V}function Z1(){if(a.length>0){var V=s1(a);if(a.length=0,G0){if(G0=!1,V[0]===`
`)V=V.substring(1);if(V.length===0)return}x0(K9,V),mD=!1}G0=!1}function q1(V){V.lastIndex=Y-1;var A=V.exec(B);if(A&&A.index===Y-1){if(A=A[0],Y+=A.length-1,X&&Y===J)A=A.slice(0,-1),Y--;return A}else throw new Error("should never happen")}function P1(V){V.lastIndex=Y-1;var A=V.exec(B)[0];if(!A)return!1;return T(A),Y+=A.length-1,!0}function T(V){if(a.length>0)Z1();if(G0){if(G0=!1,V[0]===`
`)V=V.substring(1);if(V.length===0)return}x0(K9,V)}function i(){if(n)x0(OD,U);else{var V=U;U="",N=V,x0(t1,V,v)}}function Q0(){if(Y===J)return!1;fN.lastIndex=Y;var V=fN.exec(B);if(!V)throw new Error("should never happen");var A=V[2];if(!A)return!1;var z=V[1];if(z)Y+=A.length+2,x0(OD,A);else Y+=A.length+1,N=A,x0(t1,A,sp);return!0}function O0(){if(n)x0(OD,U,null,!0);else x0(t1,U,v,!0)}function M0(){x0(tp,s1(h),p?s1(p):void 0,P?s1(P):void 0)}function f0(){Z1(),_(hJ),T0.modclock=1}var x0=YD.insertToken=function V(A,z,m,d){Z1();var K0=M.top;if(!K0||K0.namespaceURI===v0.HTML)_(A,z,m,d);else if(A!==t1&&A!==K9)sW(A,z,m,d);else if(GN(K0)&&(A===K9||A===t1&&z!=="mglyph"&&z!=="malignmark")||A===t1&&z==="svg"&&K0.namespaceURI===v0.MATHML&&K0.localName==="annotation-xml"||HN(K0))W0=!0,_(A,z,m,d),W0=!1;else sW(A,z,m,d)};function KD(V){var A=M.top;if(l0&&uD(A,q9))yF(function(z){return z.createComment(V)});else{if(A instanceof kD.HTMLTemplateElement)A=A.content;A._appendChild(A.ownerDocument.createComment(V))}}function d0(V){var A=M.top;if(l0&&uD(A,q9))yF(function(m){return m.createTextNode(V)});else{if(A instanceof kD.HTMLTemplateElement)A=A.content;var z=A.lastChild;if(z&&z.nodeType===zw.TEXT_NODE)z.appendData(V);else A._appendChild(A.ownerDocument.createTextNode(V))}}function RD(V,A,z){var m=VN.createElement(V,A,null);if(z)for(var d=0,K0=z.length;d<K0;d++)m._setAttribute(z[d][0],z[d][1]);return m}var l0=!1;function j0(V,A){var z=VD(function(m){return RD(m,V,A)});if(uD(z,UN))z._form=s0;return z}function VD(V){var A;if(l0&&uD(M.top,q9))A=yF(V);else if(M.top instanceof kD.HTMLTemplateElement)A=V(M.top.content.ownerDocument),M.top.content._appendChild(A);else A=V(M.top.ownerDocument),M.top._appendChild(A);return M.push(A),A}function sD(V,A,z){return VD(function(m){var d=m._createElementNS(V,z,null);if(A)for(var K0=0,c0=A.length;K0<c0;K0++){var AD=A[K0];if(AD.length===2)d._setAttribute(AD[0],AD[1]);else d._setAttributeNS(AD[2],AD[0],AD[1])}return d})}function SF(V){for(var A=M.elements.length-1;A>=0;A--)if(M.elements[A]instanceof V)return A;return-1}function yF(V){var A,z,m=-1,d=-1,K0;if(m=SF(kD.HTMLTableElement),d=SF(kD.HTMLTemplateElement),d>=0&&(m<0||d>m))A=M.elements[d];else if(m>=0)if(A=M.elements[m].parentNode,A)z=M.elements[m];else A=M.elements[m-1];if(!A)A=M.elements[0];if(A instanceof kD.HTMLTemplateElement)A=A.content;if(K0=V(A.ownerDocument),K0.nodeType===zw.TEXT_NODE){var c0;if(z)c0=z.previousSibling;else c0=A.lastChild;if(c0&&c0.nodeType===zw.TEXT_NODE)return c0.appendData(K0.data),K0}if(z)A.insertBefore(K0,z);else A._appendChild(K0);return K0}function GF(){var V=!1;for(var A=M.elements.length-1;A>=0;A--){var z=M.elements[A];if(A===0){if(V=!0,$0)z=F}if(z.namespaceURI===v0.HTML){var m=z.localName;switch(m){case"select":for(var d=A;d>0;){var K0=M.elements[--d];if(K0 instanceof kD.HTMLTemplateElement)break;else if(K0 instanceof kD.HTMLTableElement){_=uB;return}}_=e2;return;case"tr":_=v9;return;case"tbody":case"tfoot":case"thead":_=B8;return;case"caption":_=rY;return;case"colgroup":_=kB;return;case"table":_=kF;return;case"template":_=o[o.length-1];return;case"body":_=m0;return;case"frameset":_=sY;return;case"html":if(V0===null)_=yB;else _=oY;return;default:if(!V){if(m==="head"){_=w1;return}if(m==="td"||m==="th"){_=w7;return}}}}if(V){_=m0;return}}}function R2(V,A){j0(V,A),E=e0,x=_,_=xB}function _B(V,A){j0(V,A),E=xF,x=_,_=xB}function s2(V,A){return{elt:RD(V,r.list[A].localName,r.attrs[A]),attrs:r.attrs[A]}}function b1(){if(r.list.length===0)return;var V=r.list[r.list.length-1];if(V===r.MARKER)return;if(M.elements.lastIndexOf(V)!==-1)return;for(var A=r.list.length-2;A>=0;A--){if(V=r.list[A],V===r.MARKER)break;if(M.elements.lastIndexOf(V)!==-1)break}for(A=A+1;A<r.list.length;A++){var z=VD(function(m){return s2(m,A).elt});r.list[A]=z}}var A6={localName:"BM"};function RF(V){if(uD(M.top,V)&&r.indexOf(M.top)===-1)return M.pop(),!0;var A=0;while(A<8){A++;var z=r.findElementByTag(V);if(!z)return!1;var m=M.elements.lastIndexOf(z);if(m===-1)return r.remove(z),!0;if(!M.elementInScope(z))return!0;var d=null,K0;for(var c0=m+1;c0<M.elements.length;c0++)if(uD(M.elements[c0],l8)){d=M.elements[c0],K0=c0;break}if(!d)return M.popElement(z),r.remove(z),!0;else{var AD=M.elements[m-1];r.insertAfter(z,A6);var J1=d,u1=d,uF=K0,J2,J8=0;while(!0){if(J8++,J1=M.elements[--uF],J1===z)break;if(J2=r.indexOf(J1),J8>3&&J2!==-1)r.remove(J1),J2=-1;if(J2===-1){M.removeElement(J1);continue}var C6=s2(AD.ownerDocument,J2);if(r.replace(J1,C6.elt,C6.attrs),M.elements[uF]=C6.elt,J1=C6.elt,u1===d)r.remove(A6),r.insertAfter(C6.elt,A6);J1._appendChild(u1),u1=J1}if(l0&&uD(AD,q9))yF(function(){return u1});else if(AD instanceof kD.HTMLTemplateElement)AD.content._appendChild(u1);else AD._appendChild(u1);var g9=s2(d.ownerDocument,r.indexOf(z));while(d.hasChildNodes())g9.elt._appendChild(d.firstChild);d._appendChild(g9.elt),r.remove(z),r.replace(A6,g9.elt,g9.attrs),M.removeElement(z);var KT=M.elements.lastIndexOf(d);M.elements.splice(KT+1,0,g9.elt)}}return!0}function O6(){M.pop(),_=x;return}function C2(){if(delete T0._parser,M.elements.length=0,T0.defaultView)T0.defaultView.dispatchEvent(new kD.Event("load",{}))}function b0(V,A){E=A,Y--}function GD(V){switch(V){case 38:O=GD,E=u9;break;case 60:if(Q0())break;E=D8;break;case 0:a.push(V),mD=!0;break;case-1:f0();break;default:P1(Wi)||a.push(V);break}}function xF(V){switch(V){case 38:O=xF,E=u9;break;case 60:E=B2;break;case 0:a.push(65533),mD=!0;break;case-1:f0();break;default:a.push(V);break}}function e0(V){switch(V){case 60:E=LI;break;case 0:a.push(65533);break;case-1:f0();break;default:P1(wN)||a.push(V);break}}function yD(V){switch(V){case 60:E=TI;break;case 0:a.push(65533);break;case-1:f0();break;default:P1(wN)||a.push(V);break}}function HF(V){switch(V){case 0:a.push(65533);break;case-1:f0();break;default:P1(Gi)||a.push(V);break}}function D8(V){switch(V){case 33:E=gW;break;case 47:E=a2;break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:b(),b0(V,k9);break;case 63:b0(V,TB);break;default:a.push(60),b0(V,GD);break}}function a2(V){switch(V){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:y(),b0(V,k9);break;case 62:E=GD;break;case-1:a.push(60),a.push(47),f0();break;default:b0(V,TB);break}}function k9(V){switch(V){case 9:case 10:case 12:case 32:E=N2;break;case 47:E=U6;break;case 62:E=GD,i();break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:U+=String.fromCharCode(V+32);break;case 0:U+=String.fromCharCode(65533);break;case-1:f0();break;default:U+=q1(Qi);break}}function B2(V){if(V===47)c(),E=Q7;else a.push(60),b0(V,xF)}function Q7(V){switch(V){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:y(),b0(V,_I);break;default:a.push(60),a.push(47),b0(V,xF);break}}function _I(V){switch(V){case 9:case 10:case 12:case 32:if(ED(U)){E=N2;return}break;case 47:if(ED(U)){E=U6;return}break;case 62:if(ED(U)){E=GD,i();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:U+=String.fromCharCode(V+32),L.push(V);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:U+=String.fromCharCode(V),L.push(V);return;default:break}a.push(60),a.push(47),i8(a,L),b0(V,xF)}function LI(V){if(V===47)c(),E=zI;else a.push(60),b0(V,e0)}function zI(V){switch(V){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:y(),b0(V,II);break;default:a.push(60),a.push(47),b0(V,e0);break}}function II(V){switch(V){case 9:case 10:case 12:case 32:if(ED(U)){E=N2;return}break;case 47:if(ED(U)){E=U6;return}break;case 62:if(ED(U)){E=GD,i();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:U+=String.fromCharCode(V+32),L.push(V);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:U+=String.fromCharCode(V),L.push(V);return;default:break}a.push(60),a.push(47),i8(a,L),b0(V,e0)}function TI(V){switch(V){case 47:c(),E=PI;break;case 33:E=hI,a.push(60),a.push(33);break;default:a.push(60),b0(V,yD);break}}function PI(V){switch(V){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:y(),b0(V,bI);break;default:a.push(60),a.push(47),b0(V,yD);break}}function bI(V){switch(V){case 9:case 10:case 12:case 32:if(ED(U)){E=N2;return}break;case 47:if(ED(U)){E=U6;return}break;case 62:if(ED(U)){E=GD,i();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:U+=String.fromCharCode(V+32),L.push(V);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:U+=String.fromCharCode(V),L.push(V);return;default:break}a.push(60),a.push(47),i8(a,L),b0(V,yD)}function hI(V){if(V===45)E=SI,a.push(45);else b0(V,yD)}function SI(V){if(V===45)E=uW,a.push(45);else b0(V,yD)}function Z2(V){switch(V){case 45:E=yI,a.push(45);break;case 60:E=mY;break;case 0:a.push(65533);break;case-1:f0();break;default:a.push(V);break}}function yI(V){switch(V){case 45:E=uW,a.push(45);break;case 60:E=mY;break;case 0:E=Z2,a.push(65533);break;case-1:f0();break;default:E=Z2,a.push(V);break}}function uW(V){switch(V){case 45:a.push(45);break;case 60:E=mY;break;case 62:E=yD,a.push(62);break;case 0:E=Z2,a.push(65533);break;case-1:f0();break;default:E=Z2,a.push(V);break}}function mY(V){switch(V){case 47:c(),E=xI;break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:c(),a.push(60),b0(V,uI);break;default:a.push(60),b0(V,Z2);break}}function xI(V){switch(V){case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:y(),b0(V,kI);break;default:a.push(60),a.push(47),b0(V,Z2);break}}function kI(V){switch(V){case 9:case 10:case 12:case 32:if(ED(U)){E=N2;return}break;case 47:if(ED(U)){E=U6;return}break;case 62:if(ED(U)){E=GD,i();return}break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:U+=String.fromCharCode(V+32),L.push(V);return;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:U+=String.fromCharCode(V),L.push(V);return;default:break}a.push(60),a.push(47),i8(a,L),b0(V,Z2)}function uI(V){switch(V){case 9:case 10:case 12:case 32:case 47:case 62:if(s1(L)==="script")E=j6;else E=Z2;a.push(V);break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:L.push(V+32),a.push(V);break;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:L.push(V),a.push(V);break;default:b0(V,Z2);break}}function j6(V){switch(V){case 45:E=vI,a.push(45);break;case 60:E=cY,a.push(60);break;case 0:a.push(65533);break;case-1:f0();break;default:a.push(V);break}}function vI(V){switch(V){case 45:E=gI,a.push(45);break;case 60:E=cY,a.push(60);break;case 0:E=j6,a.push(65533);break;case-1:f0();break;default:E=j6,a.push(V);break}}function gI(V){switch(V){case 45:a.push(45);break;case 60:E=cY,a.push(60);break;case 62:E=yD,a.push(62);break;case 0:E=j6,a.push(65533);break;case-1:f0();break;default:E=j6,a.push(V);break}}function cY(V){if(V===47)c(),E=mI,a.push(47);else b0(V,j6)}function mI(V){switch(V){case 9:case 10:case 12:case 32:case 47:case 62:if(s1(L)==="script")E=Z2;else E=j6;a.push(V);break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:L.push(V+32),a.push(V);break;case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:L.push(V),a.push(V);break;default:b0(V,j6);break}}function N2(V){switch(V){case 9:case 10:case 12:case 32:break;case 47:E=U6;break;case 62:E=GD,i();break;case-1:f0();break;case 61:g(),C+=String.fromCharCode(V),E=pY;break;default:if(_D())break;g(),b0(V,pY);break}}function pY(V){switch(V){case 9:case 10:case 12:case 32:case 47:case 62:case-1:b0(V,cI);break;case 61:E=vW;break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:C+=String.fromCharCode(V+32);break;case 0:C+=String.fromCharCode(65533);break;case 34:case 39:case 60:default:C+=q1(wi);break}}function cI(V){switch(V){case 9:case 10:case 12:case 32:break;case 47:l(C),E=U6;break;case 61:E=vW;break;case 62:E=GD,l(C),i();break;case-1:l(C),f0();break;default:l(C),g(),b0(V,pY);break}}function vW(V){switch(V){case 9:case 10:case 12:case 32:break;case 34:S(),E=LB;break;case 39:S(),E=zB;break;case 62:default:S(),b0(V,IB);break}}function LB(V){switch(V){case 34:l(C,R),E=iY;break;case 38:O=LB,E=u9;break;case 0:R+=String.fromCharCode(65533);break;case-1:f0();break;case 10:R+=String.fromCharCode(V);break;default:R+=q1(Ji);break}}function zB(V){switch(V){case 39:l(C,R),E=iY;break;case 38:O=zB,E=u9;break;case 0:R+=String.fromCharCode(65533);break;case-1:f0();break;case 10:R+=String.fromCharCode(V);break;default:R+=q1(Yi);break}}function IB(V){switch(V){case 9:case 10:case 12:case 32:l(C,R),E=N2;break;case 38:O=IB,E=u9;break;case 62:l(C,R),E=GD,i();break;case 0:R+=String.fromCharCode(65533);break;case-1:Y--,E=GD;break;case 34:case 39:case 60:case 61:case 96:default:R+=q1(Xi);break}}function iY(V){switch(V){case 9:case 10:case 12:case 32:E=N2;break;case 47:E=U6;break;case 62:E=GD,i();break;case-1:f0();break;default:b0(V,N2);break}}function U6(V){switch(V){case 62:E=GD,O0(!0);break;case-1:f0();break;default:b0(V,N2);break}}function TB(V,A,z){var m=A.length;if(z)Y+=m-1;else Y+=m;var d=A.substring(0,m-1);d=d.replace(/\u0000/g,"\uFFFD"),d=d.replace(/\u000D\u000A/g,`
`),d=d.replace(/\u000D/g,`
`),x0(x2,d),E=GD}TB.lookahead=">";function gW(V,A,z){if(A[0]==="-"&&A[1]==="-"){Y+=2,u(),E=pI;return}if(A.toUpperCase()==="DOCTYPE")Y+=7,E=tI;else if(A==="[CDATA["&&WF())Y+=7,E=nY;else E=TB}gW.lookahead=7;function pI(V){switch(u(),V){case 45:E=iI;break;case 62:E=GD,x0(x2,s1(I));break;default:b0(V,F8);break}}function iI(V){switch(V){case 45:E=PB;break;case 62:E=GD,x0(x2,s1(I));break;case-1:x0(x2,s1(I)),f0();break;default:I.push(45),b0(V,F8);break}}function F8(V){switch(V){case 60:I.push(V),E=dI;break;case 45:E=dY;break;case 0:I.push(65533);break;case-1:x0(x2,s1(I)),f0();break;default:I.push(V);break}}function dI(V){switch(V){case 33:I.push(V),E=lI;break;case 60:I.push(V);break;default:b0(V,F8);break}}function lI(V){switch(V){case 45:E=nI;break;default:b0(V,F8);break}}function nI(V){switch(V){case 45:E=oI;break;default:b0(V,dY);break}}function oI(V){switch(V){case 62:case-1:b0(V,PB);break;default:b0(V,PB);break}}function dY(V){switch(V){case 45:E=PB;break;case-1:x0(x2,s1(I)),f0();break;default:I.push(45),b0(V,F8);break}}function PB(V){switch(V){case 62:E=GD,x0(x2,s1(I));break;case 33:E=rI;break;case 45:I.push(45);break;case-1:x0(x2,s1(I)),f0();break;default:I.push(45),I.push(45),b0(V,F8);break}}function rI(V){switch(V){case 45:I.push(45),I.push(45),I.push(33),E=dY;break;case 62:E=GD,x0(x2,s1(I));break;case-1:x0(x2,s1(I)),f0();break;default:I.push(45),I.push(45),I.push(33),b0(V,F8);break}}function tI(V){switch(V){case 9:case 10:case 12:case 32:E=mW;break;case-1:D0(),z0(),M0(),f0();break;default:b0(V,mW);break}}function mW(V){switch(V){case 9:case 10:case 12:case 32:break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:D0(),h.push(V+32),E=lY;break;case 0:D0(),h.push(65533),E=lY;break;case 62:D0(),z0(),E=GD,M0();break;case-1:D0(),z0(),M0(),f0();break;default:D0(),h.push(V),E=lY;break}}function lY(V){switch(V){case 9:case 10:case 12:case 32:E=cW;break;case 62:E=GD,M0();break;case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:h.push(V+32);break;case 0:h.push(65533);break;case-1:z0(),M0(),f0();break;default:h.push(V);break}}function cW(V,A,z){switch(V){case 9:case 10:case 12:case 32:Y+=1;break;case 62:E=GD,Y+=1,M0();break;case-1:z0(),M0(),f0();break;default:if(A=A.toUpperCase(),A==="PUBLIC")Y+=6,E=sI;else if(A==="SYSTEM")Y+=6,E=DT;else z0(),E=R6;break}}cW.lookahead=6;function sI(V){switch(V){case 9:case 10:case 12:case 32:E=aI;break;case 34:H0(),E=pW;break;case 39:H0(),E=iW;break;case 62:z0(),E=GD,M0();break;case-1:z0(),M0(),f0();break;default:z0(),E=R6;break}}function aI(V){switch(V){case 9:case 10:case 12:case 32:break;case 34:H0(),E=pW;break;case 39:H0(),E=iW;break;case 62:z0(),E=GD,M0();break;case-1:z0(),M0(),f0();break;default:z0(),E=R6;break}}function pW(V){switch(V){case 34:E=dW;break;case 0:p.push(65533);break;case 62:z0(),E=GD,M0();break;case-1:z0(),M0(),f0();break;default:p.push(V);break}}function iW(V){switch(V){case 39:E=dW;break;case 0:p.push(65533);break;case 62:z0(),E=GD,M0();break;case-1:z0(),M0(),f0();break;default:p.push(V);break}}function dW(V){switch(V){case 9:case 10:case 12:case 32:E=eI;break;case 62:E=GD,M0();break;case 34:g0(),E=bB;break;case 39:g0(),E=hB;break;case-1:z0(),M0(),f0();break;default:z0(),E=R6;break}}function eI(V){switch(V){case 9:case 10:case 12:case 32:break;case 62:E=GD,M0();break;case 34:g0(),E=bB;break;case 39:g0(),E=hB;break;case-1:z0(),M0(),f0();break;default:z0(),E=R6;break}}function DT(V){switch(V){case 9:case 10:case 12:case 32:E=FT;break;case 34:g0(),E=bB;break;case 39:g0(),E=hB;break;case 62:z0(),E=GD,M0();break;case-1:z0(),M0(),f0();break;default:z0(),E=R6;break}}function FT(V){switch(V){case 9:case 10:case 12:case 32:break;case 34:g0(),E=bB;break;case 39:g0(),E=hB;break;case 62:z0(),E=GD,M0();break;case-1:z0(),M0(),f0();break;default:z0(),E=R6;break}}function bB(V){switch(V){case 34:E=lW;break;case 0:P.push(65533);break;case 62:z0(),E=GD,M0();break;case-1:z0(),M0(),f0();break;default:P.push(V);break}}function hB(V){switch(V){case 39:E=lW;break;case 0:P.push(65533);break;case 62:z0(),E=GD,M0();break;case-1:z0(),M0(),f0();break;default:P.push(V);break}}function lW(V){switch(V){case 9:case 10:case 12:case 32:break;case 62:E=GD,M0();break;case-1:z0(),M0(),f0();break;default:E=R6;break}}function R6(V){switch(V){case 62:E=GD,M0();break;case-1:M0(),f0();break;default:break}}function nY(V){switch(V){case 93:E=$T;break;case-1:f0();break;case 0:mD=!0;default:P1(fi)||a.push(V);break}}function $T(V){switch(V){case 93:E=BT;break;default:a.push(93),b0(V,nY);break}}function BT(V){switch(V){case 93:a.push(93);break;case 62:Z1(),E=GD;break;default:a.push(93),a.push(93),b0(V,nY);break}}function u9(V){switch(c(),L.push(38),V){case 9:case 10:case 12:case 32:case 60:case 38:case-1:b0(V,$8);break;case 35:L.push(V),E=JT;break;default:b0(V,nW);break}}function nW(V){QN.lastIndex=Y;var A=QN.exec(B);if(!A)throw new Error("should never happen");var z=A[1];if(!z){E=$8;return}switch(Y+=z.length,i8(L,Ei(z)),O){case LB:case zB:case IB:if(z[z.length-1]!==";"){if(/[=A-Za-z0-9]/.test(B[Y])){E=$8;return}}break;default:break}c();var m=$i[z];if(typeof m==="number")L.push(m);else i8(L,m);E=$8}nW.lookahead=-Bi;function JT(V){switch(q=0,V){case 120:case 88:L.push(V),E=YT;break;default:b0(V,XT);break}}function YT(V){switch(V){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 65:case 66:case 67:case 68:case 69:case 70:case 97:case 98:case 99:case 100:case 101:case 102:b0(V,QT);break;default:b0(V,$8);break}}function XT(V){switch(V){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:b0(V,wT);break;default:b0(V,$8);break}}function QT(V){switch(V){case 65:case 66:case 67:case 68:case 69:case 70:q*=16,q+=V-55;break;case 97:case 98:case 99:case 100:case 101:case 102:q*=16,q+=V-87;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:q*=16,q+=V-48;break;case 59:E=SB;break;default:b0(V,SB);break}}function wT(V){switch(V){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:q*=10,q+=V-48;break;case 59:E=SB;break;default:b0(V,SB);break}}function SB(V){if(q in XN)q=XN[q];else if(q>1114111||q>=55296&&q<57344)q=65533;if(c(),q<=65535)L.push(q);else q=q-65536,L.push(55296+(q>>10)),L.push(56320+(q&1023));b0(V,$8)}function $8(V){switch(O){case LB:case zB:case IB:R+=s1(L);break;default:i8(a,L);break}b0(V,O)}function fT(V,A,z,m){switch(V){case 1:if(A=A.replace(d8,""),A.length===0)return;break;case 4:T0._appendChild(T0.createComment(A));return;case 5:var d=A,K0=z,c0=m;if(T0.appendChild(new rp(T0,d,K0,c0)),PD||d.toLowerCase()!=="html"||ap.test(K0)||c0&&c0.toLowerCase()===ep||c0===void 0&&$N.test(K0))T0._quirks=!0;else if(Di.test(K0)||c0!==void 0&&$N.test(K0))T0._limitedQuirks=!0;_=oW;return}T0._quirks=!0,_=oW,_(V,A,z,m)}function oW(V,A,z,m){var d;switch(V){case 1:if(A=A.replace(d8,""),A.length===0)return;break;case 5:return;case 4:T0._appendChild(T0.createComment(A));return;case 2:if(A==="html"){d=RD(T0,A,z),M.push(d),T0.appendChild(d),_=yB;return}break;case 3:switch(A){case"html":case"head":case"body":case"br":break;default:return}}d=RD(T0,"html",null),M.push(d),T0.appendChild(d),_=yB,_(V,A,z,m)}function yB(V,A,z,m){switch(V){case 1:if(A=A.replace(d8,""),A.length===0)return;break;case 5:return;case 4:KD(A);return;case 2:switch(A){case"html":m0(V,A,z,m);return;case"head":var d=j0(A,z);V0=d,_=w1;return}break;case 3:switch(A){case"html":case"head":case"body":case"br":break;default:return}}yB(t1,"head",null),_(V,A,z,m)}function w1(V,A,z,m){switch(V){case 1:var d=A.match(d8);if(d)d0(d[0]),A=A.substring(d[0].length);if(A.length===0)return;break;case 4:KD(A);return;case 5:return;case 2:switch(A){case"html":m0(V,A,z,m);return;case"meta":case"base":case"basefont":case"bgsound":case"link":j0(A,z),M.pop();return;case"title":_B(A,z);return;case"noscript":if(!U0){j0(A,z),_=rW;return}case"noframes":case"style":R2(A,z);return;case"script":VD(function(K0){var c0=RD(K0,A,z);if(c0._parser_inserted=!0,c0._force_async=!1,$0)c0._already_started=!0;return Z1(),c0}),E=yD,x=_,_=xB;return;case"template":j0(A,z),r.insertMarker(),A0=!1,_=tY,o.push(_);return;case"head":return}break;case 3:switch(A){case"head":M.pop(),_=oY;return;case"body":case"html":case"br":break;case"template":if(!M.contains("template"))return;M.generateImpliedEndTags(null,"thorough"),M.popTag("template"),r.clearToMarker(),o.pop(),GF();return;default:return}break}w1(OD,"head",null),_(V,A,z,m)}function rW(V,A,z,m){switch(V){case 5:return;case 4:w1(V,A);return;case 1:var d=A.match(d8);if(d)w1(V,d[0]),A=A.substring(d[0].length);if(A.length===0)return;break;case 2:switch(A){case"html":m0(V,A,z,m);return;case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"style":w1(V,A,z);return;case"head":case"noscript":return}break;case 3:switch(A){case"noscript":M.pop(),_=w1;return;case"br":break;default:return}break}rW(OD,"noscript",null),_(V,A,z,m)}function oY(V,A,z,m){switch(V){case 1:var d=A.match(d8);if(d)d0(d[0]),A=A.substring(d[0].length);if(A.length===0)return;break;case 4:KD(A);return;case 5:return;case 2:switch(A){case"html":m0(V,A,z,m);return;case"body":j0(A,z),A0=!1,_=m0;return;case"frameset":j0(A,z),_=sY;return;case"base":case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"script":case"style":case"template":case"title":M.push(V0),w1(t1,A,z),M.removeElement(V0);return;case"head":return}break;case 3:switch(A){case"template":return w1(V,A,z,m);case"body":case"html":case"br":break;default:return}break}oY(t1,"body",null),A0=!0,_(V,A,z,m)}function m0(V,A,z,m){var d,K0,c0,AD;switch(V){case 1:if(mD){if(A=A.replace(yJ,""),A.length===0)return}if(A0&&SJ.test(A))A0=!1;b1(),d0(A);return;case 5:return;case 4:KD(A);return;case-1:if(o.length)return tY(V);C2();return;case 2:switch(A){case"html":if(M.contains("template"))return;qN(z,M.elements[0]);return;case"base":case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"script":case"style":case"template":case"title":w1(t1,A,z);return;case"body":if(d=M.elements[1],!d||!(d instanceof kD.HTMLBodyElement)||M.contains("template"))return;A0=!1,qN(z,d);return;case"frameset":if(!A0)return;if(d=M.elements[1],!d||!(d instanceof kD.HTMLBodyElement))return;if(d.parentNode)d.parentNode.removeChild(d);while(!(M.top instanceof kD.HTMLHtmlElement))M.pop();j0(A,z),_=sY;return;case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"nav":case"ol":case"p":case"section":case"summary":case"ul":if(M.inButtonScope("p"))m0(OD,"p");j0(A,z);return;case"menu":if(M.inButtonScope("p"))m0(OD,"p");if(uD(M.top,"menuitem"))M.pop();j0(A,z);return;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":if(M.inButtonScope("p"))m0(OD,"p");if(M.top instanceof kD.HTMLHeadingElement)M.pop();j0(A,z);return;case"pre":case"listing":if(M.inButtonScope("p"))m0(OD,"p");j0(A,z),G0=!0,A0=!1;return;case"form":if(s0&&!M.contains("template"))return;if(M.inButtonScope("p"))m0(OD,"p");if(AD=j0(A,z),!M.contains("template"))s0=AD;return;case"li":A0=!1;for(K0=M.elements.length-1;K0>=0;K0--){if(c0=M.elements[K0],c0 instanceof kD.HTMLLIElement){m0(OD,"li");break}if(uD(c0,l8)&&!uD(c0,Pw))break}if(M.inButtonScope("p"))m0(OD,"p");j0(A,z);return;case"dd":case"dt":A0=!1;for(K0=M.elements.length-1;K0>=0;K0--){if(c0=M.elements[K0],uD(c0,AN)){m0(OD,c0.localName);break}if(uD(c0,l8)&&!uD(c0,Pw))break}if(M.inButtonScope("p"))m0(OD,"p");j0(A,z);return;case"plaintext":if(M.inButtonScope("p"))m0(OD,"p");j0(A,z),E=HF;return;case"button":if(M.inScope("button"))m0(OD,"button"),_(V,A,z,m);else b1(),j0(A,z),A0=!1;return;case"a":var J1=r.findElementByTag("a");if(J1)m0(OD,A),r.remove(J1),M.removeElement(J1);case"b":case"big":case"code":case"em":case"font":case"i":case"s":case"small":case"strike":case"strong":case"tt":case"u":b1(),r.push(j0(A,z),z);return;case"nobr":if(b1(),M.inScope(A))m0(OD,A),b1();r.push(j0(A,z),z);return;case"applet":case"marquee":case"object":b1(),j0(A,z),r.insertMarker(),A0=!1;return;case"table":if(!T0._quirks&&M.inButtonScope("p"))m0(OD,"p");j0(A,z),A0=!1,_=kF;return;case"area":case"br":case"embed":case"img":case"keygen":case"wbr":b1(),j0(A,z),M.pop(),A0=!1;return;case"input":b1(),AD=j0(A,z),M.pop();var u1=AD.getAttribute("type");if(!u1||u1.toLowerCase()!=="hidden")A0=!1;return;case"param":case"source":case"track":j0(A,z),M.pop();return;case"hr":if(M.inButtonScope("p"))m0(OD,"p");if(uD(M.top,"menuitem"))M.pop();j0(A,z),M.pop(),A0=!1;return;case"image":m0(t1,"img",z,m);return;case"textarea":j0(A,z),G0=!0,A0=!1,E=xF,x=_,_=xB;return;case"xmp":if(M.inButtonScope("p"))m0(OD,"p");b1(),A0=!1,R2(A,z);return;case"iframe":A0=!1,R2(A,z);return;case"noembed":R2(A,z);return;case"select":if(b1(),j0(A,z),A0=!1,_===kF||_===rY||_===B8||_===v9||_===w7)_=uB;else _=e2;return;case"optgroup":case"option":if(M.top instanceof kD.HTMLOptionElement)m0(OD,"option");b1(),j0(A,z);return;case"menuitem":if(uD(M.top,"menuitem"))M.pop();b1(),j0(A,z);return;case"rb":case"rtc":if(M.inScope("ruby"))M.generateImpliedEndTags();j0(A,z);return;case"rp":case"rt":if(M.inScope("ruby"))M.generateImpliedEndTags("rtc");j0(A,z);return;case"math":if(b1(),KN(z),Tw(z),sD(A,z,v0.MATHML),m)M.pop();return;case"svg":if(b1(),EN(z),Tw(z),sD(A,z,v0.SVG),m)M.pop();return;case"caption":case"col":case"colgroup":case"frame":case"head":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return}b1(),j0(A,z);return;case 3:switch(A){case"template":w1(OD,A,z);return;case"body":if(!M.inScope("body"))return;_=tW;return;case"html":if(!M.inScope("body"))return;_=tW,_(V,A,z);return;case"address":case"article":case"aside":case"blockquote":case"button":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"listing":case"main":case"menu":case"nav":case"ol":case"pre":case"section":case"summary":case"ul":if(!M.inScope(A))return;M.generateImpliedEndTags(),M.popTag(A);return;case"form":if(!M.contains("template")){var uF=s0;if(s0=null,!uF||!M.elementInScope(uF))return;M.generateImpliedEndTags(),M.removeElement(uF)}else{if(!M.inScope("form"))return;M.generateImpliedEndTags(),M.popTag("form")}return;case"p":if(!M.inButtonScope(A))m0(t1,A,null),_(V,A,z,m);else M.generateImpliedEndTags(A),M.popTag(A);return;case"li":if(!M.inListItemScope(A))return;M.generateImpliedEndTags(A),M.popTag(A);return;case"dd":case"dt":if(!M.inScope(A))return;M.generateImpliedEndTags(A),M.popTag(A);return;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":if(!M.elementTypeInScope(kD.HTMLHeadingElement))return;M.generateImpliedEndTags(),M.popElementType(kD.HTMLHeadingElement);return;case"sarcasm":break;case"a":case"b":case"big":case"code":case"em":case"font":case"i":case"nobr":case"s":case"small":case"strike":case"strong":case"tt":case"u":var J2=RF(A);if(J2)return;break;case"applet":case"marquee":case"object":if(!M.inScope(A))return;M.generateImpliedEndTags(),M.popTag(A),r.clearToMarker();return;case"br":m0(t1,A,null);return}for(K0=M.elements.length-1;K0>=0;K0--)if(c0=M.elements[K0],uD(c0,A)){M.generateImpliedEndTags(A),M.popElement(c0);break}else if(uD(c0,l8))return;return}}function xB(V,A,z,m){switch(V){case 1:d0(A);return;case-1:if(M.top instanceof kD.HTMLScriptElement)M.top._already_started=!0;M.pop(),_=x,_(V);return;case 3:if(A==="script")O6();else M.pop(),_=x;return;default:return}}function kF(V,A,z,m){function d(c0){for(var AD=0,J1=c0.length;AD<J1;AD++)if(c0[AD][0]==="type")return c0[AD][1].toLowerCase();return null}switch(V){case 1:if(W0){m0(V,A,z,m);return}else if(uD(M.top,q9)){zD=[],x=_,_=WT,_(V,A,z,m);return}break;case 4:KD(A);return;case 5:return;case 2:switch(A){case"caption":M.clearToContext(xJ),r.insertMarker(),j0(A,z),_=rY;return;case"colgroup":M.clearToContext(xJ),j0(A,z),_=kB;return;case"col":kF(t1,"colgroup",null),_(V,A,z,m);return;case"tbody":case"tfoot":case"thead":M.clearToContext(xJ),j0(A,z),_=B8;return;case"td":case"th":case"tr":kF(t1,"tbody",null),_(V,A,z,m);return;case"table":if(!M.inTableScope(A))return;kF(OD,A),_(V,A,z,m);return;case"style":case"script":case"template":w1(V,A,z,m);return;case"input":var K0=d(z);if(K0!=="hidden")break;j0(A,z),M.pop();return;case"form":if(s0||M.contains("template"))return;s0=j0(A,z),M.popElement(s0);return}break;case 3:switch(A){case"table":if(!M.inTableScope(A))return;M.popTag(A),GF();return;case"body":case"caption":case"col":case"colgroup":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return;case"template":w1(V,A,z,m);return}break;case-1:m0(V,A,z,m);return}l0=!0,m0(V,A,z,m),l0=!1}function WT(V,A,z,m){if(V===K9){if(mD){if(A=A.replace(yJ,""),A.length===0)return}zD.push(A)}else{var d=zD.join("");if(zD.length=0,SJ.test(d))l0=!0,m0(K9,d),l0=!1;else d0(d);_=x,_(V,A,z,m)}}function rY(V,A,z,m){function d(){if(!M.inTableScope("caption"))return!1;return M.generateImpliedEndTags(),M.popTag("caption"),r.clearToMarker(),_=kF,!0}switch(V){case 2:switch(A){case"caption":case"col":case"colgroup":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":if(d())_(V,A,z,m);return}break;case 3:switch(A){case"caption":d();return;case"table":if(d())_(V,A,z,m);return;case"body":case"col":case"colgroup":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return}break}m0(V,A,z,m)}function kB(V,A,z,m){switch(V){case 1:var d=A.match(d8);if(d)d0(d[0]),A=A.substring(d[0].length);if(A.length===0)return;break;case 4:KD(A);return;case 5:return;case 2:switch(A){case"html":m0(V,A,z,m);return;case"col":j0(A,z),M.pop();return;case"template":w1(V,A,z,m);return}break;case 3:switch(A){case"colgroup":if(!uD(M.top,"colgroup"))return;M.pop(),_=kF;return;case"col":return;case"template":w1(V,A,z,m);return}break;case-1:m0(V,A,z,m);return}if(!uD(M.top,"colgroup"))return;kB(OD,"colgroup"),_(V,A,z,m)}function B8(V,A,z,m){function d(){if(!M.inTableScope("tbody")&&!M.inTableScope("thead")&&!M.inTableScope("tfoot"))return;M.clearToContext(kJ),B8(OD,M.top.localName,null),_(V,A,z,m)}switch(V){case 2:switch(A){case"tr":M.clearToContext(kJ),j0(A,z),_=v9;return;case"th":case"td":B8(t1,"tr",null),_(V,A,z,m);return;case"caption":case"col":case"colgroup":case"tbody":case"tfoot":case"thead":d();return}break;case 3:switch(A){case"table":d();return;case"tbody":case"tfoot":case"thead":if(M.inTableScope(A))M.clearToContext(kJ),M.pop(),_=kF;return;case"body":case"caption":case"col":case"colgroup":case"html":case"td":case"th":case"tr":return}break}kF(V,A,z,m)}function v9(V,A,z,m){function d(){if(!M.inTableScope("tr"))return!1;return M.clearToContext(bw),M.pop(),_=B8,!0}switch(V){case 2:switch(A){case"th":case"td":M.clearToContext(bw),j0(A,z),_=w7,r.insertMarker();return;case"caption":case"col":case"colgroup":case"tbody":case"tfoot":case"thead":case"tr":if(d())_(V,A,z,m);return}break;case 3:switch(A){case"tr":d();return;case"table":if(d())_(V,A,z,m);return;case"tbody":case"tfoot":case"thead":if(M.inTableScope(A)){if(d())_(V,A,z,m)}return;case"body":case"caption":case"col":case"colgroup":case"html":case"td":case"th":return}break}kF(V,A,z,m)}function w7(V,A,z,m){switch(V){case 2:switch(A){case"caption":case"col":case"colgroup":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":if(M.inTableScope("td"))w7(OD,"td"),_(V,A,z,m);else if(M.inTableScope("th"))w7(OD,"th"),_(V,A,z,m);return}break;case 3:switch(A){case"td":case"th":if(!M.inTableScope(A))return;M.generateImpliedEndTags(),M.popTag(A),r.clearToMarker(),_=v9;return;case"body":case"caption":case"col":case"colgroup":case"html":return;case"table":case"tbody":case"tfoot":case"thead":case"tr":if(!M.inTableScope(A))return;w7(OD,M.inTableScope("td")?"td":"th"),_(V,A,z,m);return}break}m0(V,A,z,m)}function e2(V,A,z,m){switch(V){case 1:if(mD){if(A=A.replace(yJ,""),A.length===0)return}d0(A);return;case 4:KD(A);return;case 5:return;case-1:m0(V,A,z,m);return;case 2:switch(A){case"html":m0(V,A,z,m);return;case"option":if(M.top instanceof kD.HTMLOptionElement)e2(OD,A);j0(A,z);return;case"optgroup":if(M.top instanceof kD.HTMLOptionElement)e2(OD,"option");if(M.top instanceof kD.HTMLOptGroupElement)e2(OD,A);j0(A,z);return;case"select":e2(OD,A);return;case"input":case"keygen":case"textarea":if(!M.inSelectScope("select"))return;e2(OD,"select"),_(V,A,z,m);return;case"script":case"template":w1(V,A,z,m);return}break;case 3:switch(A){case"optgroup":if(M.top instanceof kD.HTMLOptionElement&&M.elements[M.elements.length-2]instanceof kD.HTMLOptGroupElement)e2(OD,"option");if(M.top instanceof kD.HTMLOptGroupElement)M.pop();return;case"option":if(M.top instanceof kD.HTMLOptionElement)M.pop();return;case"select":if(!M.inSelectScope(A))return;M.popTag(A),GF();return;case"template":w1(V,A,z,m);return}break}}function uB(V,A,z,m){switch(A){case"caption":case"table":case"tbody":case"tfoot":case"thead":case"tr":case"td":case"th":switch(V){case 2:uB(OD,"select"),_(V,A,z,m);return;case 3:if(M.inTableScope(A))uB(OD,"select"),_(V,A,z,m);return}}e2(V,A,z,m)}function tY(V,A,z,m){function d(K0){_=K0,o[o.length-1]=_,_(V,A,z,m)}switch(V){case 1:case 4:case 5:m0(V,A,z,m);return;case-1:if(!M.contains("template"))C2();else M.popTag("template"),r.clearToMarker(),o.pop(),GF(),_(V,A,z,m);return;case 2:switch(A){case"base":case"basefont":case"bgsound":case"link":case"meta":case"noframes":case"script":case"style":case"template":case"title":w1(V,A,z,m);return;case"caption":case"colgroup":case"tbody":case"tfoot":case"thead":d(kF);return;case"col":d(kB);return;case"tr":d(B8);return;case"td":case"th":d(v9);return}d(m0);return;case 3:switch(A){case"template":w1(V,A,z,m);return;default:return}}}function tW(V,A,z,m){switch(V){case 1:if(SJ.test(A))break;m0(V,A);return;case 4:M.elements[0]._appendChild(T0.createComment(A));return;case 5:return;case-1:C2();return;case 2:if(A==="html"){m0(V,A,z,m);return}break;case 3:if(A==="html"){if($0)return;_=HT;return}break}_=m0,_(V,A,z,m)}function sY(V,A,z,m){switch(V){case 1:if(A=A.replace(Iw,""),A.length>0)d0(A);return;case 4:KD(A);return;case 5:return;case-1:C2();return;case 2:switch(A){case"html":m0(V,A,z,m);return;case"frameset":j0(A,z);return;case"frame":j0(A,z),M.pop();return;case"noframes":w1(V,A,z,m);return}break;case 3:if(A==="frameset"){if($0&&M.top instanceof kD.HTMLHtmlElement)return;if(M.pop(),!$0&&!(M.top instanceof kD.HTMLFrameSetElement))_=GT;return}break}}function GT(V,A,z,m){switch(V){case 1:if(A=A.replace(Iw,""),A.length>0)d0(A);return;case 4:KD(A);return;case 5:return;case-1:C2();return;case 2:switch(A){case"html":m0(V,A,z,m);return;case"noframes":w1(V,A,z,m);return}break;case 3:if(A==="html"){_=ET;return}break}}function HT(V,A,z,m){switch(V){case 1:if(SJ.test(A))break;m0(V,A,z,m);return;case 4:T0._appendChild(T0.createComment(A));return;case 5:m0(V,A,z,m);return;case-1:C2();return;case 2:if(A==="html"){m0(V,A,z,m);return}break}_=m0,_(V,A,z,m)}function ET(V,A,z,m){switch(V){case 1:if(A=A.replace(Iw,""),A.length>0)m0(V,A,z,m);return;case 4:T0._appendChild(T0.createComment(A));return;case 5:m0(V,A,z,m);return;case-1:C2();return;case 2:switch(A){case"html":m0(V,A,z,m);return;case"noframes":w1(V,A,z,m);return}break}}function sW(V,A,z,m){function d(J1){for(var u1=0,uF=J1.length;u1<uF;u1++)switch(J1[u1][0]){case"color":case"face":case"size":return!0}return!1}var K0;switch(V){case 1:if(A0&&Hi.test(A))A0=!1;if(mD)A=A.replace(yJ,"\uFFFD");d0(A);return;case 4:KD(A);return;case 5:return;case 2:switch(A){case"font":if(!d(z))break;case"b":case"big":case"blockquote":case"body":case"br":case"center":case"code":case"dd":case"div":case"dl":case"dt":case"em":case"embed":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"head":case"hr":case"i":case"img":case"li":case"listing":case"menu":case"meta":case"nobr":case"ol":case"p":case"pre":case"ruby":case"s":case"small":case"span":case"strong":case"strike":case"sub":case"sup":case"table":case"tt":case"u":case"ul":case"var":if($0)break;do M.pop(),K0=M.top;while(K0.namespaceURI!==v0.HTML&&!GN(K0)&&!HN(K0));x0(V,A,z,m);return}if(K0=M.elements.length===1&&$0?F:M.top,K0.namespaceURI===v0.MATHML)KN(z);else if(K0.namespaceURI===v0.SVG)A=Ki(A),EN(z);if(Tw(z),sD(A,z,K0.namespaceURI),m){if(A==="script"&&K0.namespaceURI===v0.SVG);M.pop()}return;case 3:if(K0=M.top,A==="script"&&K0.namespaceURI===v0.SVG&&K0.localName==="script")M.pop();else{var c0=M.elements.length-1,AD=M.elements[c0];for(;;){if(AD.localName.toLowerCase()===A){M.popElement(AD);break}if(AD=M.elements[--c0],AD.namespaceURI!==v0.HTML)continue;_(V,A,z,m);break}}return}}return YD.testTokenizer=function(V,A,z,m){var d=[];switch(A){case"PCDATA state":E=GD;break;case"RCDATA state":E=xF;break;case"RAWTEXT state":E=e0;break;case"PLAINTEXT state":E=HF;break}if(z)N=z;if(x0=function(c0,AD,J1,u1){switch(Z1(),c0){case 1:if(d.length>0&&d[d.length-1][0]==="Character")d[d.length-1][1]+=AD;else d.push(["Character",AD]);break;case 4:d.push(["Comment",AD]);break;case 5:d.push(["DOCTYPE",AD,J1===void 0?null:J1,u1===void 0?null:u1,!PD]);break;case 2:var uF=Object.create(null);for(var J2=0;J2<J1.length;J2++){var J8=J1[J2];if(J8.length===1)uF[J8[0]]="";else uF[J8[0]]=J8[1]}var C6=["StartTag",AD,uF];if(u1)C6.push(!0);d.push(C6);break;case 3:d.push(["EndTag",AD]);break;case-1:break}},!m)this.parse(V,!0);else{for(var K0=0;K0<V.length;K0++)this.parse(V[K0]);this.parse("",!0)}return d},YD}});var e$=t((fY0,zN)=>{zN.exports=LN;var MN=TJ(),_N=bJ(),qi=vJ(),gJ=H1(),Vi=qJ();function LN(D){this.contextObject=D}var Ai={xml:{"":!0,"1.0":!0,"2.0":!0},core:{"":!0,"2.0":!0},html:{"":!0,"1.0":!0,"2.0":!0},xhtml:{"":!0,"1.0":!0,"2.0":!0}};LN.prototype={hasFeature:function D(F,$){var B=Ai[(F||"").toLowerCase()];return B&&B[$||""]||!1},createDocumentType:function D(F,$,B){if(!Vi.isValidQName(F))gJ.InvalidCharacterError();return new _N(this.contextObject,F,$,B)},createDocument:function D(F,$,B){var J=new MN(!1,null),Y;if($)Y=J.createElementNS(F,$);else Y=null;if(B)J.appendChild(B);if(Y)J.appendChild(Y);if(F===gJ.NAMESPACE.HTML)J._contentType="application/xhtml+xml";else if(F===gJ.NAMESPACE.SVG)J._contentType="image/svg+xml";else J._contentType="application/xml";return J},createHTMLDocument:function D(F){var $=new MN(!0,null);$.appendChild(new _N($,"html"));var B=$.createElement("html");$.appendChild(B);var J=$.createElement("head");if(B.appendChild(J),F!==void 0){var Y=$.createElement("title");J.appendChild(Y),Y.appendChild($.createTextNode(F))}return B.appendChild($.createElement("body")),$.modclock=1,$},mozSetOutputMutationHandler:function(D,F){D.mutationHandler=F},mozGetInputMutationHandler:function(D){gJ.nyi()},mozHTMLParser:qi}});var TN=t((WY0,IN)=>{var Oi=MJ(),ji=Uw();IN.exports=Sw;function Sw(D,F){this._window=D,this._href=F}Sw.prototype=Object.create(ji.prototype,{constructor:{value:Sw},href:{get:function(){return this._href},set:function(D){this.assign(D)}},assign:{value:function(D){var F=new Oi(this._href),$=F.resolve(D);this._href=$}},replace:{value:function(D){this.assign(D)}},reload:{value:function(){this.assign(this.href)}},toString:{value:function(){return this.href}}})});var bN=t((GY0,PN)=>{var Ui=Object.create(null,{appCodeName:{value:"Mozilla"},appName:{value:"Netscape"},appVersion:{value:"4.0"},platform:{value:""},product:{value:"Gecko"},productSub:{value:"20100101"},userAgent:{value:""},vendor:{value:""},vendorSub:{value:""},taintEnabled:{value:function(){return!1}}});PN.exports=Ui});var SN=t((HY0,hN)=>{var Ri={setTimeout,clearTimeout,setInterval,clearInterval};hN.exports=Ri});var xw=t((DB,yN)=>{var yw=H1();DB=yN.exports={CSSStyleDeclaration:_J(),CharacterData:i$(),Comment:Xw(),DOMException:WJ(),DOMImplementation:e$(),DOMTokenList:p3(),Document:TJ(),DocumentFragment:ww(),DocumentType:bJ(),Element:w9(),HTMLParser:vJ(),NamedNodeMap:r3(),Node:g1(),NodeList:c8(),NodeFilter:o$(),ProcessingInstruction:Ww(),Text:Jw(),Window:kw()};yw.merge(DB,jw());yw.merge(DB,zJ().elements);yw.merge(DB,Mw().elements)});var kw=t((EY0,xN)=>{var Ci=e$(),Zi=L3(),Ni=TN(),FB=H1();xN.exports=mJ;function mJ(D){this.document=D||new Ci(null).createHTMLDocument(""),this.document._scripting_enabled=!0,this.document.defaultView=this,this.location=new Ni(this,this.document._address||"about:blank")}mJ.prototype=Object.create(Zi.prototype,{console:{value:console},history:{value:{back:FB.nyi,forward:FB.nyi,go:FB.nyi}},navigator:{value:bN()},window:{get:function(){return this}},self:{get:function(){return this}},frames:{get:function(){return this}},parent:{get:function(){return this}},top:{get:function(){return this}},length:{value:0},frameElement:{value:null},opener:{value:null},onload:{get:function(){return this._getEventHandler("load")},set:function(D){this._setEventHandler("load",D)}},getComputedStyle:{value:function D(F){return F.style}}});FB.expose(SN(),mJ);FB.expose(xw(),mJ)});var mN=t((Mi)=>{var kN=e$(),uN=vJ(),KY0=kw(),vN=xw();Mi.createDOMImplementation=function(){return new kN(null)};Mi.createDocument=function(D,F){if(D||F){var $=new uN;return $.parse(D||"",!0),$.document()}return new kN(null).createHTMLDocument("")};Mi.createIncrementalHTMLParser=function(){var D=new uN;return{write:function(F){if(F.length>0)D.parse(F,!1,function(){return!0})},end:function(F){D.parse(F||"",!0,function(){return!0})},process:function(F){return D.parse("",!1,F)},document:function(){return D.document()}}};Mi.createWindow=function(D,F){var $=Mi.createDocument(D);if(F!==void 0)$._address=F;return new vN.Window($)};Mi.impl=vN});function Ti(D){for(var F=1;F<arguments.length;F++){var $=arguments[F];for(var B in $)if($.hasOwnProperty(B))D[B]=$[B]}return D}function mw(D,F){return Array(F+1).join(D)}function Pi(D){return D.replace(/^\n*/,"")}function bi(D){var F=D.length;while(F>0&&D[F-1]===`
`)F--;return D.substring(0,F)}function cw(D){return pw(D,hi)}function dN(D){return pw(D,iN)}function Si(D){return nN(D,iN)}function yi(D){return pw(D,lN)}function xi(D){return nN(D,lN)}function pw(D,F){return F.indexOf(D.nodeName)>=0}function nN(D,F){return D.getElementsByTagName&&F.some(function($){return D.getElementsByTagName($).length})}function cJ(D){return D?D.replace(/(\n+\s*)+/g,`
`):""}function oN(D){this.options=D,this._keep=[],this._remove=[],this.blankRule={replacement:D.blankReplacement},this.keepReplacement=D.keepReplacement,this.defaultRule={replacement:D.defaultReplacement},this.array=[];for(var F in D.rules)this.array.push(D.rules[F])}function uw(D,F,$){for(var B=0;B<D.length;B++){var J=D[B];if(ki(J,F,$))return J}return}function ki(D,F,$){var B=D.filter;if(typeof B==="string"){if(B===F.nodeName.toLowerCase())return!0}else if(Array.isArray(B)){if(B.indexOf(F.nodeName.toLowerCase())>-1)return!0}else if(typeof B==="function"){if(B.call(D,F,$))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function ui(D){var{element:F,isBlock:$,isVoid:B}=D,J=D.isPre||function(H){return H.nodeName==="PRE"};if(!F.firstChild||J(F))return;var Y=null,X=!1,Q=null,w=cN(Q,F,J);while(w!==F){if(w.nodeType===3||w.nodeType===4){var f=w.data.replace(/[ \r\n\t]+/g," ");if((!Y||/ $/.test(Y.data))&&!X&&f[0]===" ")f=f.substr(1);if(!f){w=vw(w);continue}w.data=f,Y=w}else if(w.nodeType===1){if($(w)||w.nodeName==="BR"){if(Y)Y.data=Y.data.replace(/ $/,"");Y=null,X=!1}else if(B(w)||J(w))Y=null,X=!0;else if(Y)X=!1}else{w=vw(w);continue}var G=cN(Q,w,J);Q=w,w=G}if(Y){if(Y.data=Y.data.replace(/ $/,""),!Y.data)vw(Y)}}function vw(D){var F=D.nextSibling||D.parentNode;return D.parentNode.removeChild(D),F}function cN(D,F,$){if(D&&D.parentNode===F||$(F))return F.nextSibling||F.parentNode;return F.firstChild||F.nextSibling||F.parentNode}function vi(){var D=rN.DOMParser,F=!1;try{if(new D().parseFromString("","text/html"))F=!0}catch($){}return F}function gi(){var D=function(){};{var F=mN();D.prototype.parseFromString=function($){return F.createDocument($)}}return D}function ci(D,F){var $;if(typeof D==="string"){var B=pi().parseFromString('<x-turndown id="turndown-root">'+D+"</x-turndown>","text/html");$=B.getElementById("turndown-root")}else $=D.cloneNode(!0);return ui({element:$,isBlock:cw,isVoid:dN,isPre:F.preformattedCode?ii:null}),$}function pi(){return gw=gw||new mi,gw}function ii(D){return D.nodeName==="PRE"||D.nodeName==="CODE"}function di(D,F){return D.isBlock=cw(D),D.isCode=D.nodeName==="CODE"||D.parentNode.isCode,D.isBlank=li(D),D.flankingWhitespace=ni(D,F),D}function li(D){return!dN(D)&&!yi(D)&&/^\s*$/i.test(D.textContent)&&!Si(D)&&!xi(D)}function ni(D,F){if(D.isBlock||F.preformattedCode&&D.isCode)return{leading:"",trailing:""};var $=oi(D.textContent);if($.leadingAscii&&pN("left",D,F))$.leading=$.leadingNonAscii;if($.trailingAscii&&pN("right",D,F))$.trailing=$.trailingNonAscii;return{leading:$.leading,trailing:$.trailing}}function oi(D){var F=D.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:F[1],leadingAscii:F[2],leadingNonAscii:F[3],trailing:F[4],trailingNonAscii:F[5],trailingAscii:F[6]}}function pN(D,F,$){var B,J,Y;if(D==="left")B=F.previousSibling,J=/ $/;else B=F.nextSibling,J=/^ /;if(B){if(B.nodeType===3)Y=J.test(B.nodeValue);else if($.preformattedCode&&B.nodeName==="CODE")Y=!1;else if(B.nodeType===1&&!cw(B))Y=J.test(B.textContent)}return Y}function pJ(D){if(!(this instanceof pJ))return new pJ(D);var F={rules:a1,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function($,B){return B.isBlock?`

`:""},keepReplacement:function($,B){return B.isBlock?`

`+B.outerHTML+`

`:B.outerHTML},defaultReplacement:function($,B){return B.isBlock?`

`+$+`

`:$}};this.options=Ti({},F,D),this.rules=new oN(this.options)}function tN(D){var F=this;return ri.call(D.childNodes,function($,B){B=new di(B,F.options);var J="";if(B.nodeType===3)J=B.isCode?B.nodeValue:F.escape(B.nodeValue);else if(B.nodeType===1)J=ai.call(F,B);return sN($,J)},"")}function si(D){var F=this;return this.rules.forEach(function($){if(typeof $.append==="function")D=sN(D,$.append(F.options))}),D.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function ai(D){var F=this.rules.forNode(D),$=tN.call(this,D),B=D.flankingWhitespace;if(B.leading||B.trailing)$=$.trim();return B.leading+F.replacement($,D,this.options)+B.trailing}function sN(D,F){var $=bi(D),B=Pi(F),J=Math.max(D.length-$.length,F.length-B.length),Y=`

`.substring(0,J);return $+Y+B}function ei(D){return D!=null&&(typeof D==="string"||D.nodeType&&(D.nodeType===1||D.nodeType===9||D.nodeType===11))}var hi,iN,lN,a1,rN,mi,gw,ri,ti,aN;var eN=k(()=>{hi=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];iN=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];lN=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];a1={};a1.paragraph={filter:"p",replacement:function(D){return`

`+D+`

`}};a1.lineBreak={filter:"br",replacement:function(D,F,$){return $.br+`
`}};a1.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(D,F,$){var B=Number(F.nodeName.charAt(1));if($.headingStyle==="setext"&&B<3){var J=mw(B===1?"=":"-",D.length);return`

`+D+`
`+J+`

`}else return`

`+mw("#",B)+" "+D+`

`}};a1.blockquote={filter:"blockquote",replacement:function(D){return D=D.replace(/^\n+|\n+$/g,""),D=D.replace(/^/gm,"> "),`

`+D+`

`}};a1.list={filter:["ul","ol"],replacement:function(D,F){var $=F.parentNode;if($.nodeName==="LI"&&$.lastElementChild===F)return`
`+D;else return`

`+D+`

`}};a1.listItem={filter:"li",replacement:function(D,F,$){D=D.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var B=$.bulletListMarker+"   ",J=F.parentNode;if(J.nodeName==="OL"){var Y=J.getAttribute("start"),X=Array.prototype.indexOf.call(J.children,F);B=(Y?Number(Y)+X:X+1)+".  "}return B+D+(F.nextSibling&&!/\n$/.test(D)?`
`:"")}};a1.indentedCodeBlock={filter:function(D,F){return F.codeBlockStyle==="indented"&&D.nodeName==="PRE"&&D.firstChild&&D.firstChild.nodeName==="CODE"},replacement:function(D,F,$){return`

    `+F.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};a1.fencedCodeBlock={filter:function(D,F){return F.codeBlockStyle==="fenced"&&D.nodeName==="PRE"&&D.firstChild&&D.firstChild.nodeName==="CODE"},replacement:function(D,F,$){var B=F.firstChild.getAttribute("class")||"",J=(B.match(/language-(\S+)/)||[null,""])[1],Y=F.firstChild.textContent,X=$.fence.charAt(0),Q=3,w=new RegExp("^"+X+"{3,}","gm"),f;while(f=w.exec(Y))if(f[0].length>=Q)Q=f[0].length+1;var G=mw(X,Q);return`

`+G+J+`
`+Y.replace(/\n$/,"")+`
`+G+`

`}};a1.horizontalRule={filter:"hr",replacement:function(D,F,$){return`

`+$.hr+`

`}};a1.inlineLink={filter:function(D,F){return F.linkStyle==="inlined"&&D.nodeName==="A"&&D.getAttribute("href")},replacement:function(D,F){var $=F.getAttribute("href");if($)$=$.replace(/([()])/g,"\\$1");var B=cJ(F.getAttribute("title"));if(B)B=' "'+B.replace(/"/g,"\\\"")+'"';return"["+D+"]("+$+B+")"}};a1.referenceLink={filter:function(D,F){return F.linkStyle==="referenced"&&D.nodeName==="A"&&D.getAttribute("href")},replacement:function(D,F,$){var B=F.getAttribute("href"),J=cJ(F.getAttribute("title"));if(J)J=' "'+J+'"';var Y,X;switch($.linkReferenceStyle){case"collapsed":Y="["+D+"][]",X="["+D+"]: "+B+J;break;case"shortcut":Y="["+D+"]",X="["+D+"]: "+B+J;break;default:var Q=this.references.length+1;Y="["+D+"]["+Q+"]",X="["+Q+"]: "+B+J}return this.references.push(X),Y},references:[],append:function(D){var F="";if(this.references.length)F=`

`+this.references.join(`
`)+`

`,this.references=[];return F}};a1.emphasis={filter:["em","i"],replacement:function(D,F,$){if(!D.trim())return"";return $.emDelimiter+D+$.emDelimiter}};a1.strong={filter:["strong","b"],replacement:function(D,F,$){if(!D.trim())return"";return $.strongDelimiter+D+$.strongDelimiter}};a1.code={filter:function(D){var F=D.previousSibling||D.nextSibling,$=D.parentNode.nodeName==="PRE"&&!F;return D.nodeName==="CODE"&&!$},replacement:function(D){if(!D)return"";D=D.replace(/\r?\n|\r/g," ");var F=/^`|^ .*?[^ ].* $|`$/.test(D)?" ":"",$="`",B=D.match(/`+/gm)||[];while(B.indexOf($)!==-1)$=$+"`";return $+F+D+F+$}};a1.image={filter:"img",replacement:function(D,F){var $=cJ(F.getAttribute("alt")),B=F.getAttribute("src")||"",J=cJ(F.getAttribute("title")),Y=J?' "'+J+'"':"";return B?"!["+$+"]("+B+Y+")":""}};oN.prototype={add:function(D,F){this.array.unshift(F)},keep:function(D){this._keep.unshift({filter:D,replacement:this.keepReplacement})},remove:function(D){this._remove.unshift({filter:D,replacement:function(){return""}})},forNode:function(D){if(D.isBlank)return this.blankRule;var F;if(F=uw(this.array,D,this.options))return F;if(F=uw(this._keep,D,this.options))return F;if(F=uw(this._remove,D,this.options))return F;return this.defaultRule},forEach:function(D){for(var F=0;F<this.array.length;F++)D(this.array[F],F)}};rN=typeof window!=="undefined"?window:{};mi=vi()?rN.DOMParser:gi();ri=Array.prototype.reduce,ti=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];pJ.prototype={turndown:function(D){if(!ei(D))throw new TypeError(D+" is not a string, or an element/document/fragment node.");if(D==="")return"";var F=tN.call(this,new ci(D,this.options));return si.call(this,F)},use:function(D){if(Array.isArray(D))for(var F=0;F<D.length;F++)this.use(D[F]);else if(typeof D==="function")D(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(D,F){return this.rules.add(D,F),this},keep:function(D){return this.rules.keep(D),this},remove:function(D){return this.rules.remove(D),this},escape:function(D){return ti.reduce(function(F,$){return F.replace($[0],$[1])},D)}};aN=pJ});var FM=`- Fetches content from a specified URL\r
- Takes a URL and a prompt as input\r
- Fetches the URL content, converts HTML to markdown\r
- Returns the model's response about the content\r
- Use this tool when you need to retrieve and analyze web content\r
\r
Usage notes:\r
  - IMPORTANT: If an MCP-provided web fetch tool is available, prefer using that tool instead of this one, as it may have fewer restrictions. MCP-provided tools are named with the pattern "servername_toolname" (e.g., "prompt-tech_compose_prompt").\r
  - The URL must be a fully-formed valid URL\r
  - HTTP URLs will be automatically upgraded to HTTPS\r
  - The prompt should describe what information you want to extract from the page\r
  - This tool is read-only and does not modify any files\r
  - Results may be summarized if the content is very large\r
  - Includes a self-cleaning 15-minute cache for faster responses when repeatedly accessing the same URL\r
`;var DM=()=>{};async function $d(D){let F="",$=!1;return await new HTMLRewriter().on("script, style, noscript, iframe, object, embed",{element(){$=!0},text(){}}).on("*",{element(J){if(!["script","style","noscript","iframe","object","embed"].includes(J.tagName))$=!1},text(J){if(!$)F+=J.text}}).transform(new Response(D)).text(),F.trim()}function Bd(D){let F=new aN({headingStyle:"atx",hr:"---",bulletListMarker:"-",codeBlockStyle:"fenced",emDelimiter:"*"});return F.remove(["script","style","meta","link"]),F.turndown(D)}var $M=5242880,Fd=30000,BM=120000,JM;var YM=k(()=>{C0();zF();eN();DM();JM=dD.define({id:"webfetch",description:FM,parameters:W.object({url:W.string().describe("The URL to fetch content from"),format:W.enum(["text","markdown","html"]).describe("The format to return the content in (text, markdown, or html)"),timeout:W.number().min(0).max(BM/1000).describe("Optional timeout in seconds (max 120)").optional()}),async execute(D,F){if(!D.url.startsWith("http://")&&!D.url.startsWith("https://"))throw new Error("URL must start with http:// or https://");let $=Math.min((D.timeout??Fd/1000)*1000,BM),B=new AbortController,J=setTimeout(()=>B.abort(),$),Y=await fetch(D.url,{signal:AbortSignal.any([B.signal,F.abort]),headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9"}});if(clearTimeout(J),!Y.ok)throw new Error(`Request failed with status code: ${Y.status}`);let X=Y.headers.get("content-length");if(X&&parseInt(X)>$M)throw new Error("Response too large (exceeds 5MB limit)");let Q=await Y.arrayBuffer();if(Q.byteLength>$M)throw new Error("Response too large (exceeds 5MB limit)");let w=new TextDecoder().decode(Q),f=Y.headers.get("content-type")||"",G=`${D.url} (${f})`;switch(D.format){case"text":if(f.includes("text/html"))return{output:await $d(w),metadata:{title:G}};return{output:w,metadata:{title:G}};case"markdown":if(f.includes("text/html"))return{output:Bd(w),metadata:{title:G}};return{output:"```\n"+w+"\n```",metadata:{title:G}};case"html":return{output:w,metadata:{title:G}};default:return{output:w,metadata:{title:G}}}}})});var QM=`- Fast file pattern matching tool that works with any codebase size\r
- Supports glob patterns like "**/*.js" or "src/**/*.ts"\r
- Returns matching file paths sorted by modification time\r
- Use this tool when you need to find files by name patterns\r
- When you are doing an open ended search that may require multiple rounds of globbing and grepping, use the Agent tool instead\r
- You have the capability to call multiple tools in a single response. It is always better to speculatively perform multiple searches as a batch that are potentially useful.\r
`;var XM=()=>{};import iJ from"path";var wM;var fM=k(async()=>{C0();zF();await MD();XM();await u8();wM=dD.define({id:"glob",description:QM,parameters:W.object({pattern:W.string().describe("The glob pattern to match files against"),path:W.string().optional().describe('The directory to search in. If not specified, the current working directory will be used. IMPORTANT: Omit this field to use the default directory. DO NOT enter "undefined" or "null" - simply omit it for the default behavior. Must be a valid directory path if provided.')}),async execute(D){let F=w0.info(),$=D.path??F.path.cwd;$=iJ.isAbsolute($)?$:iJ.resolve(F.path.cwd,$);let B=100,J=[],Y=!1;for(let Q of await o1.files({cwd:$,glob:D.pattern})){if(J.length>=B){Y=!0;break}let w=iJ.resolve($,Q),f=await Bun.file(w).stat().then((G)=>G.mtime.getTime()).catch(()=>0);J.push({path:w,mtime:f})}J.sort((Q,w)=>w.mtime-Q.mtime);let X=[];if(J.length===0)X.push("No files found");if(J.length>0){if(X.push(...J.map((Q)=>Q.path)),Y)X.push(""),X.push("(Results are truncated. Consider using a more specific path or pattern.)")}return{metadata:{count:J.length,truncated:Y,title:iJ.relative(F.path.root,$)},output:X.join(`
`)}}})});var GM=`- Fast content search tool that works with any codebase size\r
- Searches file contents using regular expressions\r
- Supports full regex syntax (eg. "log.*Error", "function\\s+\\w+", etc.)\r
- Filter files by pattern with the include parameter (eg. "*.js", "*.{ts,tsx}")\r
- Returns file paths with at least one match sorted by modification time\r
- Use this tool when you need to find files containing specific patterns\r
- If you need to identify/count the number of matches within files, use the Bash tool with \`rg\` (ripgrep) directly. Do NOT use \`grep\`.\r
- When you are doing an open ended search that may require multiple rounds of globbing and grepping, use the Agent tool instead\r
`;var WM=()=>{};var HM;var EM=k(async()=>{C0();zF();await MD();await u8();WM();HM=dD.define({id:"grep",description:GM,parameters:W.object({pattern:W.string().describe("The regex pattern to search for in file contents"),path:W.string().optional().describe("The directory to search in. Defaults to the current working directory."),include:W.string().optional().describe('File pattern to include in the search (e.g. "*.js", "*.{ts,tsx}")')}),async execute(D){if(!D.pattern)throw new Error("pattern is required");let F=w0.info(),$=D.path||F.path.cwd,B=await o1.filepath(),J=["-n",D.pattern];if(D.include)J.push("--glob",D.include);J.push($);let Y=Bun.spawn([B,...J],{stdout:"pipe",stderr:"pipe"}),X=await new Response(Y.stdout).text(),Q=await new Response(Y.stderr).text(),w=await Y.exited;if(w===1)return{metadata:{matches:0,truncated:!1,title:D.pattern},output:"No files found"};if(w!==0)throw new Error(`ripgrep failed: ${Q}`);let f=X.trim().split(`
`),G=[];for(let U of f){if(!U)continue;let N=U.split(":",3);if(N.length<3)continue;let L=N[0],C=parseInt(N[1],10),R=N[2],h=await Bun.file(L).stat().catch(()=>null);if(!h)continue;G.push({path:L,modTime:h.mtime.getTime(),lineNum:C,lineText:R})}G.sort((U,N)=>N.modTime-U.modTime);let H=100,K=G.length>H,E=K?G.slice(0,H):G;if(E.length===0)return{metadata:{matches:0,truncated:!1,title:D.pattern},output:"No files found"};let O=[`Found ${E.length} matches`],q="";for(let U of E){if(q!==U.path){if(q!=="")O.push("");q=U.path,O.push(`${U.path}:`)}O.push(`  Line ${U.lineNum}: ${U.lineText}`)}if(K)O.push(""),O.push("(Results are truncated. Consider using a more specific path or pattern.)");return{metadata:{matches:E.length,truncated:K,title:D.pattern},output:O.join(`
`)}}})});var qM=`Lists files and directories in a given path. The path parameter must be an absolute path, not a relative path. You can optionally provide an array of glob patterns to ignore with the ignore parameter. You should generally prefer the Glob and Grep tools, if you know which directories to search.\r
`;var KM=()=>{};import*as u2 from"path";var Qd,VM=100,AM;var OM=k(async()=>{C0();zF();await MD();KM();Qd=["node_modules/","__pycache__/",".git/","dist/","build/","target/","vendor/","bin/","obj/",".idea/",".vscode/"],AM=dD.define({id:"list",description:qM,parameters:W.object({path:W.string().describe("The absolute path to the directory to list (must be absolute, not relative)").optional(),ignore:W.array(W.string()).describe("List of glob patterns to ignore").optional()}),async execute(D){let F=w0.info(),$=u2.resolve(F.path.cwd,D.path||"."),B=new Bun.Glob("**/*"),J=[];for await(let f of B.scan({cwd:$,dot:!0})){if(Qd.some((G)=>f.includes(G)))continue;if(D.ignore?.some((G)=>new Bun.Glob(G).match(f)))continue;if(J.push(f),J.length>=VM)break}let Y=new Set,X=new Map;for(let f of J){let G=u2.dirname(f),H=G==="."?[]:G.split("/");for(let K=0;K<=H.length;K++){let E=K===0?".":H.slice(0,K).join("/");Y.add(E)}if(!X.has(G))X.set(G,[]);X.get(G).push(u2.basename(f))}function Q(f,G){let H="  ".repeat(G),K="";if(G>0)K+=`${H}${u2.basename(f)}/
`;let E="  ".repeat(G+1),O=Array.from(Y).filter((U)=>u2.dirname(U)===f&&U!==f).sort();for(let U of O)K+=Q(U,G+1);let q=X.get(f)||[];for(let U of q.sort())K+=`${E}${U}
`;return K}let w=`${$}/
`+Q(".",0);return{metadata:{count:J.length,truncated:J.length>=VM,title:u2.relative(F.path.root,$)},output:w}}})});var UM=`do not use\r
`;var jM=()=>{};import*as e1 from"path";import*as O2 from"fs/promises";function Wd(D){let F=[],$=D.split(`
`);for(let B of $)if(B.startsWith("*** Update File:")||B.startsWith("*** Delete File:")){let J=B.split(":",2)[1]?.trim();if(J)F.push(J)}return F}function Gd(D){let F=[],$=D.split(`
`);for(let B of $)if(B.startsWith("*** Add File:")){let J=B.split(":",2)[1]?.trim();if(J)F.push(J)}return F}function Hd(D,F){let $=[],B=D.split(`
`),J=0,Y=0;while(J<B.length){let X=B[J];if(X.startsWith("*** Update File:")){let Q=X.split(":",2)[1]?.trim();if(!Q){J++;continue}let w=[];J++;while(J<B.length&&!B[J].startsWith("***"))if(B[J].startsWith("@@")){let f=B[J].substring(2).trim(),G=[];J++;while(J<B.length&&!B[J].startsWith("@@")&&!B[J].startsWith("***")){let H=B[J];if(H.startsWith(" "))G.push({type:"keep",content:H.substring(1)});else if(H.startsWith("-"))G.push({type:"remove",content:H.substring(1)});else if(H.startsWith("+"))G.push({type:"add",content:H.substring(1)});J++}w.push({contextLine:f,changes:G})}else J++;$.push({type:"update",filePath:Q,hunks:w})}else if(X.startsWith("*** Add File:")){let Q=X.split(":",2)[1]?.trim();if(!Q){J++;continue}let w="";J++;while(J<B.length&&!B[J].startsWith("***")){if(B[J].startsWith("+"))w+=B[J].substring(1)+`
`;J++}$.push({type:"add",filePath:Q,content:w.slice(0,-1)})}else if(X.startsWith("*** Delete File:")){let Q=X.split(":",2)[1]?.trim();if(Q)$.push({type:"delete",filePath:Q});J++}else J++}return[$,Y]}function Ed(D,F){let $={};for(let B of D)if(B.type==="delete")$[B.filePath]={type:"delete",old_content:F[B.filePath]||""};else if(B.type==="add")$[B.filePath]={type:"add",new_content:B.content||""};else if(B.type==="update"&&B.hunks){let J=F[B.filePath]||"",Y=J.split(`
`);for(let X of B.hunks){let Q=Y.findIndex((f)=>f.includes(X.contextLine));if(Q===-1)throw new Error(`Context line not found: ${X.contextLine}`);let w=Q;for(let f of X.changes)if(f.type==="keep")w++;else if(f.type==="remove")Y.splice(w,1);else if(f.type==="add")Y.splice(w,0,f.content),w++}$[B.filePath]={type:"update",old_content:J,new_content:Y.join(`
`)}}return{changes:$}}function Kd(D,F,$){let B=D.split(`
`),J=F.split(`
`),Y=Math.max(0,J.length-B.length),X=Math.max(0,B.length-J.length);return[`--- ${$}
+++ ${$}
`,Y,X]}async function qd(D,F,$){for(let[B,J]of Object.entries(D.changes))if(J.type==="delete")await $(B);else if(J.new_content!==void 0)await F(B,J.new_content)}var fd,RM;var CM=k(async()=>{C0();zF();await y$();jM();fd=W.object({patchText:W.string().describe("The full patch text that describes all changes to be made")});RM=dD.define({id:"patch",description:UM,parameters:fd,execute:async(D,F)=>{let $=Wd(D.patchText);for(let E of $){let O=E;if(!e1.isAbsolute(O))O=e1.resolve(process.cwd(),O);await sF.assert(F.sessionID,O);try{if((await O2.stat(O)).isDirectory())throw new Error(`path is a directory, not a file: ${O}`)}catch(q){if(q.code==="ENOENT")throw new Error(`file not found: ${O}`);throw new Error(`failed to access file: ${q.message}`)}}let B=Gd(D.patchText);for(let E of B){let O=E;if(!e1.isAbsolute(O))O=e1.resolve(process.cwd(),O);try{throw await O2.stat(O),new Error(`file already exists and cannot be added: ${O}`)}catch(q){if(q.code!=="ENOENT")throw new Error(`failed to check file: ${q.message}`)}}let J={};for(let E of $){let O=E;if(!e1.isAbsolute(O))O=e1.resolve(process.cwd(),O);try{let q=await O2.readFile(O,"utf-8");J[E]=q}catch(q){throw new Error(`failed to read file ${O}: ${q.message}`)}}let[Y,X]=Hd(D.patchText,J);if(X>3)throw new Error(`patch contains fuzzy matches (fuzz level: ${X}). Please make your context lines more precise`);let Q=Ed(Y,J);await qd(Q,async(E,O)=>{let q=E;if(!e1.isAbsolute(q))q=e1.resolve(process.cwd(),q);let U=e1.dirname(q);await O2.mkdir(U,{recursive:!0}),await O2.writeFile(q,O,"utf-8")},async(E)=>{let O=E;if(!e1.isAbsolute(O))O=e1.resolve(process.cwd(),O);await O2.unlink(O)});let w=[],f=0,G=0;for(let[E,O]of Object.entries(Q.changes)){let q=E;if(!e1.isAbsolute(q))q=e1.resolve(process.cwd(),q);w.push(q);let U=O.old_content||"",N=O.new_content||"",[,L,C]=Kd(U,N,E);f+=L,G+=C,sF.read(F.sessionID,q)}let K=`Patch applied successfully. ${w.length} files changed, ${f} additions, ${G} removals`;return{metadata:{changed:w,additions:f,removals:G,title:`${$.length} files`},output:K}}})});var NM=`Reads a file from the local filesystem. You can access any file directly by using this tool.\r
Assume this tool is able to read all files on the machine. If the User provides a path to a file assume that path is valid. It is okay to read a file that does not exist; an error will be returned.\r
\r
Usage:\r
- The file_path parameter must be an absolute path, not a relative path\r
- By default, it reads up to 2000 lines starting from the beginning of the file\r
- You can optionally specify a line offset and limit (especially handy for long files), but it's recommended to read the whole file by not providing these parameters\r
- Any lines longer than 2000 characters will be truncated\r
- Results are returned using cat -n format, with line numbers starting at 1\r
- This tool allows OpenCode to read images (eg PNG, JPG, etc). When reading an image file the contents are presented visually as OpenCode is a multimodal LLM.\r
- You have the capability to call multiple tools in a single response. It is always better to speculatively read multiple files as a batch that are potentially useful. \r
- You will regularly be asked to read screenshots. If the user provides a path to a screenshot ALWAYS use this tool to view the file at the path. This tool will work with all temporary file paths like /var/folders/123/abc/T/TemporaryItems/NSIRD_screencaptureui_ZfB1tD/Screenshot.png\r
- If you read a file that exists but has empty contents you will receive a system reminder warning in place of file contents.\r
`;var ZM=()=>{};import*as LM from"fs";import*as OF from"path";function Od(D){switch(OF.extname(D).toLowerCase()){case".jpg":case".jpeg":return"JPEG";case".png":return"PNG";case".gif":return"GIF";case".bmp":return"BMP";case".svg":return"SVG";case".webp":return"WebP";default:return!1}}var MM=256000,Ad=2000,_M=2000,zM;var IM=k(async()=>{C0();zF();await r7();await y$();ZM();await MD();zM=dD.define({id:"read",description:NM,parameters:W.object({filePath:W.string().describe("The path to the file to read"),offset:W.number().describe("The line number to start reading from (0-based)").optional(),limit:W.number().describe("The number of lines to read (defaults to 2000)").optional()}),async execute(D,F){let $=D.filePath,B=$.match(/^([A-Za-z]):\\(.*)/);if(B){let O=B[1].toLowerCase(),q=B[2].replace(/\\/g,"/");$=`/mnt/${O}/${q}`}if(!OF.isAbsolute($))$=OF.join(process.cwd(),$);let J=Bun.file($);if(!await J.exists()){let O=OF.dirname($),q=OF.basename($),N=LM.readdirSync(O).filter((L)=>L.toLowerCase().includes(q.toLowerCase())||q.toLowerCase().includes(L.toLowerCase())).map((L)=>OF.join(O,L)).slice(0,3);if(N.length>0)throw new Error(`File not found: ${$}

Did you mean one of these?
${N.join(`
`)}`);throw new Error(`File not found: ${$}`)}let Y=await J.stat();if(Y.size>MM)throw new Error(`File is too large (${Y.size} bytes). Maximum size is ${MM} bytes`);let X=D.limit??Ad,Q=D.offset||0,w=Od($);if(w)return{output:`<image_file>
Type: ${w}
Path: ${$}
Size: ${Y.size} bytes
Status: Image loaded successfully. The visual content has been processed and is available for analysis.
</image_file>`,metadata:{preview:`${w} image file (${Y.size} bytes)`,title:OF.relative(w0.info().path.root,$)}};let f=await J.text().then((O)=>O.split(`
`)),G=f.slice(Q,Q+X).map((O)=>{return O.length>_M?O.substring(0,_M)+"...":O}),H=G.map((O,q)=>{return`${(q+Q+1).toString().padStart(5,"0")}| ${O}`}),K=G.slice(0,20).join(`
`),E=`<file>
`;if(E+=H.join(`
`),f.length>Q+H.length)E+=`

(File has more lines. Use 'offset' parameter to read beyond line ${Q+H.length})`;return E+=`
</file>`,await j1.touchFile($,!1),sF.read(F.sessionID,$),{output:E,metadata:{preview:K,title:OF.relative(w0.info().path.root,$)}}}})});var PM=`Writes a file to the local filesystem.\r
\r
Usage:\r
- This tool will overwrite the existing file if there is one at the provided path.\r
- If this is an existing file, you MUST use the Read tool first to read the file's contents. This tool will fail if you did not read the file first.\r
- ALWAYS prefer editing existing files in the codebase. NEVER write new files unless explicitly required.\r
- NEVER proactively create documentation files (*.md) or README files. Only create documentation files if explicitly requested by the User.\r
- Only use emojis if the user explicitly requests it. Avoid writing emojis to files unless asked.\r
`;var TM=()=>{};import*as V9 from"path";var bM;var hM=k(async()=>{C0();zF();await r7();await C3();TM();await MD();await eD();await e7();await y$();bM=dD.define({id:"write",description:PM,parameters:W.object({filePath:W.string().describe("The absolute path to the file to write (must be absolute, not relative)"),content:W.string().describe("The content to write to the file")}),async execute(D,F){let $=w0.info(),B=V9.isAbsolute(D.filePath)?D.filePath:V9.join($.path.cwd,D.filePath),Y=await Bun.file(B).exists();if(Y)await sF.assert(F.sessionID,B);await S$.ask({id:"write",sessionID:F.sessionID,title:Y?"Overwrite this file: "+B:"Create new file: "+B,metadata:{filePath:B,content:D.content,exists:Y}}),await Bun.write(B,D.content),await F0.publish(tF.Event.Edited,{file:B}),sF.read(F.sessionID,B);let X="";await j1.touchFile(B,!0);let Q=await j1.diagnostics();for(let[w,f]of Object.entries(Q)){if(f.length===0)continue;if(w===B){X+=`
This file has errors, please fix
<file_diagnostics>
${f.map(j1.Diagnostic.pretty).join(`
`)}
</file_diagnostics>
`;continue}X+=`
<project_diagnostics>
${w}
${f.map(j1.Diagnostic.pretty).join(`
`)}
</project_diagnostics>
`}return{metadata:{diagnostics:Q,filepath:B,exists:Y,title:V9.relative($.path.root,B)},output:X}}})});var yM=`Use this tool to create and manage a structured task list for your current coding session. This helps you track progress, organize complex tasks, and demonstrate thoroughness to the user.\r
It also helps the user understand the progress of the task and overall progress of their requests.\r
\r
## When to Use This Tool\r
Use this tool proactively in these scenarios:\r
\r
1. Complex multi-step tasks - When a task requires 3 or more distinct steps or actions\r
2. Non-trivial and complex tasks - Tasks that require careful planning or multiple operations\r
3. User explicitly requests todo list - When the user directly asks you to use the todo list\r
4. User provides multiple tasks - When users provide a list of things to be done (numbered or comma-separated)\r
5. After receiving new instructions - Immediately capture user requirements as todos. Feel free to edit the todo list based on new information.\r
6. After completing a task - Mark it complete and add any new follow-up tasks\r
7. When you start working on a new task, mark the todo as in_progress. Ideally you should only have one todo as in_progress at a time. Complete existing tasks before starting new ones.\r
\r
## When NOT to Use This Tool\r
\r
Skip using this tool when:\r
1. There is only a single, straightforward task\r
2. The task is trivial and tracking it provides no organizational benefit\r
3. The task can be completed in less than 3 trivial steps\r
4. The task is purely conversational or informational\r
\r
NOTE that you should not use this tool if there is only one trivial task to do. In this case you are better off just doing the task directly.\r
\r
## Examples of When to Use the Todo List\r
\r
<example>\r
User: I want to add a dark mode toggle to the application settings. Make sure you run the tests and build when you're done!\r
Assistant: I'll help add a dark mode toggle to your application settings. Let me create a todo list to track this implementation.\r
*Creates todo list with the following items:*\r
1. Create dark mode toggle component in Settings page\r
2. Add dark mode state management (context/store)\r
3. Implement CSS-in-JS styles for dark theme\r
4. Update existing components to support theme switching\r
5. Run tests and build process, addressing any failures or errors that occur\r
*Begins working on the first task*\r
\r
<reasoning>\r
The assistant used the todo list because:\r
1. Adding dark mode is a multi-step feature requiring UI, state management, and styling changes\r
2. The user explicitly requested tests and build be run afterward\r
3. The assistant inferred that tests and build need to pass by adding "Ensure tests and build succeed" as the final task\r
</reasoning>\r
</example>\r
\r
<example>\r
User: Help me rename the function getCwd to getCurrentWorkingDirectory across my project\r
Assistant: Let me first search through your codebase to find all occurrences of 'getCwd'.\r
*Uses grep or search tools to locate all instances of getCwd in the codebase*\r
Assistant: I've found 15 instances of 'getCwd' across 8 different files. Let me create a todo list to track these changes.\r
*Creates todo list with specific items for each file that needs updating*\r
\r
<reasoning>\r
The assistant used the todo list because:\r
1. First, the assistant searched to understand the scope of the task\r
2. Upon finding multiple occurrences across different files, it determined this was a complex task with multiple steps\r
3. The todo list helps ensure every instance is tracked and updated systematically\r
4. This approach prevents missing any occurrences and maintains code consistency\r
</reasoning>\r
</example>\r
\r
\r
<example>\r
User: I need to implement these features for my e-commerce site: user registration, product catalog, shopping cart, and checkout flow.\r
Assistant: I'll help implement these features. First, let's add all the features to the todo list.\r
*Creates a todo list breaking down each feature into specific tasks based on the project architecture*\r
Assistant: Let's start with user registration. This will involve creating database models, API endpoints, and frontend forms that integrate with your existing authentication system.\r
\r
<reasoning>\r
The assistant used the todo list because:\r
1. The user provided multiple complex features to implement in a comma separated list\r
2. The todo list helps organize these large features into manageable tasks\r
3. This approach allows for tracking progress across the entire implementation\r
</reasoning>\r
</example>\r
\r
<example>\r
User: Can you help optimize my React application? It's rendering slowly and has performance issues.</user>\r
Assistant: I'll help optimize your React application. First, let me examine your codebase to identify potential performance bottlenecks.\r
*Reviews component structure, render patterns, state management, and data fetching*\r
Assistant: After analyzing your codebase, I've identified several performance issues. Let me create a todo list to track our optimization efforts.\r
*Creates todo list with items like: 1) Implement memoization for expensive calculations in ProductList, 2) Add virtualization for long lists in Dashboard, 3) Optimize image loading in Gallery component, 4) Fix state update loops in ShoppingCart, 5) Review bundle size and implement code splitting*\r
Let's start by implementing memoization for the expensive calculations in your ProductList component.</assistant>\r
\r
<reasoning>\r
The assistant used the todo list because:\r
1. First, the assistant examined the codebase to identify specific performance issues\r
2. Based on this analysis, it identified multiple optimization opportunities\r
3. Performance optimization is a non-trivial task requiring multiple steps\r
4. The todo list helps methodically track improvements across different components\r
5. This systematic approach ensures all performance bottlenecks are addressed\r
</reasoning>\r
</example>\r
\r
## Examples of When NOT to Use the Todo List\r
\r
<example>\r
User: How do I print 'Hello World' in Python?\r
Assistant: In Python, you can print "Hello World" with this simple code:\r
\r
python\r
print("Hello World")\r
\r
This will output the text "Hello World" to the console when executed.</assistant>\r
\r
<reasoning>\r
The assistant did not use the todo list because this is a single, trivial task that can be completed in one step. There's no need to track multiple tasks or steps for such a straightforward request.\r
</reasoning>\r
</example>\r
\r
<example>\r
User: What does the git status command do?\r
Assistant: The git status command shows the current state of your working directory and staging area. It displays which changes have been staged, which haven't, and which files aren't being tracked by Git. This is a fundamental command for understanding the current state of your repository before making commits.\r
\r
<reasoning>\r
The assistant did not use the todo list because this is an informational request with no actual coding task to complete. The user is simply asking for an explanation, not for the assistant to perform multiple steps or tasks.\r
</reasoning>\r
</example>\r
\r
<example>\r
User: Can you add a comment to the calculateTotal function to explain what it does?\r
Assistant: Sure, let me add a comment to the calculateTotal function to explain what it does.\r
* Uses the Edit tool to add a comment to the calculateTotal function *\r
\r
<reasoning>\r
The assistant did not use the todo list because this is a single, straightforward task confined to one location in the code. Adding a comment doesn't require tracking multiple steps or systematic organization.\r
</reasoning>\r
</example>\r
\r
<example>\r
User: Run npm install for me and tell me what happens.\r
Assistant: I'll run the npm install command for you.\r
\r
*Executes: npm install*\r
\r
The command completed successfully. Here's the output:\r
[Output of npm install command]\r
\r
All dependencies have been installed according to your package.json file.\r
\r
<reasoning>\r
The assistant did not use the todo list because this is a single command execution with immediate results. There are no multiple steps to track or organize, making the todo list unnecessary for this straightforward task.\r
</reasoning>\r
</example>\r
\r
## Task States and Management\r
\r
1. **Task States**: Use these states to track progress:\r
   - pending: Task not yet started\r
   - in_progress: Currently working on (limit to ONE task at a time)\r
   - completed: Task finished successfully\r
   - cancelled: Task no longer needed\r
\r
2. **Task Management**:\r
   - Update task status in real-time as you work\r
   - Mark tasks complete IMMEDIATELY after finishing (don't batch completions)\r
   - Only have ONE task in_progress at any time\r
   - Complete current tasks before starting new ones\r
   - Cancel tasks that become irrelevant\r
\r
3. **Task Breakdown**:\r
   - Create specific, actionable items\r
   - Break complex tasks into smaller, manageable steps\r
   - Use clear, descriptive task names\r
\r
When in doubt, use this tool. Being proactive with task management demonstrates attentiveness and ensures you complete all requirements successfully.\r
\r
`;var SM=()=>{};var Rd,xM,kM,uM;var vM=k(async()=>{C0();zF();SM();await MD();Rd=W.object({content:W.string().min(1).describe("Brief description of the task"),status:W.enum(["pending","in_progress","completed"]).describe("Current status of the task"),priority:W.enum(["high","medium","low"]).describe("Priority level of the task"),id:W.string().describe("Unique identifier for the todo item")}),xM=w0.state("todo-tool",()=>{return{}}),kM=dD.define({id:"todowrite",description:yM,parameters:W.object({todos:W.array(Rd).describe("The updated todo list")}),async execute(D,F){let $=xM();return $[F.sessionID]=D.todos,{output:JSON.stringify(D.todos,null,2),metadata:{title:`${D.todos.filter((B)=>B.status!=="completed").length} todos`,todos:D.todos}}}}),uM=dD.define({id:"todoread",description:"Use this tool to read your todo list",parameters:W.object({}),async execute(D,F){let $=xM()[F.sessionID]??[];return{metadata:{todos:$,title:`${$.filter((B)=>B.status!=="completed").length} todos`},output:JSON.stringify($,null,2)}}})});var gM,mM;var cM=k(()=>{gM=new TextEncoder,mM=new TextDecoder});var Cd=(D)=>{let F=D;if(typeof F==="string")F=gM.encode(F);let $=32768,B=[];for(let J=0;J<F.length;J+=$)B.push(String.fromCharCode.apply(null,F.subarray(J,J+$)));return btoa(B.join(""))},pM=(D)=>{return Cd(D).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},Zd=(D)=>{let F=atob(D),$=new Uint8Array(F.length);for(let B=0;B<F.length;B++)$[B]=F.charCodeAt(B);return $},iM=(D)=>{let F=D;if(F instanceof Uint8Array)F=mM.decode(F);F=F.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Zd(F)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};var dM=k(()=>{cM()});var DF,lM,nM,oM,rM,tM,sM,aM,eM,D_,F_,$_,B_,J_,Y_;var X_=k(()=>{DF=class DF extends Error{constructor(D,F){super(D,F);this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}};DF.code="ERR_JOSE_GENERIC";lM=class lM extends DF{constructor(D,F,$="unspecified",B="unspecified"){super(D,{cause:{claim:$,reason:B,payload:F}});this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=$,this.reason=B,this.payload=F}};lM.code="ERR_JWT_CLAIM_VALIDATION_FAILED";nM=class nM extends DF{constructor(D,F,$="unspecified",B="unspecified"){super(D,{cause:{claim:$,reason:B,payload:F}});this.code="ERR_JWT_EXPIRED",this.claim=$,this.reason=B,this.payload=F}};nM.code="ERR_JWT_EXPIRED";oM=class oM extends DF{constructor(){super(...arguments);this.code="ERR_JOSE_ALG_NOT_ALLOWED"}};oM.code="ERR_JOSE_ALG_NOT_ALLOWED";rM=class rM extends DF{constructor(){super(...arguments);this.code="ERR_JOSE_NOT_SUPPORTED"}};rM.code="ERR_JOSE_NOT_SUPPORTED";tM=class tM extends DF{constructor(D="decryption operation failed",F){super(D,F);this.code="ERR_JWE_DECRYPTION_FAILED"}};tM.code="ERR_JWE_DECRYPTION_FAILED";sM=class sM extends DF{constructor(){super(...arguments);this.code="ERR_JWE_INVALID"}};sM.code="ERR_JWE_INVALID";aM=class aM extends DF{constructor(){super(...arguments);this.code="ERR_JWS_INVALID"}};aM.code="ERR_JWS_INVALID";eM=class eM extends DF{constructor(){super(...arguments);this.code="ERR_JWT_INVALID"}};eM.code="ERR_JWT_INVALID";D_=class D_ extends DF{constructor(){super(...arguments);this.code="ERR_JWK_INVALID"}};D_.code="ERR_JWK_INVALID";F_=class F_ extends DF{constructor(){super(...arguments);this.code="ERR_JWKS_INVALID"}};F_.code="ERR_JWKS_INVALID";$_=class $_ extends DF{constructor(D="no applicable key found in the JSON Web Key Set",F){super(D,F);this.code="ERR_JWKS_NO_MATCHING_KEY"}};$_.code="ERR_JWKS_NO_MATCHING_KEY";B_=class B_ extends DF{constructor(D="multiple matching keys found in the JSON Web Key Set",F){super(D,F);this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}};B_.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";J_=class J_ extends DF{constructor(D="request timed out",F){super(D,F);this.code="ERR_JWKS_TIMEOUT"}};J_.code="ERR_JWKS_TIMEOUT";Y_=class Y_ extends DF{constructor(D="signature verification failed",F){super(D,F);this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}};Y_.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"});var $B={};vF($B,{encode:()=>_d,decode:()=>Ld});var _d,Ld;var Q_=k(()=>{dM();_d=pM,Ld=iM});var w_=k(()=>{X_();Q_()});function zd(D){let F=new Uint8Array(D);return crypto.getRandomValues(F),$B.encode(F)}async function Id(D,F){if(F==="plain")return D;let B=new TextEncoder().encode(D),J=await crypto.subtle.digest("SHA-256",B);return $B.encode(new Uint8Array(J))}async function f_(D=64){if(D<43||D>128)throw new Error("Code verifier length must be between 43 and 128 characters");let F=zd(D),$=await Id(F,"S256");return{verifier:F,challenge:$,method:"S256"}}var W_=k(()=>{w_()});import Td from"path";import G_ from"fs/promises";var FF;var dJ=k(async()=>{await d1();C0();((i6)=>{i6.Oauth=W.object({type:W.literal("oauth"),refresh:W.string(),access:W.string(),expires:W.number()}),i6.Api=W.object({type:W.literal("api"),key:W.string()}),i6.Info=W.discriminatedUnion("type",[i6.Oauth,i6.Api]);let B=Td.join(P0.Path.data,"auth.json");async function J(w){return Bun.file(B).json().catch(()=>({})).then((G)=>G[w])}i6.get=J;async function Y(){return Bun.file(B).json().catch(()=>({}))}i6.all=Y;async function X(w,f){let G=Bun.file(B),H=await Y();await Bun.write(G,JSON.stringify({...H,[w]:f},null,2)),await G_.chmod(G.name,384)}i6.set=X;async function Q(w){let f=Bun.file(B),G=await Y();delete G[w],await Bun.write(f,JSON.stringify(G,null,2)),await G_.chmod(f.name,384)}i6.remove=Q})(FF||={})});var H_={};vF(H_,{AuthAnthropic:()=>K6});var K6;var lJ=k(async()=>{W_();await dJ();((hX0)=>{async function F(){let Y=await f_(),X=new URL("https://claude.ai/oauth/authorize",import.meta.url);return X.searchParams.set("code","true"),X.searchParams.set("client_id","9d1c250a-e61b-44d9-88ed-5944d1962f5e"),X.searchParams.set("response_type","code"),X.searchParams.set("redirect_uri","https://console.anthropic.com/oauth/code/callback"),X.searchParams.set("scope","org:create_api_key user:profile user:inference"),X.searchParams.set("code_challenge",Y.challenge),X.searchParams.set("code_challenge_method","S256"),X.searchParams.set("state",Y.verifier),{url:X.toString(),verifier:Y.verifier}}hX0.authorize=F;async function $(Y,X){let Q=Y.split("#"),w=await fetch("https://console.anthropic.com/v1/oauth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:Q[0],state:Q[1],grant_type:"authorization_code",client_id:"9d1c250a-e61b-44d9-88ed-5944d1962f5e",redirect_uri:"https://console.anthropic.com/oauth/code/callback",code_verifier:X})});if(!w.ok)throw new J;let f=await w.json();await FF.set("anthropic",{type:"oauth",refresh:f.refresh_token,access:f.access_token,expires:Date.now()+f.expires_in*1000})}hX0.exchange=$;async function B(){let Y=await FF.get("anthropic");if(!Y||Y.type!=="oauth")return;if(Y.access&&Y.expires>Date.now())return Y.access;let X=await fetch("https://console.anthropic.com/v1/oauth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({grant_type:"refresh_token",refresh_token:Y.refresh,client_id:"9d1c250a-e61b-44d9-88ed-5944d1962f5e"})});if(!X.ok)return;let Q=await X.json();return await FF.set("anthropic",{type:"oauth",refresh:Q.refresh_token,access:Q.access_token,expires:Date.now()+Q.expires_in*1000}),Q.access_token}hX0.access=B;class J extends Error{constructor(){super("Exchange failed")}}hX0.ExchangeFailed=J})(K6||={})});import Pd from"path";var nJ;var iw=k(async()=>{await d1();nJ=x6(async()=>{let D=Bun.file(Pd.join(P0.Path.state,"plugin","copilot.ts")),F=fetch("https://raw.githubusercontent.com/sst/opencode-github-copilot/refs/heads/main/auth.ts").then((B)=>Bun.write(D,B)).catch(()=>{});if(!D.exists()){if(!await F)return}let $=await import(D.name).catch(()=>{});if(!$)return;return $.AuthCopilot})});var DD;var A9=k(()=>{((n8)=>{let D=process.env.OPENCODE_DEBUG==="true",F=process.env.OPENCODE_ENV||"production";n8.isEnabled=D||F==="development";function B(...w){if(n8.isEnabled)console.log(...w)}n8.log=B;function J(...w){if(n8.isEnabled)console.error(...w)}n8.error=J;function Y(...w){if(n8.isEnabled)console.warn(...w)}n8.warn=Y;function X(...w){if(n8.isEnabled)console.info(...w)}n8.info=X;function Q(...w){if(n8.isEnabled)console.debug(...w)}n8.debug=Q})(DD||={})});var rJ={};vF(rJ,{Storage:()=>jD});import o8 from"path";import oJ from"fs/promises";var jD;var v2=k(async()=>{await xD();await MD();await eD();C0();((dw)=>{let D=Z0.create({service:"storage"});function F(G){if(G=G.replace(/\/+/g,"/"),G.startsWith("/"))G=G.substring(1);if(G.endsWith("/")&&!G.includes(".json"))G=G.slice(0,-1);return G}dw.normalizeStorageKey=F,dw.Event={Write:F0.event("storage.write",W.object({key:W.string(),content:W.any()}))};let B=w0.state("storage",()=>{let G=w0.info(),H=o8.join(G.path.data,"storage");return D.info("init",{path:H}),{dir:H}});async function J(G){G=F(G);let H=o8.join(B().dir,G+".json");await oJ.unlink(H).catch(()=>{})}dw.remove=J;async function Y(G){G=F(G);let H=o8.join(B().dir,G);await oJ.rm(H,{recursive:!0,force:!0}).catch(()=>{})}dw.removeDir=Y;async function X(G){return G=F(G),Bun.file(o8.join(B().dir,G+".json")).json()}dw.readJSON=X;async function Q(G,H){G=F(G);let K=o8.join(B().dir,G+".json"),E=K+Date.now()+".tmp";await Bun.write(E,JSON.stringify(H)),await oJ.rename(E,K).catch(()=>{}),await oJ.unlink(E).catch(()=>{}),F0.publish(dw.Event.Write,{key:G,content:H})}dw.writeJSON=Q;let w=new Bun.Glob("**/*");async function*f(G){G=F(G);try{for await(let H of w.scan({cwd:o8.join(B().dir,G),onlyFiles:!0}))yield o8.join(G,H.slice(0,-5))}catch{return}}dw.list=f})(jD||={})});import{randomBytes as bd}from"crypto";var g2;var lw=k(()=>{C0();((nX0)=>{let D={session:"ses",message:"msg",user:"usr"};function F(G){return W.string().startsWith(D[G])}nX0.schema=F;let $=26,B=0,J=0;function Y(G,H){return Q(G,!1,H)}nX0.ascending=Y;function X(G,H){return Q(G,!0,H)}nX0.descending=X;function Q(G,H,K){if(!K)return f(G,H);if(!K.startsWith(D[G]))throw new Error(`ID ${K} does not start with ${D[G]}`);return K}function w(G){let K="",E=bd(G);for(let O=0;O<G;O++)K+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"[E[O]%62];return K}function f(G,H){let K=Date.now();if(K!==B)B=K,J=0;J++;let E=BigInt(K)*BigInt(4096)+BigInt(J);E=H?~E:E;let O=Buffer.alloc(6);for(let q=0;q<6;q++)O[q]=Number(E>>BigInt(40-8*q)&BigInt(255));return D[G]+"_"+O.toString("hex")+w($-12)}})(g2||={})});function p1(D){var F,$,B,J=D.length-1,Y="",X=D[0];if(J>0){Y+=X;for(F=1;F<J;F++){if(B=D[F]+"",$=p0-B.length,$)Y+=d6($);Y+=B}if(X=D[F],B=X+"",$=p0-B.length,$)Y+=d6($)}else if(X===0)return"0";for(;X%10===0;)X/=10;return Y+X}function jF(D,F,$){if(D!==~~D||D<F||D>$)throw Error(n6+D)}function BB(D,F,$,B){var J,Y,X,Q;for(Y=D[0];Y>=10;Y/=10)--F;if(--F<0)F+=p0,J=0;else J=Math.ceil((F+1)/p0),F%=p0;if(Y=_1(10,p0-F),Q=D[J]%Y|0,B==null)if(F<3){if(F==0)Q=Q/100|0;else if(F==1)Q=Q/10|0;X=$<4&&Q==99999||$>3&&Q==49999||Q==50000||Q==0}else X=($<4&&Q+1==Y||$>3&&Q+1==Y/2)&&(D[J+1]/Y/100|0)==_1(10,F-2)-1||(Q==Y/2||Q==0)&&(D[J+1]/Y/100|0)==0;else if(F<4){if(F==0)Q=Q/1000|0;else if(F==1)Q=Q/100|0;else if(F==2)Q=Q/10|0;X=(B||$<4)&&Q==9999||!B&&$>3&&Q==4999}else X=((B||$<4)&&Q+1==Y||!B&&$>3&&Q+1==Y/2)&&(D[J+1]/Y/1000|0)==_1(10,F-3)-1;return X}function tJ(D,F,$){var B,J=[0],Y,X=0,Q=D.length;for(;X<Q;){for(Y=J.length;Y--;)J[Y]*=F;J[0]+=nw.indexOf(D.charAt(X++));for(B=0;B<J.length;B++)if(J[B]>$-1){if(J[B+1]===void 0)J[B+1]=0;J[B+1]+=J[B]/$|0,J[B]%=$}}return J.reverse()}function ud(D,F){var $,B,J;if(F.isZero())return F;if(B=F.d.length,B<32)$=Math.ceil(B/3),J=(1/BY(4,$)).toString();else $=16,J="2.3283064365386962890625e-10";D.precision+=$,F=j9(D,1,F.times(J),new D(1));for(var Y=$;Y--;){var X=F.times(F);F=X.times(X).minus(X).times(8).plus(1)}return D.precision-=$,F}function k0(D,F,$,B){var J,Y,X,Q,w,f,G,H,K,E=D.constructor;D:if(F!=null){if(H=D.d,!H)return D;for(J=1,Q=H[0];Q>=10;Q/=10)J++;if(Y=F-J,Y<0)Y+=p0,X=F,G=H[K=0],w=G/_1(10,J-X-1)%10|0;else if(K=Math.ceil((Y+1)/p0),Q=H.length,K>=Q)if(B){for(;Q++<=K;)H.push(0);G=w=0,J=1,Y%=p0,X=Y-p0+1}else break D;else{G=Q=H[K];for(J=1;Q>=10;Q/=10)J++;Y%=p0,X=Y-p0+J,w=X<0?0:G/_1(10,J-X-1)%10|0}if(B=B||F<0||H[K+1]!==void 0||(X<0?G:G%_1(10,J-X-1)),f=$<4?(w||B)&&($==0||$==(D.s<0?3:2)):w>5||w==5&&($==4||B||$==6&&(Y>0?X>0?G/_1(10,J-X):0:H[K-1])%10&1||$==(D.s<0?8:7)),F<1||!H[0]){if(H.length=0,f)F-=D.e+1,H[0]=_1(10,(p0-F%p0)%p0),D.e=-F||0;else H[0]=D.e=0;return D}if(Y==0)H.length=K,Q=1,K--;else H.length=K+1,Q=_1(10,p0-Y),H[K]=X>0?(G/_1(10,J-X)%_1(10,X)|0)*Q:0;if(f)for(;;)if(K==0){for(Y=1,X=H[0];X>=10;X/=10)Y++;X=H[0]+=Q;for(Q=1;X>=10;X/=10)Q++;if(Y!=Q){if(D.e++,H[0]==j2)H[0]=1}break}else{if(H[K]+=Q,H[K]!=j2)break;H[K--]=0,Q=1}for(Y=H.length;H[--Y]===0;)H.pop()}if(FD){if(D.e>E.maxE)D.d=null,D.e=NaN;else if(D.e<E.minE)D.e=0,D.d=[0]}return D}function c2(D,F,$){if(!D.isFinite())return N_(D);var B,J=D.e,Y=p1(D.d),X=Y.length;if(F){if($&&(B=$-X)>0)Y=Y.charAt(0)+"."+Y.slice(1)+d6(B);else if(X>1)Y=Y.charAt(0)+"."+Y.slice(1);Y=Y+(D.e<0?"e":"e+")+D.e}else if(J<0){if(Y="0."+d6(-J-1)+Y,$&&(B=$-X)>0)Y+=d6(B)}else if(J>=X){if(Y+=d6(J+1-X),$&&(B=$-J-1)>0)Y=Y+"."+d6(B)}else{if((B=J+1)<X)Y=Y.slice(0,B)+"."+Y.slice(B);if($&&(B=$-X)>0){if(J+1===X)Y+=".";Y+=d6(B)}}return Y}function $Y(D,F){var $=D[0];for(F*=p0;$>=10;$/=10)F++;return F}function DY(D,F,$){if(F>kd){if(FD=!0,$)D.precision=$;throw Error(A_)}return k0(new D(aJ),F,1,!0)}function m2(D,F,$){if(F>rw)throw Error(A_);return k0(new D(eJ),F,$,!0)}function R_(D){var F=D.length-1,$=F*p0+1;if(F=D[F],F){for(;F%10==0;F/=10)$--;for(F=D[0];F>=10;F/=10)$++}return $}function d6(D){var F="";for(;D--;)F+="0";return F}function C_(D,F,$,B){var J,Y=new D(1),X=Math.ceil(B/p0+4);FD=!1;for(;;){if($%2){if(Y=Y.times(F),K_(Y.d,X))J=!0}if($=$F($/2),$===0){if($=Y.d.length-1,J&&Y.d[$]===0)++Y.d[$];break}F=F.times(F),K_(F.d,X)}return FD=!0,Y}function E_(D){return D.d[D.d.length-1]&1}function Z_(D,F,$){var B,J,Y=new D(F[0]),X=0;for(;++X<F.length;){if(J=new D(F[X]),!J.s){Y=J;break}if(B=Y.cmp(J),B===$||B===0&&Y.s===$)Y=J}return Y}function tw(D,F){var $,B,J,Y,X,Q,w,f=0,G=0,H=0,K=D.constructor,E=K.rounding,O=K.precision;if(!D.d||!D.d[0]||D.e>17)return new K(D.d?!D.d[0]?1:D.s<0?0:1/0:D.s?D.s<0?0:D:NaN);if(F==null)FD=!1,w=O;else w=F;Q=new K(0.03125);while(D.e>-2)D=D.times(Q),H+=5;B=Math.log(_1(2,H))/Math.LN10*2+5|0,w+=B,$=Y=X=new K(1),K.precision=w;for(;;){if(Y=k0(Y.times(D),w,1),$=$.times(++G),Q=X.plus(pD(Y,$,w,1)),p1(Q.d).slice(0,w)===p1(X.d).slice(0,w)){J=H;while(J--)X=k0(X.times(X),w,1);if(F==null)if(f<3&&BB(X.d,w-B,E,f))K.precision=w+=10,$=Y=Q=new K(1),G=0,f++;else return k0(X,K.precision=O,E,FD=!0);else return K.precision=O,X}X=Q}}function l6(D,F){var $,B,J,Y,X,Q,w,f,G,H,K,E=1,O=10,q=D,U=q.d,N=q.constructor,L=N.rounding,C=N.precision;if(q.s<0||!U||!U[0]||!q.e&&U[0]==1&&U.length==1)return new N(U&&!U[0]?-1/0:q.s!=1?NaN:U?0:q);if(F==null)FD=!1,G=C;else G=F;if(N.precision=G+=O,$=p1(U),B=$.charAt(0),Math.abs(Y=q.e)<1500000000000000){while(B<7&&B!=1||B==1&&$.charAt(1)>3)q=q.times(D),$=p1(q.d),B=$.charAt(0),E++;if(Y=q.e,B>1)q=new N("0."+$),Y++;else q=new N(B+"."+$.slice(1))}else return f=DY(N,G+2,C).times(Y+""),q=l6(new N(B+"."+$.slice(1)),G-O).plus(f),N.precision=C,F==null?k0(q,C,L,FD=!0):q;H=q,w=X=q=pD(q.minus(1),q.plus(1),G,1),K=k0(q.times(q),G,1),J=3;for(;;){if(X=k0(X.times(K),G,1),f=w.plus(pD(X,new N(J),G,1)),p1(f.d).slice(0,G)===p1(w.d).slice(0,G)){if(w=w.times(2),Y!==0)w=w.plus(DY(N,G+2,C).times(Y+""));if(w=pD(w,new N(E),G,1),F==null)if(BB(w.d,G-O,L,Q))N.precision=G+=O,f=X=q=pD(H.minus(1),H.plus(1),G,1),K=k0(q.times(q),G,1),J=Q=1;else return k0(w,N.precision=C,L,FD=!0);else return N.precision=C,w}w=f,J+=2}}function N_(D){return String(D.s*D.s/0)}function sJ(D,F){var $,B,J;if(($=F.indexOf("."))>-1)F=F.replace(".","");if((B=F.search(/e/i))>0){if($<0)$=B;$+=+F.slice(B+1),F=F.substring(0,B)}else if($<0)$=F.length;for(B=0;F.charCodeAt(B)===48;B++);for(J=F.length;F.charCodeAt(J-1)===48;--J);if(F=F.slice(B,J),F){if(J-=B,D.e=$=$-B-1,D.d=[],B=($+1)%p0,$<0)B+=p0;if(B<J){if(B)D.d.push(+F.slice(0,B));for(J-=p0;B<J;)D.d.push(+F.slice(B,B+=p0));F=F.slice(B),B=p0-F.length}else B-=J;for(;B--;)F+="0";if(D.d.push(+F),FD){if(D.e>D.constructor.maxE)D.d=null,D.e=NaN;else if(D.e<D.constructor.minE)D.e=0,D.d=[0]}}else D.e=0,D.d=[0];return D}function vd(D,F){var $,B,J,Y,X,Q,w,f,G;if(F.indexOf("_")>-1){if(F=F.replace(/(\d)_(?=\d)/g,"$1"),U_.test(F))return sJ(D,F)}else if(F==="Infinity"||F==="NaN"){if(!+F)D.s=NaN;return D.e=NaN,D.d=null,D}if(Sd.test(F))$=16,F=F.toLowerCase();else if(hd.test(F))$=2;else if(yd.test(F))$=8;else throw Error(n6+F);if(Y=F.search(/p/i),Y>0)w=+F.slice(Y+1),F=F.substring(2,Y);else F=F.slice(2);if(Y=F.indexOf("."),X=Y>=0,B=D.constructor,X)F=F.replace(".",""),Q=F.length,Y=Q-Y,J=C_(B,new B($),Y,Y*2);f=tJ(F,$,j2),G=f.length-1;for(Y=G;f[Y]===0;--Y)f.pop();if(Y<0)return new B(D.s*0);if(D.e=$Y(f,G),D.d=f,FD=!1,X)D=pD(D,J,Q*4);if(w)D=D.times(Math.abs(w)<54?_1(2,w):p2.pow(2,w));return FD=!0,D}function gd(D,F){var $,B=F.d.length;if(B<3)return F.isZero()?F:j9(D,2,F,F);$=1.4*Math.sqrt(B),$=$>16?16:$|0,F=F.times(1/BY(5,$)),F=j9(D,2,F,F);var J,Y=new D(5),X=new D(16),Q=new D(20);for(;$--;)J=F.times(F),F=F.times(Y.plus(J.times(X.times(J).minus(Q))));return F}function j9(D,F,$,B,J){var Y,X,Q,w,f=1,G=D.precision,H=Math.ceil(G/p0);FD=!1,w=$.times($),Q=new D(B);for(;;){if(X=pD(Q.times(w),new D(F++*F++),G,1),Q=J?B.plus(X):B.minus(X),B=pD(X.times(w),new D(F++*F++),G,1),X=Q.plus(B),X.d[H]!==void 0){for(Y=H;X.d[Y]===Q.d[Y]&&Y--;);if(Y==-1)break}Y=Q,Q=B,B=X,X=Y,f++}return FD=!0,X.d.length=H+1,X}function BY(D,F){var $=D;while(--F)$*=D;return $}function M_(D,F){var $,B=F.s<0,J=m2(D,D.precision,1),Y=J.times(0.5);if(F=F.abs(),F.lte(Y))return q6=B?4:1,F;if($=F.divToInt(J),$.isZero())q6=B?3:2;else{if(F=F.minus($.times(J)),F.lte(Y))return q6=E_($)?B?2:3:B?4:1,F;q6=E_($)?B?1:4:B?3:2}return F.minus(J).abs()}function sw(D,F,$,B){var J,Y,X,Q,w,f,G,H,K,E=D.constructor,O=$!==void 0;if(O)if(jF($,1,o6),B===void 0)B=E.rounding;else jF(B,0,8);else $=E.precision,B=E.rounding;if(!D.isFinite())G=N_(D);else{if(G=c2(D),X=G.indexOf("."),O){if(J=2,F==16)$=$*4-3;else if(F==8)$=$*3-2}else J=F;if(X>=0)G=G.replace(".",""),K=new E(1),K.e=G.length-X,K.d=tJ(c2(K),10,J),K.e=K.d.length;H=tJ(G,10,J),Y=w=H.length;for(;H[--w]==0;)H.pop();if(!H[0])G=O?"0p+0":"0";else{if(X<0)Y--;else D=new E(D),D.d=H,D.e=Y,D=pD(D,K,$,B,0,J),H=D.d,Y=D.e,f=V_;if(X=H[$],Q=J/2,f=f||H[$+1]!==void 0,f=B<4?(X!==void 0||f)&&(B===0||B===(D.s<0?3:2)):X>Q||X===Q&&(B===4||f||B===6&&H[$-1]&1||B===(D.s<0?8:7)),H.length=$,f){for(;++H[--$]>J-1;)if(H[$]=0,!$)++Y,H.unshift(1)}for(w=H.length;!H[w-1];--w);for(X=0,G="";X<w;X++)G+=nw.charAt(H[X]);if(O){if(w>1)if(F==16||F==8){X=F==16?4:3;for(--w;w%X;w++)G+="0";H=tJ(G,J,F);for(w=H.length;!H[w-1];--w);for(X=1,G="1.";X<w;X++)G+=nw.charAt(H[X])}else G=G.charAt(0)+"."+G.slice(1);G=G+(Y<0?"p":"p+")+Y}else if(Y<0){for(;++Y;)G="0"+G;G="0."+G}else if(++Y>w)for(Y-=w;Y--;)G+="0";else if(Y<w)G=G.slice(0,Y)+"."+G.slice(Y)}G=(F==16?"0x":F==2?"0b":F==8?"0o":"")+G}return D.s<0?"-"+G:G}function K_(D,F){if(D.length>F)return D.length=F,!0}function md(D){return new this(D).abs()}function cd(D){return new this(D).acos()}function pd(D){return new this(D).acosh()}function id(D,F){return new this(D).plus(F)}function dd(D){return new this(D).asin()}function ld(D){return new this(D).asinh()}function nd(D){return new this(D).atan()}function od(D){return new this(D).atanh()}function rd(D,F){D=new this(D),F=new this(F);var $,B=this.precision,J=this.rounding,Y=B+4;if(!D.s||!F.s)$=new this(NaN);else if(!D.d&&!F.d)$=m2(this,Y,1).times(F.s>0?0.25:0.75),$.s=D.s;else if(!F.d||D.isZero())$=F.s<0?m2(this,B,J):new this(0),$.s=D.s;else if(!D.d||F.isZero())$=m2(this,Y,1).times(0.5),$.s=D.s;else if(F.s<0)this.precision=Y,this.rounding=1,$=this.atan(pD(D,F,Y,1)),F=m2(this,Y,1),this.precision=B,this.rounding=J,$=D.s<0?$.minus(F):$.plus(F);else $=this.atan(pD(D,F,Y,1));return $}function td(D){return new this(D).cbrt()}function sd(D){return k0(D=new this(D),D.e+1,2)}function ad(D,F,$){return new this(D).clamp(F,$)}function ed(D){if(!D||typeof D!=="object")throw Error(FY+"Object expected");var F,$,B,J=D.defaults===!0,Y=["precision",1,o6,"rounding",0,8,"toExpNeg",-O9,0,"toExpPos",0,O9,"maxE",0,O9,"minE",-O9,0,"modulo",0,9];for(F=0;F<Y.length;F+=3){if($=Y[F],J)this[$]=ow[$];if((B=D[$])!==void 0)if($F(B)===B&&B>=Y[F+1]&&B<=Y[F+2])this[$]=B;else throw Error(n6+$+": "+B)}if($="crypto",J)this[$]=ow[$];if((B=D[$])!==void 0)if(B===!0||B===!1||B===0||B===1)if(B)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[$]=!0;else throw Error(O_);else this[$]=!1;else throw Error(n6+$+": "+B);return this}function Dl(D){return new this(D).cos()}function Fl(D){return new this(D).cosh()}function __(D){var F,$,B;function J(Y){var X,Q,w,f=this;if(!(f instanceof J))return new J(Y);if(f.constructor=J,q_(Y)){if(f.s=Y.s,FD)if(!Y.d||Y.e>J.maxE)f.e=NaN,f.d=null;else if(Y.e<J.minE)f.e=0,f.d=[0];else f.e=Y.e,f.d=Y.d.slice();else f.e=Y.e,f.d=Y.d?Y.d.slice():Y.d;return}if(w=typeof Y,w==="number"){if(Y===0){f.s=1/Y<0?-1:1,f.e=0,f.d=[0];return}if(Y<0)Y=-Y,f.s=-1;else f.s=1;if(Y===~~Y&&Y<1e7){for(X=0,Q=Y;Q>=10;Q/=10)X++;if(FD)if(X>J.maxE)f.e=NaN,f.d=null;else if(X<J.minE)f.e=0,f.d=[0];else f.e=X,f.d=[Y];else f.e=X,f.d=[Y];return}if(Y*0!==0){if(!Y)f.s=NaN;f.e=NaN,f.d=null;return}return sJ(f,Y.toString())}if(w==="string"){if((Q=Y.charCodeAt(0))===45)Y=Y.slice(1),f.s=-1;else{if(Q===43)Y=Y.slice(1);f.s=1}return U_.test(Y)?sJ(f,Y):vd(f,Y)}if(w==="bigint"){if(Y<0)Y=-Y,f.s=-1;else f.s=1;return sJ(f,Y.toString())}throw Error(n6+Y)}if(J.prototype=e,J.ROUND_UP=0,J.ROUND_DOWN=1,J.ROUND_CEIL=2,J.ROUND_FLOOR=3,J.ROUND_HALF_UP=4,J.ROUND_HALF_DOWN=5,J.ROUND_HALF_EVEN=6,J.ROUND_HALF_CEIL=7,J.ROUND_HALF_FLOOR=8,J.EUCLID=9,J.config=J.set=ed,J.clone=__,J.isDecimal=q_,J.abs=md,J.acos=cd,J.acosh=pd,J.add=id,J.asin=dd,J.asinh=ld,J.atan=nd,J.atanh=od,J.atan2=rd,J.cbrt=td,J.ceil=sd,J.clamp=ad,J.cos=Dl,J.cosh=Fl,J.div=$l,J.exp=Bl,J.floor=Jl,J.hypot=Yl,J.ln=Xl,J.log=Ql,J.log10=fl,J.log2=wl,J.max=Wl,J.min=Gl,J.mod=Hl,J.mul=El,J.pow=Kl,J.random=ql,J.round=Vl,J.sign=Al,J.sin=Ol,J.sinh=jl,J.sqrt=Ul,J.sub=Rl,J.sum=Cl,J.tan=Zl,J.tanh=Nl,J.trunc=Ml,D===void 0)D={};if(D){if(D.defaults!==!0){B=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"];for(F=0;F<B.length;)if(!D.hasOwnProperty($=B[F++]))D[$]=this[$]}}return J.config(D),J}function $l(D,F){return new this(D).div(F)}function Bl(D){return new this(D).exp()}function Jl(D){return k0(D=new this(D),D.e+1,3)}function Yl(){var D,F,$=new this(0);FD=!1;for(D=0;D<arguments.length;)if(F=new this(arguments[D++]),!F.d){if(F.s)return FD=!0,new this(1/0);$=F}else if($.d)$=$.plus(F.times(F));return FD=!0,$.sqrt()}function q_(D){return D instanceof p2||D&&D.toStringTag===j_||!1}function Xl(D){return new this(D).ln()}function Ql(D,F){return new this(D).log(F)}function wl(D){return new this(D).log(2)}function fl(D){return new this(D).log(10)}function Wl(){return Z_(this,arguments,-1)}function Gl(){return Z_(this,arguments,1)}function Hl(D,F){return new this(D).mod(F)}function El(D,F){return new this(D).mul(F)}function Kl(D,F){return new this(D).pow(F)}function ql(D){var F,$,B,J,Y=0,X=new this(1),Q=[];if(D===void 0)D=this.precision;else jF(D,1,o6);if(B=Math.ceil(D/p0),!this.crypto)for(;Y<B;)Q[Y++]=Math.random()*1e7|0;else if(crypto.getRandomValues){F=crypto.getRandomValues(new Uint32Array(B));for(;Y<B;)if(J=F[Y],J>=4290000000)F[Y]=crypto.getRandomValues(new Uint32Array(1))[0];else Q[Y++]=J%1e7}else if(crypto.randomBytes){F=crypto.randomBytes(B*=4);for(;Y<B;)if(J=F[Y]+(F[Y+1]<<8)+(F[Y+2]<<16)+((F[Y+3]&127)<<24),J>=2140000000)crypto.randomBytes(4).copy(F,Y);else Q.push(J%1e7),Y+=4;Y=B/4}else throw Error(O_);if(B=Q[--Y],D%=p0,B&&D)J=_1(10,p0-D),Q[Y]=(B/J|0)*J;for(;Q[Y]===0;Y--)Q.pop();if(Y<0)$=0,Q=[0];else{$=-1;for(;Q[0]===0;$-=p0)Q.shift();for(B=1,J=Q[0];J>=10;J/=10)B++;if(B<p0)$-=p0-B}return X.e=$,X.d=Q,X}function Vl(D){return k0(D=new this(D),D.e+1,this.rounding)}function Al(D){return D=new this(D),D.d?D.d[0]?D.s:0*D.s:D.s||NaN}function Ol(D){return new this(D).sin()}function jl(D){return new this(D).sinh()}function Ul(D){return new this(D).sqrt()}function Rl(D,F){return new this(D).sub(F)}function Cl(){var D=0,F=arguments,$=new this(F[D]);FD=!1;for(;$.s&&++D<F.length;)$=$.plus(F[D]);return FD=!0,k0($,this.precision,this.rounding)}function Zl(D){return new this(D).tan()}function Nl(D){return new this(D).tanh()}function Ml(D){return k0(D=new this(D),D.e+1,1)}var O9=9000000000000000,o6=1e9,nw="0123456789abcdef",aJ="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",eJ="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",ow,V_,q6,FD=!0,FY="[DecimalError] ",n6,A_,O_,j_="[object Decimal]",$F,_1,hd,Sd,yd,U_,j2=1e7,p0=7,xd=9007199254740991,kd,rw,e,pD,p2;var L_=k(()=>{/*!
 *  decimal.js v10.5.0
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */ow={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-O9,maxE:O9,crypto:!1},n6=FY+"Invalid argument: ",A_=FY+"Precision limit exceeded",O_=FY+"crypto unavailable",$F=Math.floor,_1=Math.pow,hd=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Sd=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,yd=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,U_=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,kd=aJ.length-1,rw=eJ.length-1,e={toStringTag:j_};e.absoluteValue=e.abs=function(){var D=new this.constructor(this);if(D.s<0)D.s=1;return k0(D)};e.ceil=function(){return k0(new this.constructor(this),this.e+1,2)};e.clampedTo=e.clamp=function(D,F){var $,B=this,J=B.constructor;if(D=new J(D),F=new J(F),!D.s||!F.s)return new J(NaN);if(D.gt(F))throw Error(n6+F);return $=B.cmp(D),$<0?D:B.cmp(F)>0?F:new J(B)};e.comparedTo=e.cmp=function(D){var F,$,B,J,Y=this,X=Y.d,Q=(D=new Y.constructor(D)).d,w=Y.s,f=D.s;if(!X||!Q)return!w||!f?NaN:w!==f?w:X===Q?0:!X^w<0?1:-1;if(!X[0]||!Q[0])return X[0]?w:Q[0]?-f:0;if(w!==f)return w;if(Y.e!==D.e)return Y.e>D.e^w<0?1:-1;B=X.length,J=Q.length;for(F=0,$=B<J?B:J;F<$;++F)if(X[F]!==Q[F])return X[F]>Q[F]^w<0?1:-1;return B===J?0:B>J^w<0?1:-1};e.cosine=e.cos=function(){var D,F,$=this,B=$.constructor;if(!$.d)return new B(NaN);if(!$.d[0])return new B(1);return D=B.precision,F=B.rounding,B.precision=D+Math.max($.e,$.sd())+p0,B.rounding=1,$=ud(B,M_(B,$)),B.precision=D,B.rounding=F,k0(q6==2||q6==3?$.neg():$,D,F,!0)};e.cubeRoot=e.cbrt=function(){var D,F,$,B,J,Y,X,Q,w,f,G=this,H=G.constructor;if(!G.isFinite()||G.isZero())return new H(G);if(FD=!1,Y=G.s*_1(G.s*G,0.3333333333333333),!Y||Math.abs(Y)==1/0){if($=p1(G.d),D=G.e,Y=(D-$.length+1)%3)$+=Y==1||Y==-2?"0":"00";if(Y=_1($,0.3333333333333333),D=$F((D+1)/3)-(D%3==(D<0?-1:2)),Y==1/0)$="5e"+D;else $=Y.toExponential(),$=$.slice(0,$.indexOf("e")+1)+D;B=new H($),B.s=G.s}else B=new H(Y.toString());X=(D=H.precision)+3;for(;;)if(Q=B,w=Q.times(Q).times(Q),f=w.plus(G),B=pD(f.plus(G).times(Q),f.plus(w),X+2,1),p1(Q.d).slice(0,X)===($=p1(B.d)).slice(0,X))if($=$.slice(X-3,X+1),$=="9999"||!J&&$=="4999"){if(!J){if(k0(Q,D+1,0),Q.times(Q).times(Q).eq(G)){B=Q;break}}X+=4,J=1}else{if(!+$||!+$.slice(1)&&$.charAt(0)=="5")k0(B,D+1,1),F=!B.times(B).times(B).eq(G);break}return FD=!0,k0(B,D,H.rounding,F)};e.decimalPlaces=e.dp=function(){var D,F=this.d,$=NaN;if(F){if(D=F.length-1,$=(D-$F(this.e/p0))*p0,D=F[D],D)for(;D%10==0;D/=10)$--;if($<0)$=0}return $};e.dividedBy=e.div=function(D){return pD(this,new this.constructor(D))};e.dividedToIntegerBy=e.divToInt=function(D){var F=this,$=F.constructor;return k0(pD(F,new $(D),0,1,1),$.precision,$.rounding)};e.equals=e.eq=function(D){return this.cmp(D)===0};e.floor=function(){return k0(new this.constructor(this),this.e+1,3)};e.greaterThan=e.gt=function(D){return this.cmp(D)>0};e.greaterThanOrEqualTo=e.gte=function(D){var F=this.cmp(D);return F==1||F===0};e.hyperbolicCosine=e.cosh=function(){var D,F,$,B,J,Y=this,X=Y.constructor,Q=new X(1);if(!Y.isFinite())return new X(Y.s?1/0:NaN);if(Y.isZero())return Q;if($=X.precision,B=X.rounding,X.precision=$+Math.max(Y.e,Y.sd())+4,X.rounding=1,J=Y.d.length,J<32)D=Math.ceil(J/3),F=(1/BY(4,D)).toString();else D=16,F="2.3283064365386962890625e-10";Y=j9(X,1,Y.times(F),new X(1),!0);var w,f=D,G=new X(8);for(;f--;)w=Y.times(Y),Y=Q.minus(w.times(G.minus(w.times(G))));return k0(Y,X.precision=$,X.rounding=B,!0)};e.hyperbolicSine=e.sinh=function(){var D,F,$,B,J=this,Y=J.constructor;if(!J.isFinite()||J.isZero())return new Y(J);if(F=Y.precision,$=Y.rounding,Y.precision=F+Math.max(J.e,J.sd())+4,Y.rounding=1,B=J.d.length,B<3)J=j9(Y,2,J,J,!0);else{D=1.4*Math.sqrt(B),D=D>16?16:D|0,J=J.times(1/BY(5,D)),J=j9(Y,2,J,J,!0);var X,Q=new Y(5),w=new Y(16),f=new Y(20);for(;D--;)X=J.times(J),J=J.times(Q.plus(X.times(w.times(X).plus(f))))}return Y.precision=F,Y.rounding=$,k0(J,F,$,!0)};e.hyperbolicTangent=e.tanh=function(){var D,F,$=this,B=$.constructor;if(!$.isFinite())return new B($.s);if($.isZero())return new B($);return D=B.precision,F=B.rounding,B.precision=D+7,B.rounding=1,pD($.sinh(),$.cosh(),B.precision=D,B.rounding=F)};e.inverseCosine=e.acos=function(){var D=this,F=D.constructor,$=D.abs().cmp(1),B=F.precision,J=F.rounding;if($!==-1)return $===0?D.isNeg()?m2(F,B,J):new F(0):new F(NaN);if(D.isZero())return m2(F,B+4,J).times(0.5);return F.precision=B+6,F.rounding=1,D=new F(1).minus(D).div(D.plus(1)).sqrt().atan(),F.precision=B,F.rounding=J,D.times(2)};e.inverseHyperbolicCosine=e.acosh=function(){var D,F,$=this,B=$.constructor;if($.lte(1))return new B($.eq(1)?0:NaN);if(!$.isFinite())return new B($);return D=B.precision,F=B.rounding,B.precision=D+Math.max(Math.abs($.e),$.sd())+4,B.rounding=1,FD=!1,$=$.times($).minus(1).sqrt().plus($),FD=!0,B.precision=D,B.rounding=F,$.ln()};e.inverseHyperbolicSine=e.asinh=function(){var D,F,$=this,B=$.constructor;if(!$.isFinite()||$.isZero())return new B($);return D=B.precision,F=B.rounding,B.precision=D+2*Math.max(Math.abs($.e),$.sd())+6,B.rounding=1,FD=!1,$=$.times($).plus(1).sqrt().plus($),FD=!0,B.precision=D,B.rounding=F,$.ln()};e.inverseHyperbolicTangent=e.atanh=function(){var D,F,$,B,J=this,Y=J.constructor;if(!J.isFinite())return new Y(NaN);if(J.e>=0)return new Y(J.abs().eq(1)?J.s/0:J.isZero()?J:NaN);if(D=Y.precision,F=Y.rounding,B=J.sd(),Math.max(B,D)<2*-J.e-1)return k0(new Y(J),D,F,!0);return Y.precision=$=B-J.e,J=pD(J.plus(1),new Y(1).minus(J),$+D,1),Y.precision=D+4,Y.rounding=1,J=J.ln(),Y.precision=D,Y.rounding=F,J.times(0.5)};e.inverseSine=e.asin=function(){var D,F,$,B,J=this,Y=J.constructor;if(J.isZero())return new Y(J);if(F=J.abs().cmp(1),$=Y.precision,B=Y.rounding,F!==-1){if(F===0)return D=m2(Y,$+4,B).times(0.5),D.s=J.s,D;return new Y(NaN)}return Y.precision=$+6,Y.rounding=1,J=J.div(new Y(1).minus(J.times(J)).sqrt().plus(1)).atan(),Y.precision=$,Y.rounding=B,J.times(2)};e.inverseTangent=e.atan=function(){var D,F,$,B,J,Y,X,Q,w,f=this,G=f.constructor,H=G.precision,K=G.rounding;if(!f.isFinite()){if(!f.s)return new G(NaN);if(H+4<=rw)return X=m2(G,H+4,K).times(0.5),X.s=f.s,X}else if(f.isZero())return new G(f);else if(f.abs().eq(1)&&H+4<=rw)return X=m2(G,H+4,K).times(0.25),X.s=f.s,X;G.precision=Q=H+10,G.rounding=1,$=Math.min(28,Q/p0+2|0);for(D=$;D;--D)f=f.div(f.times(f).plus(1).sqrt().plus(1));FD=!1,F=Math.ceil(Q/p0),B=1,w=f.times(f),X=new G(f),J=f;for(;D!==-1;)if(J=J.times(w),Y=X.minus(J.div(B+=2)),J=J.times(w),X=Y.plus(J.div(B+=2)),X.d[F]!==void 0)for(D=F;X.d[D]===Y.d[D]&&D--;);if($)X=X.times(2<<$-1);return FD=!0,k0(X,G.precision=H,G.rounding=K,!0)};e.isFinite=function(){return!!this.d};e.isInteger=e.isInt=function(){return!!this.d&&$F(this.e/p0)>this.d.length-2};e.isNaN=function(){return!this.s};e.isNegative=e.isNeg=function(){return this.s<0};e.isPositive=e.isPos=function(){return this.s>0};e.isZero=function(){return!!this.d&&this.d[0]===0};e.lessThan=e.lt=function(D){return this.cmp(D)<0};e.lessThanOrEqualTo=e.lte=function(D){return this.cmp(D)<1};e.logarithm=e.log=function(D){var F,$,B,J,Y,X,Q,w,f=this,G=f.constructor,H=G.precision,K=G.rounding,E=5;if(D==null)D=new G(10),F=!0;else{if(D=new G(D),$=D.d,D.s<0||!$||!$[0]||D.eq(1))return new G(NaN);F=D.eq(10)}if($=f.d,f.s<0||!$||!$[0]||f.eq(1))return new G($&&!$[0]?-1/0:f.s!=1?NaN:$?0:1/0);if(F)if($.length>1)Y=!0;else{for(J=$[0];J%10===0;)J/=10;Y=J!==1}if(FD=!1,Q=H+E,X=l6(f,Q),B=F?DY(G,Q+10):l6(D,Q),w=pD(X,B,Q,1),BB(w.d,J=H,K))do if(Q+=10,X=l6(f,Q),B=F?DY(G,Q+10):l6(D,Q),w=pD(X,B,Q,1),!Y){if(+p1(w.d).slice(J+1,J+15)+1==100000000000000)w=k0(w,H+1,0);break}while(BB(w.d,J+=10,K));return FD=!0,k0(w,H,K)};e.minus=e.sub=function(D){var F,$,B,J,Y,X,Q,w,f,G,H,K,E=this,O=E.constructor;if(D=new O(D),!E.d||!D.d){if(!E.s||!D.s)D=new O(NaN);else if(E.d)D.s=-D.s;else D=new O(D.d||E.s!==D.s?E:NaN);return D}if(E.s!=D.s)return D.s=-D.s,E.plus(D);if(f=E.d,K=D.d,Q=O.precision,w=O.rounding,!f[0]||!K[0]){if(K[0])D.s=-D.s;else if(f[0])D=new O(E);else return new O(w===3?-0:0);return FD?k0(D,Q,w):D}if($=$F(D.e/p0),G=$F(E.e/p0),f=f.slice(),Y=G-$,Y){if(H=Y<0,H)F=f,Y=-Y,X=K.length;else F=K,$=G,X=f.length;if(B=Math.max(Math.ceil(Q/p0),X)+2,Y>B)Y=B,F.length=1;F.reverse();for(B=Y;B--;)F.push(0);F.reverse()}else{if(B=f.length,X=K.length,H=B<X,H)X=B;for(B=0;B<X;B++)if(f[B]!=K[B]){H=f[B]<K[B];break}Y=0}if(H)F=f,f=K,K=F,D.s=-D.s;X=f.length;for(B=K.length-X;B>0;--B)f[X++]=0;for(B=K.length;B>Y;){if(f[--B]<K[B]){for(J=B;J&&f[--J]===0;)f[J]=j2-1;--f[J],f[B]+=j2}f[B]-=K[B]}for(;f[--X]===0;)f.pop();for(;f[0]===0;f.shift())--$;if(!f[0])return new O(w===3?-0:0);return D.d=f,D.e=$Y(f,$),FD?k0(D,Q,w):D};e.modulo=e.mod=function(D){var F,$=this,B=$.constructor;if(D=new B(D),!$.d||!D.s||D.d&&!D.d[0])return new B(NaN);if(!D.d||$.d&&!$.d[0])return k0(new B($),B.precision,B.rounding);if(FD=!1,B.modulo==9)F=pD($,D.abs(),0,3,1),F.s*=D.s;else F=pD($,D,0,B.modulo,1);return F=F.times(D),FD=!0,$.minus(F)};e.naturalExponential=e.exp=function(){return tw(this)};e.naturalLogarithm=e.ln=function(){return l6(this)};e.negated=e.neg=function(){var D=new this.constructor(this);return D.s=-D.s,k0(D)};e.plus=e.add=function(D){var F,$,B,J,Y,X,Q,w,f,G,H=this,K=H.constructor;if(D=new K(D),!H.d||!D.d){if(!H.s||!D.s)D=new K(NaN);else if(!H.d)D=new K(D.d||H.s===D.s?H:NaN);return D}if(H.s!=D.s)return D.s=-D.s,H.minus(D);if(f=H.d,G=D.d,Q=K.precision,w=K.rounding,!f[0]||!G[0]){if(!G[0])D=new K(H);return FD?k0(D,Q,w):D}if(Y=$F(H.e/p0),B=$F(D.e/p0),f=f.slice(),J=Y-B,J){if(J<0)$=f,J=-J,X=G.length;else $=G,B=Y,X=f.length;if(Y=Math.ceil(Q/p0),X=Y>X?Y+1:X+1,J>X)J=X,$.length=1;$.reverse();for(;J--;)$.push(0);$.reverse()}if(X=f.length,J=G.length,X-J<0)J=X,$=G,G=f,f=$;for(F=0;J;)F=(f[--J]=f[J]+G[J]+F)/j2|0,f[J]%=j2;if(F)f.unshift(F),++B;for(X=f.length;f[--X]==0;)f.pop();return D.d=f,D.e=$Y(f,B),FD?k0(D,Q,w):D};e.precision=e.sd=function(D){var F,$=this;if(D!==void 0&&D!==!!D&&D!==1&&D!==0)throw Error(n6+D);if($.d){if(F=R_($.d),D&&$.e+1>F)F=$.e+1}else F=NaN;return F};e.round=function(){var D=this,F=D.constructor;return k0(new F(D),D.e+1,F.rounding)};e.sine=e.sin=function(){var D,F,$=this,B=$.constructor;if(!$.isFinite())return new B(NaN);if($.isZero())return new B($);return D=B.precision,F=B.rounding,B.precision=D+Math.max($.e,$.sd())+p0,B.rounding=1,$=gd(B,M_(B,$)),B.precision=D,B.rounding=F,k0(q6>2?$.neg():$,D,F,!0)};e.squareRoot=e.sqrt=function(){var D,F,$,B,J,Y,X=this,Q=X.d,w=X.e,f=X.s,G=X.constructor;if(f!==1||!Q||!Q[0])return new G(!f||f<0&&(!Q||Q[0])?NaN:Q?X:1/0);if(FD=!1,f=Math.sqrt(+X),f==0||f==1/0){if(F=p1(Q),(F.length+w)%2==0)F+="0";if(f=Math.sqrt(F),w=$F((w+1)/2)-(w<0||w%2),f==1/0)F="5e"+w;else F=f.toExponential(),F=F.slice(0,F.indexOf("e")+1)+w;B=new G(F)}else B=new G(f.toString());$=(w=G.precision)+3;for(;;)if(Y=B,B=Y.plus(pD(X,Y,$+2,1)).times(0.5),p1(Y.d).slice(0,$)===(F=p1(B.d)).slice(0,$))if(F=F.slice($-3,$+1),F=="9999"||!J&&F=="4999"){if(!J){if(k0(Y,w+1,0),Y.times(Y).eq(X)){B=Y;break}}$+=4,J=1}else{if(!+F||!+F.slice(1)&&F.charAt(0)=="5")k0(B,w+1,1),D=!B.times(B).eq(X);break}return FD=!0,k0(B,w,G.rounding,D)};e.tangent=e.tan=function(){var D,F,$=this,B=$.constructor;if(!$.isFinite())return new B(NaN);if($.isZero())return new B($);return D=B.precision,F=B.rounding,B.precision=D+10,B.rounding=1,$=$.sin(),$.s=1,$=pD($,new B(1).minus($.times($)).sqrt(),D+10,0),B.precision=D,B.rounding=F,k0(q6==2||q6==4?$.neg():$,D,F,!0)};e.times=e.mul=function(D){var F,$,B,J,Y,X,Q,w,f,G=this,H=G.constructor,K=G.d,E=(D=new H(D)).d;if(D.s*=G.s,!K||!K[0]||!E||!E[0])return new H(!D.s||K&&!K[0]&&!E||E&&!E[0]&&!K?NaN:!K||!E?D.s/0:D.s*0);if($=$F(G.e/p0)+$F(D.e/p0),w=K.length,f=E.length,w<f)Y=K,K=E,E=Y,X=w,w=f,f=X;Y=[],X=w+f;for(B=X;B--;)Y.push(0);for(B=f;--B>=0;){F=0;for(J=w+B;J>B;)Q=Y[J]+E[B]*K[J-B-1]+F,Y[J--]=Q%j2|0,F=Q/j2|0;Y[J]=(Y[J]+F)%j2|0}for(;!Y[--X];)Y.pop();if(F)++$;else Y.shift();return D.d=Y,D.e=$Y(Y,$),FD?k0(D,H.precision,H.rounding):D};e.toBinary=function(D,F){return sw(this,2,D,F)};e.toDecimalPlaces=e.toDP=function(D,F){var $=this,B=$.constructor;if($=new B($),D===void 0)return $;if(jF(D,0,o6),F===void 0)F=B.rounding;else jF(F,0,8);return k0($,D+$.e+1,F)};e.toExponential=function(D,F){var $,B=this,J=B.constructor;if(D===void 0)$=c2(B,!0);else{if(jF(D,0,o6),F===void 0)F=J.rounding;else jF(F,0,8);B=k0(new J(B),D+1,F),$=c2(B,!0,D+1)}return B.isNeg()&&!B.isZero()?"-"+$:$};e.toFixed=function(D,F){var $,B,J=this,Y=J.constructor;if(D===void 0)$=c2(J);else{if(jF(D,0,o6),F===void 0)F=Y.rounding;else jF(F,0,8);B=k0(new Y(J),D+J.e+1,F),$=c2(B,!1,D+B.e+1)}return J.isNeg()&&!J.isZero()?"-"+$:$};e.toFraction=function(D){var F,$,B,J,Y,X,Q,w,f,G,H,K,E=this,O=E.d,q=E.constructor;if(!O)return new q(E);if(f=$=new q(1),B=w=new q(0),F=new q(B),Y=F.e=R_(O)-E.e-1,X=Y%p0,F.d[0]=_1(10,X<0?p0+X:X),D==null)D=Y>0?F:f;else{if(Q=new q(D),!Q.isInt()||Q.lt(f))throw Error(n6+Q);D=Q.gt(F)?Y>0?F:f:Q}FD=!1,Q=new q(p1(O)),G=q.precision,q.precision=Y=O.length*p0*2;for(;;){if(H=pD(Q,F,0,1,1),J=$.plus(H.times(B)),J.cmp(D)==1)break;$=B,B=J,J=f,f=w.plus(H.times(J)),w=J,J=F,F=Q.minus(H.times(J)),Q=J}return J=pD(D.minus($),B,0,1,1),w=w.plus(J.times(f)),$=$.plus(J.times(B)),w.s=f.s=E.s,K=pD(f,B,Y,1).minus(E).abs().cmp(pD(w,$,Y,1).minus(E).abs())<1?[f,B]:[w,$],q.precision=G,FD=!0,K};e.toHexadecimal=e.toHex=function(D,F){return sw(this,16,D,F)};e.toNearest=function(D,F){var $=this,B=$.constructor;if($=new B($),D==null){if(!$.d)return $;D=new B(1),F=B.rounding}else{if(D=new B(D),F===void 0)F=B.rounding;else jF(F,0,8);if(!$.d)return D.s?$:D;if(!D.d){if(D.s)D.s=$.s;return D}}if(D.d[0])FD=!1,$=pD($,D,0,F,1).times(D),FD=!0,k0($);else D.s=$.s,$=D;return $};e.toNumber=function(){return+this};e.toOctal=function(D,F){return sw(this,8,D,F)};e.toPower=e.pow=function(D){var F,$,B,J,Y,X,Q=this,w=Q.constructor,f=+(D=new w(D));if(!Q.d||!D.d||!Q.d[0]||!D.d[0])return new w(_1(+Q,f));if(Q=new w(Q),Q.eq(1))return Q;if(B=w.precision,Y=w.rounding,D.eq(1))return k0(Q,B,Y);if(F=$F(D.e/p0),F>=D.d.length-1&&($=f<0?-f:f)<=xd)return J=C_(w,Q,$,B),D.s<0?new w(1).div(J):k0(J,B,Y);if(X=Q.s,X<0){if(F<D.d.length-1)return new w(NaN);if((D.d[F]&1)==0)X=1;if(Q.e==0&&Q.d[0]==1&&Q.d.length==1)return Q.s=X,Q}if($=_1(+Q,f),F=$==0||!isFinite($)?$F(f*(Math.log("0."+p1(Q.d))/Math.LN10+Q.e+1)):new w($+"").e,F>w.maxE+1||F<w.minE-1)return new w(F>0?X/0:0);if(FD=!1,w.rounding=Q.s=1,$=Math.min(12,(F+"").length),J=tw(D.times(l6(Q,B+$)),B),J.d){if(J=k0(J,B+5,1),BB(J.d,B,Y)){if(F=B+10,J=k0(tw(D.times(l6(Q,F+$)),F),F+5,1),+p1(J.d).slice(B+1,B+15)+1==100000000000000)J=k0(J,B+1,0)}}return J.s=X,FD=!0,w.rounding=Y,k0(J,B,Y)};e.toPrecision=function(D,F){var $,B=this,J=B.constructor;if(D===void 0)$=c2(B,B.e<=J.toExpNeg||B.e>=J.toExpPos);else{if(jF(D,1,o6),F===void 0)F=J.rounding;else jF(F,0,8);B=k0(new J(B),D,F),$=c2(B,D<=B.e||B.e<=J.toExpNeg,D)}return B.isNeg()&&!B.isZero()?"-"+$:$};e.toSignificantDigits=e.toSD=function(D,F){var $=this,B=$.constructor;if(D===void 0)D=B.precision,F=B.rounding;else if(jF(D,1,o6),F===void 0)F=B.rounding;else jF(F,0,8);return k0(new B($),D,F)};e.toString=function(){var D=this,F=D.constructor,$=c2(D,D.e<=F.toExpNeg||D.e>=F.toExpPos);return D.isNeg()&&!D.isZero()?"-"+$:$};e.truncated=e.trunc=function(){return k0(new this.constructor(this),this.e+1,1)};e.valueOf=e.toJSON=function(){var D=this,F=D.constructor,$=c2(D,D.e<=F.toExpNeg||D.e>=F.toExpPos);return D.isNeg()?"-"+$:$};pD=function(){function D(B,J,Y){var X,Q=0,w=B.length;for(B=B.slice();w--;)X=B[w]*J+Q,B[w]=X%Y|0,Q=X/Y|0;if(Q)B.unshift(Q);return B}function F(B,J,Y,X){var Q,w;if(Y!=X)w=Y>X?1:-1;else for(Q=w=0;Q<Y;Q++)if(B[Q]!=J[Q]){w=B[Q]>J[Q]?1:-1;break}return w}function $(B,J,Y,X){var Q=0;for(;Y--;)B[Y]-=Q,Q=B[Y]<J[Y]?1:0,B[Y]=Q*X+B[Y]-J[Y];for(;!B[0]&&B.length>1;)B.shift()}return function(B,J,Y,X,Q,w){var f,G,H,K,E,O,q,U,N,L,C,R,I,h,p,P,v,n,_,x,o=B.constructor,M=B.s==J.s?1:-1,r=B.d,$0=J.d;if(!r||!r[0]||!$0||!$0[0])return new o(!B.s||!J.s||(r?$0&&r[0]==$0[0]:!$0)?NaN:r&&r[0]==0||!$0?M*0:M/0);if(w)E=1,G=B.e-J.e;else w=j2,E=p0,G=$F(B.e/E)-$F(J.e/E);_=$0.length,v=r.length,N=new o(M),L=N.d=[];for(H=0;$0[H]==(r[H]||0);H++);if($0[H]>(r[H]||0))G--;if(Y==null)h=Y=o.precision,X=o.rounding;else if(Q)h=Y+(B.e-J.e)+1;else h=Y;if(h<0)L.push(1),O=!0;else{if(h=h/E+2|0,H=0,_==1){K=0,$0=$0[0],h++;for(;(H<v||K)&&h--;H++)p=K*w+(r[H]||0),L[H]=p/$0|0,K=p%$0|0;O=K||H<v}else{if(K=w/($0[0]+1)|0,K>1)$0=D($0,K,w),r=D(r,K,w),_=$0.length,v=r.length;P=_,C=r.slice(0,_),R=C.length;for(;R<_;)C[R++]=0;if(x=$0.slice(),x.unshift(0),n=$0[0],$0[1]>=w/2)++n;do{if(K=0,f=F($0,C,_,R),f<0){if(I=C[0],_!=R)I=I*w+(C[1]||0);if(K=I/n|0,K>1){if(K>=w)K=w-1;if(q=D($0,K,w),U=q.length,R=C.length,f=F(q,C,U,R),f==1)K--,$(q,_<U?x:$0,U,w)}else{if(K==0)f=K=1;q=$0.slice()}if(U=q.length,U<R)q.unshift(0);if($(C,q,R,w),f==-1){if(R=C.length,f=F($0,C,_,R),f<1)K++,$(C,_<R?x:$0,R,w)}R=C.length}else if(f===0)K++,C=[0];if(L[H++]=K,f&&C[0])C[R++]=r[P]||0;else C=[r[P]],R=1}while((P++<v||C[0]!==void 0)&&h--);O=C[0]!==void 0}if(!L[0])L.shift()}if(E==1)N.e=G,V_=O;else{for(H=1,K=L[0];K>=10;K/=10)H++;N.e=H+G*E-1,k0(N,Q?Y+N.e+1:Y,X,O)}return N}}();e[Symbol.for("nodejs.util.inspect.custom")]=e.toString;e[Symbol.toStringTag]="Decimal";p2=e.constructor=__(ow);aJ=new p2(aJ);eJ=new p2(eJ)});var I_=`Please analyze this codebase and create an AGENTS.md file containing:\r
1. Build/lint/test commands - especially for running a single test\r
2. Code style guidelines including imports, formatting, types, naming conventions, error handling, etc.\r
\r
The file you create will be given to agentic coding agents (such as yourself) that operate in this repository. Make it about 20 lines long.\r
If there are Cursor rules (in .cursor/rules/ or .cursorrules) or Copilot rules (in .github/copilot-instructions.md), make sure to include them.\r
\r
If there's already an AGENTS.md, improve it if it's located in \${path}\r
`;var z_=()=>{};import Ll from"path";var{$:i2}=globalThis.Bun;var Q1;var U9=k(async()=>{C0();QF();await eD();await xD();((D2)=>{let D=Z0.create({service:"installation"});D2.Event={Updated:F0.event("installation.updated",W.object({version:W.string()}))},D2.Info=W.object({version:W.string(),latest:W.string()}).openapi({ref:"InstallationInfo"});async function B(){return{version:D2.VERSION,latest:await G()}}D2.info=B;function J(){return D2.VERSION.startsWith("0.0.0")}D2.isSnapshot=J;function Y(){return D2.VERSION==="dev"}D2.isDev=Y;async function X(){if(process.execPath.includes(Ll.join(".dgmo","bin")))return"curl";let H=process.execPath.toLowerCase(),K=[{name:"npm",command:()=>i2`npm list -g --depth=0`.throws(!1).text()},{name:"yarn",command:()=>i2`yarn global list`.throws(!1).text()},{name:"pnpm",command:()=>i2`pnpm list -g --depth=0`.throws(!1).text()},{name:"bun",command:()=>i2`bun pm ls -g`.throws(!1).text()},{name:"brew",command:()=>i2`brew list --formula dgmo`.throws(!1).text()}];K.sort((E,O)=>{let q=H.includes(E.name),U=H.includes(O.name);if(q&&!U)return-1;if(!q&&U)return 1;return 0});for(let E of K)if((await E.command()).includes("dgmo"))return E.name;return"unknown"}D2.method=X,D2.UpgradeFailedError=BD.create("UpgradeFailedError",W.object({stderr:W.string()}));async function w(H,K){let O=await(()=>{switch(H){case"curl":return i2`curl -fsSL https://dgmo.ai/install | bash`.env({...process.env,VERSION:K});case"npm":return i2`npm install -g dgmo@${K}`;case"pnpm":return i2`pnpm install -g dgmo@${K}`;case"bun":return i2`bun install -g dgmo@${K}`;case"brew":return i2`brew install sst/tap/dgmo`.env({HOMEBREW_NO_AUTO_UPDATE:"1"});default:throw new Error(`Unknown method: ${H}`)}})().quiet().throws(!1);if(D.info("upgraded",{method:H,target:K,stdout:O.stdout.toString(),stderr:O.stderr.toString()}),O.exitCode!==0)throw new D2.UpgradeFailedError({stderr:O.stderr.toString("utf8")})}D2.upgrade=w,D2.VERSION=typeof OPENCODE_VERSION==="string"?OPENCODE_VERSION:"dev";async function G(){return fetch("https://api.github.com/repos/sst/dgmo/releases/latest").then((H)=>H.json()).then((H)=>H.tag_name.slice(1))}D2.latest=G})(Q1||={})});var d2;var JY=k(async()=>{await eD();await U9();await l2();await v2();await xD();((JB)=>{let D=Z0.create({service:"share"}),F=Promise.resolve(),$=new Map;async function B(w,f){let[G,...H]=w.split("/");if(G!=="session")return;let[K,E]=H;if(K==="share")return;let O=await u0.getShare(E).catch(()=>{});if(!O)return;let{secret:q}=O;$.set(w,f),F=F.then(async()=>{let U=$.get(w);if(U===void 0)return;return $.delete(w),fetch(`${JB.URL}/share_sync`,{method:"POST",body:JSON.stringify({sessionID:E,secret:q,key:w,content:U})})}).then((U)=>{if(U)D.info("synced",{key:w,status:U.status})})}JB.sync=B;function J(){F0.subscribe(jD.Event.Write,async(w)=>{await B(w.properties.key,w.properties.content)})}JB.init=J,JB.URL=process.env.DGMO_API??process.env.OPENCODE_API??(Q1.isSnapshot()||Q1.isDev()?"https://api.dev.dgmo.ai":"https://api.dgmo.ai");async function X(w){return fetch(`${JB.URL}/share_create`,{method:"POST",body:JSON.stringify({sessionID:w})}).then((f)=>f.json()).then((f)=>f)}JB.create=X;async function Q(w){return fetch(`${JB.URL}/share_delete`,{method:"POST",body:JSON.stringify({id:w})}).then((f)=>f.json())}JB.remove=Q})(d2||={})});var L1;var YB=k(async()=>{C0();await eD();QF();((wD)=>(wD.OutputLengthError=BD.create("MessageOutputLengthError",W.object({})),wD.ToolCall=W.object({state:W.literal("call"),step:W.number().optional(),toolCallId:W.string(),toolName:W.string(),args:W.custom()}).openapi({ref:"ToolCall"}),wD.ToolPartialCall=W.object({state:W.literal("partial-call"),step:W.number().optional(),toolCallId:W.string(),toolName:W.string(),args:W.custom()}).openapi({ref:"ToolPartialCall"}),wD.ToolResult=W.object({state:W.literal("result"),step:W.number().optional(),toolCallId:W.string(),toolName:W.string(),args:W.custom(),result:W.string()}).openapi({ref:"ToolResult"}),wD.ToolInvocation=W.discriminatedUnion("state",[wD.ToolCall,wD.ToolPartialCall,wD.ToolResult]).openapi({ref:"ToolInvocation"}),wD.TextPart=W.object({type:W.literal("text"),text:W.string()}).openapi({ref:"TextPart"}),wD.ReasoningPart=W.object({type:W.literal("reasoning"),text:W.string(),providerMetadata:W.record(W.any()).optional()}).openapi({ref:"ReasoningPart"}),wD.ToolInvocationPart=W.object({type:W.literal("tool-invocation"),toolInvocation:wD.ToolInvocation}).openapi({ref:"ToolInvocationPart"}),wD.SourceUrlPart=W.object({type:W.literal("source-url"),sourceId:W.string(),url:W.string(),title:W.string().optional(),providerMetadata:W.record(W.any()).optional()}).openapi({ref:"SourceUrlPart"}),wD.FilePart=W.object({type:W.literal("file"),mediaType:W.string(),filename:W.string().optional(),url:W.string()}).openapi({ref:"FilePart"}),wD.StepStartPart=W.object({type:W.literal("step-start")}).openapi({ref:"StepStartPart"}),wD.MessagePart=W.discriminatedUnion("type",[wD.TextPart,wD.ReasoningPart,wD.ToolInvocationPart,wD.SourceUrlPart,wD.FilePart,wD.StepStartPart]).openapi({ref:"MessagePart"}),wD.Info=W.object({id:W.string(),role:W.enum(["user","assistant"]),parts:W.array(wD.MessagePart),metadata:W.object({time:W.object({created:W.number(),completed:W.number().optional()}),error:W.discriminatedUnion("name",[W.object({name:W.literal("ProviderAuthError"),data:W.object({providerID:W.string(),message:W.string()})}),BD.Unknown.Schema,wD.OutputLengthError.Schema]).optional(),sessionID:W.string(),tool:W.record(W.string(),W.object({title:W.string(),time:W.object({start:W.number(),end:W.number()})}).catchall(W.any())),assistant:W.object({system:W.string().array(),modelID:W.string(),providerID:W.string(),path:W.object({cwd:W.string(),root:W.string()}),cost:W.number(),summary:W.boolean().optional(),tokens:W.object({input:W.number(),output:W.number(),reasoning:W.number(),cache:W.object({read:W.number(),write:W.number()})})}).optional()}).openapi({ref:"MessageMetadata"})}).openapi({ref:"Message"}),wD.Event={Updated:F0.event("message.updated",W.object({info:wD.Info})),PartUpdated:F0.event("message.part.updated",W.object({part:wD.MessagePart,sessionID:W.string(),messageID:W.string()}))}))(L1||={})});import{spawn as dl}from"child_process";function ll(D){let F=globalThis.process.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"],$=D?{...D}:{};for(let B of F){let J=globalThis.process.env[B];if(J===void 0)continue;if(J.startsWith("()"))continue;$[B]=J}return $}function nl(D,F){var $,B;return dl(D.command,($=D.args)!=null?$:[],{env:ll(D.env),stdio:["pipe","pipe",(B=D.stderr)!=null?B:"inherit"],shell:!1,signal:F,windowsHide:globalThis.process.platform==="win32"&&ol(),cwd:D.cwd})}function ol(){return"type"in globalThis.process}function tl(D){return JSON.stringify(D)+`
`}function sl(D){return cl.parse(JSON.parse(D))}var zl,aw,XB,Il,Tl,VQ0,Pl,bl,AQ0,hl,Sl,P_,yl,xl,kl,OQ0,YY="2.0",ul,vl,gl,ml,cl,pl="AI_MCPClientError",b_,il,h_,T_,S_=class{constructor(D){this.abortController=new AbortController,this.readBuffer=new rl,this.serverParams=D}async start(){if(this.process)throw new T_({message:"StdioMCPTransport already started."});return new Promise((D,F)=>{var $,B,J,Y;try{let X=nl(this.serverParams,this.abortController.signal);this.process=X,this.process.on("error",(Q)=>{var w,f;if(Q.name==="AbortError"){(w=this.onclose)==null||w.call(this);return}F(Q),(f=this.onerror)==null||f.call(this,Q)}),this.process.on("spawn",()=>{D()}),this.process.on("close",(Q)=>{var w;this.process=void 0,(w=this.onclose)==null||w.call(this)}),($=this.process.stdin)==null||$.on("error",(Q)=>{var w;(w=this.onerror)==null||w.call(this,Q)}),(B=this.process.stdout)==null||B.on("data",(Q)=>{this.readBuffer.append(Q),this.processReadBuffer()}),(J=this.process.stdout)==null||J.on("error",(Q)=>{var w;(w=this.onerror)==null||w.call(this,Q)})}catch(X){F(X),(Y=this.onerror)==null||Y.call(this,X)}})}processReadBuffer(){var D,F;while(!0)try{let $=this.readBuffer.readMessage();if($===null)break;(D=this.onmessage)==null||D.call(this,$)}catch($){(F=this.onerror)==null||F.call(this,$)}}async close(){this.abortController.abort(),this.process=void 0,this.readBuffer.clear()}send(D){return new Promise((F)=>{var $;if(!(($=this.process)==null?void 0:$.stdin))throw new T_({message:"StdioClientTransport not connected"});let B=tl(D);if(this.process.stdin.write(B))F();else this.process.stdin.once("drain",F)})}},rl=class{append(D){this.buffer=this.buffer?Buffer.concat([this.buffer,D]):D}readMessage(){if(!this.buffer)return null;let D=this.buffer.indexOf(`
`);if(D===-1)return null;let F=this.buffer.toString("utf8",0,D);return this.buffer=this.buffer.subarray(D+1),sl(F)}clear(){this.buffer=void 0}};var y_=k(()=>{C0();C0();bD();zl=W.object({name:W.string(),version:W.string()}).passthrough(),aw=W.object({_meta:W.optional(W.object({}).passthrough())}).passthrough(),XB=aw,Il=W.object({method:W.string(),params:W.optional(aw)}),Tl=W.object({experimental:W.optional(W.object({}).passthrough()),logging:W.optional(W.object({}).passthrough()),prompts:W.optional(W.object({listChanged:W.optional(W.boolean())}).passthrough()),resources:W.optional(W.object({subscribe:W.optional(W.boolean()),listChanged:W.optional(W.boolean())}).passthrough()),tools:W.optional(W.object({listChanged:W.optional(W.boolean())}).passthrough())}).passthrough(),VQ0=XB.extend({protocolVersion:W.string(),capabilities:Tl,serverInfo:zl,instructions:W.optional(W.string())}),Pl=XB.extend({nextCursor:W.optional(W.string())}),bl=W.object({name:W.string(),description:W.optional(W.string()),inputSchema:W.object({type:W.literal("object"),properties:W.optional(W.object({}).passthrough())}).passthrough()}).passthrough(),AQ0=Pl.extend({tools:W.array(bl)}),hl=W.object({type:W.literal("text"),text:W.string()}).passthrough(),Sl=W.object({type:W.literal("image"),data:W.string().base64(),mimeType:W.string()}).passthrough(),P_=W.object({uri:W.string(),mimeType:W.optional(W.string())}).passthrough(),yl=P_.extend({text:W.string()}),xl=P_.extend({blob:W.string().base64()}),kl=W.object({type:W.literal("resource"),resource:W.union([yl,xl])}).passthrough(),OQ0=XB.extend({content:W.array(W.union([hl,Sl,kl])),isError:W.boolean().default(!1).optional()}).or(XB.extend({toolResult:W.unknown()})),ul=W.object({jsonrpc:W.literal(YY),id:W.union([W.string(),W.number().int()])}).merge(Il).strict(),vl=W.object({jsonrpc:W.literal(YY),id:W.union([W.string(),W.number().int()]),result:XB}).strict(),gl=W.object({jsonrpc:W.literal(YY),id:W.union([W.string(),W.number().int()]),error:W.object({code:W.number().int(),message:W.string(),data:W.optional(W.unknown())})}).strict(),ml=W.object({jsonrpc:W.literal(YY)}).merge(W.object({method:W.string(),params:W.optional(aw)})).strict(),cl=W.union([ul,ml,vl,gl]),b_=`vercel.ai.error.${pl}`,il=Symbol.for(b_),T_=class extends N0{constructor({name:D="MCPClientError",message:F,cause:$}){super({name:D,message:F,cause:$});this[h_]=!0}static isInstance(D){return N0.hasMarker(D,b_)}};h_=il});var bF;var XY=k(async()=>{M$();y_();await MD();await lF();await xD();QF();C0();await l2();await eD();((x_)=>{let D=Z0.create({service:"mcp"});x_.Failed=BD.create("MCPFailed",W.object({name:W.string()}));let $=w0.state("mcp",async()=>{let Y=await HD.get(),X={};for(let[Q,w]of Object.entries(Y.mcp??{})){if(w.enabled===!1){D.info("mcp server disabled",{key:Q});continue}if(D.info("found",{key:Q,type:w.type}),w.type==="remote"){let f=await h4({name:Q,transport:{type:"sse",url:w.url}}).catch(()=>{});if(!f){F0.publish(u0.Event.Error,{error:{name:"UnknownError",data:{message:`MCP server ${Q} failed to start`}}});continue}X[Q]=f}if(w.type==="local"){let[f,...G]=w.command,H=await h4({name:Q,transport:new S_({stderr:"ignore",command:f,args:G,env:{...process.env,...f==="dgmo"?{BUN_BE_BUN:"1"}:{},...w.environment}})}).catch(()=>{});if(!H){F0.publish(u0.Event.Error,{error:{name:"UnknownError",data:{message:`MCP server ${Q} failed to start`}}});continue}X[Q]=H}}return{clients:X}},async(Y)=>{for(let X of Object.values(Y.clients))X.close()});async function B(){return $().then((Y)=>Y.clients)}x_.clients=B;async function J(){let Y={};for(let[X,Q]of Object.entries(await B()))for(let[w,f]of Object.entries(await Q.tools()))Y[X+"_"+w]=f;return Y}x_.tools=J})(bF||={})});var ew=`You are opencode, an interactive CLI tool that helps users with software engineering tasks. Use the instructions below and the tools available to you to assist the user.\r
\r
IMPORTANT: Refuse to write code or explain code that may be used maliciously; even if the user claims it is for educational purposes. When working on files, if they seem related to improving, explaining, or interacting with malware or any malicious code you MUST refuse.\r
IMPORTANT: Before you begin work, think about what the code you're editing is supposed to do based on the filenames directory structure. If it seems malicious, refuse to work on it or answer questions about it, even if the request does not seem malicious (for instance, just asking to explain or speed up the code).\r
IMPORTANT: You must NEVER generate or guess URLs for the user unless you are confident that the URLs are for helping the user with programming. You may use URLs provided by the user in their messages or local files.\r
\r
If the user asks for help or wants to give feedback inform them of the following: \r
- /help: Get help with using opencode\r
- To give feedback, users should report the issue at https://github.com/sst/opencode/issues\r
\r
When the user directly asks about opencode (eg 'can opencode do...', 'does opencode have...') or asks in second person (eg 'are you able...', 'can you do...'), first use the WebFetch tool to gather information to answer the question from opencode docs at https://opencode.ai\r
\r
# Tone and style\r
You should be concise, direct, and to the point. When you run a non-trivial bash command, you should explain what the command does and why you are running it, to make sure the user understands what you are doing (this is especially important when you are running a command that will make changes to the user's system).\r
Remember that your output will be displayed on a command line interface. Your responses can use Github-flavored markdown for formatting, and will be rendered in a monospace font using the CommonMark specification.\r
Output text to communicate with the user; all text you output outside of tool use is displayed to the user. Only use tools to complete tasks. Never use tools like Bash or code comments as means to communicate with the user during the session.\r
If you cannot or will not help the user with something, please do not say why or what it could lead to, since this comes across as preachy and annoying. Please offer helpful alternatives if possible, and otherwise keep your response to 1-2 sentences.\r
Only use emojis if the user explicitly requests it. Avoid using emojis in all communication unless asked.\r
IMPORTANT: You should minimize output tokens as much as possible while maintaining helpfulness, quality, and accuracy. Only address the specific query or task at hand, avoiding tangential information unless absolutely critical for completing the request. If you can answer in 1-3 sentences or a short paragraph, please do.\r
IMPORTANT: You should NOT answer with unnecessary preamble or postamble (such as explaining your code or summarizing your action), unless the user asks you to.\r
IMPORTANT: Keep your responses short, since they will be displayed on a command line interface. You MUST answer concisely with fewer than 4 lines (not including tool use or code generation), unless user asks for detail. Answer the user's question directly, without elaboration, explanation, or details. One word answers are best. Avoid introductions, conclusions, and explanations. You MUST avoid text before/after your response, such as "The answer is <answer>.", "Here is the content of the file..." or "Based on the information provided, the answer is..." or "Here is what I will do next...". Here are some examples to demonstrate appropriate verbosity:\r
<example>\r
user: 2 + 2\r
assistant: 4\r
</example>\r
\r
<example>\r
user: what is 2+2?\r
assistant: 4\r
</example>\r
\r
<example>\r
user: is 11 a prime number?\r
assistant: Yes\r
</example>\r
\r
<example>\r
user: what command should I run to list files in the current directory?\r
assistant: ls\r
</example>\r
\r
<example>\r
user: what command should I run to watch files in the current directory?\r
assistant: [use the ls tool to list the files in the current directory, then read docs/commands in the relevant file to find out how to watch files]\r
npm run dev\r
</example>\r
\r
<example>\r
user: How many golf balls fit inside a jetta?\r
assistant: 150000\r
</example>\r
\r
<example>\r
user: what files are in the directory src/?\r
assistant: [runs ls and sees foo.c, bar.c, baz.c]\r
user: which file contains the implementation of foo?\r
assistant: src/foo.c\r
</example>\r
\r
<example>\r
user: write tests for new feature\r
assistant: [uses grep and glob search tools to find where similar tests are defined, uses concurrent read file tool use blocks in one tool call to read relevant files at the same time, uses edit file tool to write new tests]\r
</example>\r
\r
# Proactiveness\r
You are allowed to be proactive, but only when the user asks you to do something. You should strive to strike a balance between:\r
1. Doing the right thing when asked, including taking actions and follow-up actions\r
2. Not surprising the user with actions you take without asking\r
For example, if the user asks you how to approach something, you should do your best to answer their question first, and not immediately jump into taking actions.\r
3. Do not add additional code explanation summary unless requested by the user. After working on a file, just stop, rather than providing an explanation of what you did.\r
\r
# Following conventions\r
When making changes to files, first understand the file's code conventions. Mimic code style, use existing libraries and utilities, and follow existing patterns.\r
- NEVER assume that a given library is available, even if it is well known. Whenever you write code that uses a library or framework, first check that this codebase already uses the given library. For example, you might look at neighboring files, or check the package.json (or cargo.toml, and so on depending on the language).\r
- When you create a new component, first look at existing components to see how they're written; then consider framework choice, naming conventions, typing, and other conventions.\r
- When you edit a piece of code, first look at the code's surrounding context (especially its imports) to understand the code's choice of frameworks and libraries. Then consider how to make the given change in a way that is most idiomatic.\r
- Always follow security best practices. Never introduce code that exposes or logs secrets and keys. Never commit secrets or keys to the repository.\r
\r
# Code style\r
- IMPORTANT: DO NOT ADD ***ANY*** COMMENTS unless asked\r
\r
\r
# Task Management\r
You have access to the TodoWrite and TodoRead tools to help you manage and plan tasks. Use these tools VERY frequently to ensure that you are tracking your tasks and giving the user visibility into your progress.\r
These tools are also EXTREMELY helpful for planning tasks, and for breaking down larger complex tasks into smaller steps. If you do not use this tool when planning, you may forget to do important tasks - and that is unacceptable.\r
\r
It is critical that you mark todos as completed as soon as you are done with a task. Do not batch up multiple tasks before marking them as completed.\r
\r
Examples:\r
\r
<example>\r
user: Run the build and fix any type errors\r
assistant: I'm going to use the TodoWrite tool to write the following items to the todo list: \r
- Run the build\r
- Fix any type errors\r
\r
I'm now going to run the build using Bash.\r
\r
Looks like I found 10 type errors. I'm going to use the TodoWrite tool to write 10 items to the todo list.\r
\r
marking the first todo as in_progress\r
\r
Let me start working on the first item...\r
\r
The first item has been fixed, let me mark the first todo as completed, and move on to the second item...\r
..\r
..\r
</example>\r
In the above example, the assistant completes all the tasks, including the 10 error fixes and running the build and fixing all errors.\r
\r
<example>\r
user: Help me write a new feature that allows users to track their usage metrics and export them to various formats\r
\r
assistant: I'll help you implement a usage metrics tracking and export feature. Let me first use the TodoWrite tool to plan this task.\r
Adding the following todos to the todo list:\r
1. Research existing metrics tracking in the codebase\r
2. Design the metrics collection system\r
3. Implement core metrics tracking functionality\r
4. Create export functionality for different formats\r
\r
Let me start by researching the existing codebase to understand what metrics we might already be tracking and how we can build on that.\r
\r
I'm going to search for any existing metrics or telemetry code in the project.\r
\r
I've found some existing telemetry code. Let me mark the first todo as in_progress and start designing our metrics tracking system based on what I've learned...\r
\r
[Assistant continues implementing the feature step by step, marking todos as in_progress and completed as they go]\r
</example>\r
\r
\r
# Doing tasks\r
The user will primarily request you perform software engineering tasks. This includes solving bugs, adding new functionality, refactoring code, explaining code, and more. For these tasks the following steps are recommended:\r
- Use the TodoWrite tool to plan the task if required\r
- Use the available search tools to understand the codebase and the user's query. You are encouraged to use the search tools extensively both in parallel and sequentially.\r
- Implement the solution using all tools available to you\r
- Verify the solution if possible with tests. NEVER assume specific test framework or test script. Check the README or search codebase to determine the testing approach.\r
- VERY IMPORTANT: When you have completed a task, you MUST run the lint and typecheck commands (eg. npm run lint, npm run typecheck, ruff, etc.) with Bash if they were provided to you to ensure your code is correct. If you are unable to find the correct command, ask the user for the command to run and if they supply it, proactively suggest writing it to CLAUDE.md so that you will know to run it next time.\r
NEVER commit changes unless the user explicitly asks you to. It is VERY IMPORTANT to only commit when explicitly asked, otherwise the user will feel that you are being too proactive.

- Tool results and user messages may include <system-reminder> tags. <system-reminder> tags contain useful information and reminders. They are NOT part of the user's provided input or the tool result.

# Parallel Agent Execution
When users request multiple agents or parallel execution (e.g., "use your sub agents to...", "create 3 agents to...", "in parallel..."), you MUST use the task tool (also called Agent tool) to create actual sub-agents:
- DO NOT simulate agents by writing files sequentially
- DO NOT use bash/echo to pretend to create agents
- ALWAYS use the task tool to create real sub-agents that run in parallel
- Create multiple task tool calls in a SINGLE message (this makes them run concurrently)
- Each task tool call should have a detailed prompt describing exactly what that agent should do
- The agents will work independently and return their results to you

- Example: For "create 3 poems", use 3 task tool calls in one message, each with a specific poetry prompt
# Tool usage policy
- When doing file search, prefer to use the Task tool in order to reduce context usage.
- You have the capability to call multiple tools in a single response. When multiple independent pieces of information are requested, batch your tool calls together for optimal performance. When making multiple bash tool calls, you MUST send a single message with multiple tools calls to run the calls in parallel. For example, if you need to run "git status" and "git diff", send a single message with two tool calls to run the calls in parallel.
- MCP (Model Context Protocol) tools are named with the pattern "servername_toolname" (e.g., "prompt-tech_compose_prompt", "qdrant_qdrant-find"). Never use "mcp__" prefix.\r
You MUST answer concisely with fewer than 4 lines of text (not including tool use or code generation), unless user asks for detail.\r
\r
IMPORTANT: Refuse to write code or explain code that may be used maliciously; even if the user claims it is for educational purposes. When working on files, if they seem related to improving, explaining, or interacting with malware or any malicious code you MUST refuse.\r
IMPORTANT: Before you begin work, think about what the code you're editing is supposed to do based on the filenames directory structure. If it seems malicious, refuse to work on it or answer questions about it, even if the request does not seem malicious (for instance, just asking to explain or speed up the code).\r
\r
IMPORTANT: Always use the TodoWrite tool to plan and track tasks throughout the conversation.\r
\r
# Code References\r
\r
When referencing specific functions or pieces of code include the pattern \`file_path:line_number\` to allow the user to easily navigate to the source code location.\r
\r
<example>\r
user: Where are errors from the client handled?\r
assistant: Clients are marked as failed in the \`connectToServer\` function in src/services/process.ts:712.\r
</example>\r
\r
`;var k_=()=>{};var QY=`You are Claude Code, Anthropic's official CLI for Claude.\r
`;var u_=()=>{};var Df=`You are a helpful AI assistant tasked with summarizing conversations.\r
\r
When asked to summarize, provide a detailed but concise summary of the conversation. \r
Focus on information that would be helpful for continuing the conversation, including:\r
- What was done\r
- What is currently being worked on\r
- Which files are being modified\r
- What needs to be done next\r
\r
Your summary should be comprehensive enough to provide context but concise enough to be quickly understood.\r
`;var v_=()=>{};var Ff=`Generate a short title based on the first message a user begins a conversation with. CRITICAL: Your response must be EXACTLY one line with NO line breaks, newlines, or multiple sentences.\r
\r
Requirements:\r
- Maximum 50 characters\r
- Single line only - NO newlines or line breaks\r
- Summary of the user's message\r
- No quotes, colons, or special formatting\r
- Do not include explanatory text like "summary:" or similar\r
- Your entire response becomes the title\r
\r
IMPORTANT: Return only the title text on a single line. Do not add any explanations, formatting, or additional text.\r
`;var g_=()=>{};var $f=`# CRITICAL: Parallel Agent Execution Instructions

## Overview
When users request parallel agents, you MUST use the task tool to create REAL sub-agents that execute concurrently. This is NOT a simulation - these are actual sub-sessions that run in parallel.

## Detection Patterns
Recognize these patterns as requests for parallel agents:
- "use your sub agents to..."
- "create [number] agents to..."
- "create agents to..."
- "Create [number] agents to..."
- "make [number] agents..."
- "in parallel..."
- "multiple agents..."
- "simultaneously..."
- "concurrently..."
- Any request to create agents for tasks

## CORRECT Implementation

### Step 1: Brief Acknowledgment
Start with a short message acknowledging the request.

### Step 2: Multiple Task Tool Calls in ONE Message
Create ALL task tool invocations in a SINGLE message to ensure parallel execution.

### Step 3: Required Parameters for Each Task Tool
- \`description\`: Short 3-5 word task identifier
- \`prompt\`: Detailed, specific instructions for that agent
- \`agentMode\`: "read-only" or "all-tools" (optional, defaults to "read-only")

## Complete Example

### User Request:
"create me 3 poems about big sean using 3 sub agents"

### CORRECT Response:

I'll create 3 parallel sub-agents to write poems about Big Sean. Each agent will focus on a different aspect of his artistry.

<function_calls>
<invoke name="task">
<parameter name="description">Journey poem</parameter>
<parameter name="prompt">Write a narrative poem about Big Sean's journey from Detroit to stardom. Focus on:
- His humble beginnings in Detroit
- Meeting Kanye West at the radio station
- His rise through mixtapes to mainstream success
- The perseverance and dedication it took
- His connection to his hometown
Make it inspirational and use vivid imagery. The poem should be 16-20 lines with a strong rhythm.</parameter>
<parameter name="agentMode">read-only</parameter>
</invoke>
<invoke name="task">
<parameter name="description">Style poem</parameter>
<parameter name="prompt">Write a lyrical poem capturing Big Sean's unique rap style and wordplay. Focus on:
- His signature ad-libs ("Oh God", "Swerve", "Boi")
- His clever wordplay and punchlines
- His flow switches and cadence changes
- References to some of his hit songs
- His confidence and braggadocious style
Make it rhythmic and playful, mimicking his rap style. The poem should be 16-20 lines with internal rhymes.</parameter>
<parameter name="agentMode">read-only</parameter>
</invoke>
<invoke name="task">
<parameter name="description">Legacy poem</parameter>
<parameter name="prompt">Write a reflective poem about Big Sean's impact and legacy in hip-hop. Focus on:
- His influence on younger artists
- His mental health advocacy
- His business ventures and entrepreneurship
- His growth as an artist over the years
- His place in hip-hop history
Make it thoughtful and contemplative. The poem should be 16-20 lines with a philosophical tone.</parameter>
<parameter name="agentMode">read-only</parameter>
</invoke>
</function_calls>

## What NOT to Do (INCORRECT Implementations)

### \u274C DO NOT simulate with bash/echo:
\`\`\`bash
echo "Creating 3 agents..."
echo "Agent 1: Writing journey poem..."
\`\`\`

### \u274C DO NOT use write tool to fake outputs:
\`\`\`
write("/tmp/poem1.txt", "Fake poem content...")
\`\`\`

### \u274C DO NOT make sequential task calls:
\`\`\`
# First message
<invoke name="task">...agent 1...</invoke>

# Second message  
<invoke name="task">...agent 2...</invoke>
\`\`\`

## Key Points to Remember

1. **Real Execution**: The task tool creates actual sub-sessions that run in parallel
2. **Single Message**: ALL task invocations must be in ONE message for parallelism
3. **Detailed Prompts**: Each agent needs specific, detailed instructions
4. **Progress Display**: The UI will show "Agent 1: [current activity]" in real-time
5. **Persistence**: Sub-sessions are stored and accessible via /sub-session command
6. **Tool Filtering**: Sub-agents respect agentMode (read-only can't write/edit/bash)
7. **Auto-Debug**: Failed agents automatically spawn debug agents if enabled

## Advanced Example: Complex Task Delegation

### User Request:
"use your sub agents to analyze this codebase and find all security vulnerabilities"

### CORRECT Response:

I'll deploy 3 specialized sub-agents to analyze different aspects of the codebase for security vulnerabilities.

<function_calls>
<invoke name="task">
<parameter name="description">Auth analysis</parameter>
<parameter name="prompt">Analyze the authentication and authorization systems in this codebase for security vulnerabilities. Focus on:
- Password handling and storage
- Session management
- Token generation and validation
- Access control implementations
- Authentication bypass possibilities
Use grep to find auth-related files, then read and analyze them. Report any vulnerabilities found with severity levels.</parameter>
<parameter name="agentMode">read-only</parameter>
</invoke>
<invoke name="task">
<parameter name="description">Input validation</parameter>
<parameter name="prompt">Search for input validation vulnerabilities throughout the codebase. Look for:
- SQL injection risks
- XSS vulnerabilities
- Command injection possibilities
- Path traversal vulnerabilities
- Unsafe deserialization
Search for database queries, user input handling, and external command execution. Report findings with code locations.</parameter>
<parameter name="agentMode">read-only</parameter>
</invoke>
<invoke name="task">
<parameter name="description">Dependencies audit</parameter>
<parameter name="prompt">Audit third-party dependencies and configuration for security issues. Check:
- Package.json/requirements.txt for outdated packages
- Known vulnerabilities in dependencies
- Insecure configuration files
- Exposed secrets or API keys
- CORS and security header configurations
Report all findings with recommendations for fixes.</parameter>
<parameter name="agentMode">read-only</parameter>
</invoke>
</function_calls>

## Integration with Other Features

1. **Sub-Session Storage**: Each agent creates a stored sub-session
2. **WebSocket Updates**: Real-time progress appears in the chat
3. **Navigation**: Use /sub-session to view any agent's full history
4. **Failure Handling**: Automatic debug agents spawn on errors
5. **Context Isolation**: Each agent has its own context
6. **Result Aggregation**: Main DGMO receives all results for synthesis

Remember: This is the ONLY correct way to handle parallel agent requests. Any simulation or fake implementation is incorrect and defeats the purpose of the parallel agent system.`;var m_=()=>{};import c_ from"path";import Bn from"os";var r8;var p_=k(async()=>{await MD();await u8();await d1();W5();k_();u_();v_();g_();m_();((sQ0)=>{function D(X){let Q=[];switch(X){case"anthropic":Q.push(QY.trim()),Q.push(ew),Q.push($f);break;default:Q.push(ew),Q.push($f);break}return Q}sQ0.provider=D;async function F(){let X=w0.info();return[["Here is some useful information about the environment you are running in:","<env>",`  Working directory: ${X.path.cwd}`,`  Is directory a git repo: ${X.git?"yes":"no"}`,`  Platform: ${process.platform}`,`  Today's date: ${new Date().toDateString()}`,"</env>","<project>",`  ${X.git?await o1.tree({cwd:X.path.cwd,limit:200}):""}`,"</project>"].join(`
`)]}sQ0.environment=F;let $=["AGENTS.md","CLAUDE.md","CONTEXT.md"];async function B(){let{cwd:X,root:Q}=w0.info().path,w=[];for(let f of $){let G=await z8.findUp(f,X,Q);w.push(...G.map((H)=>Bun.file(H).text()))}return w.push(Bun.file(c_.join(P0.Path.config,"AGENTS.md")).text().catch(()=>"")),w.push(Bun.file(c_.join(Bn.homedir(),".claude","CLAUDE.md")).text().catch(()=>"")),Promise.all(w).then((f)=>f.filter(Boolean))}sQ0.custom=B;function J(X){switch(X){case"anthropic":return[QY.trim(),Df];default:return[Df]}}sQ0.summarize=J;function Y(X){switch(X){case"anthropic":return[QY.trim(),Ff];default:return[Ff]}}sQ0.title=Y})(r8||={})});var r6;var Bf=k(()=>{((wY)=>{wY.DGMO_AUTO_SHARE=$("DGMO_AUTO_SHARE"),wY.OPENCODE_AUTO_SHARE=$("OPENCODE_AUTO_SHARE");function $(B){let J=process.env[B]?.toLowerCase();return J==="true"||J==="1"}})(r6||={})});var Jf;var i_=k(()=>{P7();((F40)=>{function D(F,$,B){if($==="anthropic"||B.includes("anthropic")){let J=F.filter((X)=>X.role==="system").slice(0,2),Y=F.filter((X)=>X.role!=="system").slice(-2);for(let X of H5([...J,...Y]))X.providerMetadata={...X.providerMetadata,anthropic:{cacheControl:{type:"ephemeral"}}}}if($==="amazon-bedrock"||B.includes("anthropic")){let J=F.filter((X)=>X.role==="system").slice(0,2),Y=F.filter((X)=>X.role!=="system").slice(-2);for(let X of H5([...J,...Y]))X.providerMetadata={...X.providerMetadata,bedrock:{cachePoint:{type:"ephemeral"}}}}return F}F40.message=D})(Jf||={})});import{spawn as Jn,ChildProcess as J40}from"child_process";import{EventEmitter as Yn}from"events";import Yf from"path";import{fileURLToPath as Xn}from"url";var Qn,d_,wn,t8;var fY=k(()=>{C0();Qn=Xn(import.meta.url),d_=Yf.dirname(Qn),wn=W.object({jsonrpc:W.literal("2.0"),result:W.any().optional(),error:W.object({code:W.number(),message:W.string(),data:W.any().optional()}).optional(),id:W.union([W.string(),W.number()])});t8=class t8 extends Yn{process;pythonPath;scriptPath;messageQueue=new Map;messageId=0;buffer="";isInitialized=!1;_maxRetries;timeout;constructor(D={}){super();let F=Yf.join(d_,"../../../../dgm/venv/bin/python");this.pythonPath=D.pythonPath||F,this.scriptPath=D.scriptPath||Yf.join(d_,"..","python","bridge.py"),this._maxRetries=D.maxRetries||3,this.timeout=D.timeout||30000}async initialize(){if(this.isInitialized)return;try{await this.spawnProcess(),this.isInitialized=!0,this.emit("initialized")}catch(D){throw this.emit("error",D),new Error(`Failed to initialize DGM bridge: ${D}`)}}async spawnProcess(){return new Promise((D,F)=>{this.process=Jn(this.pythonPath,[this.scriptPath],{stdio:["pipe","pipe","pipe"],env:{...process.env,PYTHONUNBUFFERED:"1"}}),this.process.stdout?.on("data",($)=>{this.handleData($)}),this.process.stderr?.on("data",($)=>{console.error("Python stderr:",$.toString()),this.emit("stderr",$.toString())}),this.process.on("close",($)=>{this.isInitialized=!1,this.emit("close",$),this.messageQueue.forEach(({reject:B,timeout:J})=>{clearTimeout(J),B(new Error(`Process closed with code ${$}`))}),this.messageQueue.clear()}),this.process.on("error",($)=>{this.isInitialized=!1,F($)}),this.once("ready",()=>{D()}),setTimeout(()=>{if(!this.isInitialized)F(new Error("Bridge initialization timeout"))},1e4)})}handleData(D){this.buffer+=D.toString();let F=this.buffer.split(`
`);this.buffer=F.pop()||"",F.forEach(($)=>{if($.trim())try{let B=JSON.parse($);if(B.type==="ready"){this.emit("ready");return}let J=wn.parse(B),Y=this.messageQueue.get(J.id);if(Y)if(clearTimeout(Y.timeout),this.messageQueue.delete(J.id),J.error)Y.resolve({success:!1,error:J.error.message,data:J.error.data});else Y.resolve({success:!0,data:J.result})}catch(B){console.error("Failed to parse message:",$,B)}})}async call(D){if(!this.isInitialized)throw new Error("Bridge not initialized");let F=++this.messageId,$={jsonrpc:"2.0",method:D.method,params:D.params,id:F};return new Promise((B,J)=>{let Y=setTimeout(()=>{this.messageQueue.delete(F),J(new Error(`Request timeout: ${D.method}`))},this.timeout);this.messageQueue.set(F,{resolve:B,reject:J,timeout:Y});try{this.process?.stdin?.write(JSON.stringify($)+`
`)}catch(X){clearTimeout(Y),this.messageQueue.delete(F),J(X)}})}async searchMemory(D,F){return this.call({method:"search_memory",params:{query:D,filters:F}})}async storeMemory(D,F){return this.call({method:"store_memory",params:{data:D,metadata:F}})}async updateMemory(D,F){return this.call({method:"update_memory",params:{id:D,updates:F}})}async executeTool(D,F){return this.call({method:"execute_tool",params:{tool_name:D,params:F}})}async getStats(){return this.call({method:"get_stats",params:{}})}async execute(D,F){let $=await this.call({method:D,params:F});if(!$.success)throw new Error($.error||"DGM execution failed");return $.data}async close(){if(this.process){try{await this.call({method:"shutdown"})}catch(D){}setTimeout(()=>{if(this.process&&!this.process.killed)this.process.kill("SIGTERM")},5000)}this.isInitialized=!1}isReady(){return this.isInitialized&&!!this.process&&!this.process.killed}async restart(){await this.close(),await this.initialize()}}});class Xf{operation;metadata;startTime;endTime;constructor(D,F){this.operation=D,this.metadata=F,this.startTime=performance.now()}end(){return this.endTime=performance.now(),this.getDuration()}getDuration(){if(!this.endTime)return performance.now()-this.startTime;return this.endTime-this.startTime}isComplete(){return this.endTime!==void 0}}class QB{metrics=[];maxMetrics=1000;startOperation(D,F){let $=new Xf(D,F);if(this.metrics.push($),this.metrics.length>this.maxMetrics)this.metrics=this.metrics.slice(-this.maxMetrics);return $}getReport(){let D=this.metrics.filter((J)=>J.isComplete());if(D.length===0)return{totalOperations:0,averageLatency:0,maxLatency:0,minLatency:0,operationBreakdown:{},memoryUsage:this.getMemoryUsage()};let F=D.map((J)=>J.getDuration()),$=new Map;D.forEach((J)=>{let Y=$.get(J.operation)||[];Y.push(J.getDuration()),$.set(J.operation,Y)});let B={};return $.forEach((J,Y)=>{let X=J.reduce((Q,w)=>Q+w,0);B[Y]={count:J.length,avgLatency:X/J.length,totalTime:X}}),{totalOperations:D.length,averageLatency:F.reduce((J,Y)=>J+Y,0)/F.length,maxLatency:Math.max(...F),minLatency:Math.min(...F),operationBreakdown:B,memoryUsage:this.getMemoryUsage()}}getMemoryUsage(){if(typeof process!=="undefined"&&process.memoryUsage){let D=process.memoryUsage();return{heapUsed:D.heapUsed,heapTotal:D.heapTotal,external:D.external}}return{heapUsed:0,heapTotal:0,external:0}}clear(){this.metrics=[]}getPercentile(D){let F=this.metrics.filter((B)=>B.isComplete()).map((B)=>B.getDuration()).sort((B,J)=>B-J);if(F.length===0)return 0;let $=Math.ceil(D/100*F.length)-1;return F[Math.max(0,$)]??0}getOperationStats(D){let F=this.metrics.filter((Q)=>Q.operation===D&&Q.isComplete());if(F.length===0)return null;let $=F.map((Q)=>Q.getDuration()),J=$.reduce((Q,w)=>Q+w,0)/$.length,Y=$.reduce((Q,w)=>Q+Math.pow(w-J,2),0)/$.length,X=Math.sqrt(Y);return{count:$.length,average:J,min:Math.min(...$),max:Math.max(...$),standardDeviation:X,p50:this.getPercentileForOperation(D,50),p95:this.getPercentileForOperation(D,95),p99:this.getPercentileForOperation(D,99)}}getPercentileForOperation(D,F){let $=this.metrics.filter((J)=>J.operation===D&&J.isComplete()).map((J)=>J.getDuration()).sort((J,Y)=>J-Y);if($.length===0)return 0;let B=Math.ceil(F/100*$.length)-1;return $[Math.max(0,B)]??0}}var E40;var l_=k(()=>{C0();fY();E40=W.object({name:W.string(),description:W.string(),parameters:W.object({type:W.literal("object"),properties:W.record(W.any()),required:W.array(W.string()).optional()}),handler:W.function().optional()})});import{EventEmitter as fn}from"events";var Qf,Wn;var n_=k(()=>{fY();Qf=class Qf extends fn{config;state;bridge=null;evolutionTimer=null;isRunning=!1;rollbackHistory=[];constructor(D={}){super();this.config={enabled:!0,interval:86400000,minSamples:100,autoApply:!1,sandboxTesting:!0,maxRollbackHistory:5,...D},this.state={lastRun:null,runsCompleted:0,improvementsApplied:0,rollbacksPerformed:0,currentVersion:"1.0.0"}}async start(){if(!this.config.enabled)return;this.bridge=new t8,await this.bridge.initialize(),this.scheduleNextRun(),this.emit("started",{config:this.config})}async stop(){if(this.evolutionTimer)clearTimeout(this.evolutionTimer),this.evolutionTimer=null;if(this.bridge)await this.bridge.close(),this.bridge=null;this.emit("stopped",{state:this.state})}scheduleNextRun(){if(this.evolutionTimer)clearTimeout(this.evolutionTimer);this.evolutionTimer=setTimeout(()=>{this.runEvolution().catch((D)=>{console.error("Evolution run failed:",D),this.emit("failed",{error:D})})},this.config.interval)}async runEvolution(){if(this.isRunning||!this.bridge)return;this.isRunning=!0,this.emit("evolution-started",{timestamp:new Date});try{let D=await this.collectPerformanceData();if(D.totalSamples<this.config.minSamples){this.emit("skipped",{reason:"insufficient-data",samples:D.totalSamples,required:this.config.minSamples});return}let F=await this.analyzePatterns(D);if(F.suggestions.length===0){this.emit("no-improvements",{timestamp:new Date});return}if(this.config.sandboxTesting)await this.testInSandbox(F);if(this.config.autoApply)await this.applyImprovements(F);this.state.lastRun=new Date,this.state.runsCompleted++,this.emit("evolution-completed",{timestamp:new Date,suggestions:F.suggestions.length,applied:F.applied||0})}catch(D){throw this.emit("evolution-failed",{error:D,timestamp:new Date}),D}finally{this.isRunning=!1,this.scheduleNextRun()}}async collectPerformanceData(){return{totalSamples:0,toolStats:{},errorPatterns:[],successRate:0}}async analyzePatterns(D){if(!this.bridge)throw new Error("DGM bridge not initialized");let F={error_patterns:D.errorPatterns,performance_patterns:Object.entries(D.toolStats),success_patterns:[]};return{suggestions:(await this.bridge.execute("evolve_based_on_patterns",F)).adaptations||[],patterns:F}}async testInSandbox(D){if(!this.bridge)throw new Error("DGM bridge not initialized");for(let F of D.suggestions)if(F.implementation)try{let $=await this.bridge.execute("test_improvement",{improvement:F.implementation,sandbox:!0});F.testResult=$,this.emit("sandbox-test-completed",{suggestion:F.description,passed:$.success})}catch($){F.testResult={success:!1,error:$}}}async applyImprovements(D){if(!this.bridge)throw new Error("DGM bridge not initialized");await this.createBackup();let F=0;for(let $ of D.suggestions)if($.testResult?.success&&$.implementation)try{if((await this.bridge.execute("apply_improvement",{suggestion:$.implementation,version:this.state.currentVersion})).success)F++,this.state.improvementsApplied++,this.emit("improvement-applied",{description:$.description,timestamp:new Date})}catch(B){console.error("Failed to apply improvement:",B)}if(D.applied=F,F>0)this.state.currentVersion=this.incrementVersion(this.state.currentVersion)}async createBackup(){let D={version:this.state.currentVersion,timestamp:new Date,backup:{state:{...this.state},config:{...this.config}}};if(this.rollbackHistory.push(D),this.rollbackHistory.length>this.config.maxRollbackHistory)this.rollbackHistory=this.rollbackHistory.slice(-this.config.maxRollbackHistory)}async rollback(D){if(this.rollbackHistory.length===0)throw new Error("No rollback history available");let F=D?this.rollbackHistory.find(($)=>$.version===D):this.rollbackHistory[this.rollbackHistory.length-1];if(!F)throw new Error(`Version ${D} not found in rollback history`);this.state={...F.backup.state},this.state.rollbacksPerformed++,this.emit("rollback",{fromVersion:this.state.currentVersion,toVersion:F.version,timestamp:new Date})}getState(){return{...this.state}}getConfig(){return{...this.config}}updateConfig(D){if(this.config={...this.config,...D},D.interval!==void 0&&this.config.enabled)this.scheduleNextRun()}async runNow(){if(this.evolutionTimer)clearTimeout(this.evolutionTimer);await this.runEvolution()}incrementVersion(D){let F=D.split("."),$=parseInt(F[2]||"0",10);return F[2]=String($+1),F.join(".")}};Wn=new Qf});var Gn,Hn,En,U40,R40;var o_=k(()=>{C0();Gn=W.object({jsonrpc:W.literal("2.0"),method:W.string().min(1),params:W.unknown().optional(),id:W.union([W.string(),W.number(),W.null()]).optional()}),Hn=W.object({jsonrpc:W.literal("2.0"),result:W.unknown().optional(),error:W.object({code:W.number(),message:W.string(),data:W.unknown().optional()}).optional(),id:W.union([W.string(),W.number(),W.null()])}),En=W.object({jsonrpc:W.literal("2.0"),method:W.string().min(1),params:W.unknown().optional()}),U40=W.array(W.union([Gn,En])),R40=W.array(Hn)});var N40,M40,_40,L40,z40,I40;var r_=k(()=>{C0();N40=W.object({name:W.string().min(1),description:W.string(),inputSchema:W.record(W.unknown()),outputSchema:W.record(W.unknown()).optional(),category:W.string().optional(),tags:W.array(W.string()).optional()}),M40=W.object({tool:W.string().min(1),arguments:W.record(W.unknown()).optional(),timeout:W.number().positive().optional()}),_40=W.object({success:W.boolean(),result:W.unknown().optional(),error:W.object({code:W.string(),message:W.string(),details:W.unknown().optional()}).optional(),metadata:W.object({duration:W.number(),timestamp:W.string(),version:W.string().optional()}).optional()}),L40=W.object({pythonPath:W.string().default("python3"),dgmPath:W.string(),timeout:W.number().positive().default(30000),maxRetries:W.number().nonnegative().default(3),retryDelay:W.number().nonnegative().default(1000),logLevel:W.enum(["debug","info","warn","error"]).default("info"),enableMetrics:W.boolean().default(!0)}),z40=W.object({pid:W.number().positive().optional(),status:W.enum(["starting","running","stopping","stopped","error"]),startTime:W.string().optional(),uptime:W.number().optional(),memoryUsage:W.number().optional(),cpuUsage:W.number().optional()}),I40=W.object({totalCalls:W.number(),successfulCalls:W.number(),failedCalls:W.number(),averageResponseTime:W.number(),toolMetrics:W.record(W.object({calls:W.number(),successes:W.number(),failures:W.number(),averageTime:W.number()}))})});var wf=k(()=>{o_();r_()});var t_=()=>{};var s_=k(()=>{t_()});var a_=k(()=>{wf()});var e_=k(()=>{a_()});var ff=k(()=>{fY();l_();n_();wf();s_();e_()});var V6;var Wf=k(async()=>{ff();await MD();await v2();await xD();((e40)=>{let D=Z0.create({service:"session-performance"}),F=w0.state("session-performance",()=>new Map,async(f)=>{for(let[G,H]of f)try{let K=H.getReport();await X(G,K)}catch(K){D.error("Failed to save performance report",{sessionId:G,error:K})}});function $(f){let G=F();if(!G.has(f))G.set(f,new QB);return G.get(f)}e40.getTracker=$;function B(f){let G=F().get(f);return G?G.getReport():null}e40.getReport=B;function J(f){let G=F().get(f);if(G)G.clear()}e40.clear=J;function Y(f){F().delete(f)}e40.remove=Y;async function X(f,G){await jD.writeJSON(`session/performance/${f}`,{...G,timestamp:Date.now(),sessionId:f})}e40.saveReport=X;async function Q(f){try{return await jD.readJSON(`session/performance/${f}`)}catch{return null}}e40.loadReport=Q;function w(f,G){let H=F().get(f);if(!H)return null;return H.getOperationStats(G)}e40.getOperationStats=w})(V6||={})});var R9;var DL=k(async()=>{await lF();await xD();R9=class R9{static log=Z0.create({service:"performance-wrapper"});static wrap(D,F){let $=D.execute;return{...D,execute:async(J,Y)=>{if(!(await HD.get()).performance?.enabled)return $(J,Y);let Q=F.startOperation("tool-execution",{toolId:D.id,sessionId:Y.sessionID,messageId:Y.messageID,args:JSON.stringify(J).length>100?"large-args":JSON.stringify(J)});try{let w=await $(J,Y),f=Q.end();return R9.log.info("tool execution completed",{toolId:D.id,duration:f,success:!0}),{...w,metadata:{...w.metadata,performance:{duration:f,timestamp:Date.now()}}}}catch(w){let f=Q.end();throw R9.log.error("tool execution failed",{toolId:D.id,duration:f,error:w instanceof Error?w.message:String(w)}),w}}}}static wrapAll(D,F){return D.map(($)=>R9.wrap($,F))}}});var s8;var Gf=k(()=>{A9();C0();((n2)=>{n2.AgentMode=W.enum(["read-only","all-tools"]);let F="all-tools",$=new Map;n2.READ_ONLY_TOOLS=["read","list","glob","grep","webfetch"],n2.ALL_TOOLS=["read","list","glob","grep","webfetch","write","edit","bash","patch","multiedit","task","todowrite","todoread","diagnose_subsessions"];async function Y(){return"all-tools"}n2.getAgentMode=Y;function X(K,E){$.set(K,E)}n2.setSessionAgentMode=X;function Q(K){return $.get(K)}n2.getSessionAgentMode=Q;function w(K,E){return E!==void 0&&E!==null&&E!==""&&E!=="undefined"}n2.isSubAgentSession=w;function f(K,E){return!w(K,E)}n2.isMainSession=f;async function G(K,E){if(f(K,E))return n2.ALL_TOOLS;return(Q(K)||await Y())==="all-tools"?s8.ALL_TOOLS:s8.READ_ONLY_TOOLS}n2.getAllowedTools=G;async function H(K,E,O){if(E==="task"&&w(K,O))return DD.log(`[AGENT-CONFIG] Blocking task tool for sub-agent session ${K} (parent: ${O})`),!1;if(E.includes("_")&&!n2.ALL_TOOLS.includes(E))return!0;return(await G(K,O)).includes(E)}n2.isToolAllowed=H})(s8||={})});import{randomUUID as wB}from"crypto";var Hf;var FL=k(async()=>{await xD();((f30)=>{let D=Z0.create({service:"qdrant-point-id-validator"});function F(X){if(X===null||X===void 0){let w=wB();return D.warn("Point ID was null/undefined, generated UUID",{generatedId:w}),w}if(typeof X==="number"){if(Number.isInteger(X)&&X>=0)return X;let w=wB();return D.warn("Point ID was invalid number, generated UUID",{originalId:X,generatedId:w}),w}if(typeof X==="string"){if(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(X))return X;let f=parseInt(X,10);if(!isNaN(f)&&f>=0&&f.toString()===X)return f;let G=wB();return D.warn("Point ID was invalid string, generated UUID",{originalId:X,generatedId:G}),G}let Q=wB();return D.warn("Point ID was unsupported type, generated UUID",{originalId:X,originalType:typeof X,generatedId:Q}),Q}f30.validatePointId=F;function $(X){if(!Array.isArray(X))throw D.error("Point IDs parameter is not an array",{ids:X}),new Error("Point IDs must be an array");return X.map(F)}f30.validatePointIds=$;function B(X){if(!Array.isArray(X))throw D.error("Points parameter is not an array",{points:X}),new Error("Points must be an array");return X.map((Q)=>{if(typeof Q!=="object"||Q===null)throw D.error("Point is not an object",{point:Q}),new Error("Each point must be an object");let w={...Q};if("id"in Q){let f=Q.id;if(w.id=F(f),w.id!==f)D.info("Point ID was converted",{originalId:f,validatedId:w.id})}else w.id=wB(),D.info("Generated ID for point missing ID",{generatedId:w.id});return w})}f30.validateUpsertPoints=B;function J(X){return["qdrant-get-points","qdrant-upsert-points","qdrant-delete-points","qdrant-set-payload","qdrant-recommend"].some((w)=>X.includes(w))}f30.isQdrantPointOperation=J;function Y(X,Q){if(!J(X))return Q;let w={...Q};try{if(X.includes("qdrant-get-points")){if("ids"in Q&&Q.ids)w.ids=$(Q.ids),D.info("Validated get-points IDs",{original:Q.ids,validated:w.ids})}if(X.includes("qdrant-upsert-points")){if("points"in Q&&Q.points)w.points=B(Q.points),D.info("Validated upsert-points data",{originalCount:Q.points?.length,validatedCount:w.points?.length})}if(X.includes("qdrant-delete-points")){if("ids"in Q&&Q.ids)w.ids=$(Q.ids),D.info("Validated delete-points IDs",{original:Q.ids,validated:w.ids})}if(X.includes("qdrant-set-payload")){if("ids"in Q&&Q.ids)w.ids=$(Q.ids),D.info("Validated set-payload IDs",{original:Q.ids,validated:w.ids})}if(X.includes("qdrant-recommend")){if("positive"in Q&&Q.positive)w.positive=$(Q.positive),D.info("Validated recommend positive IDs",{original:Q.positive,validated:w.positive});if("negative"in Q&&Q.negative)w.negative=$(Q.negative),D.info("Validated recommend negative IDs",{original:Q.negative,validated:w.negative})}return w}catch(f){throw D.error("Error validating Qdrant arguments",{toolName:X,args:Q,error:f}),new Error(`Point ID validation failed: ${f}`)}}f30.validateQdrantArgs=Y})(Hf||={})});var $L={};vF($L,{emitMCPCallStarted:()=>Kn,emitMCPCallProgress:()=>qn,emitMCPCallFailed:()=>An,emitMCPCallCompleted:()=>Vn,MCPCallStartedEvent:()=>WY,MCPCallProgressEvent:()=>GY,MCPCallFailedEvent:()=>EY,MCPCallCompletedEvent:()=>HY});function Kn(D){F0.publish(WY,D)}function qn(D){F0.publish(GY,D)}function Vn(D){F0.publish(HY,D)}function An(D){F0.publish(EY,D)}var WY,GY,HY,EY;var Ef=k(async()=>{C0();await eD();WY=F0.event("mcp.call.started",W.object({id:W.string(),server:W.string(),method:W.string(),sessionID:W.string(),parameters:W.record(W.any()).optional(),timestamp:W.number()})),GY=F0.event("mcp.call.progress",W.object({id:W.string(),message:W.string(),timestamp:W.number()})),HY=F0.event("mcp.call.completed",W.object({id:W.string(),duration:W.number(),response:W.any().optional(),timestamp:W.number()})),EY=F0.event("mcp.call.failed",W.object({id:W.string(),error:W.string(),duration:W.number(),timestamp:W.number()}))});import BL from"path";function JL(D){if(D.role==="assistant")return{id:D.id,role:"assistant",content:"",parts:Kf(D.parts)};if(D.role==="user")return{id:D.id,role:"user",content:"",parts:Kf(D.parts)};throw new Error("not implemented")}function Kf(D){let F=[];for(let $ of D)switch($.type){case"text":F.push({type:"text",text:$.text});break;case"file":F.push({type:"file",data:$.url,mimeType:$.mediaType});break;case"tool-invocation":F.push({type:"tool-invocation",toolInvocation:$.toolInvocation});break;case"step-start":F.push({type:"step-start"});break;default:break}return F}var u0;var l2=k(async()=>{A9();await MD();lw();await v2();await xD();M$();C0();L_();z_();await JY();await YB();await eD();await a8();await XY();QF();await p_();Bf();await U9();await lF();i_();await Wf();await DL();Gf();await FL();((UF)=>{let D=Z0.create({service:"session"});UF.Info=W.object({id:g2.schema("session"),parentID:g2.schema("session").optional(),share:W.object({url:W.string()}).optional(),title:W.string(),version:W.string(),time:W.object({created:W.number(),updated:W.number()})}).openapi({ref:"Session"}),UF.ShareInfo=W.object({secret:W.string(),url:W.string()}).openapi({ref:"SessionShare"}),UF.Event={Updated:F0.event("session.updated",W.object({info:UF.Info})),Deleted:F0.event("session.deleted",W.object({info:UF.Info})),Idle:F0.event("session.idle",W.object({sessionID:W.string()})),Error:F0.event("session.error",W.object({error:L1.Info.shape.metadata.shape.error}))};let J=w0.state("session",()=>{return{sessions:new Map,messages:new Map,pending:new Map}},async(P)=>{for(let[v,n]of P.pending)try{if(n&&!n.signal.aborted)n.abort()}catch(_){D.error("Cleanup error",{error:_})}});async function Y(P){let v={id:g2.descending("session"),version:Q1.VERSION,parentID:P,title:(P?"Child session - ":"New Session - ")+new Date().toISOString(),time:{created:Date.now(),updated:Date.now()}};D.info("created",v),J().sessions.set(v.id,v),await jD.writeJSON("session/info/"+v.id,v);let n=await HD.get();if(!v.parentID&&(r6.OPENCODE_AUTO_SHARE||n.autoshare))w(v.id).then((_)=>{G(v.id,(x)=>{x.share=_})});return F0.publish(UF.Event.Updated,{info:v}),v}UF.create=Y;async function X(P){let v=J().sessions.get(P);if(v)return v;let n=await jD.readJSON("session/info/"+P);return J().sessions.set(P,n),n}UF.get=X;async function Q(P){return jD.readJSON("session/share/"+P)}UF.getShare=Q;async function w(P){let v=await X(P);if(v.share)return v.share;let n=await d2.create(P);await G(P,(_)=>{_.share={url:n.url}}),await jD.writeJSON("session/share/"+P,n),await d2.sync("session/info/"+P,v);for(let _ of await H(P))await d2.sync("session/message/"+P+"/"+_.id,_);return n}UF.share=w;async function f(P){await jD.remove("session/share/"+P),await G(P,(v)=>{v.share=void 0}),await d2.remove(P)}UF.unshare=f;async function G(P,v){let{sessions:n}=J(),_=await X(P);if(!_)return;return v(_),_.time.updated=Date.now(),n.set(P,_),await jD.writeJSON("session/info/"+P,_),F0.publish(UF.Event.Updated,{info:_}),_}UF.update=G;async function H(P){let v=[],n=jD.list("session/message/"+P);for await(let _ of n){let x=await jD.readJSON(_);v.push(x)}return v.sort((_,x)=>_.id>x.id?1:-1),v}UF.messages=H;async function K(P,v){return jD.readJSON("session/message/"+P+"/"+v)}UF.getMessage=K;async function*E(){for await(let P of jD.list("session/info")){let v=BL.basename(P,".json");yield X(v)}}UF.list=E;async function O(P){let v=[];for await(let n of jD.list("session/info")){let _=BL.basename(n,".json"),x=await X(_);if(x.parentID!==P)continue;v.push(x)}return v}UF.children=O;function q(P){let v=J().pending.get(P);if(!v)return!1;return v.abort(),J().pending.delete(P),!0}UF.abort=q;async function U(P,v=!0){try{q(P);let n=await X(P);for(let x of await O(P))await U(x.id,!1);await f(P).catch(()=>{}),await jD.remove(`session/info/${P}`).catch(()=>{}),await jD.removeDir(`session/message/${P}/`).catch(()=>{}),J().sessions.delete(P),J().messages.delete(P);let _=await HD.get();if(_.performance?.enabled&&_.performance?.saveReports){let x=V6.getReport(P);if(x)await V6.saveReport(P,x).catch(()=>{})}if(V6.remove(P),v)F0.publish(UF.Event.Deleted,{info:n})}catch(n){D.error(n)}}UF.remove=U;async function N(P){await jD.writeJSON("session/message/"+P.metadata.sessionID+"/"+P.id,P),F0.publish(L1.Event.Updated,{info:P})}async function L(P){let T0=[];try{let v=D.clone().tag("session",P.sessionID);v.info("chatting");let n=await z1.getModel(P.providerID,P.modelID);let _=await H(P.sessionID);let x=_.at(-1);if(x?.metadata.assistant){let l=x.metadata.assistant.tokens.input+x.metadata.assistant.tokens.cache.read+x.metadata.assistant.tokens.cache.write+x.metadata.assistant.tokens.output;if(n.info.limit.context&&l>Math.max((n.info.limit.context-(n.info.limit.output??0))*0.9,0))return await C({sessionID:P.sessionID,providerID:P.providerID,modelID:P.modelID}),L(P)}const o=Y8(T0,R(P.sessionID),0);let M=_.findLast((l)=>l.metadata.assistant?.summary===!0);if(M)_=_.filter((l)=>l.id>=M.id);let r=w0.info();let $0=await X(P.sessionID);if(_.length===0&&!$0.parentID)x5({maxTokens:P.providerID==="google"?1024:20,providerOptions:n.info.options,messages:[...r8.title(P.providerID).map((l)=>({role:"system",content:l})),...N$([{role:"user",content:"",parts:Kf(P.parts)}])],model:n.language}).then((l)=>{if(l.text)return u0.update(P.sessionID,(_D)=>{_D.title=l.text})}).catch(()=>{});let V0={role:"user",id:g2.ascending("message"),parts:P.parts,metadata:{time:{created:Date.now()},sessionID:P.sessionID,tool:{}}};await N(V0);_.push(V0);let s0=P.system??r8.provider(P.providerID);s0.push(...await r8.environment());s0.push(...await r8.custom());let U0={id:g2.ascending("message"),role:"assistant",parts:[],metadata:{assistant:{system:s0,path:{cwd:r.path.cwd,root:r.path.root},cost:0,tokens:{input:0,output:0,reasoning:0,cache:{read:0,write:0}},modelID:P.modelID,providerID:P.providerID},time:{created:Date.now()},sessionID:P.sessionID,tool:{}}};await N(U0);let A0={};let PD=await X(P.sessionID);let zD=PD.parentID;DD.log("[SESSION] Tool filtering check:",{sessionID:P.sessionID,parentID:zD,parentIDType:typeof zD,parentIDValue:zD===void 0?"undefined":zD===null?"null":zD===""?"empty string":zD,isMainSession:!zD});let W0=V6.getTracker(P.sessionID);let a=await z1.tools(P.providerID);let mD=R9.wrapAll(a,W0);for(let l of mD){let _D=l.id.replaceAll(".","_");if(!await s8.isToolAllowed(P.sessionID,_D,zD)){DD.log("[SESSION] Tool filtered out:",_D);continue}A0[_D]=P4({id:l.id,description:l.description,parameters:l.parameters,async execute(y,c){let g=Date.now();try{let S=await l.execute(y,{sessionID:P.sessionID,abort:o.signal,messageID:U0.id,metadata:async(u)=>{U0.metadata.tool[c.toolCallId]={...u,time:{start:0,end:0}},await N(U0)}});return U0.metadata.tool[c.toolCallId]={...S.metadata,time:{start:g,end:Date.now()}},await N(U0),S.output}catch(S){return U0.metadata.tool[c.toolCallId]={error:!0,message:S.toString(),title:S.toString(),time:{start:g,end:Date.now()}},await N(U0),S.toString()}}})}for(let[l,_D]of Object.entries(await bF.tools())){let b=_D.execute;if(!b)continue;_D.execute=async(y,c)=>{let g=Date.now(),S=`mcp-${l}-${c.toolCallId}-${g}`,[u,D0]=l.split("_",2),{emitMCPCallStarted:H0,emitMCPCallCompleted:g0,emitMCPCallFailed:z0}=await Ef().then(() => $L);H0({id:S,server:u||"unknown",method:D0||l,sessionID:P.sessionID,parameters:y,timestamp:g});try{let WF=Hf.validateQdrantArgs(l,y),ED=await b(WF,c),Z1=Date.now();return g0({id:S,duration:Z1-g,response:ED,timestamp:Z1}),U0.metadata.tool[c.toolCallId]={...ED.metadata,time:{start:g,end:Z1}},await N(U0),ED.content.filter((q1)=>q1.type==="text").map((q1)=>q1.text).join(`

`)}catch(WF){let ED=Date.now();throw z0({id:S,error:WF.toString(),duration:ED-g,timestamp:ED}),U0.metadata.tool[c.toolCallId]={error:!0,message:WF.toString(),title:"mcp",time:{start:g,end:ED}},await N(U0),WF}},A0[l]=_D}let G0;let YD=T4({onStepFinish:async(l)=>{D.info("step finish",{finishReason:l.finishReason});let _D=U0.metadata.assistant,b=I(n.info,l.usage,l.providerMetadata);if(_D.cost+=b.cost,_D.tokens=b.tokens,await N(U0),G0)F0.publish(L1.Event.PartUpdated,{part:G0,messageID:U0.id,sessionID:U0.metadata.sessionID});G0=void 0},onError(l){switch(D.error("callback error",l),!0){case J6.isInstance(l.error):U0.metadata.error=new z1.AuthError({providerID:P.providerID,message:l.error.message},{cause:l.error}).toObject();break;case l.error instanceof Error:U0.metadata.error=new BD.Unknown({message:l.error.toString()},{cause:l.error}).toObject();break;default:U0.metadata.error=new BD.Unknown({message:JSON.stringify(l.error)},{cause:l.error})}F0.publish(UF.Event.Error,{error:U0.metadata.error})},toolCallStreaming:!0,maxTokens:Math.max(0,n.info.limit.output)||void 0,abortSignal:o.signal,maxSteps:1000,providerOptions:n.info.options,messages:[...s0.map((l)=>({role:"system",content:l})),...N$(_.map(JL).filter((l)=>l.parts.length>0))],temperature:n.info.temperature?0:void 0,tools:n.info.tool_call===!1?void 0:A0,model:sO({model:n.language,middleware:[{async transformParams(l){if(l.type==="stream")l.params.prompt=Jf.message(l.params.prompt,P.providerID,P.modelID);return l.params}}]})});try{for await(let l of YD.fullStream){switch(v.info("part",{type:l.type}),l.type){case"step-start":U0.parts.push({type:"step-start"});break;case"text-delta":if(!G0){G0={type:"text",text:l.textDelta},U0.parts.push(G0);break}else G0.text+=l.textDelta;break;case"tool-call":{let[c]=U0.parts.flatMap((g)=>g.type==="tool-invocation"&&g.toolInvocation.toolCallId===l.toolCallId?[g]:[]);if(!c)break;c.toolInvocation.args=l.args,c.toolInvocation.state="call",F0.publish(L1.Event.PartUpdated,{part:c,messageID:U0.id,sessionID:U0.metadata.sessionID});break}case"tool-call-streaming-start":U0.parts.push({type:"tool-invocation",toolInvocation:{state:"partial-call",toolName:l.toolName,toolCallId:l.toolCallId,args:{}}}),F0.publish(L1.Event.PartUpdated,{part:U0.parts[U0.parts.length-1],messageID:U0.id,sessionID:U0.metadata.sessionID});break;case"tool-call-delta":continue;case"tool-result":let _D=U0.parts.find((c)=>c.type==="tool-invocation"&&c.toolInvocation.toolCallId===l.toolCallId);if(_D&&_D.type==="tool-invocation")_D.toolInvocation={args:l.args,toolCallId:l.toolCallId,toolName:l.toolName,state:"result",result:l.result},F0.publish(L1.Event.PartUpdated,{part:_D,messageID:U0.id,sessionID:U0.metadata.sessionID});break;case"finish":D.info("message finish",{reason:l.finishReason});let b=U0.metadata.assistant,y=I(n.info,l.usage,l.providerMetadata);if(b.cost+=y.cost,await N(U0),l.finishReason==="length")throw new L1.OutputLengthError({});break;default:v.info("unhandled",{type:l.type});continue}await N(U0)}}catch(l){switch(D.error("stream error",{error:l}),!0){case L1.OutputLengthError.isInstance(l):U0.metadata.error=l;break;case J6.isInstance(l):U0.metadata.error=new z1.AuthError({providerID:P.providerID,message:l.message},{cause:l}).toObject();break;case l instanceof Error:U0.metadata.error=new BD.Unknown({message:l.toString()},{cause:l}).toObject();break;default:U0.metadata.error=new BD.Unknown({message:JSON.stringify(l)},{cause:l})}F0.publish(UF.Event.Error,{error:U0.metadata.error})}U0.metadata.time.completed=Date.now();for(let l of U0.parts)if(l.type==="tool-invocation"&&l.toolInvocation.state!=="result")l.toolInvocation={...l.toolInvocation,state:"result",result:"request was aborted"};await N(U0);return U0}catch(Y0){var WD=Y0,UD=1}finally{X8(T0,WD,UD)}}UF.chat=L;async function C(P){let U0=[];try{const v=Y8(U0,R(P.sessionID),0);let n=await H(P.sessionID);let _=n.findLast((W0)=>W0.metadata.assistant?.summary===!0)?.id;let x=n.filter((W0)=>!_||W0.id>=_);let o=await z1.getModel(P.providerID,P.modelID);let M=w0.info();let r=r8.summarize(P.providerID);let $0={id:g2.ascending("message"),role:"assistant",parts:[],metadata:{tool:{},sessionID:P.sessionID,assistant:{system:r,path:{cwd:M.path.cwd,root:M.path.root},summary:!0,cost:0,modelID:P.modelID,providerID:P.providerID,tokens:{input:0,output:0,reasoning:0,cache:{read:0,write:0}}},time:{created:Date.now()}}};await N($0);let V0;let s0=T4({abortSignal:v.signal,model:o.language,messages:[...r.map((W0)=>({role:"system",content:W0})),...N$(x.map(JL)),{role:"user",content:[{type:"text",text:"Provide a detailed but concise summary of our conversation above. Focus on information that would be helpful for continuing the conversation, including what we did, what we're doing, which files we're working on, and what we're going to do next."}]}],onStepFinish:async(W0)=>{let a=$0.metadata.assistant,mD=I(o.info,W0.usage,W0.providerMetadata);if(a.cost+=mD.cost,a.tokens=mD.tokens,await N($0),V0)F0.publish(L1.Event.PartUpdated,{part:V0,messageID:$0.id,sessionID:$0.metadata.sessionID});V0=void 0},async onFinish(W0){let a=$0.metadata.assistant,mD=I(o.info,W0.usage,W0.providerMetadata);a.cost+=mD.cost,a.tokens=mD.tokens,$0.metadata.time.completed=Date.now(),await N($0)}});for await(let W0 of s0.fullStream)switch(W0.type){case"text-delta":if(!V0)V0={type:"text",text:W0.textDelta},$0.parts.push(V0);else V0.text+=W0.textDelta;await N($0);break}}catch(A0){var PD=A0,zD=1}finally{X8(U0,PD,zD)}}UF.summarize=C;function R(P){if(D.info("locking",{sessionID:P}),J().pending.has(P))throw new h(P);let v=new AbortController;return J().pending.set(P,v),{signal:v.signal,[Symbol.dispose](){D.info("unlocking",{sessionID:P}),J().pending.delete(P),F0.publish(UF.Event.Idle,{sessionID:P})}}}function I(P,v,n){let _={input:v.promptTokens??0,output:v.completionTokens??0,reasoning:0,cache:{write:n?.anthropic?.cacheCreationInputTokens??n?.bedrock?.usage?.cacheWriteInputTokens??0,read:n?.anthropic?.cacheReadInputTokens??n?.bedrock?.usage?.cacheReadInputTokens??0}};return{cost:new p2(0).add(new p2(_.input).mul(P.cost.input).div(1e6)).add(new p2(_.output).mul(P.cost.output).div(1e6)).add(new p2(_.cache.read).mul(P.cost.cache_read??0).div(1e6)).add(new p2(_.cache.write).mul(P.cost.cache_write??0).div(1e6)).toNumber(),tokens:_}}class h extends Error{sessionID;constructor(P){super(`Session ${P} is busy`);this.sessionID=P}}UF.BusyError=h;async function p(P){let v=w0.info();await u0.chat({sessionID:P.sessionID,providerID:P.providerID,modelID:P.modelID,parts:[{type:"text",text:I_.replace("${path}",v.path.root)}]}),await w0.initialize()}UF.initialize=p})(u0||={})});var $1;var fB=k(async()=>{C0();await v2();lw();await l2();((C9)=>{C9.Info=W.object({id:g2.schema("session"),parentSessionId:W.string(),agentName:W.string(),taskDescription:W.string(),status:W.enum(["pending","running","completed","failed"]),createdAt:W.number(),startedAt:W.number().optional(),completedAt:W.number().optional(),summary:W.string().optional()});let F="session/sub-sessions/",$="session/sub-session-index/";async function B(U,N,L,C){let{Storage:R}=await v2().then(() => rJ),I={id:N,parentSessionId:U,agentName:L,taskDescription:C,status:"pending",createdAt:Date.now()};await R.writeJSON("session/sub-sessions/"+N,I);let h="session/sub-session-index/"+U,p=await f(U);return p.push(N),await R.writeJSON(h,p),I}C9.create=B;async function J(U,N){let C={...await Y(U),...N};await jD.writeJSON("session/sub-sessions/"+U,C)}C9.update=J;async function Y(U){return await jD.readJSON("session/sub-sessions/"+U)}C9.get=Y;async function X(U){let N=await f(U),L=[];for(let C of N)try{let R=await Y(C);L.push(R)}catch(R){continue}return L.sort((C,R)=>R.createdAt-C.createdAt)}C9.getByParent=X;async function Q(U){let N=[];for await(let C of u0.list())N.push(C);let L=[];for(let C of N){let R=await X(C.id);for(let I of R)if(I.taskDescription.toLowerCase().includes(U.toLowerCase())||I.agentName.toLowerCase().includes(U.toLowerCase()))L.push(I)}return L.sort((C,R)=>R.createdAt-C.createdAt)}C9.search=Q;async function w(U){try{let N=await Y(U);await jD.remove("session/sub-sessions/"+U);let L="session/sub-session-index/"+N.parentSessionId,R=(await f(N.parentSessionId)).filter((I)=>I!==U);await jD.writeJSON(L,R)}catch(N){}}C9.remove=w;async function f(U){let N="session/sub-session-index/"+U;try{return await jD.readJSON(N)}catch(L){return[]}}async function G(U,N){await J(U,{status:"completed",completedAt:Date.now(),summary:N})}C9.complete=G;async function H(U,N){await J(U,{status:"failed",completedAt:Date.now(),summary:`Failed: ${N}`})}C9.fail=H,C9.store=B;async function E(){let U=[];for await(let L of u0.list())U.push(L);let N=[];for(let L of U){let C=await X(L.id);N.push(...C)}return N.sort((L,C)=>C.createdAt-L.createdAt)}C9.list=E,C9.deleteSubSession=w;async function q(U=30){let N=Date.now()-U*24*60*60*1000,L=[];for await(let R of u0.list())L.push(R);let C=0;for(let R of L){let I=await X(R.id);for(let h of I)if(h.createdAt<N)await w(h.id),C++}return C}C9.cleanup=q})($1||={})});var YL;var XL=k(async()=>{A9();zF();C0();await v2();await l2();await fB();await MD();YL=dD.define({id:"diagnose_subsessions",description:"Diagnose sub-sessions storage and display diagnostic information",parameters:W.object({}),async execute(D,F){DD.log(`
=== SUB-SESSION DIAGNOSTIC TOOL ===`);let $=w0.info();DD.log("App paths:",$.path);let B=await u0.get(F.sessionID);DD.log(`
Current session:`,{id:B.id,parentID:B.parentID,title:B.title}),DD.log(`
--- Checking Sub-Sessions ---`);try{let Y=await $1.getByParent(F.sessionID);if(DD.log(`Found ${Y.length} sub-sessions for current session`),Y.length>0)Y.forEach((X,Q)=>{DD.log(`
Sub-session ${Q+1}:`,{id:X.id,status:X.status,agentName:X.agentName,task:X.taskDescription,created:new Date(X.createdAt).toISOString()})})}catch(Y){DD.error("Error getting sub-sessions:",Y)}DD.log(`
--- Direct Storage Check ---`);try{let Y=[];for await(let w of jD.list("session/sub-sessions"))Y.push(w);DD.log(`Total sub-session files in storage: ${Y.length}`);let X=[];for await(let w of jD.list("session/sub-session-index"))X.push(w);DD.log(`Total index files in storage: ${X.length}`);let Q=`session/sub-session-index/${F.sessionID}`;try{let w=await jD.readJSON(Q);if(DD.log(`
Index for current session exists with ${Array.isArray(w)?w.length:0} entries`),Array.isArray(w)&&w.length>0)DD.log("Sub-session IDs in index:",w)}catch(w){DD.log(`
No index file found for current session at: ${Q}`)}if(Y.length>0){DD.log(`
--- Recent Sub-Sessions (last 5) ---`);let w=Y.slice(-5);for(let f of w)try{let G=await jD.readJSON(f);DD.log(`
${f}:`,{id:G.id,parentSessionId:G.parentSessionId,status:G.status,created:new Date(G.createdAt).toISOString()})}catch(G){DD.log(`Error reading ${f}:`,G.message)}}}catch(Y){DD.error("Error checking storage:",Y)}let J={currentSessionId:F.sessionID,appPaths:$.path,timestamp:new Date().toISOString()};return DD.log(`
=== END DIAGNOSTIC ===
`),{output:JSON.stringify(J,null,2),metadata:{title:"Sub-session Diagnostics",summary:J}}}})});var Fw0;var qf=k(()=>{C0();Fw0=W.object({enabled:W.boolean().default(!1).describe("Enable DGM integration"),pythonPath:W.string().default("python3").describe("Path to Python executable"),dgmPath:W.string().optional().describe("Path to DGM module (defaults to auto-discovery)"),timeout:W.number().default(30000).describe("Timeout for DGM operations in milliseconds"),maxRetries:W.number().default(3).describe("Maximum retry attempts for failed operations"),healthCheckInterval:W.number().default(60000).describe("Health check interval in milliseconds")})});import{spawn as Un}from"child_process";import{EventEmitter as Rn}from"events";function Cn(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(D){let F=Math.random()*16|0;return(D==="x"?F:F&3|8).toString(16)})}var I1,WB,Zn,Vf;var QL=k(async()=>{await xD();QF();C0();qf();I1=Z0.create({service:"dgm-bridge"}),WB=BD.create("DGMBridgeError",W.object({code:W.string(),message:W.string(),details:W.any().optional()})),Zn=BD.create("DGMTimeoutError",W.object({operation:W.string(),timeout:W.number()}));Vf=class Vf extends Rn{config;process=null;_status="uninitialized";pendingRequests=new Map;messageBuffer="";healthCheckTimer=null;initializePromise=null;constructor(D){super();this.config=D}get status(){return this._status}async initialize(){if(this.initializePromise)return this.initializePromise;if(this._status==="ready")return;this.initializePromise=this._initialize();try{await this.initializePromise}finally{this.initializePromise=null}}async _initialize(){if(I1.info("Initializing DGM bridge",{config:this.config}),!this.config.enabled){I1.info("DGM integration is disabled");return}this._status="initializing",this.emit("dgm:connected",{status:this._status});try{let D=`${this.config.dgmPath||process.cwd()}/dgm/bridge/stdio_server_simple.py`,F=[D];if(this.config.dgmPath)F.push("--path",this.config.dgmPath);I1.info("Spawning Python process",{pythonPath:this.config.pythonPath,script:D,args:F,cwd:process.cwd(),env:{PYTHONUNBUFFERED:"1"}}),this.process=Un(this.config.pythonPath,F,{stdio:["pipe","pipe","pipe"],env:{...process.env,PYTHONUNBUFFERED:"1",PYTHONPATH:this.config.dgmPath||process.cwd()},cwd:this.config.dgmPath||process.cwd()}),this.setupProcessHandlers(),await new Promise(($)=>setTimeout($,500)),I1.info("Waiting for Python bridge to be ready..."),await this.waitForReady(),this.startHealthCheck(),this._status="ready",this.emit("dgm:connected",{status:this._status}),I1.info("DGM bridge initialized successfully")}catch(D){this._status="error",this.emit("dgm:error",{error:D});let F=D instanceof Error?D.message:String(D);throw I1.error("Failed to initialize DGM bridge",{error:F,pythonPath:this.config.pythonPath,dgmPath:this.config.dgmPath,cwd:process.cwd()}),new WB({code:"INIT_FAILED",message:`Failed to initialize DGM bridge: ${F}`,details:D})}}setupProcessHandlers(){if(!this.process)return;this.process.stdout?.on("data",(D)=>{this.messageBuffer+=D.toString(),this.processMessages()}),this.process.stderr?.on("data",(D)=>{let F=D.toString().trim();if(F)I1.info("DGM stderr:",{message:F})}),this.process.on("exit",(D,F)=>{I1.warn("DGM process exited",{code:D,signal:F}),this.handleDisconnect()}),this.process.on("error",(D)=>{I1.error("DGM process error",D),this.handleDisconnect()})}processMessages(){let D=this.messageBuffer.split(`
`);this.messageBuffer=D.pop()||"";for(let F of D){if(!F.trim())continue;try{let $=JSON.parse(F);this.handleMessage($)}catch($){I1.error("Failed to parse DGM message",{line:F,error:$})}}}handleMessage(D){if(I1.info("Received DGM message",{message:D}),D.type==="response"||D.type==="error"){let F=this.pendingRequests.get(D.id);if(F)if(clearTimeout(F.timer),this.pendingRequests.delete(D.id),D.type==="error")F.reject(new WB({code:D.error?.code?.toString()||"UNKNOWN",message:D.error?.message||"Unknown error",details:D.error?.data}));else F.resolve(D.result)}else if(D.type==="event")this.handleEvent(D)}handleEvent(D){switch(D.method){case"tool.registered":this.emit("dgm:tool:registered",D.params);break;case"tool.unregistered":this.emit("dgm:tool:unregistered",D.params);break;default:I1.info("Unhandled DGM event",{message:D})}}async sendRequest(D,F){if(this._status!=="ready"&&D!=="handshake")throw new WB({code:"NOT_READY",message:"DGM bridge is not ready"});let $=Cn(),B={id:$,type:"request",method:D,params:F};return new Promise((J,Y)=>{let X=setTimeout(()=>{this.pendingRequests.delete($),Y(new Zn({operation:D,timeout:this.config.timeout}))},this.config.timeout);this.pendingRequests.set($,{resolve:J,reject:Y,timer:X});let Q=JSON.stringify(B)+`
`;this.process?.stdin?.write(Q,(w)=>{if(w)clearTimeout(X),this.pendingRequests.delete($),Y(w)})})}async waitForReady(){let D=Date.now(),F=15000,$=null,B=0;I1.info("Starting handshake with Python bridge...");while(Date.now()-D<15000){B++;try{if(I1.info(`Handshake attempt ${B}...`),(await this.sendRequest("handshake",{version:"1.0"}))?.status==="ok"){I1.info(`Handshake successful after ${B} attempts`);return}}catch(J){$=J,I1.info(`Handshake attempt ${B} failed:`,{error:J instanceof Error?J.message:String(J)})}await new Promise((J)=>setTimeout(J,500))}throw new WB({code:"HANDSHAKE_TIMEOUT",message:`Failed to establish handshake with DGM after ${B} attempts (15000ms). Last error: ${$ instanceof Error?$.message:String($)}`})}startHealthCheck(){if(this.healthCheckTimer)clearInterval(this.healthCheckTimer);this.healthCheckTimer=setInterval(async()=>{try{await this.healthCheck()}catch(D){I1.error("Health check failed",{error:D instanceof Error?D.message:String(D)}),this.handleDisconnect()}},this.config.healthCheckInterval)}handleDisconnect(){this._status="disconnected",this.emit("dgm:disconnected",{status:this._status});for(let[,D]of this.pendingRequests)clearTimeout(D.timer),D.reject(new WB({code:"DISCONNECTED",message:"DGM bridge disconnected"}));if(this.pendingRequests.clear(),this.healthCheckTimer)clearInterval(this.healthCheckTimer),this.healthCheckTimer=null;if(this.process&&!this.process.killed)this.process.kill();this.process=null}async shutdown(){if(I1.info("Shutting down DGM bridge"),this._status==="uninitialized")return;try{if(this._status==="ready")await this.sendRequest("shutdown")}catch(D){I1.error("Error during shutdown",{error:D instanceof Error?D.message:String(D)})}finally{this.handleDisconnect(),this._status="uninitialized"}}async healthCheck(){if(this._status!=="ready")return{status:this._status,timestamp:Date.now(),error:"Bridge not ready"};try{let D=await this.sendRequest("health");return{status:"ready",timestamp:Date.now(),version:D.version,capabilities:D.capabilities}}catch(D){return{status:"error",timestamp:Date.now(),error:D instanceof Error?D.message:"Unknown error"}}}async getTools(){return(await this.sendRequest("tools.list")).tools||[]}async executeTool(D,F,$){return this.sendRequest("tools.execute",{toolId:D,params:F,context:$})}on(D,F){return super.on(D,F),this}off(D,F){return super.off(D,F),this}}});var F2,Af;var wL=k(async()=>{await MD();await xD();await lF();await QL();qf();C0();F2=Z0.create({service:"dgm-session-manager"});((jw0)=>{let D=null,F=!1,$=null;async function B(){if($)return $;if(F)return;$=J();try{await $}finally{$=null}}jw0.initialize=B;async function J(){F2.info("Initializing DGM session manager");let q=await HD.get(),U={enabled:q.dgm?.enabled??!1,pythonPath:q.dgm?.pythonPath??"python3",dgmPath:q.dgm?.dgmPath,timeout:q.dgm?.timeout??30000,maxRetries:q.dgm?.maxRetries??3,healthCheckInterval:q.dgm?.healthCheckInterval??60000};if(!U.enabled){F2.info("DGM integration is disabled");return}try{D=new Vf(U),D.on("dgm:connected",G),D.on("dgm:disconnected",H),D.on("dgm:error",K),D.on("dgm:tool:registered",E),D.on("dgm:tool:unregistered",O),await D.initialize(),F=!0,F2.info("DGM session manager initialized successfully")}catch(N){F2.error("Failed to initialize DGM session manager",{error:N instanceof Error?N.message:String(N)}),D=null}}async function Y(){if(F2.info("Shutting down DGM session manager"),D)try{await D.shutdown()}catch(q){F2.error("Error during DGM shutdown",{error:q instanceof Error?q.message:String(q)})}finally{D=null,F=!1}}jw0.shutdown=Y;function X(){return D?.status??"uninitialized"}jw0.getStatus=X;function Q(){return D?.status==="ready"}jw0.isAvailable=Q;async function w(){if(!D||D.status!=="ready")return[];try{return(await D.getTools()).map(f)}catch(q){return F2.error("Failed to get DGM tools",{error:q instanceof Error?q.message:String(q)}),[]}}jw0.getTools=w;function f(q){return{id:`dgm.${q.id}`,description:q.description,parameters:W.object(q.parameters||{}),async execute(U,N){if(!D||D.status!=="ready")throw new Error("DGM bridge is not available");let L=Date.now();try{let C=await D.executeTool(q.id,U,{sessionID:N.sessionID,messageID:N.messageID});return{metadata:{title:`DGM: ${q.name}`,duration:Date.now()-L,...C.metadata},output:C.output||""}}catch(C){let R=C instanceof Error?C.message:String(C);return{metadata:{title:`DGM: ${q.name}`,duration:Date.now()-L,error:!0,message:R},output:`Error executing DGM tool: ${R}`}}}}}function G(q){F2.info("DGM bridge connected",q)}function H(q){F2.warn("DGM bridge disconnected",q)}function K(q){F2.error("DGM bridge error",q)}function E(q){F2.info("DGM tool registered",q)}function O(q){F2.info("DGM tool unregistered",q)}w0.state("dgm-session-manager",async()=>{return await B(),{initialized:!0}},async()=>{await Y()})})(Af||={})});var WL=`Launch a new agent that has access to the following tools: Bash, Glob, Grep, LS, Read, Edit, MultiEdit, Write, NotebookRead, NotebookEdit, WebFetch, TodoRead, TodoWrite, WebSearch. When you are searching for a keyword or file and are not confident that you will find the right match in the first few tries, use the Agent tool to perform the search for you.\r
\r
When to use the Agent tool:\r
- If you are searching for a keyword like "config" or "logger", or for questions like "which file does X?", the Agent tool is strongly recommended\r
\r
When NOT to use the Agent tool:\r
- If you want to read a specific file path, use the Read or Glob tool instead of the Agent tool, to find the match more quickly\r
- If you are searching for a specific class definition like "class Foo", use the Glob tool instead, to find the match more quickly\r
- If you are searching for code within a specific file or set of 2-3 files, use the Read tool instead of the Agent tool, to find the match more quickly\r
\r
Usage notes:\r
1. Launch multiple agents concurrently whenever possible, to maximize performance; to do that, use a single message with multiple tool uses\r
2. When the agent is done, it will return a single message back to you. The result returned by the agent is not visible to the user. To show the user the result, you should send a text message back to the user with a concise summary of the result.\r
3. Each agent invocation is stateless. You will not be able to send additional messages to the agent, nor will the agent be able to communicate with you outside of its final report. Therefore, your prompt should contain a highly detailed task description for the agent to perform autonomously and you should specify exactly what information the agent should return back to you in its final and only message to you.\r
4. The agent's outputs should generally be trusted\r
5. Clearly tell the agent whether you expect it to write code or just to do research (search, file reads, web fetches, etc.), since it is not aware of the user's intent\r
`;var fL=()=>{};function Z9(D){F0.publish(GB,D)}function o2(D){F0.publish(HB,D)}function N9(D){F0.publish(EB,D)}function KY(D){F0.publish(KB,D)}var GB,HB,EB,KB;var qB=k(async()=>{C0();await eD();GB=F0.event("task.started",W.object({sessionID:W.string(),taskID:W.string(),agentName:W.string(),taskDescription:W.string(),timestamp:W.number()})),HB=F0.event("task.progress",W.object({sessionID:W.string(),taskID:W.string(),progress:W.number().min(0).max(100),message:W.string().optional(),timestamp:W.number(),startTime:W.number().optional(),phase:W.enum(["prompt-generation","context-gathering","processing"]).optional(),currentTool:W.string().optional(),toolDescription:W.string().optional()})),EB=F0.event("task.completed",W.object({sessionID:W.string(),taskID:W.string(),duration:W.number(),success:W.boolean(),summary:W.string().optional(),timestamp:W.number()})),KB=F0.event("task.failed",W.object({sessionID:W.string(),taskID:W.string(),error:W.string(),recoverable:W.boolean(),timestamp:W.number()}))});function GL(D){F0.publish(Mn,D)}function HL(D){F0.publish(_n,D)}var Mn,_n,Of;var EL=k(async()=>{C0();await eD();Mn=F0.event("task.detailed-progress",W.object({sessionID:W.string(),taskID:W.string(),agentName:W.string(),primaryStatus:W.string(),secondaryStatus:W.string().optional(),tertiaryStatus:W.string().optional(),currentTool:W.string(),toolParameters:W.record(W.any()).optional(),timestamp:W.number(),startTime:W.number(),estimatedCompletion:W.number().optional(),progress:W.number().min(0).max(100).optional(),phase:W.enum(["initializing","context-gathering","processing","finalizing"]).optional()})),_n=F0.event("task.summary",W.object({sessionID:W.string(),taskID:W.string(),agentName:W.string(),lines:W.array(W.string()).min(1).max(3),icon:W.string().optional(),spinner:W.boolean().default(!0),timestamp:W.number(),elapsed:W.number()}));Of=class Of{static toolIcons={read:"\uD83D\uDCC2",write:"\uD83D\uDCBE",edit:"\u270F\uFE0F",grep:"\uD83D\uDD0D",glob:"\uD83D\uDCC1",bash:"\uD83D\uDDA5\uFE0F",list:"\uD83D\uDCCB",task:"\uD83E\uDD16",webfetch:"\uD83C\uDF10",todoread:"\uD83D\uDCDD",todowrite:"\uD83D\uDCDD"};static toolVerbs={read:"Reading",write:"Writing to",edit:"Editing",grep:"Searching for",glob:"Finding files",bash:"Running",list:"Listing",task:"Delegating to",webfetch:"Fetching",todoread:"Reading tasks",todowrite:"Updating tasks"};static summarizeToolInvocation(D,F={}){let $=this.toolIcons[D.toLowerCase()]||"\uD83D\uDD27",B=this.toolVerbs[D.toLowerCase()]||"Using";switch(D.toLowerCase()){case"read":return`${$} ${B} ${this.truncatePath(F.filePath||"file")}`;case"write":return`${$} ${B} ${this.truncatePath(F.filePath||"file")}`;case"edit":return`${$} ${B} ${this.truncatePath(F.filePath||"file")}`;case"grep":let J=F.pattern||"patterns",Y=F.include?` in ${F.include}`:"";return`${$} ${B} '${this.truncateText(J,20)}'${Y}`;case"glob":let X=F.pattern||"*";return`${$} ${B} matching '${X}'`;case"bash":let Q=F.command||"command";return`${$} ${B} ${this.truncateText(Q,30)}`;case"list":let w=F.path||"directory";return`${$} ${B} ${this.truncatePath(w)}`;case"task":let f=F.description||"sub-task";return`${$} ${B} ${this.truncateText(f,40)}`;case"webfetch":let G=F.url||"web content";return`${$} ${B} ${this.truncateUrl(G)}`;case"todoread":case"todowrite":return`${$} ${B}`;default:return`${$} ${B} ${D}`}}static generateTaskSummary(D,F,$={},B="processing",J=0){let Y=[],X="\uD83E\uDD16",Q=this.getPhaseDescription(B);if(Y.push(`${"\uD83E\uDD16"} ${D}: ${Q}`),F){let f=this.summarizeToolInvocation(F,$),G=J>1000?` (${Math.round(J/1000)}s)`:"";Y.push(`   ${f}${G}`)}let w=this.extractSpecificDetails(F,$);if(w)Y.push(`   ${w}`);return Y.slice(0,3)}static getPhaseDescription(D){switch(D){case"initializing":return"Initializing...";case"context-gathering":return"Gathering context...";case"processing":return"Processing request...";case"finalizing":return"Finalizing...";default:return"Working..."}}static extractSpecificDetails(D,F){switch(D.toLowerCase()){case"grep":if(F.path)return`\uD83D\uDD0D Scanning ${this.truncatePath(F.path)}`;break;case"read":if(F.limit||F.offset){let $=F.limit||"all",B=F.offset||0;return`\uD83D\uDCC4 Lines ${B}-${B+$}`}break;case"bash":if(F.description)return`\uD83D\uDCAC ${this.truncateText(F.description,50)}`;break;case"task":if(F.prompt)return`\uD83D\uDCCB ${this.truncateText(F.prompt,50)}`;break}return null}static truncatePath(D,F=40){if(D.length<=F)return D;let $=D.split("/");if($.length>2)return`.../${$[$.length-2]}/${$[$.length-1]}`;return D.slice(-F)}static truncateText(D,F){if(D.length<=F)return D;return D.slice(0,F-3)+"..."}static truncateUrl(D,F=30){try{let B=new URL(D).hostname;if(B.length<=F)return B;return B.slice(0,F-3)+"..."}catch{return this.truncateText(D,F)}}}});var VL={};vF(VL,{readDebugLog:()=>Pn,logTaskExecution:()=>In,logSubSessionCreation:()=>Tn});import{appendFileSync as KL,existsSync as qL,mkdirSync as Ln}from"fs";import{join as zn}from"path";function In(D,F){let B=`[${new Date().toISOString()}] Task executed - Session: ${D}, Description: ${F}
`;try{KL(qY,B)}catch(J){DD.error("[TASK-DEBUG] Failed to write log:",J)}}function Tn(D,F,$){let J=`[${new Date().toISOString()}] Sub-session created - Parent: ${D}, SubSession: ${F}, Details: ${JSON.stringify($)}
`;try{KL(qY,J)}catch(Y){DD.error("[TASK-DEBUG] Failed to write log:",Y)}}function Pn(){try{if(qL(qY))return Bun.file(qY).text()}catch(D){DD.error("[TASK-DEBUG] Failed to read log:",D)}return"No debug log found"}var jf="/tmp/dgmo-debug",qY;var AL=k(()=>{A9();qY=zn(jf,"task-debug.log");if(!qL(jf))Ln(jf,{recursive:!0})});var jL={};vF(jL,{SessionDiagnostics:()=>OL});var OL;var UL=k(async()=>{await v2();await fB();((Sw0)=>{async function D(B){let J={parentId:B,subSessionCount:0,indexFound:!1,indexEntries:[],subSessionDetails:[],errors:[],totalInStorage:0};try{let Y=`session/sub-session-index/${B}`;try{let Q=await jD.readJSON(Y);J.indexFound=!0,J.indexEntries=Q,J.subSessionCount=Q.length}catch(Q){J.errors.push(`No index found at ${Y}`)}try{let Q=await $1.getByParent(B);J.subSessionDetails=Q.map((w)=>({id:w.id,agent:w.agentName,status:w.status,created:new Date(w.createdAt).toISOString()}))}catch(Q){J.errors.push(`Error getting sub-sessions: ${Q}`)}let X=0;for await(let Q of jD.list("session/sub-sessions"))X++;J.totalInStorage=X}catch(Y){J.errors.push(`General error: ${Y}`)}return J}Sw0.verifySubSessions=D;async function F(){let B=[];for await(let J of jD.list("session/sub-session-index"))B.push(J);return B}Sw0.listAllIndexes=F;async function $(){let{App:B}=await MD().then(() => vX),J=B.info();return{dataPath:J.path.data,storagePath:`${J.path.data}/storage`,sessionPath:`${J.path.data}/storage/session`,subSessionPath:`${J.path.data}/storage/session/sub-sessions`,indexPath:`${J.path.data}/storage/session/sub-session-index`}}Sw0.debugStoragePaths=$})(OL||={})});var Uf={};vF(Uf,{TaskTool:()=>bn});function RL(D){return[/file not found/i,/no such file/i,/permission denied/i,/command not found/i,/module not found/i,/cannot find/i,/undefined is not/i,/null is not/i,/timeout/i,/rate limit/i,/connection refused/i,/ENOENT/i,/EACCES/i,/ETIMEDOUT/i].some(($)=>$.test(D))}var bn;var Rf=k(async()=>{A9();zF();fL();C0();await l2();await eD();await YB();Gf();await fB();await qB();await EL();DD.log("[TASK-TOOL] TaskTool module loaded at",new Date().toISOString());bn=dD.define({id:"task",description:WL,parameters:W.object({description:W.string().describe("A short (3-5 words) description of the task"),prompt:W.string().describe("The task for the agent to perform"),agentMode:W.enum(["read-only","all-tools"]).optional().describe("Tool access mode for the sub-agent (defaults to read-only)"),autoDebug:W.boolean().optional().default(!0).describe("Automatically create debug agent on failure"),maxRetries:W.number().optional().default(1).describe("Maximum number of automatic retry attempts")}),async execute(D,F){DD.log(`
=== TASK TOOL EXECUTION STARTED ===`),DD.log("[TASK] Timestamp:",new Date().toISOString()),DD.log("[TASK] Task tool executed with params:",D),DD.log("[TASK] Context sessionID:",F.sessionID),DD.log("[TASK] Creating sub-session with parent:",F.sessionID),DD.log("[TASK] Current working directory:",process.cwd());try{let{logTaskExecution:K}=await Promise.resolve().then(() => (AL(),VL));K(F.sessionID,D.description)}catch(K){DD.error("[TASK] Debug log failed:",K)}let{App:$}=await MD().then(() => vX),B=$.info();DD.log("[TASK] App info paths:",B.path);let J=await u0.create(F.sessionID),X=(await u0.getMessage(F.sessionID,F.messageID)).metadata.assistant,Q=D.agentMode||"read-only";s8.setSessionAgentMode(J.id,Q);try{await $1.create(F.sessionID,J.id,D.description,D.prompt),DD.log("[TASK] SubSession.create completed successfully"),(async()=>{await new Promise((q)=>setTimeout(q,100));let{SessionDiagnostics:E}=await UL().then(() => jL),O=await E.verifySubSessions(F.sessionID);DD.log("[VERIFICATION] Sub-session creation result:",{parentId:F.sessionID,subSessionId:J.id,verified:O.subSessionCount>0,totalInStorage:O.totalInStorage}),F0.publish(F0.event("subsession.created",W.object({parentId:W.string(),subSessionId:W.string(),verified:W.boolean(),count:W.number()})),{parentId:F.sessionID,subSessionId:J.id,verified:O.subSessionCount>0,count:O.subSessionCount})})().catch((E)=>DD.error("[VERIFICATION] Error:",E))}catch(K){throw DD.error("[TASK] SubSession.create failed:",K),K}let w=J.id,f=Date.now();await $1.update(J.id,{status:"running",startedAt:f}),Z9({sessionID:F.sessionID,taskID:w,agentName:D.description,taskDescription:D.prompt,timestamp:f});function G(K){let E=[];for(let O of K.parts)if(O.type==="tool-invocation")E.push({toolInvocation:O.toolInvocation,metadata:K.metadata.tool[O.toolInvocation.toolCallId]});return E}let H=F0.subscribe(L1.Event.Updated,async(K)=>{if(K.properties.info.metadata.sessionID!==J.id)return;F.metadata({title:D.description,summary:G(K.properties.info)});let E=K.properties.info,O=0,q=0,U="",N={};if(E.parts)E.parts.forEach((P)=>{if(P.type==="tool-invocation"){if(O++,"toolInvocation"in P&&P.toolInvocation?.state==="result")q++;else if("toolInvocation"in P&&P.toolInvocation?.state==="partial-call")U=P.toolInvocation.toolName||"",N=P.toolInvocation.args||{}}});let L={"mcp__qdrant__qdrant-find":"\uD83D\uDD0D Searching project memories...",Read:"\uD83D\uDCC2 Reading project files...",Glob:"\uD83D\uDCC1 Exploring directory structure...",Grep:"\uD83D\uDD0E Analyzing codebase structure...",Write:"\uD83D\uDCBE Writing changes to disk...",Edit:"\u270F\uFE0F Applying code changes...",MultiEdit:"\u270F\uFE0F Applying multiple edits...",Bash:"\uD83D\uDDA5\uFE0F Executing command...",LS:"\uD83D\uDCCB Listing directory contents...",WebSearch:"\uD83C\uDF10 Searching the web...",TodoRead:"\uD83D\uDCDD Reading task list...",TodoWrite:"\uD83D\uDCDD Updating task list..."},C="processing",R="";if(D.description.toLowerCase().includes("continuation")||D.description.toLowerCase().includes("prompt"))if(C="prompt-generation",q===0)R="\uD83D\uDD04 Analyzing current session...";else if(q<O)R="\uD83D\uDCDD Building continuation prompt...";else R="\u2705 Continuation prompt ready!";else if(C="context-gathering",U&&L[U])R=L[U];else if(O===0)R="\uD83E\uDDE0 Initializing...";else if(q===O&&O>0)R="\uD83E\uDDE0 Preparing response...";else R="\uD83D\uDD04 Processing request...";o2({sessionID:F.sessionID,taskID:w,progress:0,message:R,timestamp:Date.now(),startTime:f,phase:C,currentTool:U,toolDescription:R});let h=Date.now()-f,p=Of.generateTaskSummary(D.description,U,N,C,h);HL({sessionID:F.sessionID,taskID:w,agentName:D.description,lines:p,spinner:!0,timestamp:Date.now(),elapsed:h}),GL({sessionID:F.sessionID,taskID:w,agentName:D.description,primaryStatus:p[0]||R,secondaryStatus:p[1],tertiaryStatus:p[2],currentTool:U,toolParameters:N,timestamp:Date.now(),startTime:f,phase:C})});F.abort.addEventListener("abort",()=>{u0.abort(J.id)});try{DD.log("[TASK] Starting Session.chat execution",{subSessionId:J.id,modelID:X.modelID,providerID:X.providerID,promptLength:D.prompt.length}),o2({sessionID:F.sessionID,taskID:w,progress:15,message:"Starting agent execution...",timestamp:Date.now(),startTime:f});let K=await u0.chat({sessionID:J.id,modelID:X.modelID,providerID:X.providerID,parts:[{type:"text",text:D.prompt}]});DD.log("[TASK] Session.chat completed successfully",{subSessionId:J.id,resultPartsCount:K.parts.length,hasTextOutput:K.parts.some((O)=>O.type==="text")}),H();let E=K.parts.findLast((O)=>O.type==="text")?.text||"No output";return await $1.complete(J.id,E.slice(0,200)+(E.length>200?"...":"")),N9({sessionID:F.sessionID,taskID:w,duration:Date.now()-f,success:!0,summary:E.slice(0,200),timestamp:Date.now()}),{metadata:{title:D.description,summary:G(K)},output:E}}catch(K){let E=K instanceof Error?K.message:String(K),O=K instanceof Error?K.stack:void 0;if(DD.error("[TASK] Session.chat failed",{subSessionId:J.id,error:E,stack:O,modelID:X.modelID,providerID:X.providerID}),o2({sessionID:F.sessionID,taskID:w,progress:0,message:`Failed: ${E}`,timestamp:Date.now(),startTime:f}),await $1.fail(J.id,E),KY({sessionID:F.sessionID,taskID:w,error:E,recoverable:D.autoDebug&&RL(E),timestamp:Date.now()}),D.autoDebug&&D.maxRetries>0){let q=K instanceof Error?K.message:String(K);if(RL(q)){let N=`The previous task failed with error: "${q}"

Original task: "${D.prompt}"

Please analyze the error and try to complete the task again. If the error is due to missing information or incorrect approach, adjust your strategy accordingly.`;try{let L=await u0.create(F.sessionID);s8.setSessionAgentMode(L.id,"all-tools"),await $1.create(F.sessionID,L.id,`Debug: ${D.description}`,N),await $1.update(L.id,{status:"running"});let C=await u0.chat({sessionID:L.id,modelID:X.modelID,providerID:X.providerID,parts:[{type:"text",text:N}]}),R=C.parts.findLast((I)=>I.type==="text")?.text||"No output";return await $1.complete(L.id,R.slice(0,200)+(R.length>200?"...":"")),{metadata:{title:`${D.description} (recovered)`,summary:G(C)},output:R}}catch(L){throw await $1.fail(J.id,`Original error: ${q}. Debug error: ${L instanceof Error?L.message:String(L)}`),K}}}throw K}}})});var z1;var a8=k(async()=>{C0();await MD();await lF();P7();M$();await xD();await u5();await Qj();await hR();YM();await fM();await EM();await OM();await CM();await IM();await hM();await vM();await lJ();await iw();await Y$();QF();await dJ();await XL();await wL();((r2)=>{let D=Z0.create({service:"provider"}),F={async anthropic(C){if(!await K6.access())return{autoload:!1};for(let I of Object.values(C.models))I.cost={input:0,output:0};return{autoload:!0,options:{apiKey:"",async fetch(I,h){let p=await K6.access(),P={...h.headers,authorization:`Bearer ${p}`,"anthropic-beta":"oauth-2025-04-20"};return delete P["x-api-key"],fetch(I,{...h,headers:P})}}}},"github-copilot":async(C)=>{let R=await nJ();if(!R)return{autoload:!1};let I=await FF.get("github-copilot");if(!I||I.type!=="oauth")return{autoload:!1};if(C&&C.models)for(let h of Object.values(C.models))h.cost={input:0,output:0};return{autoload:!0,options:{apiKey:"",async fetch(h,p){let P=await FF.get("github-copilot");if(!P||P.type!=="oauth")return;if(!P.access||P.expires<Date.now()){let n=await R.access(P.refresh);if(!n)throw new Error("GitHub Copilot authentication expired");await FF.set("github-copilot",{type:"oauth",...n}),P.access=n.access}let v={...p.headers,...R.HEADERS,Authorization:`Bearer ${P.access}`,"Openai-Intent":"conversation-edits"};return delete v["x-api-key"],fetch(h,{...p,headers:v})}}}},openai:async()=>{return{autoload:!1,async getModel(C,R){return C.responses(R)},options:{}}},"amazon-bedrock":async()=>{if(!process.env.AWS_PROFILE&&!process.env.AWS_ACCESS_KEY_ID)return{autoload:!1};let C=process.env.AWS_REGION??"us-east-1",{fromNodeProviderChain:R}=await import(await rF.install("@aws-sdk/credential-providers"));return{autoload:!0,options:{region:C,credentialProvider:R()},async getModel(I,h){let p=C.split("-")[0];switch(p){case"us":{if(["claude","deepseek"].some((v)=>h.includes(v)))h=`${p}.${h}`;break}case"eu":{let P=["eu-west-1","eu-west-3","eu-north-1","eu-central-1","eu-south-1","eu-south-2"].some((n)=>C.includes(n)),v=["claude","nova-lite","nova-micro","llama3","pixtral"].some((n)=>h.includes(n));if(P&&v)h=`${p}.${h}`;break}case"ap":{if(["claude","nova-lite","nova-micro","nova-pro"].some((v)=>h.includes(v)))p="apac",h=`${p}.${h}`;break}}return I.languageModel(h)}}}},$=w0.state("provider",async()=>{let C=await HD.get(),R=await dF.get(),I={},h=new Map,p=new Map;D.info("init");function P(_,x,o,M){let r=I[_];if(!r){let $0=R[_];if(!$0)return;if($0.api)x.baseURL=$0.api;I[_]={source:o,info:$0,options:x,getModel:M};return}r.options=T7(r.options,x),r.source=o,r.getModel=M??r.getModel}let v=Object.entries(C.provider??{});for(let[_,x]of v){let o=R[_],M={id:_,npm:x.npm??o?.npm,name:x.name??o?.name??_,env:x.env??o?.env??[],api:x.api??o?.api,models:o?.models??{}};for(let[r,$0]of Object.entries(x.models??{})){let V0=M.models[r],s0={id:r,name:$0.name??V0?.name??r,release_date:$0.release_date??V0?.release_date,attachment:$0.attachment??V0?.attachment??!1,reasoning:$0.reasoning??V0?.reasoning??!1,temperature:$0.temperature??V0?.temperature??!1,tool_call:$0.tool_call??V0?.tool_call??!0,cost:{...V0?.cost,...$0.cost,input:0,output:0,cache_read:0,cache_write:0},options:{...V0?.options,...$0.options},limit:$0.limit??V0?.limit??{context:0,output:0}};M.models[r]=s0}R[_]=M}let n=await HD.get().then((_)=>new Set(_.disabled_providers??[]));for(let[_,x]of Object.entries(R)){if(n.has(_))continue;let o=x.env.map((M)=>process.env[M]).at(0);if(!o)continue;P(_,x.env.length===1?{apiKey:o}:{},"env")}for(let[_,x]of Object.entries(await FF.all())){if(n.has(_))continue;if(x.type==="api")P(_,{apiKey:x.key},"api")}for(let[_,x]of Object.entries(F)){if(n.has(_))continue;let o=await x(R[_]);if(o&&(o.autoload||I[_]))P(_,o.options??{},"custom",o.getModel)}for(let[_,x]of v)P(_,x.options??{},"config");for(let[_,x]of Object.entries(I)){if(Object.keys(x.info.models).length===0){delete I[_];continue}D.info("found",{providerID:_})}return{models:h,providers:I,sdk:p}});async function B(){return $().then((C)=>C.providers)}r2.list=B;async function J(C){return(async()=>{let _=[];try{const R=Y8(_,D.time("getSDK",{providerID:C.id}),0);let I=await $();let h=I.sdk.get(C.id);if(h)return h;let p=C.npm??C.id;let P=await import(await rF.install(p,"latest"));let v=P[Object.keys(P).find((r)=>r.startsWith("create"))];let n=v(I.providers[C.id]?.options);I.sdk.set(C.id,n);return n}catch(x){var o=x,M=1}finally{X8(_,o,M)}})().catch((R)=>{throw new r2.InitError({providerID:C.id},{cause:R})})}async function Y(C,R){let I=`${C}/${R}`,h=await $();if(h.models.has(I))return h.models.get(I);D.info("getModel",{providerID:C,modelID:R});let p=h.providers[C];if(!p)throw new r2.ModelNotFoundError({providerID:C,modelID:R});let P=p.info.models[R];if(!P)throw new r2.ModelNotFoundError({providerID:C,modelID:R});let v=await J(p.info);try{let n=p.getModel?await p.getModel(v,R):v.languageModel(R);return D.info("found",{providerID:C,modelID:R}),h.models.set(I,{info:P,language:n}),{info:P,language:n}}catch(n){if(n instanceof w$)throw new r2.ModelNotFoundError({modelID:R,providerID:C},{cause:n});throw n}}r2.getModel=Y;let X=["gemini-2.5-pro-preview","codex-mini","claude-sonnet-4"];function Q(C){return Q$(C,[(R)=>X.findIndex((I)=>R.id.includes(I)),"desc"],[(R)=>R.id.includes("latest")?0:1,"asc"],[(R)=>R.id,"desc"])}r2.sort=Q;async function w(){let C=await HD.get();if(C.model)return f(C.model);let R=await B().then((h)=>Object.values(h)).then((h)=>h.find((p)=>!C.provider||Object.keys(C.provider).includes(p.info.id)));if(!R)throw new Error("no providers found");let[I]=Q(Object.values(R.info.models));if(!I)throw new Error("no models found");return{providerID:R.info.id,modelID:I.id}}r2.defaultModel=w;function f(C){let[R,...I]=C.split("/");return{providerID:R,modelID:I.join("/")}}r2.parseModel=f;let G=null,H=async()=>{if(!G)G=(await Rf().then(() => Uf)).TaskTool;return G},K=[Xj,bR,JM,wM,HM,AM,RM,zM,bM,kM,uM,YL],E={anthropic:K.filter((C)=>C.id!=="patch"),openai:K.map((C)=>({...C,parameters:q(C.parameters)})),azure:K.map((C)=>({...C,parameters:q(C.parameters)})),google:K};async function O(C){let I=[...E[C]??K];try{let h=await H();I.push(h)}catch(h){}try{let h=await Af.getTools();I.push(...h)}catch(h){}return I}r2.tools=O;function q(C){if(C instanceof W.ZodObject){let R=C.shape,I={};for(let[h,p]of Object.entries(R)){let P=p;if(P instanceof W.ZodOptional)I[h]=P.unwrap().nullable();else I[h]=q(P)}return W.object(I)}if(C instanceof W.ZodArray)return W.array(q(C.element));if(C instanceof W.ZodUnion)return W.union(C.options.map((R)=>q(R)));return C}r2.ModelNotFoundError=BD.create("ProviderModelNotFoundError",W.object({providerID:W.string(),modelID:W.string()})),r2.InitError=BD.create("ProviderInitError",W.object({providerID:W.string()})),r2.AuthError=BD.create("ProviderAuthError",W.object({providerID:W.string(),message:W.string()}))})(z1||={})});var $W={};vF($W,{taskEventDiagnostics:()=>Pr,TaskEventDiagnostics:()=>FW});class FW{eventCounts={started:0,progress:0,completed:0,failed:0};lastEvents=new Map;constructor(){F0.subscribe(GB,(D)=>{this.eventCounts.started++,this.lastEvents.set("started",D),P9.info("\uD83D\uDCCA Task Started Event Captured",{count:this.eventCounts.started,taskID:D.properties.taskID})}),F0.subscribe(HB,(D)=>{this.eventCounts.progress++,this.lastEvents.set("progress",D),P9.info("\uD83D\uDCCA Task Progress Event Captured",{count:this.eventCounts.progress,taskID:D.properties.taskID,progress:D.properties.progress})}),F0.subscribe(EB,(D)=>{this.eventCounts.completed++,this.lastEvents.set("completed",D),P9.info("\uD83D\uDCCA Task Completed Event Captured",{count:this.eventCounts.completed,taskID:D.properties.taskID})}),F0.subscribe(KB,(D)=>{this.eventCounts.failed++,this.lastEvents.set("failed",D),P9.info("\uD83D\uDCCA Task Failed Event Captured",{count:this.eventCounts.failed,taskID:D.properties.taskID})})}getStats(){return{eventCounts:this.eventCounts,lastEvents:Object.fromEntries(this.lastEvents)}}reset(){this.eventCounts={started:0,progress:0,completed:0,failed:0},this.lastEvents.clear()}async testEventFlow(D="test-session"){P9.info("\uD83E\uDDEA Starting event flow test");let F=`test-${Date.now()}`,$=Date.now();Z9({sessionID:D,taskID:F,agentName:"Test Agent",taskDescription:"Testing event flow",timestamp:$}),await new Promise((B)=>setTimeout(B,100)),o2({sessionID:D,taskID:F,progress:25,message:"First progress update",timestamp:Date.now(),startTime:$}),await new Promise((B)=>setTimeout(B,100)),o2({sessionID:D,taskID:F,progress:75,message:"Second progress update",timestamp:Date.now(),startTime:$}),await new Promise((B)=>setTimeout(B,100)),N9({sessionID:D,taskID:F,duration:Date.now()-$,success:!0,summary:"Test completed successfully",timestamp:Date.now()}),P9.info("\uD83E\uDDEA Event flow test completed",this.getStats())}}var P9,Pr;var BW=k(async()=>{await eD();await xD();await qB();P9=Z0.create({service:"task-events-diagnostics"});Pr=new FW});class Az{state="disconnected";clientCount=0;lastHeartbeat;retryCount=0;healthCheckInterval;HEARTBEAT_TIMEOUT=45000;MAX_RETRIES=5;start(){F7.info("Starting connection health monitor"),this.setState("connecting"),this.healthCheckInterval=setInterval(()=>{this.checkHealth()},1e4)}stop(){if(F7.info("Stopping connection health monitor"),this.healthCheckInterval)clearInterval(this.healthCheckInterval),this.healthCheckInterval=void 0;this.setState("disconnected")}onClientConnected(){this.clientCount++,this.retryCount=0,this.setState("connected"),F7.info(`Client connected. Total clients: ${this.clientCount}`)}onClientDisconnected(){if(this.clientCount=Math.max(0,this.clientCount-1),F7.info(`Client disconnected. Total clients: ${this.clientCount}`),this.clientCount===0)this.setState("disconnected")}onHeartbeat(){if(this.lastHeartbeat=Date.now(),this.state!=="connected"&&this.clientCount>0)this.setState("connected")}onError(D){if(F7.error("Connection error",{error:D}),this.setState("error",D),this.retryCount<this.MAX_RETRIES)this.retryCount++,this.setState("reconnecting")}checkHealth(){if(this.clientCount===0){if(this.state!=="disconnected")this.setState("disconnected");return}if(this.lastHeartbeat){let D=Date.now()-this.lastHeartbeat;if(D>this.HEARTBEAT_TIMEOUT)F7.warn(`Heartbeat timeout: ${D}ms since last heartbeat`),this.onError("Heartbeat timeout")}}setState(D,F){if(this.state===D&&!F)return;this.state=D;let $={state:D,timestamp:Date.now(),clientCount:this.clientCount,lastHeartbeat:this.lastHeartbeat,error:F,retryCount:this.retryCount};F0.publish(br,$),F7.info(`Connection state changed to: ${D}`,{clientCount:this.clientCount,retryCount:this.retryCount,error:F})}getStatus(){return{state:this.state,timestamp:Date.now(),clientCount:this.clientCount,lastHeartbeat:this.lastHeartbeat,retryCount:this.retryCount}}}var F7,Vz,br,$7;var Oz=k(async()=>{await eD();await xD();C0();F7=Z0.create({service:"connection-status"});((Y)=>{Y.DISCONNECTED="disconnected";Y.CONNECTING="connecting";Y.CONNECTED="connected";Y.RECONNECTING="reconnecting";Y.ERROR="error"})(Vz||={});br=F0.event("connection.status",W.object({state:W.nativeEnum(Vz),timestamp:W.number(),clientCount:W.number(),lastHeartbeat:W.number().optional(),error:W.string().optional(),retryCount:W.number().optional()}));$7=new Az});var jz={};vF(jz,{taskEventServer:()=>b9,TaskEventServer:()=>JW});import{WebSocketServer as hr}from"ws";class JW{wss=null;port=5747;clients=new Set;async start(){if(this.wss){BF.info("Task event server already running");return}this.wss=new hr({port:this.port}),$7.start(),this.wss.on("connection",(D)=>{BF.info("New WebSocket client connected"),this.clients.add(D),$7.onClientConnected();let F=setInterval(()=>{if(D.readyState===D.OPEN)D.send(JSON.stringify({type:"heartbeat",timestamp:Date.now()})),$7.onHeartbeat()},30000);D.on("close",()=>{BF.info("WebSocket client disconnected"),this.clients.delete(D),$7.onClientDisconnected(),clearInterval(F)}),D.on("error",($)=>{BF.error("WebSocket error",$),this.clients.delete(D),$7.onError($.message||"Unknown WebSocket error"),clearInterval(F)})}),F0.subscribe(GB,(D)=>{BF.info(`Task started event received: ${D.properties.taskID}`,{sessionID:D.properties.sessionID,agentName:D.properties.agentName}),this.broadcast({type:"task.started",data:D.properties})}),F0.subscribe(HB,(D)=>{BF.info(`Broadcasting task progress: ${D.properties.taskID} - ${D.properties.progress}%`,{sessionID:D.properties.sessionID,message:D.properties.message}),this.broadcast({type:"task.progress",data:D.properties})}),F0.subscribe(EB,(D)=>{BF.info(`Task completed event received: ${D.properties.taskID}`,{sessionID:D.properties.sessionID,duration:D.properties.duration,success:D.properties.success}),this.broadcast({type:"task.completed",data:D.properties})}),F0.subscribe(KB,(D)=>{BF.info(`Task failed event received: ${D.properties.taskID}`,{sessionID:D.properties.sessionID,error:D.properties.error}),this.broadcast({type:"task.failed",data:D.properties})}),F0.subscribe(WY,(D)=>{BF.info(`MCP call started: ${D.properties.id}`,{server:D.properties.server,method:D.properties.method,sessionID:D.properties.sessionID}),this.broadcast({type:"mcp.call.started",data:D.properties})}),F0.subscribe(GY,(D)=>{BF.info(`MCP call progress: ${D.properties.id}`,{message:D.properties.message}),this.broadcast({type:"mcp.call.progress",data:D.properties})}),F0.subscribe(HY,(D)=>{BF.info(`MCP call completed: ${D.properties.id}`,{duration:D.properties.duration}),this.broadcast({type:"mcp.call.completed",data:D.properties})}),F0.subscribe(EY,(D)=>{BF.info(`MCP call failed: ${D.properties.id}`,{error:D.properties.error,duration:D.properties.duration}),this.broadcast({type:"mcp.call.failed",data:D.properties})}),BF.info(`Task event server started on port ${this.port}`)}broadcast(D){let F=JSON.stringify(D),$=Array.from(this.clients).filter((B)=>B.readyState===B.OPEN);BF.info(`Broadcasting to ${$.length} active clients`,{type:D.type,totalClients:this.clients.size}),$.forEach((B)=>{try{B.send(F)}catch(J){BF.error("Failed to send to client",{error:J.message,type:D.type})}})}async stop(){if(this.wss)this.wss.close(),this.wss=null,this.clients.clear(),$7.stop(),BF.info("Task event server stopped")}}var BF,b9;var IY=k(async()=>{await eD();await xD();await qB();await Ef();await Oz();BF=Z0.create({service:"task-events-server"});b9=new JW});var XW=t((eH0,Zz)=>{var YW={to(D,F){if(!F)return`\x1B[${D+1}G`;return`\x1B[${F+1};${D+1}H`},move(D,F){let $="";if(D<0)$+=`\x1B[${-D}D`;else if(D>0)$+=`\x1B[${D}C`;if(F<0)$+=`\x1B[${-F}A`;else if(F>0)$+=`\x1B[${F}B`;return $},up:(D=1)=>`\x1B[${D}A`,down:(D=1)=>`\x1B[${D}B`,forward:(D=1)=>`\x1B[${D}C`,backward:(D=1)=>`\x1B[${D}D`,nextLine:(D=1)=>"\x1B[E".repeat(D),prevLine:(D=1)=>"\x1B[F".repeat(D),left:"\x1B[G",hide:"\x1B[?25l",show:"\x1B[?25h",save:"\x1B7",restore:"\x1B8"},xr={up:(D=1)=>"\x1B[S".repeat(D),down:(D=1)=>"\x1B[T".repeat(D)},kr={screen:"\x1B[2J",up:(D=1)=>"\x1B[1J".repeat(D),down:(D=1)=>"\x1B[J".repeat(D),line:"\x1B[2K",lineEnd:"\x1B[K",lineStart:"\x1B[1K",lines(D){let F="";for(let $=0;$<D;$++)F+=this.line+($<D-1?YW.up():"");if(D)F+=YW.left;return F}};Zz.exports={cursor:YW,scroll:xr,erase:kr,beep:"\x07"}});var wW=t((DE0,QW)=>{var PY=process||{},Nz=PY.argv||[],TY=PY.env||{},ur=!(!!TY.NO_COLOR||Nz.includes("--no-color"))&&(!!TY.FORCE_COLOR||Nz.includes("--color")||PY.platform==="win32"||(PY.stdout||{}).isTTY&&TY.TERM!=="dumb"||!!TY.CI),vr=(D,F,$=D)=>(B)=>{let J=""+B,Y=J.indexOf(F,D.length);return~Y?D+gr(J,F,$,Y)+F:D+J+F},gr=(D,F,$,B)=>{let J="",Y=0;do J+=D.substring(Y,B)+$,Y=B+F.length,B=D.indexOf(F,Y);while(~B);return J+D.substring(Y)},Mz=(D=ur)=>{let F=D?vr:()=>String;return{isColorSupported:D,reset:F("\x1B[0m","\x1B[0m"),bold:F("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:F("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:F("\x1B[3m","\x1B[23m"),underline:F("\x1B[4m","\x1B[24m"),inverse:F("\x1B[7m","\x1B[27m"),hidden:F("\x1B[8m","\x1B[28m"),strikethrough:F("\x1B[9m","\x1B[29m"),black:F("\x1B[30m","\x1B[39m"),red:F("\x1B[31m","\x1B[39m"),green:F("\x1B[32m","\x1B[39m"),yellow:F("\x1B[33m","\x1B[39m"),blue:F("\x1B[34m","\x1B[39m"),magenta:F("\x1B[35m","\x1B[39m"),cyan:F("\x1B[36m","\x1B[39m"),white:F("\x1B[37m","\x1B[39m"),gray:F("\x1B[90m","\x1B[39m"),bgBlack:F("\x1B[40m","\x1B[49m"),bgRed:F("\x1B[41m","\x1B[49m"),bgGreen:F("\x1B[42m","\x1B[49m"),bgYellow:F("\x1B[43m","\x1B[49m"),bgBlue:F("\x1B[44m","\x1B[49m"),bgMagenta:F("\x1B[45m","\x1B[49m"),bgCyan:F("\x1B[46m","\x1B[49m"),bgWhite:F("\x1B[47m","\x1B[49m"),blackBright:F("\x1B[90m","\x1B[39m"),redBright:F("\x1B[91m","\x1B[39m"),greenBright:F("\x1B[92m","\x1B[39m"),yellowBright:F("\x1B[93m","\x1B[39m"),blueBright:F("\x1B[94m","\x1B[39m"),magentaBright:F("\x1B[95m","\x1B[39m"),cyanBright:F("\x1B[96m","\x1B[39m"),whiteBright:F("\x1B[97m","\x1B[39m"),bgBlackBright:F("\x1B[100m","\x1B[49m"),bgRedBright:F("\x1B[101m","\x1B[49m"),bgGreenBright:F("\x1B[102m","\x1B[49m"),bgYellowBright:F("\x1B[103m","\x1B[49m"),bgBlueBright:F("\x1B[104m","\x1B[49m"),bgMagentaBright:F("\x1B[105m","\x1B[49m"),bgCyanBright:F("\x1B[106m","\x1B[49m"),bgWhiteBright:F("\x1B[107m","\x1B[49m")}};QW.exports=Mz();QW.exports.createColors=Mz});QX();import{notStrictEqual as wb,strictEqual as fb}from"assert";var LP={right:TP,center:PP};class HG{constructor(D){var F;this.width=D.width,this.wrap=(F=D.wrap)!==null&&F!==void 0?F:!0,this.rows=[]}span(...D){let F=this.div(...D);F.span=!0}resetOutput(){this.rows=[]}div(...D){if(D.length===0)this.div("");if(this.wrap&&this.shouldApplyLayoutDSL(...D)&&typeof D[0]==="string")return this.applyLayoutDSL(D[0]);let F=D.map(($)=>{if(typeof $==="string")return this.colFromString($);return $});return this.rows.push(F),F}shouldApplyLayoutDSL(...D){return D.length===1&&typeof D[0]==="string"&&/[\t\n]/.test(D[0])}applyLayoutDSL(D){let F=D.split(`
`).map((B)=>B.split("\t")),$=0;return F.forEach((B)=>{if(B.length>1&&NF.stringWidth(B[0])>$)$=Math.min(Math.floor(this.width*0.5),NF.stringWidth(B[0]))}),F.forEach((B)=>{this.div(...B.map((J,Y)=>{return{text:J.trim(),padding:this.measurePadding(J),width:Y===0&&B.length>1?$:void 0}}))}),this.rows[this.rows.length-1]}colFromString(D){return{text:D,padding:this.measurePadding(D)}}measurePadding(D){let F=NF.stripAnsi(D);return[0,F.match(/\s*$/)[0].length,0,F.match(/^\s*/)[0].length]}toString(){let D=[];return this.rows.forEach((F)=>{this.rowToString(F,D)}),D.filter((F)=>!F.hidden).map((F)=>F.text).join(`
`)}rowToString(D,F){return this.rasterize(D).forEach(($,B)=>{let J="";$.forEach((Y,X)=>{let{width:Q}=D[X],w=this.negatePadding(D[X]),f=Y;if(w>NF.stringWidth(Y))f+=" ".repeat(w-NF.stringWidth(Y));if(D[X].align&&D[X].align!=="left"&&this.wrap){let H=LP[D[X].align];if(f=H(f,w),NF.stringWidth(f)<w)f+=" ".repeat((Q||0)-NF.stringWidth(f)-1)}let G=D[X].padding||[0,0,0,0];if(G[3])J+=" ".repeat(G[3]);if(J+=GG(D[X],f,"| "),J+=f,J+=GG(D[X],f," |"),G[1])J+=" ".repeat(G[1]);if(B===0&&F.length>0)J=this.renderInline(J,F[F.length-1])}),F.push({text:J.replace(/ +$/,""),span:D.span})}),F}renderInline(D,F){let $=D.match(/^ */),B=$?$[0].length:0,J=F.text,Y=NF.stringWidth(J.trimRight());if(!F.span)return D;if(!this.wrap)return F.hidden=!0,J+D;if(B<Y)return D;return F.hidden=!0,J.trimRight()+" ".repeat(B-Y)+D.trimLeft()}rasterize(D){let F=[],$=this.columnWidths(D),B;return D.forEach((J,Y)=>{if(J.width=$[Y],this.wrap)B=NF.wrap(J.text,this.negatePadding(J),{hard:!0}).split(`
`);else B=J.text.split(`
`);if(J.border)B.unshift("."+"-".repeat(this.negatePadding(J)+2)+"."),B.push("'"+"-".repeat(this.negatePadding(J)+2)+"'");if(J.padding)B.unshift(...new Array(J.padding[0]||0).fill("")),B.push(...new Array(J.padding[2]||0).fill(""));B.forEach((X,Q)=>{if(!F[Q])F.push([]);let w=F[Q];for(let f=0;f<Y;f++)if(w[f]===void 0)w.push("");w.push(X)})}),F}negatePadding(D){let F=D.width||0;if(D.padding)F-=(D.padding[3]||0)+(D.padding[1]||0);if(D.border)F-=4;return F}columnWidths(D){if(!this.wrap)return D.map((Y)=>{return Y.width||NF.stringWidth(Y.text)});let F=D.length,$=this.width,B=D.map((Y)=>{if(Y.width)return F--,$-=Y.width,Y.width;return}),J=F?Math.floor($/F):0;return B.map((Y,X)=>{if(Y===void 0)return Math.max(J,zP(D[X]));return Y})}}function GG(D,F,$){if(D.border){if(/[.']-+[.']/.test(F))return"";if(F.trim().length!==0)return $;return"  "}return""}function zP(D){let F=D.padding||[],$=1+(F[3]||0)+(F[1]||0);if(D.border)return $+4;return $}function IP(){if(typeof process==="object"&&process.stdout&&process.stdout.columns)return process.stdout.columns;return 80}function TP(D,F){D=D.trim();let $=NF.stringWidth(D);if($<F)return" ".repeat(F-$)+D;return D}function PP(D,F){D=D.trim();let $=NF.stringWidth(D);if($>=F)return D;return" ".repeat(F-$>>1)+D}var NF;function EG(D,F){return NF=F,new HG({width:(D===null||D===void 0?void 0:D.width)||IP(),wrap:D===null||D===void 0?void 0:D.wrap})}function wX({onlyFirst:D=!1}={}){let $=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp($,D?void 0:"g")}var bP=wX();function H8(D){if(typeof D!=="string")throw new TypeError(`Expected a \`string\`, got \`${typeof D}\``);return D.replace(bP,"")}function KG(D){return D===161||D===164||D===167||D===168||D===170||D===173||D===174||D>=176&&D<=180||D>=182&&D<=186||D>=188&&D<=191||D===198||D===208||D===215||D===216||D>=222&&D<=225||D===230||D>=232&&D<=234||D===236||D===237||D===240||D===242||D===243||D>=247&&D<=250||D===252||D===254||D===257||D===273||D===275||D===283||D===294||D===295||D===299||D>=305&&D<=307||D===312||D>=319&&D<=322||D===324||D>=328&&D<=331||D===333||D===338||D===339||D===358||D===359||D===363||D===462||D===464||D===466||D===468||D===470||D===472||D===474||D===476||D===593||D===609||D===708||D===711||D>=713&&D<=715||D===717||D===720||D>=728&&D<=731||D===733||D===735||D>=768&&D<=879||D>=913&&D<=929||D>=931&&D<=937||D>=945&&D<=961||D>=963&&D<=969||D===1025||D>=1040&&D<=1103||D===1105||D===8208||D>=8211&&D<=8214||D===8216||D===8217||D===8220||D===8221||D>=8224&&D<=8226||D>=8228&&D<=8231||D===8240||D===8242||D===8243||D===8245||D===8251||D===8254||D===8308||D===8319||D>=8321&&D<=8324||D===8364||D===8451||D===8453||D===8457||D===8467||D===8470||D===8481||D===8482||D===8486||D===8491||D===8531||D===8532||D>=8539&&D<=8542||D>=8544&&D<=8555||D>=8560&&D<=8569||D===8585||D>=8592&&D<=8601||D===8632||D===8633||D===8658||D===8660||D===8679||D===8704||D===8706||D===8707||D===8711||D===8712||D===8715||D===8719||D===8721||D===8725||D===8730||D>=8733&&D<=8736||D===8739||D===8741||D>=8743&&D<=8748||D===8750||D>=8756&&D<=8759||D===8764||D===8765||D===8776||D===8780||D===8786||D===8800||D===8801||D>=8804&&D<=8807||D===8810||D===8811||D===8814||D===8815||D===8834||D===8835||D===8838||D===8839||D===8853||D===8857||D===8869||D===8895||D===8978||D>=9312&&D<=9449||D>=9451&&D<=9547||D>=9552&&D<=9587||D>=9600&&D<=9615||D>=9618&&D<=9621||D===9632||D===9633||D>=9635&&D<=9641||D===9650||D===9651||D===9654||D===9655||D===9660||D===9661||D===9664||D===9665||D>=9670&&D<=9672||D===9675||D>=9678&&D<=9681||D>=9698&&D<=9701||D===9711||D===9733||D===9734||D===9737||D===9742||D===9743||D===9756||D===9758||D===9792||D===9794||D===9824||D===9825||D>=9827&&D<=9829||D>=9831&&D<=9834||D===9836||D===9837||D===9839||D===9886||D===9887||D===9919||D>=9926&&D<=9933||D>=9935&&D<=9939||D>=9941&&D<=9953||D===9955||D===9960||D===9961||D>=9963&&D<=9969||D===9972||D>=9974&&D<=9977||D===9979||D===9980||D===9982||D===9983||D===10045||D>=10102&&D<=10111||D>=11094&&D<=11097||D>=12872&&D<=12879||D>=57344&&D<=63743||D>=65024&&D<=65039||D===65533||D>=127232&&D<=127242||D>=127248&&D<=127277||D>=127280&&D<=127337||D>=127344&&D<=127373||D===127375||D===127376||D>=127387&&D<=127404||D>=917760&&D<=917999||D>=983040&&D<=1048573||D>=1048576&&D<=1114109}function qG(D){return D===12288||D>=65281&&D<=65376||D>=65504&&D<=65510}function VG(D){return D>=4352&&D<=4447||D===8986||D===8987||D===9001||D===9002||D>=9193&&D<=9196||D===9200||D===9203||D===9725||D===9726||D===9748||D===9749||D>=9776&&D<=9783||D>=9800&&D<=9811||D===9855||D>=9866&&D<=9871||D===9875||D===9889||D===9898||D===9899||D===9917||D===9918||D===9924||D===9925||D===9934||D===9940||D===9962||D===9970||D===9971||D===9973||D===9978||D===9981||D===9989||D===9994||D===9995||D===10024||D===10060||D===10062||D>=10067&&D<=10069||D===10071||D>=10133&&D<=10135||D===10160||D===10175||D===11035||D===11036||D===11088||D===11093||D>=11904&&D<=11929||D>=11931&&D<=12019||D>=12032&&D<=12245||D>=12272&&D<=12287||D>=12289&&D<=12350||D>=12353&&D<=12438||D>=12441&&D<=12543||D>=12549&&D<=12591||D>=12593&&D<=12686||D>=12688&&D<=12773||D>=12783&&D<=12830||D>=12832&&D<=12871||D>=12880&&D<=42124||D>=42128&&D<=42182||D>=43360&&D<=43388||D>=44032&&D<=55203||D>=63744&&D<=64255||D>=65040&&D<=65049||D>=65072&&D<=65106||D>=65108&&D<=65126||D>=65128&&D<=65131||D>=94176&&D<=94180||D===94192||D===94193||D>=94208&&D<=100343||D>=100352&&D<=101589||D>=101631&&D<=101640||D>=110576&&D<=110579||D>=110581&&D<=110587||D===110589||D===110590||D>=110592&&D<=110882||D===110898||D>=110928&&D<=110930||D===110933||D>=110948&&D<=110951||D>=110960&&D<=111355||D>=119552&&D<=119638||D>=119648&&D<=119670||D===126980||D===127183||D===127374||D>=127377&&D<=127386||D>=127488&&D<=127490||D>=127504&&D<=127547||D>=127552&&D<=127560||D===127568||D===127569||D>=127584&&D<=127589||D>=127744&&D<=127776||D>=127789&&D<=127797||D>=127799&&D<=127868||D>=127870&&D<=127891||D>=127904&&D<=127946||D>=127951&&D<=127955||D>=127968&&D<=127984||D===127988||D>=127992&&D<=128062||D===128064||D>=128066&&D<=128252||D>=128255&&D<=128317||D>=128331&&D<=128334||D>=128336&&D<=128359||D===128378||D===128405||D===128406||D===128420||D>=128507&&D<=128591||D>=128640&&D<=128709||D===128716||D>=128720&&D<=128722||D>=128725&&D<=128727||D>=128732&&D<=128735||D===128747||D===128748||D>=128756&&D<=128764||D>=128992&&D<=129003||D===129008||D>=129292&&D<=129338||D>=129340&&D<=129349||D>=129351&&D<=129535||D>=129648&&D<=129660||D>=129664&&D<=129673||D>=129679&&D<=129734||D>=129742&&D<=129756||D>=129759&&D<=129769||D>=129776&&D<=129784||D>=131072&&D<=196605||D>=196608&&D<=262141}function hP(D){if(!Number.isSafeInteger(D))throw new TypeError(`Expected a code point, got \`${typeof D}\`.`)}function AG(D,{ambiguousAsWide:F=!1}={}){if(hP(D),qG(D)||VG(D)||F&&KG(D))return 2;return 1}var OG=()=>{return/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE89\uDE8F-\uDEC2\uDEC6\uDECE-\uDEDC\uDEDF-\uDEE9]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g};var SP=new Intl.Segmenter,yP=/^\p{Default_Ignorable_Code_Point}$/u;function f2(D,F={}){if(typeof D!=="string"||D.length===0)return 0;let{ambiguousIsNarrow:$=!0,countAnsiEscapeCodes:B=!1}=F;if(!B)D=H8(D);if(D.length===0)return 0;let J=0,Y={ambiguousAsWide:!$};for(let{segment:X}of SP.segment(D)){let Q=X.codePointAt(0);if(Q<=31||Q>=127&&Q<=159)continue;if(Q>=8203&&Q<=8207||Q===65279)continue;if(Q>=768&&Q<=879||Q>=6832&&Q<=6911||Q>=7616&&Q<=7679||Q>=8400&&Q<=8447||Q>=65056&&Q<=65071)continue;if(Q>=55296&&Q<=57343)continue;if(Q>=65024&&Q<=65039)continue;if(yP.test(X))continue;if(OG().test(X)){J+=2;continue}J+=AG(Q,Y)}return J}var jG=(D=0)=>(F)=>`\x1B[${F+D}m`,UG=(D=0)=>(F)=>`\x1B[${38+D};5;${F}m`,RG=(D=0)=>(F,$,B)=>`\x1B[${38+D};2;${F};${$};${B}m`,aD={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}},Ia=Object.keys(aD.modifier),xP=Object.keys(aD.color),kP=Object.keys(aD.bgColor),Ta=[...xP,...kP];function uP(){let D=new Map;for(let[F,$]of Object.entries(aD)){for(let[B,J]of Object.entries($))aD[B]={open:`\x1B[${J[0]}m`,close:`\x1B[${J[1]}m`},$[B]=aD[B],D.set(J[0],J[1]);Object.defineProperty(aD,F,{value:$,enumerable:!1})}return Object.defineProperty(aD,"codes",{value:D,enumerable:!1}),aD.color.close="\x1B[39m",aD.bgColor.close="\x1B[49m",aD.color.ansi=jG(),aD.color.ansi256=UG(),aD.color.ansi16m=RG(),aD.bgColor.ansi=jG(10),aD.bgColor.ansi256=UG(10),aD.bgColor.ansi16m=RG(10),Object.defineProperties(aD,{rgbToAnsi256:{value:(F,$,B)=>{if(F===$&&$===B){if(F<8)return 16;if(F>248)return 231;return Math.round((F-8)/247*24)+232}return 16+36*Math.round(F/255*5)+6*Math.round($/255*5)+Math.round(B/255*5)},enumerable:!1},hexToRgb:{value:(F)=>{let $=/[a-f\d]{6}|[a-f\d]{3}/i.exec(F.toString(16));if(!$)return[0,0,0];let[B]=$;if(B.length===3)B=[...B].map((Y)=>Y+Y).join("");let J=Number.parseInt(B,16);return[J>>16&255,J>>8&255,J&255]},enumerable:!1},hexToAnsi256:{value:(F)=>aD.rgbToAnsi256(...aD.hexToRgb(F)),enumerable:!1},ansi256ToAnsi:{value:(F)=>{if(F<8)return 30+F;if(F<16)return 90+(F-8);let $,B,J;if(F>=232)$=((F-232)*10+8)/255,B=$,J=$;else{F-=16;let Q=F%36;$=Math.floor(F/36)/5,B=Math.floor(Q/6)/5,J=Q%6/5}let Y=Math.max($,B,J)*2;if(Y===0)return 30;let X=30+(Math.round(J)<<2|Math.round(B)<<1|Math.round($));if(Y===2)X+=60;return X},enumerable:!1},rgbToAnsi:{value:(F,$,B)=>aD.ansi256ToAnsi(aD.rgbToAnsi256(F,$,B)),enumerable:!1},hexToAnsi:{value:(F)=>aD.ansi256ToAnsi(aD.hexToAnsi256(F)),enumerable:!1}}),aD}var vP=uP(),CG=vP;var dB=new Set(["\x1B","\x9B"]),gP=39,WX="\x07",MG="[",mP="]",_G="m",iB=`${mP}8;;`,ZG=(D)=>`${dB.values().next().value}${MG}${D}${_G}`,NG=(D)=>`${dB.values().next().value}${iB}${D}${WX}`,cP=(D)=>D.split(" ").map((F)=>f2(F)),fX=(D,F,$)=>{let B=[...F],J=!1,Y=!1,X=f2(H8(D.at(-1)));for(let[Q,w]of B.entries()){let f=f2(w);if(X+f<=$)D[D.length-1]+=w;else D.push(w),X=0;if(dB.has(w))J=!0,Y=B.slice(Q+1,Q+1+iB.length).join("")===iB;if(J){if(Y){if(w===WX)J=!1,Y=!1}else if(w===_G)J=!1;continue}if(X+=f,X===$&&Q<B.length-1)D.push(""),X=0}if(!X&&D.at(-1).length>0&&D.length>1)D[D.length-2]+=D.pop()},pP=(D)=>{let F=D.split(" "),$=F.length;while($>0){if(f2(F[$-1])>0)break;$--}if($===F.length)return D;return F.slice(0,$).join(" ")+F.slice($).join("")},iP=(D,F,$={})=>{if($.trim!==!1&&D.trim()==="")return"";let B="",J,Y,X=cP(D),Q=[""];for(let[H,K]of D.split(" ").entries()){if($.trim!==!1)Q[Q.length-1]=Q.at(-1).trimStart();let E=f2(Q.at(-1));if(H!==0){if(E>=F&&($.wordWrap===!1||$.trim===!1))Q.push(""),E=0;if(E>0||$.trim===!1)Q[Q.length-1]+=" ",E++}if($.hard&&X[H]>F){let O=F-E,q=1+Math.floor((X[H]-O-1)/F);if(Math.floor((X[H]-1)/F)<q)Q.push("");fX(Q,K,F);continue}if(E+X[H]>F&&E>0&&X[H]>0){if($.wordWrap===!1&&E<F){fX(Q,K,F);continue}Q.push("")}if(E+X[H]>F&&$.wordWrap===!1){fX(Q,K,F);continue}Q[Q.length-1]+=K}if($.trim!==!1)Q=Q.map((H)=>pP(H));let w=Q.join(`
`),f=[...w],G=0;for(let[H,K]of f.entries()){if(B+=K,dB.has(K)){let{groups:O}=new RegExp(`(?:\\${MG}(?<code>\\d+)m|\\${iB}(?<uri>.*)${WX})`).exec(w.slice(G))||{groups:{}};if(O.code!==void 0){let q=Number.parseFloat(O.code);J=q===gP?void 0:q}else if(O.uri!==void 0)Y=O.uri.length===0?void 0:O.uri}let E=CG.codes.get(Number(J));if(f[H+1]===`
`){if(Y)B+=NG("");if(J&&E)B+=ZG(E)}else if(K===`
`){if(J&&E)B+=ZG(J);if(Y)B+=NG(Y)}G+=K.length}return B};function GX(D,F,$){return String(D).normalize().replaceAll(`\r
`,`
`).split(`
`).map((B)=>iP(B,F,$)).join(`
`)}function HX(D){return EG(D,{stringWidth:f2,stripAnsi:H8,wrap:GX})}import{dirname as LG,resolve as zG}from"path";import{readdirSync as dP,statSync as lP}from"fs";function EX(D,F){let $=zG(".",D),B;if(!lP($).isDirectory())$=LG($);while(!0){if(B=F($,dP($)),B)return zG($,B);if($=LG(B=$),B===$)break}}import{inspect as Wb}from"util";import{fileURLToPath as dG}from"url";import{format as rP}from"util";import{normalize as tP,resolve as sP}from"path";function E8(D){if(!(D!==D.toLowerCase()&&D!==D.toUpperCase()))D=D.toLowerCase();if(D.indexOf("-")===-1&&D.indexOf("_")===-1)return D;else{let $="",B=!1,J=D.match(/^-+/);for(let Y=J?J[0].length:0;Y<D.length;Y++){let X=D.charAt(Y);if(B)B=!1,X=X.toUpperCase();if(Y!==0&&(X==="-"||X==="_"))B=!0;else if(X!=="-"&&X!=="_")$+=X}return $}}function lB(D,F){let $=D.toLowerCase();F=F||"-";let B="";for(let J=0;J<D.length;J++){let Y=$.charAt(J),X=D.charAt(J);if(Y!==X&&J>0)B+=`${F}${$.charAt(J)}`;else B+=X}return B}function nB(D){if(D===null||D===void 0)return!1;if(typeof D==="number")return!0;if(/^0x[0-9a-f]+$/i.test(D))return!0;if(/^0[^.]/.test(D))return!1;return/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(D)}function IG(D){if(Array.isArray(D))return D.map((X)=>typeof X!=="string"?X+"":X);D=D.trim();let F=0,$=null,B=null,J=null,Y=[];for(let X=0;X<D.length;X++){if($=B,B=D.charAt(X),B===" "&&!J){if($!==" ")F++;continue}if(B===J)J=null;else if((B==="'"||B==='"')&&!J)J=B;if(!Y[F])Y[F]="";Y[F]+=B}return Y}var mF;(function(D){D.BOOLEAN="boolean",D.STRING="string",D.NUMBER="number",D.ARRAY="array"})(mF||(mF={}));var B6;class qX{constructor(D){B6=D}parse(D,F){let $=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},F),B=IG(D),J=typeof D==="string",Y=nP(Object.assign(Object.create(null),$.alias)),X=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},$.configuration),Q=Object.assign(Object.create(null),$.default),w=$.configObjects||[],f=$.envPrefix,G=X["populate--"],H=G?"--":"_",K=Object.create(null),E=Object.create(null),O=$.__||B6.format,q={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},U=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,N=new RegExp("^--"+X["negation-prefix"]+"(.+)");if([].concat($.array||[]).filter(Boolean).forEach(function(b){let y=typeof b==="object"?b.key:b,c=Object.keys(b).map(function(g){return{boolean:"bools",string:"strings",number:"numbers"}[g]}).filter(Boolean).pop();if(c)q[c][y]=!0;q.arrays[y]=!0,q.keys.push(y)}),[].concat($.boolean||[]).filter(Boolean).forEach(function(b){q.bools[b]=!0,q.keys.push(b)}),[].concat($.string||[]).filter(Boolean).forEach(function(b){q.strings[b]=!0,q.keys.push(b)}),[].concat($.number||[]).filter(Boolean).forEach(function(b){q.numbers[b]=!0,q.keys.push(b)}),[].concat($.count||[]).filter(Boolean).forEach(function(b){q.counts[b]=!0,q.keys.push(b)}),[].concat($.normalize||[]).filter(Boolean).forEach(function(b){q.normalize[b]=!0,q.keys.push(b)}),typeof $.narg==="object")Object.entries($.narg).forEach(([b,y])=>{if(typeof y==="number")q.nargs[b]=y,q.keys.push(b)});if(typeof $.coerce==="object")Object.entries($.coerce).forEach(([b,y])=>{if(typeof y==="function")q.coercions[b]=y,q.keys.push(b)});if(typeof $.config!=="undefined"){if(Array.isArray($.config)||typeof $.config==="string")[].concat($.config).filter(Boolean).forEach(function(b){q.configs[b]=!0});else if(typeof $.config==="object")Object.entries($.config).forEach(([b,y])=>{if(typeof y==="boolean"||typeof y==="function")q.configs[b]=y})}zD($.key,Y,$.default,q.arrays),Object.keys(Q).forEach(function(b){(q.aliases[b]||[]).forEach(function(y){Q[y]=Q[b]})});let L=null;_D();let C=[],R=Object.assign(Object.create(null),{_:[]}),I={};for(let b=0;b<B.length;b++){let y=B[b],c=y.replace(/^-{3,}/,"---"),g,S,u,D0,H0,g0;if(y!=="--"&&/^-/.test(y)&&YD(y))h(y);else if(c.match(/^---+(=|$)/)){h(y);continue}else if(y.match(/^--.+=/)||!X["short-option-groups"]&&y.match(/^-.+=/)){if(D0=y.match(/^--?([^=]+)=([\s\S]*)$/),D0!==null&&Array.isArray(D0)&&D0.length>=3)if(W0(D0[1],q.arrays))b=P(b,D0[1],B,D0[2]);else if(W0(D0[1],q.nargs)!==!1)b=p(b,D0[1],B,D0[2]);else v(D0[1],D0[2],!0)}else if(y.match(N)&&X["boolean-negation"]){if(D0=y.match(N),D0!==null&&Array.isArray(D0)&&D0.length>=2)S=D0[1],v(S,W0(S,q.arrays)?[!1]:!1)}else if(y.match(/^--.+/)||!X["short-option-groups"]&&y.match(/^-[^-]+/)){if(D0=y.match(/^--?(.+)/),D0!==null&&Array.isArray(D0)&&D0.length>=2)if(S=D0[1],W0(S,q.arrays))b=P(b,S,B);else if(W0(S,q.nargs)!==!1)b=p(b,S,B);else if(H0=B[b+1],H0!==void 0&&(!H0.match(/^-/)||H0.match(U))&&!W0(S,q.bools)&&!W0(S,q.counts))v(S,H0),b++;else if(/^(true|false)$/.test(H0))v(S,H0),b++;else v(S,Y0(S))}else if(y.match(/^-.\..+=/)){if(D0=y.match(/^-([^=]+)=([\s\S]*)$/),D0!==null&&Array.isArray(D0)&&D0.length>=3)v(D0[1],D0[2])}else if(y.match(/^-.\..+/)&&!y.match(U)){if(H0=B[b+1],D0=y.match(/^-(.\..+)/),D0!==null&&Array.isArray(D0)&&D0.length>=2)if(S=D0[1],H0!==void 0&&!H0.match(/^-/)&&!W0(S,q.bools)&&!W0(S,q.counts))v(S,H0),b++;else v(S,Y0(S))}else if(y.match(/^-[^-]+/)&&!y.match(U)){u=y.slice(1,-1).split(""),g=!1;for(let z0=0;z0<u.length;z0++){if(H0=y.slice(z0+2),u[z0+1]&&u[z0+1]==="="){if(g0=y.slice(z0+3),S=u[z0],W0(S,q.arrays))b=P(b,S,B,g0);else if(W0(S,q.nargs)!==!1)b=p(b,S,B,g0);else v(S,g0);g=!0;break}if(H0==="-"){v(u[z0],H0);continue}if(/[A-Za-z]/.test(u[z0])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(H0)&&W0(H0,q.bools)===!1){v(u[z0],H0),g=!0;break}if(u[z0+1]&&u[z0+1].match(/\W/)){v(u[z0],H0),g=!0;break}else v(u[z0],Y0(u[z0]))}if(S=y.slice(-1)[0],!g&&S!=="-")if(W0(S,q.arrays))b=P(b,S,B);else if(W0(S,q.nargs)!==!1)b=p(b,S,B);else if(H0=B[b+1],H0!==void 0&&(!/^(-|--)[^-]/.test(H0)||H0.match(U))&&!W0(S,q.bools)&&!W0(S,q.counts))v(S,H0),b++;else if(/^(true|false)$/.test(H0))v(S,H0),b++;else v(S,Y0(S))}else if(y.match(/^-[0-9]$/)&&y.match(U)&&W0(y.slice(1),q.bools))S=y.slice(1),v(S,Y0(S));else if(y==="--"){C=B.slice(b+1);break}else if(X["halt-at-non-option"]){C=B.slice(b);break}else h(y)}if($0(R,!0),$0(R,!1),o(R),r(),U0(R,q.aliases,Q,!0),V0(R),X["set-placeholder-key"])s0(R);if(Object.keys(q.counts).forEach(function(b){if(!A0(R,b.split(".")))v(b,0)}),G&&C.length)R[H]=[];if(C.forEach(function(b){R[H].push(b)}),X["camel-case-expansion"]&&X["strip-dashed"])Object.keys(R).filter((b)=>b!=="--"&&b.includes("-")).forEach((b)=>{delete R[b]});if(X["strip-aliased"])[].concat(...Object.keys(Y).map((b)=>Y[b])).forEach((b)=>{if(X["camel-case-expansion"]&&b.includes("-"))delete R[b.split(".").map((y)=>E8(y)).join(".")];delete R[b]});function h(b){let y=x("_",b);if(typeof y==="string"||typeof y==="number")R._.push(y)}function p(b,y,c,g){let S,u=W0(y,q.nargs);if(u=typeof u!=="number"||isNaN(u)?1:u,u===0){if(!l(g))L=Error(O("Argument unexpected for: %s",y));return v(y,Y0(y)),b}let D0=l(g)?0:1;if(X["nargs-eats-options"]){if(c.length-(b+1)+D0<u)L=Error(O("Not enough arguments following: %s",y));D0=u}else{for(S=b+1;S<c.length;S++)if(!c[S].match(/^-[^0-9]/)||c[S].match(U)||YD(c[S]))D0++;else break;if(D0<u)L=Error(O("Not enough arguments following: %s",y))}let H0=Math.min(D0,u);if(!l(g)&&H0>0)v(y,g),H0--;for(S=b+1;S<H0+b+1;S++)v(y,c[S]);return b+H0}function P(b,y,c,g){let S=[],u=g||c[b+1],D0=W0(y,q.nargs);if(W0(y,q.bools)&&!/^(true|false)$/.test(u))S.push(!0);else if(l(u)||l(g)&&/^-/.test(u)&&!U.test(u)&&!YD(u)){if(Q[y]!==void 0){let H0=Q[y];S=Array.isArray(H0)?H0:[H0]}}else{if(!l(g))S.push(_(y,g,!0));for(let H0=b+1;H0<c.length;H0++){if(!X["greedy-arrays"]&&S.length>0||D0&&typeof D0==="number"&&S.length>=D0)break;if(u=c[H0],/^-/.test(u)&&!U.test(u)&&!YD(u))break;b=H0,S.push(_(y,u,J))}}if(typeof D0==="number"&&(D0&&S.length<D0||isNaN(D0)&&S.length===0))L=Error(O("Not enough arguments following: %s",y));return v(y,S),b}function v(b,y,c=J){if(/-/.test(b)&&X["camel-case-expansion"]){let u=b.split(".").map(function(D0){return E8(D0)}).join(".");n(b,u)}let g=_(b,y,c),S=b.split(".");if(PD(R,S,g),q.aliases[b])q.aliases[b].forEach(function(u){let D0=u.split(".");PD(R,D0,g)});if(S.length>1&&X["dot-notation"])(q.aliases[S[0]]||[]).forEach(function(u){let D0=u.split("."),H0=[].concat(S);if(H0.shift(),D0=D0.concat(H0),!(q.aliases[b]||[]).includes(D0.join(".")))PD(R,D0,g)});if(W0(b,q.normalize)&&!W0(b,q.arrays))[b].concat(q.aliases[b]||[]).forEach(function(D0){Object.defineProperty(I,D0,{enumerable:!0,get(){return y},set(H0){y=typeof H0==="string"?B6.normalize(H0):H0}})})}function n(b,y){if(!(q.aliases[b]&&q.aliases[b].length))q.aliases[b]=[y],K[y]=!0;if(!(q.aliases[y]&&q.aliases[y].length))n(y,b)}function _(b,y,c){if(c)y=oP(y);if(W0(b,q.bools)||W0(b,q.counts)){if(typeof y==="string")y=y==="true"}let g=Array.isArray(y)?y.map(function(S){return x(b,S)}):x(b,y);if(W0(b,q.counts)&&(l(g)||typeof g==="boolean"))g=KX();if(W0(b,q.normalize)&&W0(b,q.arrays))if(Array.isArray(y))g=y.map((S)=>{return B6.normalize(S)});else g=B6.normalize(y);return g}function x(b,y){if(!X["parse-positional-numbers"]&&b==="_")return y;if(!W0(b,q.strings)&&!W0(b,q.bools)&&!Array.isArray(y)){if(nB(y)&&X["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${y}`)))||!l(y)&&W0(b,q.numbers))y=Number(y)}return y}function o(b){let y=Object.create(null);U0(y,q.aliases,Q),Object.keys(q.configs).forEach(function(c){let g=b[c]||y[c];if(g)try{let S=null,u=B6.resolve(B6.cwd(),g),D0=q.configs[c];if(typeof D0==="function"){try{S=D0(u)}catch(H0){S=H0}if(S instanceof Error){L=S;return}}else S=B6.require(u);M(S)}catch(S){if(S.name==="PermissionDenied")L=S;else if(b[c])L=Error(O("Invalid JSON config file: %s",g))}})}function M(b,y){Object.keys(b).forEach(function(c){let g=b[c],S=y?y+"."+c:c;if(typeof g==="object"&&g!==null&&!Array.isArray(g)&&X["dot-notation"])M(g,S);else if(!A0(R,S.split("."))||W0(S,q.arrays)&&X["combine-arrays"])v(S,g)})}function r(){if(typeof w!=="undefined")w.forEach(function(b){M(b)})}function $0(b,y){if(typeof f==="undefined")return;let c=typeof f==="string"?f:"",g=B6.env();Object.keys(g).forEach(function(S){if(c===""||S.lastIndexOf(c,0)===0){let u=S.split("__").map(function(D0,H0){if(H0===0)D0=D0.substring(c.length);return E8(D0)});if((y&&q.configs[u.join(".")]||!y)&&!A0(b,u))v(u.join("."),g[S])}})}function V0(b){let y,c=new Set;Object.keys(b).forEach(function(g){if(!c.has(g)){if(y=W0(g,q.coercions),typeof y==="function")try{let S=x(g,y(b[g]));[].concat(q.aliases[g]||[],g).forEach((u)=>{c.add(u),b[u]=S})}catch(S){L=S}}})}function s0(b){return q.keys.forEach((y)=>{if(~y.indexOf("."))return;if(typeof b[y]==="undefined")b[y]=void 0}),b}function U0(b,y,c,g=!1){Object.keys(c).forEach(function(S){if(!A0(b,S.split("."))){if(PD(b,S.split("."),c[S]),g)E[S]=!0;(y[S]||[]).forEach(function(u){if(A0(b,u.split(".")))return;PD(b,u.split("."),c[S])})}})}function A0(b,y){let c=b;if(!X["dot-notation"])y=[y.join(".")];y.slice(0,-1).forEach(function(S){c=c[S]||{}});let g=y[y.length-1];if(typeof c!=="object")return!1;else return g in c}function PD(b,y,c){let g=b;if(!X["dot-notation"])y=[y.join(".")];y.slice(0,-1).forEach(function(g0){if(g0=TG(g0),typeof g==="object"&&g[g0]===void 0)g[g0]={};if(typeof g[g0]!=="object"||Array.isArray(g[g0])){if(Array.isArray(g[g0]))g[g0].push({});else g[g0]=[g[g0],{}];g=g[g0][g[g0].length-1]}else g=g[g0]});let S=TG(y[y.length-1]),u=W0(y.join("."),q.arrays),D0=Array.isArray(c),H0=X["duplicate-arguments-array"];if(!H0&&W0(S,q.nargs)){if(H0=!0,!l(g[S])&&q.nargs[S]===1||Array.isArray(g[S])&&g[S].length===q.nargs[S])g[S]=void 0}if(c===KX())g[S]=KX(g[S]);else if(Array.isArray(g[S]))if(H0&&u&&D0)g[S]=X["flatten-duplicate-arrays"]?g[S].concat(c):(Array.isArray(g[S][0])?g[S]:[g[S]]).concat([c]);else if(!H0&&Boolean(u)===Boolean(D0))g[S]=c;else g[S]=g[S].concat([c]);else if(g[S]===void 0&&u)g[S]=D0?c:[c];else if(H0&&!(g[S]===void 0||W0(S,q.counts)||W0(S,q.bools)))g[S]=[g[S],c];else g[S]=c}function zD(...b){b.forEach(function(y){Object.keys(y||{}).forEach(function(c){if(q.aliases[c])return;q.aliases[c]=[].concat(Y[c]||[]),q.aliases[c].concat(c).forEach(function(g){if(/-/.test(g)&&X["camel-case-expansion"]){let S=E8(g);if(S!==c&&q.aliases[c].indexOf(S)===-1)q.aliases[c].push(S),K[S]=!0}}),q.aliases[c].concat(c).forEach(function(g){if(g.length>1&&/[A-Z]/.test(g)&&X["camel-case-expansion"]){let S=lB(g,"-");if(S!==c&&q.aliases[c].indexOf(S)===-1)q.aliases[c].push(S),K[S]=!0}}),q.aliases[c].forEach(function(g){q.aliases[g]=[c].concat(q.aliases[c].filter(function(S){return g!==S}))})})})}function W0(b,y){let c=[].concat(q.aliases[b]||[],b),g=Object.keys(y),S=c.find((u)=>g.includes(u));return S?y[S]:!1}function a(b){let y=Object.keys(q);return[].concat(y.map((g)=>q[g])).some(function(g){return Array.isArray(g)?g.includes(b):g[b]})}function mD(b,...y){return[].concat(...y).some(function(g){let S=b.match(g);return S&&a(S[1])})}function G0(b){if(b.match(U)||!b.match(/^-[^-]+/))return!1;let y=!0,c,g=b.slice(1).split("");for(let S=0;S<g.length;S++){if(c=b.slice(S+2),!a(g[S])){y=!1;break}if(g[S+1]&&g[S+1]==="="||c==="-"||/[A-Za-z]/.test(g[S])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(c)||g[S+1]&&g[S+1].match(/\W/))break}return y}function YD(b){return X["unknown-options-as-args"]&&T0(b)}function T0(b){if(b=b.replace(/^-{3,}/,"--"),b.match(U))return!1;if(G0(b))return!1;return!mD(b,/^-+([^=]+?)=[\s\S]*$/,N,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function Y0(b){if(!W0(b,q.bools)&&!W0(b,q.counts)&&`${b}`in Q)return Q[b];else return WD(UD(b))}function WD(b){return{[mF.BOOLEAN]:!0,[mF.STRING]:"",[mF.NUMBER]:void 0,[mF.ARRAY]:[]}[b]}function UD(b){let y=mF.BOOLEAN;if(W0(b,q.strings))y=mF.STRING;else if(W0(b,q.numbers))y=mF.NUMBER;else if(W0(b,q.bools))y=mF.BOOLEAN;else if(W0(b,q.arrays))y=mF.ARRAY;return y}function l(b){return b===void 0}function _D(){Object.keys(q.counts).find((b)=>{if(W0(b,q.arrays))return L=Error(O("Invalid configuration: %s, opts.count excludes opts.array.",b)),!0;else if(W0(b,q.nargs))return L=Error(O("Invalid configuration: %s, opts.count excludes opts.narg.",b)),!0;return!1})}return{aliases:Object.assign({},q.aliases),argv:Object.assign(I,R),configuration:X,defaulted:Object.assign({},E),error:L,newAliases:Object.assign({},K)}}}function nP(D){let F=[],$=Object.create(null),B=!0;Object.keys(D).forEach(function(J){F.push([].concat(D[J],J))});while(B){B=!1;for(let J=0;J<F.length;J++)for(let Y=J+1;Y<F.length;Y++)if(F[J].filter(function(Q){return F[Y].indexOf(Q)!==-1}).length){F[J]=F[J].concat(F[Y]),F.splice(Y,1),B=!0;break}}return F.forEach(function(J){J=J.filter(function(X,Q,w){return w.indexOf(X)===Q});let Y=J.pop();if(Y!==void 0&&typeof Y==="string")$[Y]=J}),$}function KX(D){return D!==void 0?D+1:1}function TG(D){if(D==="__proto__")return"___proto___";return D}function oP(D){return typeof D==="string"&&(D[0]==="'"||D[0]==='"')&&D[D.length-1]===D[0]?D.substring(1,D.length-1):D}import{readFileSync as aP}from"fs";import{createRequire as PG}from"module";var VX,AX,OX,bG=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):20,hG=(AX=(VX=process===null||process===void 0?void 0:process.versions)===null||VX===void 0?void 0:VX.node)!==null&&AX!==void 0?AX:(OX=process===null||process===void 0?void 0:process.version)===null||OX===void 0?void 0:OX.slice(1);if(hG){if(Number(hG.match(/^([^.]+)/)[1])<bG)throw Error(`yargs parser supports a minimum Node.js version of ${bG}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`)}var eP=process?process.env:{},SG=PG?PG(import.meta.url):void 0,yG=new qX({cwd:process.cwd,env:()=>{return eP},format:rP,normalize:tP,resolve:sP,require:(D)=>{if(typeof SG!=="undefined")return SG(D);else if(D.match(/\.json$/))return JSON.parse(aP(D,"utf8"));else throw Error("only .json config files are supported in ESM")}}),s9=function D(F,$){return yG.parse(F.slice(),$).argv};s9.detailed=function(D,F){return yG.parse(D.slice(),F)};s9.camelCase=E8;s9.decamelize=lB;s9.looksLikeNumber=nB;var jX=s9;import{basename as Gb,dirname as Hb,extname as Eb,relative as Kb,resolve as iG,join as qb}from"path";function xG(){if(Db())return 0;return 1}function Db(){return Fb()&&!process.defaultApp}function Fb(){return!!process.versions.electron}function UX(D){return D.slice(xG()+1)}function kG(){return process.argv[xG()]}import{readFileSync as $b,statSync as Bb,writeFile as Jb}from"fs";import{format as Yb}from"util";import{resolve as Xb}from"path";var uG={fs:{readFileSync:$b,writeFile:Jb},format:Yb,resolve:Xb,exists:(D)=>{try{return Bb(D).isFile()}catch(F){return!1}}};var W2;class vG{constructor(D){D=D||{},this.directory=D.directory||"./locales",this.updateFiles=typeof D.updateFiles==="boolean"?D.updateFiles:!0,this.locale=D.locale||"en",this.fallbackToLanguage=typeof D.fallbackToLanguage==="boolean"?D.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...D){if(typeof arguments[0]!=="string")return this._taggedLiteral(arguments[0],...arguments);let F=D.shift(),$=function(){};if(typeof D[D.length-1]==="function")$=D.pop();if($=$||function(){},!this.cache[this.locale])this._readLocaleFile();if(!this.cache[this.locale][F]&&this.updateFiles)this.cache[this.locale][F]=F,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:$});else $();return W2.format.apply(W2.format,[this.cache[this.locale][F]||F].concat(D))}__n(){let D=Array.prototype.slice.call(arguments),F=D.shift(),$=D.shift(),B=D.shift(),J=function(){};if(typeof D[D.length-1]==="function")J=D.pop();if(!this.cache[this.locale])this._readLocaleFile();let Y=B===1?F:$;if(this.cache[this.locale][F])Y=this.cache[this.locale][F][B===1?"one":"other"];if(!this.cache[this.locale][F]&&this.updateFiles)this.cache[this.locale][F]={one:F,other:$},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:J});else J();let X=[Y];if(~Y.indexOf("%d"))X.push(B);return W2.format.apply(W2.format,X.concat(D))}setLocale(D){this.locale=D}getLocale(){return this.locale}updateLocale(D){if(!this.cache[this.locale])this._readLocaleFile();for(let F in D)if(Object.prototype.hasOwnProperty.call(D,F))this.cache[this.locale][F]=D[F]}_taggedLiteral(D,...F){let $="";return D.forEach(function(B,J){let Y=F[J+1];if($+=B,typeof Y!=="undefined")$+="%s"}),this.__.apply(this,[$].concat([].slice.call(F,1)))}_enqueueWrite(D){if(this.writeQueue.push(D),this.writeQueue.length===1)this._processWriteQueue()}_processWriteQueue(){let D=this,F=this.writeQueue[0],$=F.directory,B=F.locale,J=F.cb,Y=this._resolveLocaleFile($,B),X=JSON.stringify(this.cache[B],null,2);W2.fs.writeFile(Y,X,"utf-8",function(Q){if(D.writeQueue.shift(),D.writeQueue.length>0)D._processWriteQueue();J(Q)})}_readLocaleFile(){let D={},F=this._resolveLocaleFile(this.directory,this.locale);try{if(W2.fs.readFileSync)D=JSON.parse(W2.fs.readFileSync(F,"utf-8"))}catch($){if($ instanceof SyntaxError)$.message="syntax error in "+F;if($.code==="ENOENT")D={};else throw $}this.cache[this.locale]=D}_resolveLocaleFile(D,F){let $=W2.resolve(D,"./",F+".json");if(this.fallbackToLanguage&&!this._fileExistsSync($)&&~F.lastIndexOf("_")){let B=W2.resolve(D,"./",F.split("_")[0]+".json");if(this._fileExistsSync(B))$=B}return $}_fileExistsSync(D){return W2.exists(D)}}function gG(D,F){W2=F;let $=new vG(D);return{__:$.__.bind($),__n:$.__n.bind($),setLocale:$.setLocale.bind($),getLocale:$.getLocale.bind($),updateLocale:$.updateLocale.bind($),locale:$.locale}}var Qb=(D)=>{return gG(D,uG)},mG=Qb;var lG=Y2(pG(),1);import{createRequire as Vb}from"module";import{readFileSync as Ab,readdirSync as Ob}from"fs";var RX=dG(import.meta.url),jb=RX.substring(0,RX.lastIndexOf("node_modules")),Ub=Vb(import.meta.url),CX={assert:{notStrictEqual:wb,strictEqual:fb},cliui:HX,findUp:EX,getEnv:(D)=>{return process.env[D]},inspect:Wb,getProcessArgvBin:kG,mainFilename:jb||process.cwd(),Parser:jX,path:{basename:Gb,dirname:Hb,extname:Eb,relative:Kb,resolve:iG,join:qb},process:{argv:()=>process.argv,cwd:process.cwd,emitWarning:(D,F)=>process.emitWarning(D,F),execPath:()=>process.execPath,exit:(D)=>{process.exit(D)},nextTick:process.nextTick,stdColumns:typeof process.stdout.columns!=="undefined"?process.stdout.columns:null},readFileSync:Ab,readdirSync:Ob,require:Ub,getCallerFile:()=>{let D=lG.default(3);return D.match(/^file:\/\//)?dG(D):D},stringWidth:f2,y18n:mG({directory:iG(RX,"../../../locales"),updateFiles:!1})};function XF(D,F,$,B){$.assert.notStrictEqual(D,F,B)}function ZX(D,F){F.assert.strictEqual(typeof D,"string")}function N7(D){return Object.keys(D)}function oD(D){return!!D&&!!D.then&&typeof D.then==="function"}class V1 extends Error{constructor(D){super(D||"yargs error");if(this.name="YError",Error.captureStackTrace)Error.captureStackTrace(this,V1)}}function z6(D){let $=D.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),B=/\.*[\][<>]/g,J=$.shift();if(!J)throw new Error(`No command found in: ${D}`);let Y={cmd:J.replace(B,""),demanded:[],optional:[]};return $.forEach((X,Q)=>{let w=!1;if(X=X.replace(/\s/g,""),/\.+[\]>]/.test(X)&&Q===$.length-1)w=!0;if(/^\[/.test(X))Y.optional.push({cmd:X.replace(B,"").split("|"),variadic:w});else Y.demanded.push({cmd:X.replace(B,"").split("|"),variadic:w})}),Y}var Rb=["first","second","third","fourth","fifth","sixth"];function _0(D,F,$){function B(){return typeof D==="object"?[{demanded:[],optional:[]},D,F]:[z6(`cmd ${D}`),F,$]}try{let J=0,[Y,X,Q]=B(),w=[].slice.call(X);while(w.length&&w[w.length-1]===void 0)w.pop();let f=Q||w.length;if(f<Y.demanded.length)throw new V1(`Not enough arguments provided. Expected ${Y.demanded.length} but received ${w.length}.`);let G=Y.demanded.length+Y.optional.length;if(f>G)throw new V1(`Too many arguments provided. Expected max ${G} but received ${f}.`);Y.demanded.forEach((H)=>{let K=w.shift(),E=nG(K);if(H.cmd.filter((q)=>q===E||q==="*").length===0)oG(E,H.cmd,J);J+=1}),Y.optional.forEach((H)=>{if(w.length===0)return;let K=w.shift(),E=nG(K);if(H.cmd.filter((q)=>q===E||q==="*").length===0)oG(E,H.cmd,J);J+=1})}catch(J){console.warn(J.stack)}}function nG(D){if(Array.isArray(D))return"array";else if(D===null)return"null";return typeof D}function oG(D,F,$){throw new V1(`Invalid ${Rb[$]||"manyith"} argument. Expected ${F.join(" or ")} but received ${D}.`)}class NX{constructor(D){this.globalMiddleware=[],this.frozens=[],this.yargs=D}addMiddleware(D,F,$=!0,B=!1){if(_0("<array|function> [boolean] [boolean] [boolean]",[D,F,$],arguments.length),Array.isArray(D)){for(let J=0;J<D.length;J++){if(typeof D[J]!=="function")throw Error("middleware must be a function");let Y=D[J];Y.applyBeforeValidation=F,Y.global=$}Array.prototype.push.apply(this.globalMiddleware,D)}else if(typeof D==="function"){let J=D;J.applyBeforeValidation=F,J.global=$,J.mutates=B,this.globalMiddleware.push(D)}return this.yargs}addCoerceMiddleware(D,F){let $=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter((B)=>{let J=[...$[F]||[],F];if(!B.option)return!0;else return!J.includes(B.option)}),D.option=F,this.addMiddleware(D,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let D=this.frozens.pop();if(D!==void 0)this.globalMiddleware=D}reset(){this.globalMiddleware=this.globalMiddleware.filter((D)=>D.global)}}function rG(D){if(!D)return[];return D.map((F)=>{return F.applyBeforeValidation=!1,F})}function K8(D,F,$,B){return $.reduce((J,Y)=>{if(Y.applyBeforeValidation!==B)return J;if(Y.mutates){if(Y.applied)return J;Y.applied=!0}if(oD(J))return J.then((X)=>Promise.all([X,Y(X,F)])).then(([X,Q])=>Object.assign(X,Q));else{let X=Y(J,F);return oD(X)?X.then((Q)=>Object.assign(J,Q)):Object.assign(J,X)}},D)}function q8(D,F,$=(B)=>{throw B}){try{let B=Cb(D)?D():D;return oD(B)?B.then((J)=>F(J)):F(B)}catch(B){return $(B)}}function Cb(D){return typeof D==="function"}var M7=/(^\*)|(^\$0)/;class sG{constructor(D,F,$,B){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=B,this.usage=D,this.globalMiddleware=$,this.validation=F}addDirectory(D,F,$,B){B=B||{},this.requireCache.add($);let J=this.shim.path.resolve(this.shim.path.dirname($),D),Y=this.shim.readdirSync(J,{recursive:B.recurse?!0:!1});if(!Array.isArray(B.extensions))B.extensions=["js"];let X=typeof B.visit==="function"?B.visit:(Q)=>Q;for(let Q of Y){let w=Q.toString();if(B.exclude){let G=!1;if(typeof B.exclude==="function")G=B.exclude(w);else G=B.exclude.test(w);if(G)continue}if(B.include){let G=!1;if(typeof B.include==="function")G=B.include(w);else G=B.include.test(w);if(!G)continue}let f=!1;for(let G of B.extensions)if(w.endsWith(G))f=!0;if(f){let G=this.shim.path.join(J,w),H=F(G),K=Object.create(null,Object.getOwnPropertyDescriptors({...H}));if(X(K,G,w)){if(this.requireCache.has(G))continue;else this.requireCache.add(G);if(!K.command)K.command=this.shim.path.basename(G,this.shim.path.extname(G));this.addHandler(K)}}}}addHandler(D,F,$,B,J,Y){let X=[],Q=rG(J);if(B=B||(()=>{}),Array.isArray(D))if(Zb(D))[D,...X]=D;else for(let w of D)this.addHandler(w);else if(Mb(D)){let w=Array.isArray(D.command)||typeof D.command==="string"?D.command:null;if(w===null)throw new Error(`No command name given for module: ${this.shim.inspect(D)}`);if(D.aliases)w=[].concat(w).concat(D.aliases);this.addHandler(w,this.extractDesc(D),D.builder,D.handler,D.middlewares,D.deprecated);return}else if(tG($)){this.addHandler([D].concat(X),F,$.builder,$.handler,$.middlewares,$.deprecated);return}if(typeof D==="string"){let w=z6(D);X=X.map((H)=>z6(H).cmd);let f=!1,G=[w.cmd].concat(X).filter((H)=>{if(M7.test(H))return f=!0,!1;return!0});if(G.length===0&&f)G.push("$0");if(f)w.cmd=G[0],X=G.slice(1),D=D.replace(M7,w.cmd);if(X.forEach((H)=>{this.aliasMap[H]=w.cmd}),F!==!1)this.usage.command(D,F,f,X,Y);if(this.handlers[w.cmd]={original:D,description:F,handler:B,builder:$||{},middlewares:Q,deprecated:Y,demanded:w.demanded,optional:w.optional},f)this.defaultCommand=this.handlers[w.cmd]}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(D,F,$,B,J,Y){let X=this.handlers[D]||this.handlers[this.aliasMap[D]]||this.defaultCommand,Q=F.getInternalMethods().getContext(),w=Q.commands.slice(),f=!D;if(D)Q.commands.push(D),Q.fullCommands.push(X.original);let G=this.applyBuilderUpdateUsageAndParse(f,X,F,$.aliases,w,B,J,Y);return oD(G)?G.then((H)=>this.applyMiddlewareAndGetResult(f,X,H.innerArgv,Q,J,H.aliases,F)):this.applyMiddlewareAndGetResult(f,X,G.innerArgv,Q,J,G.aliases,F)}applyBuilderUpdateUsageAndParse(D,F,$,B,J,Y,X,Q){let w=F.builder,f=$;if(oB(w)){$.getInternalMethods().getUsageInstance().freeze();let G=w($.getInternalMethods().reset(B),Q);if(oD(G))return G.then((H)=>{return f=eG(H)?H:$,this.parseAndUpdateUsage(D,F,f,J,Y,X)})}else if(Nb(w))$.getInternalMethods().getUsageInstance().freeze(),f=$.getInternalMethods().reset(B),Object.keys(F.builder).forEach((G)=>{f.option(G,w[G])});return this.parseAndUpdateUsage(D,F,f,J,Y,X)}parseAndUpdateUsage(D,F,$,B,J,Y){if(D)$.getInternalMethods().getUsageInstance().unfreeze(!0);if(this.shouldUpdateUsage($))$.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(B,F),F.description);let X=$.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,J,Y);return oD(X)?X.then((Q)=>({aliases:$.parsed.aliases,innerArgv:Q})):{aliases:$.parsed.aliases,innerArgv:X}}shouldUpdateUsage(D){return!D.getInternalMethods().getUsageInstance().getUsageDisabled()&&D.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(D,F){let $=M7.test(F.original)?F.original.replace(M7,"").trim():F.original,B=D.filter((J)=>{return!M7.test(J)});return B.push($),`$0 ${B.join(" ")}`}handleValidationAndGetResult(D,F,$,B,J,Y,X,Q){if(!Y.getInternalMethods().getHasOutput()){let w=Y.getInternalMethods().runValidation(J,Q,Y.parsed.error,D);$=q8($,(f)=>{return w(f),f})}if(F.handler&&!Y.getInternalMethods().getHasOutput()){Y.getInternalMethods().setHasOutput();let w=!!Y.getOptions().configuration["populate--"];if(Y.getInternalMethods().postProcess($,w,!1,!1),$=K8($,Y,X,!1),$=q8($,(f)=>{let G=F.handler(f);return oD(G)?G.then(()=>f):f}),!D)Y.getInternalMethods().getUsageInstance().cacheHelpMessage();if(oD($)&&!Y.getInternalMethods().hasParseCallback())$.catch((f)=>{try{Y.getInternalMethods().getUsageInstance().fail(null,f)}catch(G){}})}if(!D)B.commands.pop(),B.fullCommands.pop();return $}applyMiddlewareAndGetResult(D,F,$,B,J,Y,X){let Q={};if(J)return $;if(!X.getInternalMethods().getHasOutput())Q=this.populatePositionals(F,$,B,X);let w=this.globalMiddleware.getMiddleware().slice(0).concat(F.middlewares),f=K8($,X,w,!0);return oD(f)?f.then((G)=>this.handleValidationAndGetResult(D,F,G,B,Y,X,w,Q)):this.handleValidationAndGetResult(D,F,f,B,Y,X,w,Q)}populatePositionals(D,F,$,B){F._=F._.slice($.commands.length);let J=D.demanded.slice(0),Y=D.optional.slice(0),X={};this.validation.positionalCount(J.length,F._.length);while(J.length){let Q=J.shift();this.populatePositional(Q,F,X)}while(Y.length){let Q=Y.shift();this.populatePositional(Q,F,X)}return F._=$.commands.concat(F._.map((Q)=>""+Q)),this.postProcessPositionals(F,X,this.cmdToParseOptions(D.original),B),X}populatePositional(D,F,$){let B=D.cmd[0];if(D.variadic)$[B]=F._.splice(0).map(String);else if(F._.length)$[B]=[String(F._.shift())]}cmdToParseOptions(D){let F={array:[],default:{},alias:{},demand:{}},$=z6(D);return $.demanded.forEach((B)=>{let[J,...Y]=B.cmd;if(B.variadic)F.array.push(J),F.default[J]=[];F.alias[J]=Y,F.demand[J]=!0}),$.optional.forEach((B)=>{let[J,...Y]=B.cmd;if(B.variadic)F.array.push(J),F.default[J]=[];F.alias[J]=Y}),F}postProcessPositionals(D,F,$,B){let J=Object.assign({},B.getOptions());J.default=Object.assign($.default,J.default);for(let w of Object.keys($.alias))J.alias[w]=(J.alias[w]||[]).concat($.alias[w]);J.array=J.array.concat($.array),J.config={};let Y=[];if(Object.keys(F).forEach((w)=>{F[w].map((f)=>{if(J.configuration["unknown-options-as-args"])J.key[w]=!0;Y.push(`--${w}`),Y.push(f)})}),!Y.length)return;let X=Object.assign({},J.configuration,{"populate--":!1}),Q=this.shim.Parser.detailed(Y,Object.assign({},J,{configuration:X}));if(Q.error)B.getInternalMethods().getUsageInstance().fail(Q.error.message,Q.error);else{let w=Object.keys(F);Object.keys(F).forEach((f)=>{w.push(...Q.aliases[f])}),Object.keys(Q.argv).forEach((f)=>{if(w.includes(f)){if(!F[f])F[f]=Q.argv[f];if(!this.isInConfigs(B,f)&&!this.isDefaulted(B,f)&&Object.prototype.hasOwnProperty.call(D,f)&&Object.prototype.hasOwnProperty.call(Q.argv,f)&&(Array.isArray(D[f])||Array.isArray(Q.argv[f])))D[f]=[].concat(D[f],Q.argv[f]);else D[f]=Q.argv[f]}})}}isDefaulted(D,F){let{default:$}=D.getOptions();return Object.prototype.hasOwnProperty.call($,F)||Object.prototype.hasOwnProperty.call($,this.shim.Parser.camelCase(F))}isInConfigs(D,F){let{configObjects:$}=D.getOptions();return $.some((B)=>Object.prototype.hasOwnProperty.call(B,F))||$.some((B)=>Object.prototype.hasOwnProperty.call(B,this.shim.Parser.camelCase(F)))}runDefaultBuilderOn(D){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(D)){let $=M7.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");D.getInternalMethods().getUsageInstance().usage($,this.defaultCommand.description)}let F=this.defaultCommand.builder;if(oB(F))return F(D,!0);else if(!tG(F))Object.keys(F).forEach(($)=>{D.option($,F[$])});return}extractDesc({describe:D,description:F,desc:$}){for(let B of[D,F,$]){if(typeof B==="string"||B===!1)return B;XF(B,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let D=this.frozens.pop();XF(D,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=D}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}}function aG(D,F,$,B){return new sG(D,F,$,B)}function tG(D){return typeof D==="object"&&!!D.builder&&typeof D.handler==="function"}function Zb(D){return D.every((F)=>typeof F==="string")}function oB(D){return typeof D==="function"}function Nb(D){return typeof D==="object"}function Mb(D){return typeof D==="object"&&!Array.isArray(D)}function I6(D={},F=()=>!0){let $={};return N7(D).forEach((B)=>{if(F(B,D[B]))$[B]=D[B]}),$}function T6(D){if(typeof process==="undefined")return;[process.stdout,process.stderr].forEach((F)=>{let $=F;if($._handle&&$.isTTY&&typeof $._handle.setBlocking==="function")$._handle.setBlocking(D)})}function _b(D){return typeof D==="boolean"}function FH(D,F){let $=F.y18n.__,B={},J=[];B.failFn=function _(x){J.push(x)};let Y=null,X=null,Q=!0;B.showHelpOnFail=function _(x=!0,o){let[M,r]=typeof x==="string"?[!0,x]:[x,o];if(D.getInternalMethods().isGlobalContext())X=r;return Y=r,Q=M,B};let w=!1;B.fail=function _(x,o){let M=D.getInternalMethods().getLoggerInstance();if(J.length)for(let r=J.length-1;r>=0;--r){let $0=J[r];if(_b($0)){if(o)throw o;else if(x)throw Error(x)}else $0(x,o,B)}else{if(D.getExitProcess())T6(!0);if(!w){if(w=!0,Q)D.showHelp("error"),M.error();if(x||o)M.error(x||o);let r=Y||X;if(r){if(x||o)M.error("");M.error(r)}}if(o=o||new V1(x),D.getExitProcess())return D.exit(1);else if(D.getInternalMethods().hasParseCallback())return D.exit(1,o);else throw o}};let f=[],G=!1;B.usage=(_,x)=>{if(_===null)return G=!0,f=[],B;return G=!1,f.push([_,x||""]),B},B.getUsage=()=>{return f},B.getUsageDisabled=()=>{return G},B.getPositionalGroupName=()=>{return $("Positionals:")};let H=[];B.example=(_,x)=>{H.push([_,x||""])};let K=[];B.command=function _(x,o,M,r,$0=!1){if(M)K=K.map((V0)=>{return V0[2]=!1,V0});K.push([x,o||"",M,r,$0])},B.getCommands=()=>K;let E={};B.describe=function _(x,o){if(Array.isArray(x))x.forEach((M)=>{B.describe(M,o)});else if(typeof x==="object")Object.keys(x).forEach((M)=>{B.describe(M,x[M])});else E[x]=o},B.getDescriptions=()=>E;let O=[];B.epilog=(_)=>{O.push(_)};let q=!1,U;B.wrap=(_)=>{q=!0,U=_},B.getWrap=()=>{if(F.getEnv("YARGS_DISABLE_WRAP"))return null;if(!q)U=P(),q=!0;return U};let N="__yargsString__:";B.deferY18nLookup=(_)=>N+_,B.help=function _(){if(R)return R;C();let x=D.customScriptName?D.$0:F.path.basename(D.$0),o=D.getDemandedOptions(),M=D.getDemandedCommands(),r=D.getDeprecatedOptions(),$0=D.getGroups(),V0=D.getOptions(),s0=[];s0=s0.concat(Object.keys(E)),s0=s0.concat(Object.keys(o)),s0=s0.concat(Object.keys(M)),s0=s0.concat(Object.keys(V0.default)),s0=s0.filter(h),s0=Object.keys(s0.reduce((G0,YD)=>{if(YD!=="_")G0[YD]=!0;return G0},{}));let U0=B.getWrap(),A0=F.cliui({width:U0,wrap:!!U0});if(!G){if(f.length)f.forEach((G0)=>{if(A0.div({text:`${G0[0].replace(/\$0/g,x)}`}),G0[1])A0.div({text:`${G0[1]}`,padding:[1,0,0,0]})}),A0.div();else if(K.length){let G0=null;if(M._)G0=`${x} <${$("command")}>
`;else G0=`${x} [${$("command")}]
`;A0.div(`${G0}`)}}if(K.length>1||K.length===1&&!K[0][2]){A0.div($("Commands:"));let G0=D.getInternalMethods().getContext(),YD=G0.commands.length?`${G0.commands.join(" ")} `:"";if(D.getInternalMethods().getParserConfiguration()["sort-commands"]===!0)K=K.sort((Y0,WD)=>Y0[0].localeCompare(WD[0]));let T0=x?`${x} `:"";K.forEach((Y0)=>{let WD=`${T0}${YD}${Y0[0].replace(/^\$0 ?/,"")}`;A0.span({text:WD,padding:[0,2,0,2],width:L(K,U0,`${x}${YD}`)+4},{text:Y0[1]});let UD=[];if(Y0[2])UD.push(`[${$("default")}]`);if(Y0[3]&&Y0[3].length)UD.push(`[${$("aliases:")} ${Y0[3].join(", ")}]`);if(Y0[4])if(typeof Y0[4]==="string")UD.push(`[${$("deprecated: %s",Y0[4])}]`);else UD.push(`[${$("deprecated")}]`);if(UD.length)A0.div({text:UD.join(" "),padding:[0,0,0,2],align:"right"});else A0.div()}),A0.div()}let PD=(Object.keys(V0.alias)||[]).concat(Object.keys(D.parsed.newAliases)||[]);s0=s0.filter((G0)=>!D.parsed.newAliases[G0]&&PD.every((YD)=>(V0.alias[YD]||[]).indexOf(G0)===-1));let zD=$("Options:");if(!$0[zD])$0[zD]=[];I(s0,V0.alias,$0,zD);let W0=(G0)=>/^--/.test(rB(G0)),a=Object.keys($0).filter((G0)=>$0[G0].length>0).map((G0)=>{let YD=$0[G0].filter(h).map((T0)=>{if(PD.includes(T0))return T0;for(let Y0=0,WD;(WD=PD[Y0])!==void 0;Y0++)if((V0.alias[WD]||[]).includes(T0))return WD;return T0});return{groupName:G0,normalizedKeys:YD}}).filter(({normalizedKeys:G0})=>G0.length>0).map(({groupName:G0,normalizedKeys:YD})=>{let T0=YD.reduce((Y0,WD)=>{return Y0[WD]=[WD].concat(V0.alias[WD]||[]).map((UD)=>{if(G0===B.getPositionalGroupName())return UD;else return(/^[0-9]$/.test(UD)?V0.boolean.includes(WD)?"-":"--":UD.length>1?"--":"-")+UD}).sort((UD,l)=>W0(UD)===W0(l)?0:W0(UD)?1:-1).join(", "),Y0},{});return{groupName:G0,normalizedKeys:YD,switches:T0}});if(a.filter(({groupName:G0})=>G0!==B.getPositionalGroupName()).some(({normalizedKeys:G0,switches:YD})=>!G0.every((T0)=>W0(YD[T0]))))a.filter(({groupName:G0})=>G0!==B.getPositionalGroupName()).forEach(({normalizedKeys:G0,switches:YD})=>{G0.forEach((T0)=>{if(W0(YD[T0]))YD[T0]=Lb(YD[T0],4)})});if(a.forEach(({groupName:G0,normalizedKeys:YD,switches:T0})=>{A0.div(G0),YD.forEach((Y0)=>{let WD=T0[Y0],UD=E[Y0]||"",l=null;if(UD.includes(N))UD=$(UD.substring(N.length));if(V0.boolean.includes(Y0))l=`[${$("boolean")}]`;if(V0.count.includes(Y0))l=`[${$("count")}]`;if(V0.string.includes(Y0))l=`[${$("string")}]`;if(V0.normalize.includes(Y0))l=`[${$("string")}]`;if(V0.array.includes(Y0))l=`[${$("array")}]`;if(V0.number.includes(Y0))l=`[${$("number")}]`;let _D=(c)=>typeof c==="string"?`[${$("deprecated: %s",c)}]`:`[${$("deprecated")}]`,b=[Y0 in r?_D(r[Y0]):null,l,Y0 in o?`[${$("required")}]`:null,V0.choices&&V0.choices[Y0]?`[${$("choices:")} ${B.stringifiedValues(V0.choices[Y0])}]`:null,p(V0.default[Y0],V0.defaultDescription[Y0])].filter(Boolean).join(" ");A0.span({text:rB(WD),padding:[0,2,0,2+DH(WD)],width:L(T0,U0)+4},UD);let y=D.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;if(b&&!y)A0.div({text:b,padding:[0,0,0,2],align:"right"});else A0.div()}),A0.div()}),H.length)A0.div($("Examples:")),H.forEach((G0)=>{G0[0]=G0[0].replace(/\$0/g,x)}),H.forEach((G0)=>{if(G0[1]==="")A0.div({text:G0[0],padding:[0,2,0,2]});else A0.div({text:G0[0],padding:[0,2,0,2],width:L(H,U0)+4},{text:G0[1]})}),A0.div();if(O.length>0){let G0=O.map((YD)=>YD.replace(/\$0/g,x)).join(`
`);A0.div(`${G0}
`)}return A0.toString().replace(/\s*$/,"")};function L(_,x,o){let M=0;if(!Array.isArray(_))_=Object.values(_).map((r)=>[r]);if(_.forEach((r)=>{M=Math.max(F.stringWidth(o?`${o} ${rB(r[0])}`:rB(r[0]))+DH(r[0]),M)}),x)M=Math.min(M,parseInt((x*0.5).toString(),10));return M}function C(){let _=D.getDemandedOptions(),x=D.getOptions();(Object.keys(x.alias)||[]).forEach((o)=>{x.alias[o].forEach((M)=>{if(E[M])B.describe(o,E[M]);if(M in _)D.demandOption(o,_[M]);if(x.boolean.includes(M))D.boolean(o);if(x.count.includes(M))D.count(o);if(x.string.includes(M))D.string(o);if(x.normalize.includes(M))D.normalize(o);if(x.array.includes(M))D.array(o);if(x.number.includes(M))D.number(o)})})}let R;B.cacheHelpMessage=function(){R=this.help()},B.clearCachedHelpMessage=function(){R=void 0},B.hasCachedHelpMessage=function(){return!!R};function I(_,x,o,M){let r=[],$0=null;return Object.keys(o).forEach((V0)=>{r=r.concat(o[V0])}),_.forEach((V0)=>{if($0=[V0].concat(x[V0]),!$0.some((s0)=>r.indexOf(s0)!==-1))o[M].push(V0)}),r}function h(_){return D.getOptions().hiddenOptions.indexOf(_)<0||D.parsed.argv[D.getOptions().showHiddenOpt]}B.showHelp=(_)=>{let x=D.getInternalMethods().getLoggerInstance();if(!_)_="error";(typeof _==="function"?_:x[_])(B.help())},B.functionDescription=(_)=>{return["(",_.name?F.Parser.decamelize(_.name,"-"):$("generated-value"),")"].join("")},B.stringifiedValues=function _(x,o){let M="",r=o||", ",$0=[].concat(x);if(!x||!$0.length)return M;return $0.forEach((V0)=>{if(M.length)M+=r;M+=JSON.stringify(V0)}),M};function p(_,x){let o=`[${$("default:")} `;if(_===void 0&&!x)return null;if(x)o+=x;else switch(typeof _){case"string":o+=`"${_}"`;break;case"object":o+=JSON.stringify(_);break;default:o+=_}return`${o}]`}function P(){if(F.process.stdColumns)return Math.min(80,F.process.stdColumns);else return 80}let v=null;B.version=(_)=>{v=_},B.showVersion=(_)=>{let x=D.getInternalMethods().getLoggerInstance();if(!_)_="error";(typeof _==="function"?_:x[_])(v)},B.reset=function _(x){return Y=null,w=!1,f=[],G=!1,O=[],H=[],K=[],E=I6(E,(o)=>!x[o]),B};let n=[];return B.freeze=function _(){n.push({failMessage:Y,failureOutput:w,usages:f,usageDisabled:G,epilogs:O,examples:H,commands:K,descriptions:E})},B.unfreeze=function _(x=!1){let o=n.pop();if(!o)return;if(x)E={...o.descriptions,...E},K=[...o.commands,...K],f=[...o.usages,...f],H=[...o.examples,...H],O=[...o.epilogs,...O];else({failMessage:Y,failureOutput:w,usages:f,usageDisabled:G,epilogs:O,examples:H,commands:K,descriptions:E}=o)},B}function MX(D){return typeof D==="object"}function Lb(D,F){return MX(D)?{text:D.text,indentation:D.indentation+F}:{text:D,indentation:F}}function DH(D){return MX(D)?D.indentation:0}function rB(D){return MX(D)?D.text:D}var $H=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    # see https://stackoverflow.com/a/40944195/7080036 for the spaces-handling awk
    mapfile -t type_list < <({{app_path}} --get-yargs-completions "\${args[@]}")
    mapfile -t COMPREPLY < <(compgen -W "$( printf '%q ' "\${type_list[@]}" )" -- "\${cur_word}" |
        awk '/ / { print "\\""$0"\\"" } /^[^ ]+$/ { print $0 }')

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,BH=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  if [[ \${#reply} -gt 0 ]]; then
    _describe 'values' reply
  else
    _default
  fi
}
if [[ "'\${zsh_eval_context[-1]}" == "loadautofunc" ]]; then
  _{{app_name}}_yargs_completions "$@"
else
  compdef _{{app_name}}_yargs_completions {{app_name}}
fi
###-end-{{app_name}}-completions-###
`;class JH{constructor(D,F,$,B){var J,Y,X;this.yargs=D,this.usage=F,this.command=$,this.shim=B,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(X=((J=this.shim.getEnv("SHELL"))===null||J===void 0?void 0:J.includes("zsh"))||((Y=this.shim.getEnv("ZSH_NAME"))===null||Y===void 0?void 0:Y.includes("zsh")))!==null&&X!==void 0?X:!1}defaultCompletion(D,F,$,B){let J=this.command.getCommandHandlers();for(let X=0,Q=D.length;X<Q;++X)if(J[D[X]]&&J[D[X]].builder){let w=J[D[X]].builder;if(oB(w)){this.indexAfterLastReset=X+1;let f=this.yargs.getInternalMethods().reset();return w(f,!0),f.argv}}let Y=[];this.commandCompletions(Y,D,$),this.optionCompletions(Y,D,F,$),this.choicesFromOptionsCompletions(Y,D,F,$),this.choicesFromPositionalsCompletions(Y,D,F,$),B(null,Y)}commandCompletions(D,F,$){let B=this.yargs.getInternalMethods().getContext().commands;if(!$.match(/^-/)&&B[B.length-1]!==$&&!this.previousArgHasChoices(F))this.usage.getCommands().forEach((J)=>{let Y=z6(J[0]).cmd;if(F.indexOf(Y)===-1)if(!this.zshShell)D.push(Y);else{let X=J[1]||"";D.push(Y.replace(/:/g,"\\:")+":"+X)}})}optionCompletions(D,F,$,B){if((B.match(/^-/)||B===""&&D.length===0)&&!this.previousArgHasChoices(F)){let J=this.yargs.getOptions(),Y=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(J.key).forEach((X)=>{let Q=!!J.configuration["boolean-negation"]&&J.boolean.includes(X);if(!Y.includes(X)&&!J.hiddenOptions.includes(X)&&!this.argsContainKey(F,X,Q))this.completeOptionKey(X,D,B,Q&&!!J.default[X])})}}choicesFromOptionsCompletions(D,F,$,B){if(this.previousArgHasChoices(F)){let J=this.getPreviousArgChoices(F);if(J&&J.length>0)D.push(...J.map((Y)=>Y.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(D,F,$,B){if(B===""&&D.length>0&&this.previousArgHasChoices(F))return;let J=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],Y=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),X=J[$._.length-Y-1];if(!X)return;let Q=this.yargs.getOptions().choices[X]||[];for(let w of Q)if(w.startsWith(B))D.push(w.replace(/:/g,"\\:"))}getPreviousArgChoices(D){if(D.length<1)return;let F=D[D.length-1],$="";if(!F.startsWith("-")&&D.length>1)$=F,F=D[D.length-2];if(!F.startsWith("-"))return;let B=F.replace(/^-+/,""),J=this.yargs.getOptions(),Y=[B,...this.yargs.getAliases()[B]||[]],X;for(let Q of Y)if(Object.prototype.hasOwnProperty.call(J.key,Q)&&Array.isArray(J.choices[Q])){X=J.choices[Q];break}if(X)return X.filter((Q)=>!$||Q.startsWith($))}previousArgHasChoices(D){let F=this.getPreviousArgChoices(D);return F!==void 0&&F.length>0}argsContainKey(D,F,$){let B=(J)=>D.indexOf((/^[^0-9]$/.test(J)?"-":"--")+J)!==-1;if(B(F))return!0;if($&&B(`no-${F}`))return!0;if(this.aliases){for(let J of this.aliases[F])if(B(J))return!0}return!1}completeOptionKey(D,F,$,B){var J,Y,X,Q;let w=D;if(this.zshShell){let K=this.usage.getDescriptions(),E=(Y=(J=this===null||this===void 0?void 0:this.aliases)===null||J===void 0?void 0:J[D])===null||Y===void 0?void 0:Y.find((U)=>{let N=K[U];return typeof N==="string"&&N.length>0}),O=E?K[E]:void 0,q=(Q=(X=K[D])!==null&&X!==void 0?X:O)!==null&&Q!==void 0?Q:"";w=`${D.replace(/:/g,"\\:")}:${q.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let f=(K)=>/^--/.test(K),G=(K)=>/^[^0-9]$/.test(K),H=!f($)&&G(D)?"-":"--";if(F.push(H+w),B)F.push(H+"no-"+w)}customCompletion(D,F,$,B){if(XF(this.customCompletionFunction,null,this.shim),Ib(this.customCompletionFunction)){let J=this.customCompletionFunction($,F);if(oD(J))return J.then((Y)=>{this.shim.process.nextTick(()=>{B(null,Y)})}).catch((Y)=>{this.shim.process.nextTick(()=>{B(Y,void 0)})});return B(null,J)}else if(Tb(this.customCompletionFunction))return this.customCompletionFunction($,F,(J=B)=>this.defaultCompletion(D,F,$,J),(J)=>{B(null,J)});else return this.customCompletionFunction($,F,(J)=>{B(null,J)})}getCompletion(D,F){let $=D.length?D[D.length-1]:"",B=this.yargs.parse(D,!0),J=this.customCompletionFunction?(Y)=>this.customCompletion(D,Y,$,F):(Y)=>this.defaultCompletion(D,Y,$,F);return oD(B)?B.then(J):J(B)}generateCompletionScript(D,F){let $=this.zshShell?BH:$H,B=this.shim.path.basename(D);if(D.match(/\.js$/))D=`./${D}`;return $=$.replace(/{{app_name}}/g,B),$=$.replace(/{{completion_command}}/g,F),$.replace(/{{app_path}}/g,D)}registerFunction(D){this.customCompletionFunction=D}setParsed(D){this.aliases=D.aliases}}function YH(D,F,$,B){return new JH(D,F,$,B)}function Ib(D){return D.length<3}function Tb(D){return D.length>3}function XH(D,F){if(D.length===0)return F.length;if(F.length===0)return D.length;let $=[],B;for(B=0;B<=F.length;B++)$[B]=[B];let J;for(J=0;J<=D.length;J++)$[0][J]=J;for(B=1;B<=F.length;B++)for(J=1;J<=D.length;J++)if(F.charAt(B-1)===D.charAt(J-1))$[B][J]=$[B-1][J-1];else if(B>1&&J>1&&F.charAt(B-2)===D.charAt(J-1)&&F.charAt(B-1)===D.charAt(J-2))$[B][J]=$[B-2][J-2]+1;else $[B][J]=Math.min($[B-1][J-1]+1,Math.min($[B][J-1]+1,$[B-1][J]+1));return $[F.length][D.length]}var QH=["$0","--","_"];function wH(D,F,$){let B=$.y18n.__,J=$.y18n.__n,Y={};Y.nonOptionCount=function G(H){let K=D.getDemandedCommands(),O=H._.length+(H["--"]?H["--"].length:0)-D.getInternalMethods().getContext().commands.length;if(K._&&(O<K._.min||O>K._.max)){if(O<K._.min)if(K._.minMsg!==void 0)F.fail(K._.minMsg?K._.minMsg.replace(/\$0/g,O.toString()).replace(/\$1/,K._.min.toString()):null);else F.fail(J("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",O,O.toString(),K._.min.toString()));else if(O>K._.max)if(K._.maxMsg!==void 0)F.fail(K._.maxMsg?K._.maxMsg.replace(/\$0/g,O.toString()).replace(/\$1/,K._.max.toString()):null);else F.fail(J("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",O,O.toString(),K._.max.toString()))}},Y.positionalCount=function G(H,K){if(K<H)F.fail(J("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",K,K+"",H+""))},Y.requiredArguments=function G(H,K){let E=null;for(let O of Object.keys(K))if(!Object.prototype.hasOwnProperty.call(H,O)||typeof H[O]==="undefined")E=E||{},E[O]=K[O];if(E){let O=[];for(let U of Object.keys(E)){let N=E[U];if(N&&O.indexOf(N)<0)O.push(N)}let q=O.length?`
${O.join(`
`)}`:"";F.fail(J("Missing required argument: %s","Missing required arguments: %s",Object.keys(E).length,Object.keys(E).join(", ")+q))}},Y.unknownArguments=function G(H,K,E,O,q=!0){var U;let N=D.getInternalMethods().getCommandInstance().getCommands(),L=[],C=D.getInternalMethods().getContext();if(Object.keys(H).forEach((R)=>{if(!QH.includes(R)&&!Object.prototype.hasOwnProperty.call(E,R)&&!Object.prototype.hasOwnProperty.call(D.getInternalMethods().getParseContext(),R)&&!Y.isValidAndSomeAliasIsNotNew(R,K))L.push(R)}),q&&(C.commands.length>0||N.length>0||O))H._.slice(C.commands.length).forEach((R)=>{if(!N.includes(""+R))L.push(""+R)});if(q){let I=((U=D.getDemandedCommands()._)===null||U===void 0?void 0:U.max)||0,h=C.commands.length+I;if(h<H._.length)H._.slice(h).forEach((p)=>{if(p=String(p),!C.commands.includes(p)&&!L.includes(p))L.push(p)})}if(L.length)F.fail(J("Unknown argument: %s","Unknown arguments: %s",L.length,L.map((R)=>R.trim()?R:`"${R}"`).join(", ")))},Y.unknownCommands=function G(H){let K=D.getInternalMethods().getCommandInstance().getCommands(),E=[],O=D.getInternalMethods().getContext();if(O.commands.length>0||K.length>0)H._.slice(O.commands.length).forEach((q)=>{if(!K.includes(""+q))E.push(""+q)});if(E.length>0)return F.fail(J("Unknown command: %s","Unknown commands: %s",E.length,E.join(", "))),!0;else return!1},Y.isValidAndSomeAliasIsNotNew=function G(H,K){if(!Object.prototype.hasOwnProperty.call(K,H))return!1;let E=D.parsed.newAliases;return[H,...K[H]].some((O)=>!Object.prototype.hasOwnProperty.call(E,O)||!E[H])},Y.limitedChoices=function G(H){let K=D.getOptions(),E={};if(!Object.keys(K.choices).length)return;Object.keys(H).forEach((U)=>{if(QH.indexOf(U)===-1&&Object.prototype.hasOwnProperty.call(K.choices,U))[].concat(H[U]).forEach((N)=>{if(K.choices[U].indexOf(N)===-1&&N!==void 0)E[U]=(E[U]||[]).concat(N)})});let O=Object.keys(E);if(!O.length)return;let q=B("Invalid values:");O.forEach((U)=>{q+=`
  ${B("Argument: %s, Given: %s, Choices: %s",U,F.stringifiedValues(E[U]),F.stringifiedValues(K.choices[U]))}`}),F.fail(q)};let X={};Y.implies=function G(H,K){if(_0("<string|object> [array|number|string]",[H,K],arguments.length),typeof H==="object")Object.keys(H).forEach((E)=>{Y.implies(E,H[E])});else{if(D.global(H),!X[H])X[H]=[];if(Array.isArray(K))K.forEach((E)=>Y.implies(H,E));else XF(K,void 0,$),X[H].push(K)}},Y.getImplied=function G(){return X};function Q(G,H){let K=Number(H);if(H=isNaN(K)?H:K,typeof H==="number")H=G._.length>=H;else if(H.match(/^--no-.+/))H=H.match(/^--no-(.+)/)[1],H=!Object.prototype.hasOwnProperty.call(G,H);else H=Object.prototype.hasOwnProperty.call(G,H);return H}Y.implications=function G(H){let K=[];if(Object.keys(X).forEach((E)=>{let O=E;(X[E]||[]).forEach((q)=>{let U=O,N=q;if(U=Q(H,U),q=Q(H,q),U&&!q)K.push(` ${O} -> ${N}`)})}),K.length){let E=`${B("Implications failed:")}
`;K.forEach((O)=>{E+=O}),F.fail(E)}};let w={};Y.conflicts=function G(H,K){if(_0("<string|object> [array|string]",[H,K],arguments.length),typeof H==="object")Object.keys(H).forEach((E)=>{Y.conflicts(E,H[E])});else{if(D.global(H),!w[H])w[H]=[];if(Array.isArray(K))K.forEach((E)=>Y.conflicts(H,E));else w[H].push(K)}},Y.getConflicting=()=>w,Y.conflicting=function G(H){if(Object.keys(H).forEach((K)=>{if(w[K])w[K].forEach((E)=>{if(E&&H[K]!==void 0&&H[E]!==void 0)F.fail(B("Arguments %s and %s are mutually exclusive",K,E))})}),D.getInternalMethods().getParserConfiguration()["strip-dashed"])Object.keys(w).forEach((K)=>{w[K].forEach((E)=>{if(E&&H[$.Parser.camelCase(K)]!==void 0&&H[$.Parser.camelCase(E)]!==void 0)F.fail(B("Arguments %s and %s are mutually exclusive",K,E))})})},Y.recommendCommands=function G(H,K){K=K.sort((U,N)=>N.length-U.length);let O=null,q=1/0;for(let U=0,N;(N=K[U])!==void 0;U++){let L=XH(H,N);if(L<=3&&L<q)q=L,O=N}if(O)F.fail(B("Did you mean %s?",O))},Y.reset=function G(H){return X=I6(X,(K)=>!H[K]),w=I6(w,(K)=>!H[K]),Y};let f=[];return Y.freeze=function G(){f.push({implied:X,conflicting:w})},Y.unfreeze=function G(){let H=f.pop();XF(H,void 0,$),{implied:X,conflicting:w}=H},Y}var _X=[],a9;function e9(D,F,$,B){a9=B;let J={};if(Object.prototype.hasOwnProperty.call(D,"extends")){if(typeof D.extends!=="string")return J;let Y=/\.json|\..*rc$/.test(D.extends),X=null;if(!Y)try{X=import.meta.resolve(D.extends)}catch(Q){return D}else X=bb(F,D.extends);Pb(X),_X.push(X),J=Y?JSON.parse(a9.readFileSync(X,"utf8")):B.require(D.extends),delete D.extends,J=e9(J,a9.path.dirname(X),$,a9)}return _X=[],$?fH(J,D):Object.assign({},J,D)}function Pb(D){if(_X.indexOf(D)>-1)throw new V1(`Circular extended configurations: '${D}'.`)}function bb(D,F){return a9.path.resolve(D,F)}function fH(D,F){let $={};function B(J){return J&&typeof J==="object"&&!Array.isArray(J)}Object.assign($,D);for(let J of Object.keys(F))if(B(F[J])&&B($[J]))$[J]=fH(D[J],F[J]);else $[J]=F[J];return $}var L0=function(D,F,$,B,J){if(B==="m")throw new TypeError("Private method is not writable");if(B==="a"&&!J)throw new TypeError("Private accessor was defined without a setter");if(typeof F==="function"?D!==F||!J:!F.has(D))throw new TypeError("Cannot write private member to an object whose class did not declare it");return B==="a"?J.call(D,$):J?J.value=$:F.set(D,$),$},Z=function(D,F,$,B){if($==="a"&&!B)throw new TypeError("Private accessor was defined without a getter");if(typeof F==="function"?D!==F||!B:!F.has(D))throw new TypeError("Cannot read private member from an object whose class did not declare it");return $==="m"?B:$==="a"?B.call(D):B?B.value:F.get(D)},A1,V8,D$,EF,MF,tB,P6,A8,sB,cF,aB,pF,I2,_F,iF,eB,O8,h1,S0,D5,F5,LF,j8,_7,U8,b6,$5,n0,R8,C8,Z8,$D,B5,T2,f1;function IH(D){return(F=[],$=D.process.cwd(),B)=>{let J=new TH(F,$,B,D);return Object.defineProperty(J,"argv",{get:()=>{return J.parse()},enumerable:!0}),J.help(),J.version(),J}}var WH=Symbol("copyDoubleDash"),GH=Symbol("copyDoubleDash"),LX=Symbol("deleteFromParserHintObject"),HH=Symbol("emitWarning"),EH=Symbol("freeze"),KH=Symbol("getDollarZero"),N8=Symbol("getParserConfiguration"),qH=Symbol("getUsageConfiguration"),zX=Symbol("guessLocale"),VH=Symbol("guessVersion"),AH=Symbol("parsePositionalNumbers"),IX=Symbol("pkgUp"),h6=Symbol("populateParserHintArray"),L7=Symbol("populateParserHintSingleValueDictionary"),TX=Symbol("populateParserHintArrayDictionary"),PX=Symbol("populateParserHintDictionary"),bX=Symbol("sanitizeKey"),hX=Symbol("setKey"),SX=Symbol("unfreeze"),OH=Symbol("validateAsync"),jH=Symbol("getCommandInstance"),UH=Symbol("getContext"),RH=Symbol("getHasOutput"),CH=Symbol("getLoggerInstance"),ZH=Symbol("getParseContext"),NH=Symbol("getUsageInstance"),MH=Symbol("getValidationInstance"),J5=Symbol("hasParseCallback"),_H=Symbol("isGlobalContext"),M8=Symbol("postProcess"),LH=Symbol("rebase"),yX=Symbol("reset"),F$=Symbol("runYargsParserAndExecuteCommands"),xX=Symbol("runValidation"),zH=Symbol("setHasOutput"),_8=Symbol("kTrackManuallySetKeys"),hb="en_US";class TH{constructor(D=[],F,$,B){this.customScriptName=!1,this.parsed=!1,A1.set(this,void 0),V8.set(this,void 0),D$.set(this,{commands:[],fullCommands:[]}),EF.set(this,null),MF.set(this,null),tB.set(this,"show-hidden"),P6.set(this,null),A8.set(this,!0),sB.set(this,{}),cF.set(this,!0),aB.set(this,[]),pF.set(this,void 0),I2.set(this,{}),_F.set(this,!1),iF.set(this,null),eB.set(this,!0),O8.set(this,void 0),h1.set(this,""),S0.set(this,void 0),D5.set(this,void 0),F5.set(this,{}),LF.set(this,null),j8.set(this,null),_7.set(this,{}),U8.set(this,{}),b6.set(this,void 0),$5.set(this,!1),n0.set(this,void 0),R8.set(this,!1),C8.set(this,!1),Z8.set(this,!1),$D.set(this,void 0),B5.set(this,{}),T2.set(this,null),f1.set(this,void 0),L0(this,n0,B,"f"),L0(this,b6,D,"f"),L0(this,V8,F,"f"),L0(this,D5,$,"f"),L0(this,pF,new NX(this),"f"),this.$0=this[KH](),this[yX](),L0(this,A1,Z(this,A1,"f"),"f"),L0(this,$D,Z(this,$D,"f"),"f"),L0(this,f1,Z(this,f1,"f"),"f"),L0(this,S0,Z(this,S0,"f"),"f"),Z(this,S0,"f").showHiddenOpt=Z(this,tB,"f"),L0(this,O8,this[GH](),"f"),Z(this,n0,"f").y18n.setLocale(hb)}addHelpOpt(D,F){if(_0("[string|boolean] [string]",[D,F],arguments.length),Z(this,iF,"f"))this[LX](Z(this,iF,"f")),L0(this,iF,null,"f");if(D===!1&&F===void 0)return this;return L0(this,iF,typeof D==="string"?D:"help","f"),this.boolean(Z(this,iF,"f")),this.describe(Z(this,iF,"f"),F||Z(this,$D,"f").deferY18nLookup("Show help")),this}help(D,F){return this.addHelpOpt(D,F)}addShowHiddenOpt(D,F){if(_0("[string|boolean] [string]",[D,F],arguments.length),D===!1&&F===void 0)return this;let $=typeof D==="string"?D:Z(this,tB,"f");return this.boolean($),this.describe($,F||Z(this,$D,"f").deferY18nLookup("Show hidden options")),Z(this,S0,"f").showHiddenOpt=$,this}showHidden(D,F){return this.addShowHiddenOpt(D,F)}alias(D,F){return _0("<object|string|array> [string|array]",[D,F],arguments.length),this[TX](this.alias.bind(this),"alias",D,F),this}array(D){return _0("<array|string>",[D],arguments.length),this[h6]("array",D),this[_8](D),this}boolean(D){return _0("<array|string>",[D],arguments.length),this[h6]("boolean",D),this[_8](D),this}check(D,F){return _0("<function> [boolean]",[D,F],arguments.length),this.middleware(($,B)=>{return q8(()=>{return D($,B.getOptions())},(J)=>{if(!J)Z(this,$D,"f").fail(Z(this,n0,"f").y18n.__("Argument check failed: %s",D.toString()));else if(typeof J==="string"||J instanceof Error)Z(this,$D,"f").fail(J.toString(),J);return $},(J)=>{return Z(this,$D,"f").fail(J.message?J.message:J.toString(),J),$})},!1,F),this}choices(D,F){return _0("<object|string|array> [string|array]",[D,F],arguments.length),this[TX](this.choices.bind(this),"choices",D,F),this}coerce(D,F){if(_0("<object|string|array> [function]",[D,F],arguments.length),Array.isArray(D)){if(!F)throw new V1("coerce callback must be provided");for(let B of D)this.coerce(B,F);return this}else if(typeof D==="object"){for(let B of Object.keys(D))this.coerce(B,D[B]);return this}if(!F)throw new V1("coerce callback must be provided");let $=D;return Z(this,S0,"f").key[$]=!0,Z(this,pF,"f").addCoerceMiddleware((B,J)=>{var Y;let X=(Y=J.getAliases()[$])!==null&&Y!==void 0?Y:[],Q=[$,...X].filter((w)=>Object.prototype.hasOwnProperty.call(B,w));if(Q.length===0)return B;return q8(()=>{return F(B[Q[0]])},(w)=>{return Q.forEach((f)=>{B[f]=w}),B},(w)=>{throw new V1(w.message)})},$),this}conflicts(D,F){return _0("<string|object> [string|array]",[D,F],arguments.length),Z(this,f1,"f").conflicts(D,F),this}config(D="config",F,$){if(_0("[object|string] [string|function] [function]",[D,F,$],arguments.length),typeof D==="object"&&!Array.isArray(D))return D=e9(D,Z(this,V8,"f"),this[N8]()["deep-merge-config"]||!1,Z(this,n0,"f")),Z(this,S0,"f").configObjects=(Z(this,S0,"f").configObjects||[]).concat(D),this;if(typeof F==="function")$=F,F=void 0;return this.describe(D,F||Z(this,$D,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(D)?D:[D]).forEach((B)=>{Z(this,S0,"f").config[B]=$||!0}),this}completion(D,F,$){if(_0("[string] [string|boolean|function] [function]",[D,F,$],arguments.length),typeof F==="function")$=F,F=void 0;if(L0(this,MF,D||Z(this,MF,"f")||"completion","f"),!F&&F!==!1)F="generate completion script";if(this.command(Z(this,MF,"f"),F),$)Z(this,EF,"f").registerFunction($);return this}command(D,F,$,B,J,Y){return _0("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[D,F,$,B,J,Y],arguments.length),Z(this,A1,"f").addHandler(D,F,$,B,J,Y),this}commands(D,F,$,B,J,Y){return this.command(D,F,$,B,J,Y)}commandDir(D,F){_0("<string> [object]",[D,F],arguments.length);let $=Z(this,D5,"f")||Z(this,n0,"f").require;return Z(this,A1,"f").addDirectory(D,$,Z(this,n0,"f").getCallerFile(),F),this}count(D){return _0("<array|string>",[D],arguments.length),this[h6]("count",D),this[_8](D),this}default(D,F,$){if(_0("<object|string|array> [*] [string]",[D,F,$],arguments.length),$)ZX(D,Z(this,n0,"f")),Z(this,S0,"f").defaultDescription[D]=$;if(typeof F==="function"){if(ZX(D,Z(this,n0,"f")),!Z(this,S0,"f").defaultDescription[D])Z(this,S0,"f").defaultDescription[D]=Z(this,$D,"f").functionDescription(F);F=F.call()}return this[L7](this.default.bind(this),"default",D,F),this}defaults(D,F,$){return this.default(D,F,$)}demandCommand(D=1,F,$,B){if(_0("[number] [number|string] [string|null|undefined] [string|null|undefined]",[D,F,$,B],arguments.length),typeof F!=="number")$=F,F=1/0;return this.global("_",!1),Z(this,S0,"f").demandedCommands._={min:D,max:F,minMsg:$,maxMsg:B},this}demand(D,F,$){if(Array.isArray(F))F.forEach((B)=>{XF($,!0,Z(this,n0,"f")),this.demandOption(B,$)}),F=1/0;else if(typeof F!=="number")$=F,F=1/0;if(typeof D==="number")XF($,!0,Z(this,n0,"f")),this.demandCommand(D,F,$,$);else if(Array.isArray(D))D.forEach((B)=>{XF($,!0,Z(this,n0,"f")),this.demandOption(B,$)});else if(typeof $==="string")this.demandOption(D,$);else if($===!0||typeof $==="undefined")this.demandOption(D);return this}demandOption(D,F){return _0("<object|string|array> [string]",[D,F],arguments.length),this[L7](this.demandOption.bind(this),"demandedOptions",D,F),this}deprecateOption(D,F){return _0("<string> [string|boolean]",[D,F],arguments.length),Z(this,S0,"f").deprecatedOptions[D]=F,this}describe(D,F){return _0("<object|string|array> [string]",[D,F],arguments.length),this[hX](D,!0),Z(this,$D,"f").describe(D,F),this}detectLocale(D){return _0("<boolean>",[D],arguments.length),L0(this,A8,D,"f"),this}env(D){if(_0("[string|boolean]",[D],arguments.length),D===!1)delete Z(this,S0,"f").envPrefix;else Z(this,S0,"f").envPrefix=D||"";return this}epilogue(D){return _0("<string>",[D],arguments.length),Z(this,$D,"f").epilog(D),this}epilog(D){return this.epilogue(D)}example(D,F){if(_0("<string|array> [string]",[D,F],arguments.length),Array.isArray(D))D.forEach(($)=>this.example(...$));else Z(this,$D,"f").example(D,F);return this}exit(D,F){if(L0(this,_F,!0,"f"),L0(this,P6,F,"f"),Z(this,cF,"f"))Z(this,n0,"f").process.exit(D)}exitProcess(D=!0){return _0("[boolean]",[D],arguments.length),L0(this,cF,D,"f"),this}fail(D){if(_0("<function|boolean>",[D],arguments.length),typeof D==="boolean"&&D!==!1)throw new V1("Invalid first argument. Expected function or boolean 'false'");return Z(this,$D,"f").failFn(D),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(D,F){if(_0("<array> [function]",[D,F],arguments.length),!F)return new Promise(($,B)=>{Z(this,EF,"f").getCompletion(D,(J,Y)=>{if(J)B(J);else $(Y)})});else return Z(this,EF,"f").getCompletion(D,F)}getDemandedOptions(){return _0([],0),Z(this,S0,"f").demandedOptions}getDemandedCommands(){return _0([],0),Z(this,S0,"f").demandedCommands}getDeprecatedOptions(){return _0([],0),Z(this,S0,"f").deprecatedOptions}getDetectLocale(){return Z(this,A8,"f")}getExitProcess(){return Z(this,cF,"f")}getGroups(){return Object.assign({},Z(this,I2,"f"),Z(this,U8,"f"))}getHelp(){if(L0(this,_F,!0,"f"),!Z(this,$D,"f").hasCachedHelpMessage()){if(!this.parsed){let F=this[F$](Z(this,b6,"f"),void 0,void 0,0,!0);if(oD(F))return F.then(()=>{return Z(this,$D,"f").help()})}let D=Z(this,A1,"f").runDefaultBuilderOn(this);if(oD(D))return D.then(()=>{return Z(this,$D,"f").help()})}return Promise.resolve(Z(this,$D,"f").help())}getOptions(){return Z(this,S0,"f")}getStrict(){return Z(this,R8,"f")}getStrictCommands(){return Z(this,C8,"f")}getStrictOptions(){return Z(this,Z8,"f")}global(D,F){if(_0("<string|array> [boolean]",[D,F],arguments.length),D=[].concat(D),F!==!1)Z(this,S0,"f").local=Z(this,S0,"f").local.filter(($)=>D.indexOf($)===-1);else D.forEach(($)=>{if(!Z(this,S0,"f").local.includes($))Z(this,S0,"f").local.push($)});return this}group(D,F){_0("<string|array> <string>",[D,F],arguments.length);let $=Z(this,U8,"f")[F]||Z(this,I2,"f")[F];if(Z(this,U8,"f")[F])delete Z(this,U8,"f")[F];let B={};return Z(this,I2,"f")[F]=($||[]).concat(D).filter((J)=>{if(B[J])return!1;return B[J]=!0}),this}hide(D){return _0("<string>",[D],arguments.length),Z(this,S0,"f").hiddenOptions.push(D),this}implies(D,F){return _0("<string|object> [number|string|array]",[D,F],arguments.length),Z(this,f1,"f").implies(D,F),this}locale(D){if(_0("[string]",[D],arguments.length),D===void 0)return this[zX](),Z(this,n0,"f").y18n.getLocale();return L0(this,A8,!1,"f"),Z(this,n0,"f").y18n.setLocale(D),this}middleware(D,F,$){return Z(this,pF,"f").addMiddleware(D,!!F,$)}nargs(D,F){return _0("<string|object|array> [number]",[D,F],arguments.length),this[L7](this.nargs.bind(this),"narg",D,F),this}normalize(D){return _0("<array|string>",[D],arguments.length),this[h6]("normalize",D),this}number(D){return _0("<array|string>",[D],arguments.length),this[h6]("number",D),this[_8](D),this}option(D,F){if(_0("<string|object> [object]",[D,F],arguments.length),typeof D==="object")Object.keys(D).forEach(($)=>{this.options($,D[$])});else{if(typeof F!=="object")F={};if(this[_8](D),Z(this,T2,"f")&&(D==="version"||(F===null||F===void 0?void 0:F.alias)==="version"))this[HH](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning");if(Z(this,S0,"f").key[D]=!0,F.alias)this.alias(D,F.alias);let $=F.deprecate||F.deprecated;if($)this.deprecateOption(D,$);let B=F.demand||F.required||F.require;if(B)this.demand(D,B);if(F.demandOption)this.demandOption(D,typeof F.demandOption==="string"?F.demandOption:void 0);if(F.conflicts)this.conflicts(D,F.conflicts);if("default"in F)this.default(D,F.default);if(F.implies!==void 0)this.implies(D,F.implies);if(F.nargs!==void 0)this.nargs(D,F.nargs);if(F.config)this.config(D,F.configParser);if(F.normalize)this.normalize(D);if(F.choices)this.choices(D,F.choices);if(F.coerce)this.coerce(D,F.coerce);if(F.group)this.group(D,F.group);if(F.boolean||F.type==="boolean"){if(this.boolean(D),F.alias)this.boolean(F.alias)}if(F.array||F.type==="array"){if(this.array(D),F.alias)this.array(F.alias)}if(F.number||F.type==="number"){if(this.number(D),F.alias)this.number(F.alias)}if(F.string||F.type==="string"){if(this.string(D),F.alias)this.string(F.alias)}if(F.count||F.type==="count")this.count(D);if(typeof F.global==="boolean")this.global(D,F.global);if(F.defaultDescription)Z(this,S0,"f").defaultDescription[D]=F.defaultDescription;if(F.skipValidation)this.skipValidation(D);let J=F.describe||F.description||F.desc,Y=Z(this,$D,"f").getDescriptions();if(!Object.prototype.hasOwnProperty.call(Y,D)||typeof J==="string")this.describe(D,J);if(F.hidden)this.hide(D);if(F.requiresArg)this.requiresArg(D)}return this}options(D,F){return this.option(D,F)}parse(D,F,$){if(_0("[string|array] [function|boolean|object] [function]",[D,F,$],arguments.length),this[EH](),typeof D==="undefined")D=Z(this,b6,"f");if(typeof F==="object")L0(this,j8,F,"f"),F=$;if(typeof F==="function")L0(this,LF,F,"f"),F=!1;if(!F)L0(this,b6,D,"f");if(Z(this,LF,"f"))L0(this,cF,!1,"f");let B=this[F$](D,!!F),J=this.parsed;if(Z(this,EF,"f").setParsed(this.parsed),oD(B))return B.then((Y)=>{if(Z(this,LF,"f"))Z(this,LF,"f").call(this,Z(this,P6,"f"),Y,Z(this,h1,"f"));return Y}).catch((Y)=>{if(Z(this,LF,"f"))Z(this,LF,"f")(Y,this.parsed.argv,Z(this,h1,"f"));throw Y}).finally(()=>{this[SX](),this.parsed=J});else{if(Z(this,LF,"f"))Z(this,LF,"f").call(this,Z(this,P6,"f"),B,Z(this,h1,"f"));this[SX](),this.parsed=J}return B}parseAsync(D,F,$){let B=this.parse(D,F,$);return!oD(B)?Promise.resolve(B):B}parseSync(D,F,$){let B=this.parse(D,F,$);if(oD(B))throw new V1(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return B}parserConfiguration(D){return _0("<object>",[D],arguments.length),L0(this,F5,D,"f"),this}pkgConf(D,F){_0("<string> [string]",[D,F],arguments.length);let $=null,B=this[IX](F||Z(this,V8,"f"));if(B[D]&&typeof B[D]==="object")$=e9(B[D],F||Z(this,V8,"f"),this[N8]()["deep-merge-config"]||!1,Z(this,n0,"f")),Z(this,S0,"f").configObjects=(Z(this,S0,"f").configObjects||[]).concat($);return this}positional(D,F){_0("<string> <object>",[D,F],arguments.length);let $=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];F=I6(F,(Y,X)=>{if(Y==="type"&&!["string","number","boolean"].includes(X))return!1;return $.includes(Y)});let B=Z(this,D$,"f").fullCommands[Z(this,D$,"f").fullCommands.length-1],J=B?Z(this,A1,"f").cmdToParseOptions(B):{array:[],alias:{},default:{},demand:{}};return N7(J).forEach((Y)=>{let X=J[Y];if(Array.isArray(X)){if(X.indexOf(D)!==-1)F[Y]=!0}else if(X[D]&&!(Y in F))F[Y]=X[D]}),this.group(D,Z(this,$D,"f").getPositionalGroupName()),this.option(D,F)}recommendCommands(D=!0){return _0("[boolean]",[D],arguments.length),L0(this,$5,D,"f"),this}required(D,F,$){return this.demand(D,F,$)}require(D,F,$){return this.demand(D,F,$)}requiresArg(D){if(_0("<array|string|object> [number]",[D],arguments.length),typeof D==="string"&&Z(this,S0,"f").narg[D])return this;else this[L7](this.requiresArg.bind(this),"narg",D,NaN);return this}showCompletionScript(D,F){return _0("[string] [string]",[D,F],arguments.length),D=D||this.$0,Z(this,O8,"f").log(Z(this,EF,"f").generateCompletionScript(D,F||Z(this,MF,"f")||"completion")),this}showHelp(D){if(_0("[string|function]",[D],arguments.length),L0(this,_F,!0,"f"),!Z(this,$D,"f").hasCachedHelpMessage()){if(!this.parsed){let $=this[F$](Z(this,b6,"f"),void 0,void 0,0,!0);if(oD($))return $.then(()=>{Z(this,$D,"f").showHelp(D)}),this}let F=Z(this,A1,"f").runDefaultBuilderOn(this);if(oD(F))return F.then(()=>{Z(this,$D,"f").showHelp(D)}),this}return Z(this,$D,"f").showHelp(D),this}scriptName(D){return this.customScriptName=!0,this.$0=D,this}showHelpOnFail(D,F){return _0("[boolean|string] [string]",[D,F],arguments.length),Z(this,$D,"f").showHelpOnFail(D,F),this}showVersion(D){return _0("[string|function]",[D],arguments.length),Z(this,$D,"f").showVersion(D),this}skipValidation(D){return _0("<array|string>",[D],arguments.length),this[h6]("skipValidation",D),this}strict(D){return _0("[boolean]",[D],arguments.length),L0(this,R8,D!==!1,"f"),this}strictCommands(D){return _0("[boolean]",[D],arguments.length),L0(this,C8,D!==!1,"f"),this}strictOptions(D){return _0("[boolean]",[D],arguments.length),L0(this,Z8,D!==!1,"f"),this}string(D){return _0("<array|string>",[D],arguments.length),this[h6]("string",D),this[_8](D),this}terminalWidth(){return _0([],0),Z(this,n0,"f").process.stdColumns}updateLocale(D){return this.updateStrings(D)}updateStrings(D){return _0("<object>",[D],arguments.length),L0(this,A8,!1,"f"),Z(this,n0,"f").y18n.updateLocale(D),this}usage(D,F,$,B){if(_0("<string|null|undefined> [string|boolean] [function|object] [function]",[D,F,$,B],arguments.length),F!==void 0)if(XF(D,null,Z(this,n0,"f")),(D||"").match(/^\$0( |$)/))return this.command(D,F,$,B);else throw new V1(".usage() description must start with $0 if being used as alias for .command()");else return Z(this,$D,"f").usage(D),this}usageConfiguration(D){return _0("<object>",[D],arguments.length),L0(this,B5,D,"f"),this}version(D,F,$){if(_0("[boolean|string] [string] [string]",[D,F,$],arguments.length),Z(this,T2,"f"))this[LX](Z(this,T2,"f")),Z(this,$D,"f").version(void 0),L0(this,T2,null,"f");if(arguments.length===0)$=this[VH](),D="version";else if(arguments.length===1){if(D===!1)return this;$=D,D="version"}else if(arguments.length===2)$=F,F=void 0;return L0(this,T2,typeof D==="string"?D:"version","f"),F=F||Z(this,$D,"f").deferY18nLookup("Show version number"),Z(this,$D,"f").version($||void 0),this.boolean(Z(this,T2,"f")),this.describe(Z(this,T2,"f"),F),this}wrap(D){return _0("<number|null|undefined>",[D],arguments.length),Z(this,$D,"f").wrap(D),this}[(A1=new WeakMap,V8=new WeakMap,D$=new WeakMap,EF=new WeakMap,MF=new WeakMap,tB=new WeakMap,P6=new WeakMap,A8=new WeakMap,sB=new WeakMap,cF=new WeakMap,aB=new WeakMap,pF=new WeakMap,I2=new WeakMap,_F=new WeakMap,iF=new WeakMap,eB=new WeakMap,O8=new WeakMap,h1=new WeakMap,S0=new WeakMap,D5=new WeakMap,F5=new WeakMap,LF=new WeakMap,j8=new WeakMap,_7=new WeakMap,U8=new WeakMap,b6=new WeakMap,$5=new WeakMap,n0=new WeakMap,R8=new WeakMap,C8=new WeakMap,Z8=new WeakMap,$D=new WeakMap,B5=new WeakMap,T2=new WeakMap,f1=new WeakMap,WH)](D){if(!D._||!D["--"])return D;D._.push.apply(D._,D["--"]);try{delete D["--"]}catch(F){}return D}[GH](){return{log:(...D)=>{if(!this[J5]())console.log(...D);if(L0(this,_F,!0,"f"),Z(this,h1,"f").length)L0(this,h1,Z(this,h1,"f")+`
`,"f");L0(this,h1,Z(this,h1,"f")+D.join(" "),"f")},error:(...D)=>{if(!this[J5]())console.error(...D);if(L0(this,_F,!0,"f"),Z(this,h1,"f").length)L0(this,h1,Z(this,h1,"f")+`
`,"f");L0(this,h1,Z(this,h1,"f")+D.join(" "),"f")}}}[LX](D){N7(Z(this,S0,"f")).forEach((F)=>{if(((B)=>B==="configObjects")(F))return;let $=Z(this,S0,"f")[F];if(Array.isArray($)){if($.includes(D))$.splice($.indexOf(D),1)}else if(typeof $==="object")delete $[D]}),delete Z(this,$D,"f").getDescriptions()[D]}[HH](D,F,$){if(!Z(this,sB,"f")[$])Z(this,n0,"f").process.emitWarning(D,F),Z(this,sB,"f")[$]=!0}[EH](){Z(this,aB,"f").push({options:Z(this,S0,"f"),configObjects:Z(this,S0,"f").configObjects.slice(0),exitProcess:Z(this,cF,"f"),groups:Z(this,I2,"f"),strict:Z(this,R8,"f"),strictCommands:Z(this,C8,"f"),strictOptions:Z(this,Z8,"f"),completionCommand:Z(this,MF,"f"),output:Z(this,h1,"f"),exitError:Z(this,P6,"f"),hasOutput:Z(this,_F,"f"),parsed:this.parsed,parseFn:Z(this,LF,"f"),parseContext:Z(this,j8,"f")}),Z(this,$D,"f").freeze(),Z(this,f1,"f").freeze(),Z(this,A1,"f").freeze(),Z(this,pF,"f").freeze()}[KH](){let D="",F;if(/\b(node|iojs|electron)(\.exe)?$/.test(Z(this,n0,"f").process.argv()[0]))F=Z(this,n0,"f").process.argv().slice(1,2);else F=Z(this,n0,"f").process.argv().slice(0,1);if(D=F.map(($)=>{let B=this[LH](Z(this,V8,"f"),$);return $.match(/^(\/|([a-zA-Z]:)?\\)/)&&B.length<$.length?B:$}).join(" ").trim(),Z(this,n0,"f").getEnv("_")&&Z(this,n0,"f").getProcessArgvBin()===Z(this,n0,"f").getEnv("_"))D=Z(this,n0,"f").getEnv("_").replace(`${Z(this,n0,"f").path.dirname(Z(this,n0,"f").process.execPath())}/`,"");return D}[N8](){return Z(this,F5,"f")}[qH](){return Z(this,B5,"f")}[zX](){if(!Z(this,A8,"f"))return;let D=Z(this,n0,"f").getEnv("LC_ALL")||Z(this,n0,"f").getEnv("LC_MESSAGES")||Z(this,n0,"f").getEnv("LANG")||Z(this,n0,"f").getEnv("LANGUAGE")||"en_US";this.locale(D.replace(/[.:].*/,""))}[VH](){return this[IX]().version||"unknown"}[AH](D){let F=D["--"]?D["--"]:D._;for(let $=0,B;(B=F[$])!==void 0;$++)if(Z(this,n0,"f").Parser.looksLikeNumber(B)&&Number.isSafeInteger(Math.floor(parseFloat(`${B}`))))F[$]=Number(B);return D}[IX](D){let F=D||"*";if(Z(this,_7,"f")[F])return Z(this,_7,"f")[F];let $={};try{let B=D||Z(this,n0,"f").mainFilename;if(Z(this,n0,"f").path.extname(B))B=Z(this,n0,"f").path.dirname(B);let J=Z(this,n0,"f").findUp(B,(Y,X)=>{if(X.includes("package.json"))return"package.json";else return});XF(J,void 0,Z(this,n0,"f")),$=JSON.parse(Z(this,n0,"f").readFileSync(J,"utf8"))}catch(B){}return Z(this,_7,"f")[F]=$||{},Z(this,_7,"f")[F]}[h6](D,F){F=[].concat(F),F.forEach(($)=>{$=this[bX]($),Z(this,S0,"f")[D].push($)})}[L7](D,F,$,B){this[PX](D,F,$,B,(J,Y,X)=>{Z(this,S0,"f")[J][Y]=X})}[TX](D,F,$,B){this[PX](D,F,$,B,(J,Y,X)=>{Z(this,S0,"f")[J][Y]=(Z(this,S0,"f")[J][Y]||[]).concat(X)})}[PX](D,F,$,B,J){if(Array.isArray($))$.forEach((Y)=>{D(Y,B)});else if(((Y)=>typeof Y==="object")($))for(let Y of N7($))D(Y,$[Y]);else J(F,this[bX]($),B)}[bX](D){if(D==="__proto__")return"___proto___";return D}[hX](D,F){return this[L7](this[hX].bind(this),"key",D,F),this}[SX](){var D,F,$,B,J,Y,X,Q,w,f,G,H;let K=Z(this,aB,"f").pop();XF(K,void 0,Z(this,n0,"f"));let E;D=this,F=this,$=this,B=this,J=this,Y=this,X=this,Q=this,w=this,f=this,G=this,H=this,{options:{set value(O){L0(D,S0,O,"f")}}.value,configObjects:E,exitProcess:{set value(O){L0(F,cF,O,"f")}}.value,groups:{set value(O){L0($,I2,O,"f")}}.value,output:{set value(O){L0(B,h1,O,"f")}}.value,exitError:{set value(O){L0(J,P6,O,"f")}}.value,hasOutput:{set value(O){L0(Y,_F,O,"f")}}.value,parsed:this.parsed,strict:{set value(O){L0(X,R8,O,"f")}}.value,strictCommands:{set value(O){L0(Q,C8,O,"f")}}.value,strictOptions:{set value(O){L0(w,Z8,O,"f")}}.value,completionCommand:{set value(O){L0(f,MF,O,"f")}}.value,parseFn:{set value(O){L0(G,LF,O,"f")}}.value,parseContext:{set value(O){L0(H,j8,O,"f")}}.value}=K,Z(this,S0,"f").configObjects=E,Z(this,$D,"f").unfreeze(),Z(this,f1,"f").unfreeze(),Z(this,A1,"f").unfreeze(),Z(this,pF,"f").unfreeze()}[OH](D,F){return q8(F,($)=>{return D($),$})}getInternalMethods(){return{getCommandInstance:this[jH].bind(this),getContext:this[UH].bind(this),getHasOutput:this[RH].bind(this),getLoggerInstance:this[CH].bind(this),getParseContext:this[ZH].bind(this),getParserConfiguration:this[N8].bind(this),getUsageConfiguration:this[qH].bind(this),getUsageInstance:this[NH].bind(this),getValidationInstance:this[MH].bind(this),hasParseCallback:this[J5].bind(this),isGlobalContext:this[_H].bind(this),postProcess:this[M8].bind(this),reset:this[yX].bind(this),runValidation:this[xX].bind(this),runYargsParserAndExecuteCommands:this[F$].bind(this),setHasOutput:this[zH].bind(this)}}[jH](){return Z(this,A1,"f")}[UH](){return Z(this,D$,"f")}[RH](){return Z(this,_F,"f")}[CH](){return Z(this,O8,"f")}[ZH](){return Z(this,j8,"f")||{}}[NH](){return Z(this,$D,"f")}[MH](){return Z(this,f1,"f")}[J5](){return!!Z(this,LF,"f")}[_H](){return Z(this,eB,"f")}[M8](D,F,$,B){if($)return D;if(oD(D))return D;if(!F)D=this[WH](D);if(this[N8]()["parse-positional-numbers"]||this[N8]()["parse-positional-numbers"]===void 0)D=this[AH](D);if(B)D=K8(D,this,Z(this,pF,"f").getMiddleware(),!1);return D}[yX](D={}){L0(this,S0,Z(this,S0,"f")||{},"f");let F={};F.local=Z(this,S0,"f").local||[],F.configObjects=Z(this,S0,"f").configObjects||[];let $={};F.local.forEach((Y)=>{$[Y]=!0,(D[Y]||[]).forEach((X)=>{$[X]=!0})}),Object.assign(Z(this,U8,"f"),Object.keys(Z(this,I2,"f")).reduce((Y,X)=>{let Q=Z(this,I2,"f")[X].filter((w)=>!(w in $));if(Q.length>0)Y[X]=Q;return Y},{})),L0(this,I2,{},"f");let B=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],J=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];if(B.forEach((Y)=>{F[Y]=(Z(this,S0,"f")[Y]||[]).filter((X)=>!$[X])}),J.forEach((Y)=>{F[Y]=I6(Z(this,S0,"f")[Y],(X)=>!$[X])}),F.envPrefix=Z(this,S0,"f").envPrefix,L0(this,S0,F,"f"),L0(this,$D,Z(this,$D,"f")?Z(this,$D,"f").reset($):FH(this,Z(this,n0,"f")),"f"),L0(this,f1,Z(this,f1,"f")?Z(this,f1,"f").reset($):wH(this,Z(this,$D,"f"),Z(this,n0,"f")),"f"),L0(this,A1,Z(this,A1,"f")?Z(this,A1,"f").reset():aG(Z(this,$D,"f"),Z(this,f1,"f"),Z(this,pF,"f"),Z(this,n0,"f")),"f"),!Z(this,EF,"f"))L0(this,EF,YH(this,Z(this,$D,"f"),Z(this,A1,"f"),Z(this,n0,"f")),"f");return Z(this,pF,"f").reset(),L0(this,MF,null,"f"),L0(this,h1,"","f"),L0(this,P6,null,"f"),L0(this,_F,!1,"f"),this.parsed=!1,this}[LH](D,F){return Z(this,n0,"f").path.relative(D,F)}[F$](D,F,$,B=0,J=!1){var Y,X,Q,w;let f=!!$||J;D=D||Z(this,b6,"f"),Z(this,S0,"f").__=Z(this,n0,"f").y18n.__,Z(this,S0,"f").configuration=this[N8]();let G=!!Z(this,S0,"f").configuration["populate--"],H=Object.assign({},Z(this,S0,"f").configuration,{"populate--":!0}),K=Z(this,n0,"f").Parser.detailed(D,Object.assign({},Z(this,S0,"f"),{configuration:{"parse-positional-numbers":!1,...H}})),E=Object.assign(K.argv,Z(this,j8,"f")),O=void 0,q=K.aliases,U=!1,N=!1;if(Object.keys(E).forEach((L)=>{if(L===Z(this,iF,"f")&&E[L])U=!0;else if(L===Z(this,T2,"f")&&E[L])N=!0}),E.$0=this.$0,this.parsed=K,B===0)Z(this,$D,"f").clearCachedHelpMessage();try{if(this[zX](),F)return this[M8](E,G,!!$,!1);if(Z(this,iF,"f")){if([Z(this,iF,"f")].concat(q[Z(this,iF,"f")]||[]).filter((h)=>h.length>1).includes(""+E._[E._.length-1]))E._.pop(),U=!0}L0(this,eB,!1,"f");let L=Z(this,A1,"f").getCommands(),C=((Y=Z(this,EF,"f"))===null||Y===void 0?void 0:Y.completionKey)?[(X=Z(this,EF,"f"))===null||X===void 0?void 0:X.completionKey,...(w=this.getAliases()[(Q=Z(this,EF,"f"))===null||Q===void 0?void 0:Q.completionKey])!==null&&w!==void 0?w:[]].some((I)=>Object.prototype.hasOwnProperty.call(E,I)):!1,R=U||C||J;if(E._.length){if(L.length){let I;for(let h=B||0,p;E._[h]!==void 0;h++)if(p=String(E._[h]),L.includes(p)&&p!==Z(this,MF,"f")){let P=Z(this,A1,"f").runCommand(p,this,K,h+1,J,U||N||J);return this[M8](P,G,!!$,!1)}else if(!I&&p!==Z(this,MF,"f")){I=p;break}if(!Z(this,A1,"f").hasDefaultCommand()&&Z(this,$5,"f")&&I&&!R)Z(this,f1,"f").recommendCommands(I,L)}if(Z(this,MF,"f")&&E._.includes(Z(this,MF,"f"))&&!C){if(Z(this,cF,"f"))T6(!0);this.showCompletionScript(),this.exit(0)}}if(Z(this,A1,"f").hasDefaultCommand()&&!R){let I=Z(this,A1,"f").runCommand(null,this,K,0,J,U||N||J);return this[M8](I,G,!!$,!1)}if(C){if(Z(this,cF,"f"))T6(!0);D=[].concat(D);let I=D.slice(D.indexOf(`--${Z(this,EF,"f").completionKey}`)+1);return Z(this,EF,"f").getCompletion(I,(h,p)=>{if(h)throw new V1(h.message);(p||[]).forEach((P)=>{Z(this,O8,"f").log(P)}),this.exit(0)}),this[M8](E,!G,!!$,!1)}if(!Z(this,_F,"f")){if(U){if(Z(this,cF,"f"))T6(!0);f=!0,this.showHelp((I)=>{Z(this,O8,"f").log(I),this.exit(0)})}else if(N){if(Z(this,cF,"f"))T6(!0);f=!0,Z(this,$D,"f").showVersion("log"),this.exit(0)}}if(!f&&Z(this,S0,"f").skipValidation.length>0)f=Object.keys(E).some((I)=>Z(this,S0,"f").skipValidation.indexOf(I)>=0&&E[I]===!0);if(!f){if(K.error)throw new V1(K.error.message);if(!C){let I=this[xX](q,{},K.error);if(!$)O=K8(E,this,Z(this,pF,"f").getMiddleware(),!0);if(O=this[OH](I,O!==null&&O!==void 0?O:E),oD(O)&&!$)O=O.then(()=>{return K8(E,this,Z(this,pF,"f").getMiddleware(),!1)})}}}catch(L){if(L instanceof V1)Z(this,$D,"f").fail(L.message,L);else throw L}return this[M8](O!==null&&O!==void 0?O:E,G,!!$,!0)}[xX](D,F,$,B){let J={...this.getDemandedOptions()};return(Y)=>{if($)throw new V1($.message);Z(this,f1,"f").nonOptionCount(Y),Z(this,f1,"f").requiredArguments(Y,J);let X=!1;if(Z(this,C8,"f"))X=Z(this,f1,"f").unknownCommands(Y);if(Z(this,R8,"f")&&!X)Z(this,f1,"f").unknownArguments(Y,D,F,!!B);else if(Z(this,Z8,"f"))Z(this,f1,"f").unknownArguments(Y,D,{},!1,!1);Z(this,f1,"f").limitedChoices(Y),Z(this,f1,"f").implications(Y),Z(this,f1,"f").conflicting(Y)}}[zH](){L0(this,_F,!0,"f")}[_8](D){if(typeof D==="string")Z(this,S0,"f").key[D]=!0;else for(let F of D)Z(this,S0,"f").key[F]=!0}}function eG(D){return!!D&&typeof D.getInternalMethods==="function"}var Sb=IH(CX),PH=Sb;await eD();await a8();await l2();await YB();C0();QF();import{EOL as CL}from"os";var j;((e8)=>{let D=[["\u2588\u2580\u2580\u2584 \u2588\u2580\u2580\u2580 ","\u2588\u2580\u2584\u2580\u2588   \u2588\u2580\u2580\u2588"],["\u2588\u2591\u2591\u2588 \u2588\u2591\u2580\u2588 ","\u2588\u2591\u2580\u2591\u2588 \u2580 \u2588\u2591\u2591\u2588"],["\u2580\u2580\u2580  \u2580\u2580\u2580\u2580 ","\u2580\u2591\u2591\u2591\u2580   \u2580\u2580\u2580\u2580"]];e8.CancelledError=BD.create("UICancelledError",W.void()),e8.Style={TEXT_HIGHLIGHT:"\x1B[96m",TEXT_HIGHLIGHT_BOLD:"\x1B[96m\x1B[1m",TEXT_DIM:"\x1B[90m",TEXT_DIM_BOLD:"\x1B[90m\x1B[1m",TEXT_NORMAL:"\x1B[0m",TEXT_NORMAL_BOLD:"\x1B[1m",TEXT_WARNING:"\x1B[93m",TEXT_WARNING_BOLD:"\x1B[93m\x1B[1m",TEXT_DANGER:"\x1B[91m",TEXT_DANGER_BOLD:"\x1B[91m\x1B[1m",TEXT_SUCCESS:"\x1B[92m",TEXT_SUCCESS_BOLD:"\x1B[92m\x1B[1m",TEXT_INFO:"\x1B[94m",TEXT_INFO_BOLD:"\x1B[94m\x1B[1m"};function B(...G){J(...G),Bun.stderr.write(CL)}e8.println=B;function J(...G){Y=!1,Bun.stderr.write(G.join(" "))}e8.print=J;let Y=!1;function X(){if(Y)return;B(""+e8.Style.TEXT_NORMAL),Y=!0}e8.empty=X;function Q(G){let H=[];for(let K of D){if(G)H.push(G);H.push(Bun.color("gray","ansi")),H.push(K[0]),H.push("\x1B[0m"),H.push(K[1]),H.push(CL)}return H.join("").trimEnd()}e8.logo=Q;async function w(G){let K=Z6("readline").createInterface({input:process.stdin,output:process.stdout});return new Promise((E)=>{K.question(G,(O)=>{K.close(),E(O.trim())})})}e8.input=w;function f(G){B(e8.Style.TEXT_DANGER_BOLD+"Error: "+e8.Style.TEXT_NORMAL+G)}e8.error=f})(j||={});function qD(D){return D}Bf();await lF();await MD();await MD();await eD();await e7();await l2();await xD();await lF();import hn from"path";var Cf;((Tf0)=>{let D=Z0.create({service:"config.hooks"});function F(){D.info("init");let $=w0.info();F0.subscribe(tF.Event.Edited,async(B)=>{let J=await HD.get(),Y=hn.extname(B.properties.file);for(let X of J.experimental?.hook?.file_edited?.[Y]??[])D.info("file_edited",{file:B.properties.file,command:X.command}),Bun.spawn({cmd:X.command.map((Q)=>Q.replace("$FILE",B.properties.file)),env:X.environment,cwd:$.path.cwd,stdout:"ignore",stderr:"ignore"})}),F0.subscribe(u0.Event.Idle,async()=>{let B=await HD.get();if(B.experimental?.hook?.session_completed)for(let J of B.experimental.hook.session_completed)D.info("session_completed",{command:J.command}),Bun.spawn({cmd:J.command,cwd:w0.info().path.cwd,env:J.environment,stdout:"ignore",stderr:"ignore"})})}Tf0.init=F})(Cf||={});await MD();await eD();await e7();await xD();import dn from"path";var Zf={};vF(Zf,{zig:()=>kn,standardrb:()=>cn,ruff:()=>gn,rubocop:()=>mn,prettier:()=>xn,mix:()=>yn,ktlint:()=>vn,htmlbeautifier:()=>pn,gofmt:()=>Sn,clang:()=>un});await MD();await u5();var Sn={name:"gofmt",command:["gofmt","-w","$FILE"],extensions:[".go"],async enabled(){return Bun.which("gofmt")!==null}},yn={name:"mix",command:["mix","format","$FILE"],extensions:[".ex",".exs",".eex",".heex",".leex",".neex",".sface"],async enabled(){return Bun.which("mix")!==null}},xn={name:"prettier",command:[rF.which(),"run","prettier","--write","$FILE"],environment:{BUN_BE_BUN:"1"},extensions:[".js",".jsx",".mjs",".cjs",".ts",".tsx",".mts",".cts",".html",".htm",".css",".scss",".sass",".less",".vue",".svelte",".json",".jsonc",".yaml",".yml",".toml",".xml",".md",".mdx",".graphql",".gql"],async enabled(){try{return await Bun.spawn({cmd:[rF.which(),"run","prettier","--version"],cwd:w0.info().path.cwd,env:{BUN_BE_BUN:"1"},stdout:"ignore",stderr:"ignore"}).exited===0}catch{return!1}}},kn={name:"zig",command:["zig","fmt","$FILE"],extensions:[".zig",".zon"],async enabled(){return Bun.which("zig")!==null}},un={name:"clang-format",command:["clang-format","-i","$FILE"],extensions:[".c",".cc",".cpp",".cxx",".c++",".h",".hh",".hpp",".hxx",".h++",".ino",".C",".H"],async enabled(){return Bun.which("clang-format")!==null}},vn={name:"ktlint",command:["ktlint","-F","$FILE"],extensions:[".kt",".kts"],async enabled(){return Bun.which("ktlint")!==null}},gn={name:"ruff",command:["ruff","format","$FILE"],extensions:[".py",".pyi"],async enabled(){return Bun.which("ruff")!==null}},mn={name:"rubocop",command:["rubocop","--autocorrect","$FILE"],extensions:[".rb",".rake",".gemspec",".ru"],async enabled(){return Bun.which("rubocop")!==null}},cn={name:"standardrb",command:["standardrb","--fix","$FILE"],extensions:[".rb",".rake",".gemspec",".ru"],async enabled(){return Bun.which("standardrb")!==null}},pn={name:"htmlbeautifier",command:["htmlbeautifier","$FILE"],extensions:[".erb",".html.erb"],async enabled(){return Bun.which("htmlbeautifier")!==null}};var Nf;((vf0)=>{let D=Z0.create({service:"format"}),F=w0.state("format",()=>{return{enabled:{}}});async function $(Y){let X=F(),Q=X.enabled[Y.name];if(Q===void 0)Q=await Y.enabled(),X.enabled[Y.name]=Q;return Q}async function B(Y){let X=[];for(let Q of Object.values(Zf)){if(!Q.extensions.includes(Y))continue;if(!$(Q))continue;X.push(Q)}return X}function J(){D.info("init"),F0.subscribe(tF.Event.Edited,async(Y)=>{let X=Y.properties.file;D.info("formatting",{file:X});let Q=dn.extname(X);for(let w of await B(Q))if(D.info("running",{command:w.command}),await Bun.spawn({cmd:w.command.map((H)=>H.replace("$FILE",X)),cwd:w0.info().path.cwd,env:w.environment,stdout:"ignore",stderr:"ignore"}).exited!==0)D.error("failed",{command:w.command,...w.environment})})}vf0.init=J})(Nf||={});await r7();await JY();async function $2(D,F){return w0.provide(D,async($)=>{return d2.init(),Nf.init(),Cf.init(),j1.init(),F($)})}import*as M9 from"path";var ZL=5242880;function NL(D){switch(M9.extname(D).toLowerCase()){case".png":return"image/png";case".jpg":case".jpeg":return"image/jpeg";case".gif":return"image/gif";case".webp":return"image/webp";case".bmp":return"image/bmp";default:return"application/octet-stream"}}function ln(D){if(D.match(/^[A-Za-z]:\\/)){let F=D[0].toLowerCase(),$=D.slice(2).replace(/\\/g,"/");return`/mnt/${F}${$}`}return D}function nn(D){let F=[],$=D.match(/["']([^"']*\.(png|jpg|jpeg|gif|webp|bmp))["']/gi);if($)F.push(...$.map((Q)=>Q.slice(1,-1)));let B=D.match(/`([^`]*\.(png|jpg|jpeg|gif|webp|bmp))`/gi);if(B)F.push(...B.map((Q)=>Q.slice(1,-1)));let J=D.match(/(?:^|\s)((?:[A-Za-z]:[\\\/]|\/)?[^\s]*\.(png|jpg|jpeg|gif|webp|bmp))(?:\s|$)/gi);if(J)F.push(...J.map((Q)=>Q.trim()));let Y=[...new Set(F)],X=Y.filter((Q)=>Q.includes("/")||Q.includes("\\"));if(X.length>0)return X;return Y}async function on(D){let F=ln(D),$=M9.isAbsolute(F)?F:M9.join(process.cwd(),F),B=Bun.file($);if(!await B.exists())throw new Error(`Image file not found: ${D}`);let J=await B.stat();if(J.size>ZL)throw new Error(`Image file too large: ${J.size} bytes (max: ${ZL} bytes)`);let Y=await B.arrayBuffer(),X=Buffer.from(Y).toString("base64");return`data:${NL($)};base64,${X}`}async function ML(D){let F=nn(D),$=[];for(let B of F)try{let J=await on(B),Y=NL(B);$.push({path:B,dataUrl:J,mimeType:Y})}catch(J){console.error(`Failed to load image ${B}:`,J)}return{text:D,images:$}}var rn={todowrite:["Todo",j.Style.TEXT_WARNING_BOLD],todoread:["Todo",j.Style.TEXT_WARNING_BOLD],bash:["Bash",j.Style.TEXT_DANGER_BOLD],edit:["Edit",j.Style.TEXT_SUCCESS_BOLD],glob:["Glob",j.Style.TEXT_INFO_BOLD],grep:["Grep",j.Style.TEXT_INFO_BOLD],list:["List",j.Style.TEXT_INFO_BOLD],read:["Read",j.Style.TEXT_HIGHLIGHT_BOLD],write:["Write",j.Style.TEXT_SUCCESS_BOLD],websearch:["Search",j.Style.TEXT_DIM_BOLD]},_L=qD({command:"run [message..]",describe:"run dgmo with a message",builder:(D)=>{return D.positional("message",{describe:"message to send",type:"string",array:!0,default:[]}).option("continue",{alias:["c"],describe:"continue the last session",type:"boolean"}).option("session",{alias:["s"],describe:"session id to continue",type:"string"}).option("share",{type:"boolean",describe:"share the session"}).option("model",{type:"string",alias:["m"],describe:"model to use in the format of provider/model"})},handler:async(D)=>{let F=D.message.join(" ");await $2({cwd:process.cwd()},async()=>{let $=await(async()=>{if(D.continue){let K=await u0.list().next();if(K.done)return;return K.value}if(D.session)return u0.get(D.session);return u0.create()})();if(!$){j.error("Session not found");return}let B=!process.stdout.isTTY;if(j.empty(),j.println(j.logo()),j.empty(),j.println(j.Style.TEXT_NORMAL_BOLD+"> ",F),j.empty(),(await HD.get()).autoshare||r6.DGMO_AUTO_SHARE||r6.OPENCODE_AUTO_SHARE||D.share)await u0.share($.id),j.println(j.Style.TEXT_INFO_BOLD+"~  https://dgmo.ai/s/"+$.id.slice(-8));j.empty();let{providerID:Y,modelID:X}=D.model?z1.parseModel(D.model):await z1.defaultModel();j.println(j.Style.TEXT_NORMAL_BOLD+"@ ",j.Style.TEXT_NORMAL+`${Y}/${X}`),j.empty();function Q(K,E,O){j.println(K+"|",j.Style.TEXT_NORMAL+j.Style.TEXT_DIM+` ${E.padEnd(7," ")}`,"",j.Style.TEXT_NORMAL+O)}F0.subscribe(L1.Event.PartUpdated,async(K)=>{if(K.properties.sessionID!==$.id)return;let E=K.properties.part,O=await u0.getMessage(K.properties.sessionID,K.properties.messageID);if(E.type==="tool-invocation"&&E.toolInvocation.state==="result"){let q=O.metadata.tool[E.toolInvocation.toolCallId],[U,N]=rn[E.toolInvocation.toolName]??[E.toolInvocation.toolName,j.Style.TEXT_INFO_BOLD];Q(N,U,q?.title||"Unknown")}if(E.type==="text"){if(E.text.includes(`
`)){j.empty(),j.println(E.text),j.empty();return}Q(j.Style.TEXT_NORMAL_BOLD,"Text",E.text)}});let{text:w,images:f}=await ML(F),G=[{type:"text",text:w}];for(let K of f)j.println(j.Style.TEXT_SUCCESS+"\u2705",`Loaded image: ${K.path}`),G.push({type:"file",mediaType:K.mimeType,filename:K.path.split("/").pop()||K.path.split("\\").pop()||"image",url:K.dataUrl});let H=await u0.chat({sessionID:$.id,providerID:Y,modelID:X,parts:G});if(B){let K=H.parts.findLast((E)=>E.type==="text");if(K)process.stdout.write(K.text)}j.empty()})}});await xD();await eD();var _9=Symbol("openapi");async function Mf(D,F){let $=await F,B={};if(D==="form"||D==="json"){let J=D==="json"?"application/json":"multipart/form-data";B.requestBody&&"content"in B.requestBody&&B.requestBody.content?B.requestBody.content[J]={schema:$.schema}:B.requestBody={content:{[J]:{schema:$.schema}}}}else{let J=[];if("$ref"in $.schema)J.push({in:D,name:$.schema.$ref,schema:$.schema});else for(let[Y,X]of Object.entries($.schema.properties??{}))J.push({in:D,name:Y,schema:X,required:$.schema.required?.includes(Y)});B.parameters=J}return{docs:B,components:$.components}}var VB=class extends Error{res;status;constructor(D=500,F){super(F?.message,{cause:F?.cause});this.res=F?.res,this.status=D}getResponse(){if(this.res)return new Response(this.res.body,{status:this.status,headers:this.res.headers});return new Response(this.message,{status:this.status})}};var tn=["GET","PUT","POST","DELETE","OPTIONS","HEAD","PATCH","TRACE"],LL=(D)=>D.charAt(0).toUpperCase()+D.slice(1),_f=new Map,sn=(D,F)=>{let $=`${D}:${F}`;if(_f.has($))return _f.get($);let B=D;if(F==="/")return`${B}Index`;for(let J of F.split("/"))J.charCodeAt(0)===123?B+=`By${LL(J.slice(1,-1))}`:B+=LL(J);return _f.set($,B),B},L9=new Map;function VY(D,F,$){return D&&F in D?D[F]??$:$}function zL(...D){return D.reduce((F,$)=>{if(!$)return F;let B;return(("tags"in F)&&F.tags||("tags"in $)&&$.tags)&&(B=Array.from(new Set([...VY(F,"tags",[]),...VY($,"tags",[])]))),{...F,...$,tags:B,responses:{...VY(F,"responses",{}),...VY($,"responses",{})},parameters:bL(F.parameters,$.parameters)}},{})}function IL({path:D,method:F,data:$,schema:B}){D=((Y)=>Y.split("/").map((X)=>{let Q=X;if(Q.startsWith(":")){let w=Q.match(/^:([^{?]+)(?:{(.+)})?(\?)?$/);w?Q=`{${w[1]}}`:(Q=Q.slice(1,Q.length),Q.endsWith("?")&&(Q=Q.slice(0,-1)),Q=`{${Q}}`)}return Q}).join("/"))(D);let J=F.toLowerCase();if(J==="all"){if(!$)return;if(L9.has(D)){let Y=L9.get(D)??{};L9.set(D,{...Y,...$,parameters:bL(Y.parameters,$.parameters)})}else L9.set(D,$)}else{let Y=function(X){let Q=Array.from(L9.keys()),w={};for(let f of Q)X.match(f)&&(w=zL(w,L9.get(f)??{}));return w}(D);B[D]={...B[D]?B[D]:{},[J]:{responses:{},operationId:sn(J,D),...zL(Y,B[D]?.[J],$)}}}}var an=(D)=>("$ref"in D)?D.$ref:`${D.in} ${D.name}`;function bL(...D){let F=D.flatMap(($)=>$??[]).reduce(($,B)=>($.set(an(B),B),$),new Map);return Array.from(F.values())}function en(D,{excludeStaticFile:F=!0,exclude:$=[]}){let B={},J=Array.isArray($)?$:[$];for(let[Y,X]of Object.entries(D))if(!J.some((Q)=>typeof Q=="string"?Y===Q:Q.test(Y))&&(!Y.includes("*")||Y.includes("{"))&&(!F||(!Y.includes(".")||Y.includes("{")))){for(let Q of Object.keys(X)){let w=X[Q];if(Y.includes("{")){w.parameters||(w.parameters=[]);let f=Y.split("/").filter((G)=>G.startsWith("{")&&!w.parameters.find((H)=>H.in==="path"&&H.name===G.slice(1,G.length-1)));for(let G of f){let H=G.slice(1,G.length-1),K=w.parameters.findIndex((E)=>E.in==="param"&&E.name===H);K!==-1?w.parameters[K].in="path":w.parameters.push({schema:{type:"string"},in:"path",name:H,required:!0})}}w.responses||(w.responses={200:{}})}B[Y]=X}return B}var TL={documentation:{},excludeStaticFile:!0,exclude:[],excludeMethods:["OPTIONS"],excludeTags:[]},PL={version:"3.1.0",components:{}};function hL(D,F){let $={version:"3.1.0",components:{}},B;return async(J)=>(B||(B=await Lf(D,F,$,J)),J.json(B))}async function Lf(D,F=TL,$=PL,B){let J={...TL,...F},Y={...PL,...$},X=J.documentation??{},Q=await async function(w,f,G){let H={};for(let K of w.routes){if(!(_9 in K.handler)){f.includeEmptyPaths&&IL({method:K.method,path:K.path,schema:H});continue}if(f.excludeMethods.includes(K.method))continue;if(tn.includes(K.method)===!1&&K.method!=="ALL")continue;let{resolver:E,metadata:O={}}=K.handler[_9],q=f.defaultOptions?.[K.method],{docs:U,components:N}=await E({...G,...O},q);G.components={...G.components,...N??{}},IL({method:K.method,path:K.path,data:U,schema:H})}return H}(D,J,Y);for(let w in Q)for(let f in Q[w]){let G=Q[w][f]?.hide;if(G){let H=!1;typeof G=="boolean"?H=G:typeof G=="function"&&(B?H=G(B):console.warn(`'c' is not defined, cannot evaluate hide function for ${f} ${w}`)),H&&delete Q[w][f]}}return{openapi:Y.version,...{...X,tags:X.tags?.filter((w)=>!J.excludeTags?.includes(w?.name)),info:{title:"Hono Documentation",description:"Development documentation",version:"0.0.0",...X.info},paths:{...en(Q,J),...X.paths},components:{...X.components,schemas:{...Y.components,...X.components?.schemas}}}}}function rD(D){let{validateResponse:F,...$}=D;return Object.assign(async(B,J)=>{if(await J(),F&&D.responses){let Y=B.res.status,X=B.res.headers.get("content-type");if(Y&&X){let Q=D.responses[Y];if(Q&&"content"in Q&&Q.content){let w=X.split(";")[0],f=Q.content[w];if(f?.schema&&"validator"in f.schema)try{let G,H=B.res.clone();if(w==="application/json"?G=await H.json():w==="text/plain"&&(G=await H.text()),!G)throw new Error("No data to validate!");await f.schema.validator(G)}catch(G){let H={status:500,message:"Response validation failed!"};throw typeof F=="object"&&(H={...H,...F}),new VB(H.status,{message:H.message,cause:G})}}}}},{[_9]:{resolver:(B,J)=>Do(B,$,J)}})}async function Do(D,F,$={}){let B={},J={...$,...F,responses:{...$?.responses,...F.responses}};if(J.responses)for(let Y of Object.keys(J.responses)){let X=J.responses[Y];if(X&&"content"in X)for(let Q of Object.keys(X.content??{})){let w=X.content?.[Q];if(w&&(w.schema&&("builder"in w.schema))){let f=await w.schema.builder(D);w.schema=f.schema,f.components&&(B={...B,...f.components})}}}return{docs:J,components:B}}var zf=(D,F,$)=>{return(B,J)=>{let Y=-1;return X(0);async function X(Q){if(Q<=Y)throw new Error("next() called multiple times");Y=Q;let w,f=!1,G;if(D[Q])G=D[Q][0][0],B.req.routeIndex=Q;else G=Q===D.length&&J||void 0;if(G)try{w=await G(B,()=>X(Q+1))}catch(H){if(H instanceof Error&&F)B.error=H,w=await F(H,B),f=!0;else throw H}else if(B.finalized===!1&&$)w=await $(B);if(w&&(B.finalized===!1||f))B.res=w;return B}}};var SL=async(D,F=Object.create(null))=>{let{all:$=!1,dot:B=!1}=F,Y=(D instanceof AY?D.raw.headers:D.headers).get("Content-Type");if(Y?.startsWith("multipart/form-data")||Y?.startsWith("application/x-www-form-urlencoded"))return Fo(D,{all:$,dot:B});return{}};async function Fo(D,F){let $=await D.formData();if($)return $o($,F);return{}}function $o(D,F){let $=Object.create(null);if(D.forEach((B,J)=>{if(!(F.all||J.endsWith("[]")))$[J]=B;else Bo($,J,B)}),F.dot)Object.entries($).forEach(([B,J])=>{if(B.includes("."))Jo($,B,J),delete $[B]});return $}var Bo=(D,F,$)=>{if(D[F]!==void 0)if(Array.isArray(D[F]))D[F].push($);else D[F]=[D[F],$];else D[F]=$},Jo=(D,F,$)=>{let B=D,J=F.split(".");J.forEach((Y,X)=>{if(X===J.length-1)B[Y]=$;else{if(!B[Y]||typeof B[Y]!=="object"||Array.isArray(B[Y])||B[Y]instanceof File)B[Y]=Object.create(null);B=B[Y]}})};var Tf=(D)=>{let F=D.split("/");if(F[0]==="")F.shift();return F},yL=(D)=>{let{groups:F,path:$}=Yo(D),B=Tf($);return Xo(B,F)},Yo=(D)=>{let F=[];return D=D.replace(/\{[^}]+\}/g,($,B)=>{let J=`@${B}`;return F.push([J,$]),J}),{groups:F,path:D}},Xo=(D,F)=>{for(let $=F.length-1;$>=0;$--){let[B]=F[$];for(let J=D.length-1;J>=0;J--)if(D[J].includes(B)){D[J]=D[J].replace(B,F[$][1]);break}}return D},OY={},Pf=(D,F)=>{if(D==="*")return"*";let $=D.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if($){let B=`${D}#${F}`;if(!OY[B])if($[2])OY[B]=F&&F[0]!==":"&&F[0]!=="*"?[B,$[1],new RegExp(`^${$[2]}(?=/${F})`)]:[D,$[1],new RegExp(`^${$[2]}$`)];else OY[B]=[D,$[1],!0];return OY[B]}return null},bf=(D,F)=>{try{return F(D)}catch{return D.replace(/(?:%[0-9A-Fa-f]{2})+/g,($)=>{try{return F($)}catch{return $}})}},Qo=(D)=>bf(D,decodeURI),hf=(D)=>{let F=D.url,$=F.indexOf("/",8),B=$;for(;B<F.length;B++){let J=F.charCodeAt(B);if(J===37){let Y=F.indexOf("?",B),X=F.slice($,Y===-1?void 0:Y);return Qo(X.includes("%25")?X.replace(/%25/g,"%2525"):X)}else if(J===63)break}return F.slice($,B)};var xL=(D)=>{let F=hf(D);return F.length>1&&F.at(-1)==="/"?F.slice(0,-1):F},D7=(D,F,...$)=>{if($.length)F=D7(F,...$);return`${D?.[0]==="/"?"":"/"}${D}${F==="/"?"":`${D?.at(-1)==="/"?"":"/"}${F?.[0]==="/"?F.slice(1):F}`}`},jY=(D)=>{if(D.charCodeAt(D.length-1)!==63||!D.includes(":"))return null;let F=D.split("/"),$=[],B="";return F.forEach((J)=>{if(J!==""&&!/\:/.test(J))B+="/"+J;else if(/\:/.test(J))if(/\?/.test(J)){if($.length===0&&B==="")$.push("/");else $.push(B);let Y=J.replace("?","");B+="/"+Y,$.push(B)}else B+="/"+J}),$.filter((J,Y,X)=>X.indexOf(J)===Y)},If=(D)=>{if(!/[%+]/.test(D))return D;if(D.indexOf("+")!==-1)D=D.replace(/\+/g," ");return D.indexOf("%")!==-1?AB(D):D},kL=(D,F,$)=>{let B;if(!$&&F&&!/[%+]/.test(F)){let X=D.indexOf(`?${F}`,8);if(X===-1)X=D.indexOf(`&${F}`,8);while(X!==-1){let Q=D.charCodeAt(X+F.length+1);if(Q===61){let w=X+F.length+2,f=D.indexOf("&",w);return If(D.slice(w,f===-1?void 0:f))}else if(Q==38||isNaN(Q))return"";X=D.indexOf(`&${F}`,X+1)}if(B=/[%+]/.test(D),!B)return}let J={};B??=/[%+]/.test(D);let Y=D.indexOf("?",8);while(Y!==-1){let X=D.indexOf("&",Y+1),Q=D.indexOf("=",Y);if(Q>X&&X!==-1)Q=-1;let w=D.slice(Y+1,Q===-1?X===-1?void 0:X:Q);if(B)w=If(w);if(Y=X,w==="")continue;let f;if(Q===-1)f="";else if(f=D.slice(Q+1,X===-1?void 0:X),B)f=If(f);if($){if(!(J[w]&&Array.isArray(J[w])))J[w]=[];J[w].push(f)}else J[w]??=f}return F?J[F]:J},uL=kL,vL=(D,F)=>{return kL(D,F,!0)},AB=decodeURIComponent;var gL=(D)=>bf(D,AB),AY=class{raw;#F;#D;routeIndex=0;path;bodyCache={};constructor(D,F="/",$=[[]]){this.raw=D,this.path=F,this.#D=$,this.#F={}}param(D){return D?this.#B(D):this.#Y()}#B(D){let F=this.#D[0][this.routeIndex][1][D],$=this.#J(F);return $?/\%/.test($)?gL($):$:void 0}#Y(){let D={},F=Object.keys(this.#D[0][this.routeIndex][1]);for(let $ of F){let B=this.#J(this.#D[0][this.routeIndex][1][$]);if(B&&typeof B==="string")D[$]=/\%/.test(B)?gL(B):B}return D}#J(D){return this.#D[1]?this.#D[1][D]:D}query(D){return uL(this.url,D)}queries(D){return vL(this.url,D)}header(D){if(D)return this.raw.headers.get(D)??void 0;let F={};return this.raw.headers.forEach(($,B)=>{F[B]=$}),F}async parseBody(D){return this.bodyCache.parsedBody??=await SL(this,D)}#$=(D)=>{let{bodyCache:F,raw:$}=this,B=F[D];if(B)return B;let J=Object.keys(F)[0];if(J)return F[J].then((Y)=>{if(J==="json")Y=JSON.stringify(Y);return new Response(Y)[D]()});return F[D]=$[D]()};json(){return this.#$("json")}text(){return this.#$("text")}arrayBuffer(){return this.#$("arrayBuffer")}blob(){return this.#$("blob")}formData(){return this.#$("formData")}addValidatedData(D,F){this.#F[D]=F}valid(D){return this.#F[D]}get url(){return this.raw.url}get method(){return this.raw.method}get matchedRoutes(){return this.#D[0].map(([[,D]])=>D)}get routePath(){return this.#D[0].map(([[,D]])=>D)[this.routeIndex].path}};var UY={Stringify:1,BeforeStream:2,Stream:3},wo=(D,F)=>{let $=new String(D);return $.isEscaped=!0,$.callbacks=F,$};var OB=async(D,F,$,B,J)=>{if(typeof D==="object"&&!(D instanceof String)){if(!(D instanceof Promise))D=D.toString();if(D instanceof Promise)D=await D}let Y=D.callbacks;if(!Y?.length)return Promise.resolve(D);if(J)J[0]+=D;else J=[D];let X=Promise.all(Y.map((Q)=>Q({phase:F,buffer:J,context:B}))).then((Q)=>Promise.all(Q.filter(Boolean).map((w)=>OB(w,F,!1,B,J))).then(()=>J[0]));if($)return wo(await X,Y);else return X};var mL="text/plain; charset=UTF-8",Sf=(D,F={})=>{for(let $ of Object.keys(F))D.set($,F[$]);return D},cL=class{#F;#D;env={};#B;finalized=!1;error;#Y=200;#J;#$;#X;#w;#f=!0;#H;#W;#G;#E;#K;constructor(D,F){if(this.#F=D,F)this.#J=F.executionCtx,this.env=F.env,this.#G=F.notFoundHandler,this.#K=F.path,this.#E=F.matchResult}get req(){return this.#D??=new AY(this.#F,this.#K,this.#E),this.#D}get event(){if(this.#J&&"respondWith"in this.#J)return this.#J;else throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#J)return this.#J;else throw Error("This context has no ExecutionContext")}get res(){return this.#f=!1,this.#w||=new Response("404 Not Found",{status:404})}set res(D){if(this.#f=!1,this.#w&&D){D=new Response(D.body,D);for(let[F,$]of this.#w.headers.entries()){if(F==="content-type")continue;if(F==="set-cookie"){let B=this.#w.headers.getSetCookie();D.headers.delete("set-cookie");for(let J of B)D.headers.append("set-cookie",J)}else D.headers.set(F,$)}}this.#w=D,this.finalized=!0}render=(...D)=>{return this.#W??=(F)=>this.html(F),this.#W(...D)};setLayout=(D)=>this.#H=D;getLayout=()=>this.#H;setRenderer=(D)=>{this.#W=D};header=(D,F,$)=>{if(this.finalized)this.#w=new Response(this.#w.body,this.#w);if(F===void 0){if(this.#$)this.#$.delete(D);else if(this.#X)delete this.#X[D.toLocaleLowerCase()];if(this.finalized)this.res.headers.delete(D);return}if($?.append){if(!this.#$)this.#f=!1,this.#$=new Headers(this.#X),this.#X={};this.#$.append(D,F)}else if(this.#$)this.#$.set(D,F);else this.#X??={},this.#X[D.toLowerCase()]=F;if(this.finalized)if($?.append)this.res.headers.append(D,F);else this.res.headers.set(D,F)};status=(D)=>{this.#f=!1,this.#Y=D};set=(D,F)=>{this.#B??=new Map,this.#B.set(D,F)};get=(D)=>{return this.#B?this.#B.get(D):void 0};get var(){if(!this.#B)return{};return Object.fromEntries(this.#B)}#Q(D,F,$){if(this.#f&&!$&&!F&&this.#Y===200)return new Response(D,{headers:this.#X});if(F&&typeof F!=="number"){let J=new Headers(F.headers);if(this.#$)this.#$.forEach((X,Q)=>{if(Q==="set-cookie")J.append(Q,X);else J.set(Q,X)});let Y=Sf(J,this.#X);return new Response(D,{headers:Y,status:F.status??this.#Y})}let B=typeof F==="number"?F:this.#Y;if(this.#X??={},this.#$??=new Headers,Sf(this.#$,this.#X),this.#w)this.#w.headers.forEach((J,Y)=>{if(Y==="set-cookie")this.#$?.append(Y,J);else this.#$?.set(Y,J)}),Sf(this.#$,this.#X);$??={};for(let[J,Y]of Object.entries($))if(typeof Y==="string")this.#$.set(J,Y);else{this.#$.delete(J);for(let X of Y)this.#$.append(J,X)}return new Response(D,{status:B,headers:this.#$})}newResponse=(...D)=>this.#Q(...D);body=(D,F,$)=>{return typeof F==="number"?this.#Q(D,F,$):this.#Q(D,F)};text=(D,F,$)=>{if(!this.#X){if(this.#f&&!$&&!F)return new Response(D);this.#X={}}if(this.#X["content-type"]=mL,typeof F==="number")return this.#Q(D,F,$);return this.#Q(D,F)};json=(D,F,$)=>{let B=JSON.stringify(D);return this.#X??={},this.#X["content-type"]="application/json",typeof F==="number"?this.#Q(B,F,$):this.#Q(B,F)};html=(D,F,$)=>{if(this.#X??={},this.#X["content-type"]="text/html; charset=UTF-8",typeof D==="object")return OB(D,UY.Stringify,!1,{}).then((B)=>{return typeof F==="number"?this.#Q(B,F,$):this.#Q(B,F)});return typeof F==="number"?this.#Q(D,F,$):this.#Q(D,F)};redirect=(D,F)=>{return this.#$??=new Headers,this.#$.set("Location",String(D)),this.newResponse(null,F??302)};notFound=()=>{return this.#G??=()=>new Response,this.#G(this)}};var K1="ALL",pL="all",iL=["get","post","put","delete","options","patch"],RY="Can not add a route since the matcher is already built.",CY=class extends Error{};var dL="__COMPOSED_HANDLER";var fo=(D)=>{return D.text("404 Not Found",404)},lL=(D,F)=>{if("getResponse"in D)return D.getResponse();return console.error(D),F.text("Internal Server Error",500)},yf=class{get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#F="/";routes=[];constructor(D={}){[...iL,pL].forEach((J)=>{this[J]=(Y,...X)=>{if(typeof Y==="string")this.#F=Y;else this.#Y(J,this.#F,Y);return X.forEach((Q)=>{this.#Y(J,this.#F,Q)}),this}}),this.on=(J,Y,...X)=>{for(let Q of[Y].flat()){this.#F=Q;for(let w of[J].flat())X.map((f)=>{this.#Y(w.toUpperCase(),this.#F,f)})}return this},this.use=(J,...Y)=>{if(typeof J==="string")this.#F=J;else this.#F="*",Y.unshift(J);return Y.forEach((X)=>{this.#Y(K1,this.#F,X)}),this};let{strict:$,...B}=D;Object.assign(this,B),this.getPath=$??!0?D.getPath??hf:xL}#D(){let D=new yf({router:this.router,getPath:this.getPath});return D.errorHandler=this.errorHandler,D.#B=this.#B,D.routes=this.routes,D}#B=fo;errorHandler=lL;route(D,F){let $=this.basePath(D);return F.routes.map((B)=>{let J;if(F.errorHandler===lL)J=B.handler;else J=async(Y,X)=>(await zf([],F.errorHandler)(Y,()=>B.handler(Y,X))).res,J[dL]=B.handler;$.#Y(B.method,B.path,J)}),this}basePath(D){let F=this.#D();return F._basePath=D7(this._basePath,D),F}onError=(D)=>{return this.errorHandler=D,this};notFound=(D)=>{return this.#B=D,this};mount(D,F,$){let B,J;if($)if(typeof $==="function")J=$;else if(J=$.optionHandler,$.replaceRequest===!1)B=(Q)=>Q;else B=$.replaceRequest;let Y=J?(Q)=>{let w=J(Q);return Array.isArray(w)?w:[w]}:(Q)=>{let w=void 0;try{w=Q.executionCtx}catch{}return[Q.env,w]};B||=(()=>{let Q=D7(this._basePath,D),w=Q==="/"?0:Q.length;return(f)=>{let G=new URL(f.url);return G.pathname=G.pathname.slice(w)||"/",new Request(G,f)}})();let X=async(Q,w)=>{let f=await F(B(Q.req.raw),...Y(Q));if(f)return f;await w()};return this.#Y(K1,D7(D,"*"),X),this}#Y(D,F,$){D=D.toUpperCase(),F=D7(this._basePath,F);let B={path:F,method:D,handler:$};this.router.add(D,F,[$,B]),this.routes.push(B)}#J(D,F){if(D instanceof Error)return this.errorHandler(D,F);throw D}#$(D,F,$,B){if(B==="HEAD")return(async()=>new Response(null,await this.#$(D,F,$,"GET")))();let J=this.getPath(D,{env:$}),Y=this.router.match(B,J),X=new cL(D,{path:J,matchResult:Y,env:$,executionCtx:F,notFoundHandler:this.#B});if(Y[0].length===1){let w;try{w=Y[0][0][0][0](X,async()=>{X.res=await this.#B(X)})}catch(f){return this.#J(f,X)}return w instanceof Promise?w.then((f)=>f||(X.finalized?X.res:this.#B(X))).catch((f)=>this.#J(f,X)):w??this.#B(X)}let Q=zf(Y[0],this.errorHandler,this.#B);return(async()=>{try{let w=await Q(X);if(!w.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return w.res}catch(w){return this.#J(w,X)}})()}fetch=(D,...F)=>{return this.#$(D,F[1],F[0],D.method)};request=(D,F,$,B)=>{if(D instanceof Request)return this.fetch(F?new Request(D,F):D,$,B);return D=D.toString(),this.fetch(new Request(/^https?:\/\//.test(D)?D:`http://localhost${D7("/",D)}`,F),$,B)};fire=()=>{addEventListener("fetch",(D)=>{D.respondWith(this.#$(D.request,D,void 0,D.request.method))})}};var ZY="[^/]+",jB=".*",UB="(?:|/.*)",z9=Symbol(),Wo=new Set(".\\+*[^]$()");function Go(D,F){if(D.length===1)return F.length===1?D<F?-1:1:-1;if(F.length===1)return 1;if(D===jB||D===UB)return 1;else if(F===jB||F===UB)return-1;if(D===ZY)return 1;else if(F===ZY)return-1;return D.length===F.length?D<F?-1:1:F.length-D.length}var NY=class{#F;#D;#B=Object.create(null);insert(D,F,$,B,J){if(D.length===0){if(this.#F!==void 0)throw z9;if(J)return;this.#F=F;return}let[Y,...X]=D,Q=Y==="*"?X.length===0?["","",jB]:["","",ZY]:Y==="/*"?["","",UB]:Y.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),w;if(Q){let f=Q[1],G=Q[2]||ZY;if(f&&Q[2]){if(G=G.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(G))throw z9}if(w=this.#B[G],!w){if(Object.keys(this.#B).some((H)=>H!==jB&&H!==UB))throw z9;if(J)return;if(w=this.#B[G]=new NY,f!=="")w.#D=B.varIndex++}if(!J&&f!=="")$.push([f,w.#D])}else if(w=this.#B[Y],!w){if(Object.keys(this.#B).some((f)=>f.length>1&&f!==jB&&f!==UB))throw z9;if(J)return;w=this.#B[Y]=new NY}w.insert(X,F,$,B,J)}buildRegExpStr(){let F=Object.keys(this.#B).sort(Go).map(($)=>{let B=this.#B[$];return(typeof B.#D==="number"?`(${$})@${B.#D}`:Wo.has($)?`\\${$}`:$)+B.buildRegExpStr()});if(typeof this.#F==="number")F.unshift(`#${this.#F}`);if(F.length===0)return"";if(F.length===1)return F[0];return"(?:"+F.join("|")+")"}};var nL=class{#F={varIndex:0};#D=new NY;insert(D,F,$){let B=[],J=[];for(let X=0;;){let Q=!1;if(D=D.replace(/\{[^}]+\}/g,(w)=>{let f=`@\\${X}`;return J[X]=[f,w],X++,Q=!0,f}),!Q)break}let Y=D.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let X=J.length-1;X>=0;X--){let[Q]=J[X];for(let w=Y.length-1;w>=0;w--)if(Y[w].indexOf(Q)!==-1){Y[w]=Y[w].replace(Q,J[X][1]);break}}return this.#D.insert(Y,F,B,this.#F,$),B}buildRegExp(){let D=this.#D.buildRegExpStr();if(D==="")return[/^$/,[],[]];let F=0,$=[],B=[];return D=D.replace(/#(\d+)|@(\d+)|\.\*\$/g,(J,Y,X)=>{if(Y!==void 0)return $[++F]=Number(Y),"$()";if(X!==void 0)return B[Number(X)]=++F,"";return""}),[new RegExp(`^${D}`),$,B]}};var oL=[],Ho=[/^$/,[],Object.create(null)],rL=Object.create(null);function tL(D){return rL[D]??=new RegExp(D==="*"?"":`^${D.replace(/\/\*$|([.\\+*[^\]$()])/g,(F,$)=>$?`\\${$}`:"(?:|/.*)")}$`)}function Eo(){rL=Object.create(null)}function Ko(D){let F=new nL,$=[];if(D.length===0)return Ho;let B=D.map((f)=>[!/\*|\/:/.test(f[0]),...f]).sort(([f,G],[H,K])=>f?1:H?-1:G.length-K.length),J=Object.create(null);for(let f=0,G=-1,H=B.length;f<H;f++){let[K,E,O]=B[f];if(K)J[E]=[O.map(([U])=>[U,Object.create(null)]),oL];else G++;let q;try{q=F.insert(E,G,K)}catch(U){throw U===z9?new CY(E):U}if(K)continue;$[G]=O.map(([U,N])=>{let L=Object.create(null);N-=1;for(;N>=0;N--){let[C,R]=q[N];L[C]=R}return[U,L]})}let[Y,X,Q]=F.buildRegExp();for(let f=0,G=$.length;f<G;f++)for(let H=0,K=$[f].length;H<K;H++){let E=$[f][H]?.[1];if(!E)continue;let O=Object.keys(E);for(let q=0,U=O.length;q<U;q++)E[O[q]]=Q[E[O[q]]]}let w=[];for(let f in X)w[f]=$[X[f]];return[Y,w,J]}function I9(D,F){if(!D)return;for(let $ of Object.keys(D).sort((B,J)=>J.length-B.length))if(tL($).test(F))return[...D[$]];return}var xf=class{name="RegExpRouter";#F;#D;constructor(){this.#F={[K1]:Object.create(null)},this.#D={[K1]:Object.create(null)}}add(D,F,$){let B=this.#F,J=this.#D;if(!B||!J)throw new Error(RY);if(!B[D])[B,J].forEach((Q)=>{Q[D]=Object.create(null),Object.keys(Q[K1]).forEach((w)=>{Q[D][w]=[...Q[K1][w]]})});if(F==="/*")F="*";let Y=(F.match(/\/:/g)||[]).length;if(/\*$/.test(F)){let Q=tL(F);if(D===K1)Object.keys(B).forEach((w)=>{B[w][F]||=I9(B[w],F)||I9(B[K1],F)||[]});else B[D][F]||=I9(B[D],F)||I9(B[K1],F)||[];Object.keys(B).forEach((w)=>{if(D===K1||D===w)Object.keys(B[w]).forEach((f)=>{Q.test(f)&&B[w][f].push([$,Y])})}),Object.keys(J).forEach((w)=>{if(D===K1||D===w)Object.keys(J[w]).forEach((f)=>Q.test(f)&&J[w][f].push([$,Y]))});return}let X=jY(F)||[F];for(let Q=0,w=X.length;Q<w;Q++){let f=X[Q];Object.keys(J).forEach((G)=>{if(D===K1||D===G)J[G][f]||=[...I9(B[G],f)||I9(B[K1],f)||[]],J[G][f].push([$,Y-w+Q+1])})}}match(D,F){Eo();let $=this.#B();return this.match=(B,J)=>{let Y=$[B]||$[K1],X=Y[2][J];if(X)return X;let Q=J.match(Y[0]);if(!Q)return[[],oL];let w=Q.indexOf("",1);return[Y[1][w],Q]},this.match(D,F)}#B(){let D=Object.create(null);return Object.keys(this.#D).concat(Object.keys(this.#F)).forEach((F)=>{D[F]||=this.#Y(F)}),this.#F=this.#D=void 0,D}#Y(D){let F=[],$=D===K1;if([this.#F,this.#D].forEach((B)=>{let J=B[D]?Object.keys(B[D]).map((Y)=>[Y,B[D][Y]]):[];if(J.length!==0)$||=!0,F.push(...J);else if(D!==K1)F.push(...Object.keys(B[K1]).map((Y)=>[Y,B[K1][Y]]))}),!$)return null;else return Ko(F)}};var kf=class{name="SmartRouter";#F=[];#D=[];constructor(D){this.#F=D.routers}add(D,F,$){if(!this.#D)throw new Error(RY);this.#D.push([D,F,$])}match(D,F){if(!this.#D)throw new Error("Fatal error");let $=this.#F,B=this.#D,J=$.length,Y=0,X;for(;Y<J;Y++){let Q=$[Y];try{for(let w=0,f=B.length;w<f;w++)Q.add(...B[w]);X=Q.match(D,F)}catch(w){if(w instanceof CY)continue;throw w}this.match=Q.match.bind(Q),this.#F=[Q],this.#D=void 0;break}if(Y===J)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,X}get activeRouter(){if(this.#D||this.#F.length!==1)throw new Error("No active router has been determined yet.");return this.#F[0]}};var RB=Object.create(null),uf=class{#F;#D;#B;#Y=0;#J=RB;constructor(D,F,$){if(this.#D=$||Object.create(null),this.#F=[],D&&F){let B=Object.create(null);B[D]={handler:F,possibleKeys:[],score:0},this.#F=[B]}this.#B=[]}insert(D,F,$){this.#Y=++this.#Y;let B=this,J=yL(F),Y=[];for(let w=0,f=J.length;w<f;w++){let G=J[w],H=J[w+1],K=Pf(G,H),E=Array.isArray(K)?K[0]:G;if(Object.keys(B.#D).includes(E)){B=B.#D[E];let O=Pf(G,H);if(O)Y.push(O[1]);continue}if(B.#D[E]=new uf,K)B.#B.push(K),Y.push(K[1]);B=B.#D[E]}let X=Object.create(null),Q={handler:$,possibleKeys:Y.filter((w,f,G)=>G.indexOf(w)===f),score:this.#Y};return X[D]=Q,B.#F.push(X),B}#$(D,F,$,B){let J=[];for(let Y=0,X=D.#F.length;Y<X;Y++){let Q=D.#F[Y],w=Q[F]||Q[K1],f={};if(w!==void 0){if(w.params=Object.create(null),J.push(w),$!==RB||B&&B!==RB)for(let G=0,H=w.possibleKeys.length;G<H;G++){let K=w.possibleKeys[G],E=f[w.score];w.params[K]=B?.[K]&&!E?B[K]:$[K]??B?.[K],f[w.score]=!0}}}return J}search(D,F){let $=[];this.#J=RB;let J=[this],Y=Tf(F),X=[];for(let Q=0,w=Y.length;Q<w;Q++){let f=Y[Q],G=Q===w-1,H=[];for(let K=0,E=J.length;K<E;K++){let O=J[K],q=O.#D[f];if(q)if(q.#J=O.#J,G){if(q.#D["*"])$.push(...this.#$(q.#D["*"],D,O.#J));$.push(...this.#$(q,D,O.#J))}else H.push(q);for(let U=0,N=O.#B.length;U<N;U++){let L=O.#B[U],C=O.#J===RB?{}:{...O.#J};if(L==="*"){let v=O.#D["*"];if(v)$.push(...this.#$(v,D,O.#J)),v.#J=C,H.push(v);continue}if(f==="")continue;let[R,I,h]=L,p=O.#D[R],P=Y.slice(Q).join("/");if(h instanceof RegExp){let v=h.exec(P);if(v){if(C[I]=v[0],$.push(...this.#$(p,D,O.#J,C)),Object.keys(p.#D).length){p.#J=C;let n=v[0].match(/\//)?.length??0;(X[n]||=[]).push(p)}continue}}if(h===!0||h.test(f))if(C[I]=f,G){if($.push(...this.#$(p,D,C,O.#J)),p.#D["*"])$.push(...this.#$(p.#D["*"],D,C,O.#J))}else p.#J=C,H.push(p)}}J=H.concat(X.shift()??[])}if($.length>1)$.sort((Q,w)=>{return Q.score-w.score});return[$.map(({handler:Q,params:w})=>[Q,w])]}};var vf=class{name="TrieRouter";#F;constructor(){this.#F=new uf}add(D,F,$){let B=jY(F);if(B){for(let J=0,Y=B.length;J<Y;J++)this.#F.insert(D,B[J],$);return}this.#F.insert(D,F,$)}match(D,F){return this.#F.search(D,F)}};var gf=class extends yf{constructor(D={}){super(D);this.router=D.router??new kf({routers:[new xf,new vf]})}};var mf=class{writer;encoder;writable;abortSubscribers=[];responseReadable;aborted=!1;closed=!1;constructor(D,F){this.writable=D,this.writer=D.getWriter(),this.encoder=new TextEncoder;let $=F.getReader();this.abortSubscribers.push(async()=>{await $.cancel()}),this.responseReadable=new ReadableStream({async pull(B){let{done:J,value:Y}=await $.read();J?B.close():B.enqueue(Y)},cancel:()=>{this.abort()}})}async write(D){try{if(typeof D==="string")D=this.encoder.encode(D);await this.writer.write(D)}catch{}return this}async writeln(D){return await this.write(D+`
`),this}sleep(D){return new Promise((F)=>setTimeout(F,D))}async close(){try{await this.writer.close()}catch{}this.closed=!0}async pipe(D){this.writer.releaseLock(),await D.pipeTo(this.writable,{preventClose:!0}),this.writer=this.writable.getWriter()}onAbort(D){this.abortSubscribers.push(D)}abort(){if(!this.aborted)this.aborted=!0,this.abortSubscribers.forEach((D)=>D())}};var MY=()=>{let D=typeof Bun!=="undefined"?Bun.version:void 0;if(D===void 0)return!1;let F=D.startsWith("1.1")||D.startsWith("1.0")||D.startsWith("0.");return MY=()=>F,F};var sL=class extends mf{constructor(D,F){super(D,F)}async writeSSE(D){let $=(await OB(D.data,UY.Stringify,!1,{})).split(`
`).map((J)=>{return`data: ${J}`}).join(`
`),B=[D.event&&`event: ${D.event}`,$,D.id&&`id: ${D.id}`,D.retry&&`retry: ${D.retry}`].filter(Boolean).join(`
`)+`

`;await this.write(B)}},qo=async(D,F,$)=>{try{await F(D)}catch(B){if(B instanceof Error&&$)await $(B,D),await D.writeSSE({event:"error",data:B.message});else console.error(B)}finally{D.close()}},Vo=new WeakMap,cf=(D,F,$)=>{let{readable:B,writable:J}=new TransformStream,Y=new sL(J,B);if(MY())D.req.raw.signal.addEventListener("abort",()=>{if(!Y.closed)Y.abort()});return Vo.set(Y.responseReadable,D),D.header("Transfer-Encoding","chunked"),D.header("Content-Type","text/event-stream"),D.header("Cache-Control","no-cache"),D.header("Connection","keep-alive"),qo(Y,F,$),D.newResponse(Y.responseReadable)};await l2();await fB();var Oo=/^[\w!#$%&'*.^`|~+-]+$/,jo=/^[ !#-:<-[\]-~]*$/,pf=(D,F)=>{if(F&&D.indexOf(F)===-1)return{};let $=D.trim().split(";"),B={};for(let J of $){J=J.trim();let Y=J.indexOf("=");if(Y===-1)continue;let X=J.substring(0,Y).trim();if(F&&F!==X||!Oo.test(X))continue;let Q=J.substring(Y+1).trim();if(Q.startsWith('"')&&Q.endsWith('"'))Q=Q.slice(1,-1);if(jo.test(Q)){if(B[X]=AB(Q),F)break}}return B};var aL=(D,F,$)=>{let B=D.req.raw.headers.get("Cookie");if(typeof F==="string"){if(!B)return;let Y=F;if($==="secure")Y="__Secure-"+F;else if($==="host")Y="__Host-"+F;return pf(B,Y)[Y]}if(!B)return{};return pf(B)};var eL=(D,F)=>{return new Response(D,{headers:{"Content-Type":F}}).formData()};var Uo=/^application\/([a-z-\.]+\+)?json(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,Ro=/^multipart\/form-data(;\s?boundary=[a-zA-Z0-9'"()+_,\-./:=?]+)?$/,Co=/^application\/x-www-form-urlencoded(;\s*[a-zA-Z0-9\-]+\=([^;]+))*$/,df=(D,F)=>{return async($,B)=>{let J={},Y=$.req.header("Content-Type");switch(D){case"json":if(!Y||!Uo.test(Y))break;try{J=await $.req.json()}catch{throw new VB(400,{message:"Malformed JSON in request body"})}break;case"form":{if(!Y||!(Ro.test(Y)||Co.test(Y)))break;let Q;if($.req.bodyCache.formData)Q=await $.req.bodyCache.formData;else try{let f=await $.req.arrayBuffer();Q=await eL(f,Y),$.req.bodyCache.formData=Q}catch(f){let G="Malformed FormData request.";throw G+=f instanceof Error?` ${f.message}`:` ${String(f)}`,new VB(400,{message:G})}let w={};Q.forEach((f,G)=>{if(G.endsWith("[]"))(w[G]??=[]).push(f);else if(Array.isArray(w[G]))w[G].push(f);else if(G in w)w[G]=[w[G],f];else w[G]=f}),J=w;break}case"query":J=Object.fromEntries(Object.entries($.req.queries()).map(([Q,w])=>{return w.length===1?[Q,w[0]]:[Q,w]}));break;case"param":J=$.req.param();break;case"header":J=$.req.header();break;case"cookie":J=aL($);break}let X=await F(J,$);if(X instanceof Response)return X;$.req.addValidatedData(D,X),await B()}};C0();var Dz=(D,F,$,B)=>df(D,async(J,Y)=>{let X=J;if(D==="header"&&F instanceof nD){let w=Object.keys(F.shape),f=Object.fromEntries(w.map((G)=>[G.toLowerCase(),G]));X=Object.fromEntries(Object.entries(J).map(([G,H])=>[f[G]||G,H]))}let Q=B&&B.validationFunction?await B.validationFunction(F,X):await F.safeParseAsync(X);if($){let w=await $({data:X,...Q,target:D},Y);if(w){if(w instanceof Response)return w;if("response"in w)return w.response}}if(!Q.success)return Y.json(Q,400);return Q.data});JX();var JD=(D,F)=>{var $;return(($=D==null?void 0:D._def)==null?void 0:$.typeName)===F},LY=(D)=>{var F;return Boolean((F=D==null?void 0:D._def)==null?void 0:F.typeName)},Fz=["3.0.0","3.0.1","3.0.2","3.0.3","3.1.0"],t2=(D,F)=>Fz.indexOf(D)>=Fz.indexOf(F),nf=(D,F,$)=>{if(t2($.components.openapi,"3.1.0"))return{type:"ref",schema:{$ref:D.schema.$ref,description:F},zodType:D.zodType,effects:D.effects,schemaObject:D.schemaObject};return{type:"schema",schema:{description:F,allOf:[D.schema]},effects:D.effects}},of=(D,F)=>{if(typeof D!==typeof F)return!1;if(typeof D==="string"||typeof D==="number"||typeof D==="boolean")return D===F;if(Array.isArray(D)&&Array.isArray(F)){let $=[...D].sort(),B=[...F].sort();return $.every((J,Y)=>of(J,B[Y]))}if(D===null||F===null)return D===F;if(typeof D==="object"&&typeof F==="object")return Object.keys(D).every((B)=>of(D[B],F[B]));return D===F},ef=(D,F,$,B)=>{let J=Object.entries(F).reduce((X,[Q,w])=>{if(w===void 0)return X;return X[Q]=w,X},{}),Y=Object.values(J).length;if(D.type==="ref"){if(Y===0)return D;if(Y===1&&F.description)return nf(D,F.description,$);return{type:"schema",schema:{allOf:[D.schema],...F},effects:D.effects}}if(B&&D.schema.type!=="object"){let X=Object.entries({...D.schema,...J}).reduce((w,[f,G])=>{if(B.schemaObject&&of(B.schemaObject[f],G))return w;return w[f]=G,w},{}),Q=Object.values(X).length;if(Q===0)return{type:"ref",schema:{$ref:B.schema.$ref},effects:D.effects,schemaObject:B.schemaObject,zodType:B.zodType};if(Q===1&&typeof X.description==="string")return nf(B,X.description,$);return{type:"schema",schema:{allOf:[B.schema],...X},effects:D.effects}}return{type:"schema",schema:{...D.schema,...F},effects:D.effects}},Zo=(D,F)=>{var $,B,J,Y;let X=D._def.type,Q=(($=D._def.exactLength)==null?void 0:$.value)??((B=D._def.minLength)==null?void 0:B.value),w=((J=D._def.exactLength)==null?void 0:J.value)??((Y=D._def.maxLength)==null?void 0:Y.value),f=gD(X,F,["array items"]);return{type:"schema",schema:{type:"array",items:f.schema,...Q!==void 0&&{minItems:Q},...w!==void 0&&{maxItems:w}},effects:f.effects}},No=(D)=>({type:"schema",schema:{type:"integer",format:"int64"}}),Mo=(D)=>({type:"schema",schema:{type:"boolean"}}),_o=(D,F)=>gD(D._def.type,F,["brand"]),Lo=(D,F,$)=>{let B=gD(D._def.innerType,F,["default"]),J=D.safeParse(void 0),Y=J.success?{default:J.data}:{};return ef(B,Y,F,$)},zo=(D,F)=>{var $;return{type:"schema",schema:(($=F.documentOptions)==null?void 0:$.defaultDateSchema)??{type:"string"}}},Io=(D,F,$)=>{let B=gD(D._def.innerType,F,["default"]);return ef(B,{default:D._def.defaultValue()},F,$)},rf=(D,F)=>{let $=To(D._def.values),{numbers:B,strings:J}=Po($);if(J.length&&B.length){if(t2(F.components.openapi,"3.1.0"))return{type:"schema",schema:{type:["string","number"],enum:[...J,...B]}};return{type:"schema",schema:{oneOf:[{type:"string",enum:J},{type:"number",enum:B}]}}}if(J.length)return{type:"schema",schema:{type:"string",enum:J}};return{type:"schema",schema:{type:"number",enum:B}}},To=(D)=>{return Object.keys(D).filter(($)=>typeof D[D[$]]!=="number").map(($)=>D[$])},Po=(D)=>({strings:D.filter((F)=>typeof F==="string"),numbers:D.filter((F)=>typeof F==="number")}),bo=(D,F)=>{var $,B,J,Y,X,Q;if(((B=($=D._def.zodOpenApi)==null?void 0:$.openapi)==null?void 0:B.effectType)==="output")return{type:"schema",schema:$z(D,F)};if(((Y=(J=D._def.zodOpenApi)==null?void 0:J.openapi)==null?void 0:Y.effectType)==="input"||((Q=(X=D._def.zodOpenApi)==null?void 0:X.openapi)==null?void 0:Q.effectType)==="same")return gD(D._def.schema,F,["transform input"]);if(F.type==="output")return{type:"schema",schema:$z(D,F)};let w=gD(D._def.schema,F,["transform input"]);return{...w,effects:fF([[{type:"schema",creationType:"input",zodType:D,path:[...F.path]}],w.effects])}},$z=(D,F)=>{var $,B,J;if(!((B=($=D._def.zodOpenApi)==null?void 0:$.openapi)==null?void 0:B.type)){let X=`${D.constructor.name} - ${D._def.effect.type}`;throw new Error(`Failed to determine a type for ${X} at ${F.path.join(" > ")}. Please change the 'effectType' to 'same' or 'input', wrap it in a ZodPipeline or assign it a manual 'type'.`)}return{type:(J=D._def.zodOpenApi)==null?void 0:J.openapi.type}},Bz=(D)=>{if(JD(D,"ZodEffects"))return`${D._def.typeName} - ${D._def.effect.type}`;return D._def.typeName},Xz=(D)=>{let F=Bz(D.zodType),$=D.creationType,B=$==="input"?"output":"input";throw new Error(`The ${F} at ${D.path.join(" > ")} is used within a registered compoment schema${D.component?` (${D.component.ref})`:""} and contains an ${$} transformation${D.component?` (${Bz(D.component.zodType)}) defined at ${D.component.path.join(" > ")}`:""} which is also used in an ${B} schema.

This may cause the schema to render incorrectly and is most likely a mistake. You can resolve this by:

1. Setting an \`effectType\` on one of the transformations to \`same\` (Not applicable for ZodDefault), \`input\` or \`output\` eg. \`.openapi({type: 'same'})\`
2. Wrapping the transformation in a ZodPipeline
3. Assigning a manual type to the transformation eg. \`.openapi({type: 'string'})\`
4. Removing the transformation
5. Deregister the component containing the transformation`)},ho=(D,F)=>{if(D.type==="schema")return{creationType:D.creationType,path:D.path,zodType:D.zodType};if(D.type==="component"){if(F.visited.has(D.zodType))return;let $=F.components.schemas.get(D.zodType);if(($==null?void 0:$.type)!=="complete")throw new Error("Something went wrong, component schema is not complete");if($.resolvedEffect)return{creationType:$.resolvedEffect.creationType,path:D.path,zodType:D.zodType,component:{ref:$.ref,zodType:$.resolvedEffect.zodType,path:$.resolvedEffect.path}};if(!$.effects)return;F.visited.add(D.zodType);let B=Qz($.effects,F);if(F.visited.delete(D.zodType),!B)return;return $.resolvedEffect=B,B}return},Qz=(D,F)=>{let{input:$,output:B}=D.reduce((J,Y)=>{let X=ho(Y,F);if((X==null?void 0:X.creationType)==="input")J.input.push(X);if((X==null?void 0:X.creationType)==="output")J.output.push(X);if(X&&J.input.length>1&&J.output.length>1)Xz(X);return J},{input:[],output:[]});if($.length>0)return $[0];if(B.length>0)return B[0];return},So=(D,F)=>{let $=Qz(D,F);if(($==null?void 0:$.creationType)&&$.creationType!==F.type)Xz($)},fF=(D)=>{let F=D.reduce(($,B)=>{if(B)return $.concat(B);return $},[]);return F.length?F:void 0},yo=(D,F)=>{let $=D.options,B=$.map((X,Q)=>gD(X,F,[`discriminated union option ${Q}`])),J=B.map((X)=>X.schema),Y=xo(J,$,D.discriminator,F);return{type:"schema",schema:{oneOf:J,...Y&&{discriminator:Y}},effects:fF(B.map((X)=>X.effects))}},_Y=(D,F)=>{if(JD(D,"ZodLiteral")){if(typeof D._def.value!=="string")return;return[D._def.value]}if(JD(D,"ZodNativeEnum")){let $=rf(D,F);if($.type==="schema"&&$.schema.type==="string")return $.schema.enum}if(JD(D,"ZodEnum"))return D._def.values;if(JD(D,"ZodBranded"))return _Y(D._def.type,F);if(JD(D,"ZodReadonly"))return _Y(D._def.innerType,F);if(JD(D,"ZodCatch"))return _Y(D._def.innerType,F);return},xo=(D,F,$,B)=>{var J;if(typeof $!=="string")return;let Y={};for(let[X,Q]of F.entries()){let w=D[X],f="$ref"in w?w==null?void 0:w.$ref:void 0;if(!f){if((J=B.documentOptions)==null?void 0:J.enforceDiscriminatedUnionComponents)throw new Error(`Discriminated Union member ${X} at ${B.path.join(" > ")} is not registered as a component`);return}let G=Q.shape[$],H=_Y(G,B);if(!H)return;for(let K of H)Y[K]=f}return{propertyName:$,mapping:Y}},ko=(D)=>({type:"schema",schema:{type:"string",enum:D._def.values}}),uo=(D,F)=>{let B=tf(D).map((J,Y)=>gD(J,F,[`intersection ${Y}`]));return{type:"schema",schema:{allOf:B.map((J)=>J.schema)},effects:fF(B.map((J)=>J.effects))}},tf=(D)=>{if(!JD(D,"ZodIntersection"))return[D];let F=tf(D._def.left),$=tf(D._def.right);return[...F,...$]},vo=(D,F)=>{let $=D._def.getter();return gD($,F,["lazy schema"])},wz=()=>({type:"schema",schema:{type:"null"}}),go=(D,F)=>{if(D.value===null)return wz();if(t2(F.components.openapi,"3.1.0"))return{type:"schema",schema:{type:typeof D.value,const:D.value}};return{type:"schema",schema:{type:typeof D.value,enum:[D.value]}}},Jz=(D,F)=>{var $,B,J;if(!((B=($=D._def.zodOpenApi)==null?void 0:$.openapi)==null?void 0:B.type)){let Y=D.constructor.name;throw new Error(`Unknown schema ${Y} at ${F.path.join(" > ")}. Please assign it a manual 'type'.`)}return{type:"schema",schema:{type:(J=D._def.zodOpenApi)==null?void 0:J.openapi.type}}},mo=(D,F)=>{let $=gD(D.unwrap(),F,["nullable"]);if(t2(F.components.openapi,"3.1.0")){if($.type==="ref"||$.schema.allOf)return{type:"schema",schema:{oneOf:lf([$.schema],F.components.openapi)},effects:$.effects};if($.schema.oneOf){let{oneOf:w,...f}=$.schema;return{type:"schema",schema:{oneOf:lf(w,F.components.openapi),...f},effects:$.effects}}if($.schema.anyOf){let{anyOf:w,...f}=$.schema;return{type:"schema",schema:{anyOf:lf(w,F.components.openapi),...f},effects:$.effects}}let{type:Y,const:X,...Q}=$.schema;if(X)return{type:"schema",schema:{type:Yz(Y),enum:[X,null],...Q},effects:$.effects};return{type:"schema",schema:{type:Yz(Y),...Q,...Q.enum&&{enum:[...Q.enum,null]}},effects:$.effects}}if($.type==="ref")return{type:"schema",schema:{allOf:[$.schema],nullable:!0},effects:$.effects};let{type:B,...J}=$.schema;return{type:"schema",schema:{...B&&{type:B},nullable:!0,...J,...J.enum&&{enum:[...J.enum,null]}},effects:$.effects}},Yz=(D)=>{if(!D)return"null";if(Array.isArray(D))return[...D,"null"];return[D,"null"]},lf=(D,F)=>{if(t2(F,"3.1.0"))return[...D,{type:"null"}];return[...D,{nullable:!0}]},co=(D,F)=>{let $=no(D),B=lo($,F.components.openapi),J=io($,F.components.openapi),Y=po($);return{type:"schema",schema:{type:oo($),...Y&&Y,...B&&B,...J&&J}}},po=(D)=>D.multipleOf?{multipleOf:D.multipleOf.value}:void 0,io=(D,F)=>{if(!D.max)return;let $=D.max.value;if(D.max.inclusive)return{...$!==void 0&&{maximum:$}};if(t2(F,"3.1.0"))return{exclusiveMaximum:$};return{maximum:$,exclusiveMaximum:!0}},lo=(D,F)=>{if(!D.min)return;let $=D.min.value;if(D.min.inclusive)return{...$!==void 0&&{minimum:$}};if(t2(F,"3.1.0"))return{exclusiveMinimum:$};return{minimum:$,exclusiveMinimum:!0}},no=(D)=>D._def.checks.reduce((F,$)=>{return F[$.kind]=$,F},{}),oo=(D)=>D.int?"integer":"number",ro=(D,F)=>gD(D.unwrap(),F,["optional"]),fz=(D)=>JD(D,"ZodNever")||JD(D,"ZodUndefined")||JD(D,"ZodLiteral")&&D._def.value===void 0,to=(D,F,$)=>{let B=so(D,F==null?void 0:F.zodType,$);if(B)return B;return Wz(D.shape,{unknownKeys:D._def.unknownKeys,catchAll:D._def.catchall},$)},so=(D,F,$)=>{var B,J,Y,X,Q;if(!F)return;if($.components.schemas.get(F)??((J=(B=F._def.zodOpenApi)==null?void 0:B.openapi)==null?void 0:J.ref))gD(F,$,["extended schema"]);let f=$.components.schemas.get(F);if(!f)return;let G=ao({unknownKeys:F._def.unknownKeys,catchAll:F._def.catchall},{unknownKeys:D._def.unknownKeys,catchAll:D._def.catchall});if(!G)return;let H=eo(F._def.shape(),D._def.shape());if(!H)return;let K=Wz(H,G,$,!0),E=Object.keys(K.schema).length,O=fF([f.type==="complete"?f.effects:[],f.type==="in-progress"?[{type:"component",zodType:D,path:[...$.path]}]:[],K.effects]);if(E===0)return{type:"ref",schema:{$ref:T9(f.ref,(Y=$.documentOptions)==null?void 0:Y.componentRefPath)},schemaObject:f.type==="complete"?f.schemaObject:void 0,zodType:D,effects:O};if(E===1&&K.schema.description)return nf({type:"ref",schema:{$ref:T9(f.ref,(X=$.documentOptions)==null?void 0:X.componentRefPath)},schemaObject:f.type==="complete"?f.schemaObject:void 0,zodType:D,effects:O},K.schema.description,$);return{type:"schema",schema:{allOf:[{$ref:T9(f.ref,(Q=$.documentOptions)==null?void 0:Q.componentRefPath)}],...K.schema},effects:fF([f.type==="complete"?f.effects:[],f.type==="in-progress"?[{type:"component",zodType:D,path:[...$.path]}]:[],K.effects])}},ao=(D,F)=>{if(D.unknownKeys==="strict"||!JD(D.catchAll,"ZodNever"))return;return{catchAll:F.catchAll,unknownKeys:F.unknownKeys}},eo=(D,F)=>{let $={};for(let[B,J]of Object.entries(F)){let Y=D[B];if(J===Y)continue;if(Y===void 0){$[B]=F[B];continue}return null}return $},Dr=({unknownKeys:D,catchAll:F},$)=>{if(!JD(F,"ZodNever"))return gD(F,$,["additional properties"]);if(D==="strict")return!1;if(D==="passthrough")return!0;return},Wz=(D,{unknownKeys:F,catchAll:$},B,J)=>{let Y=$r(D,B),X=Fr(Y,D,B),Q=Dr({catchAll:$,unknownKeys:F},B);return{type:"schema",schema:{...!J&&{type:"object"},...Y&&{properties:Y.properties},...(X==null?void 0:X.required.length)&&{required:X.required},...Q!==void 0&&{additionalProperties:typeof Q==="object"?Q.schema:Q}},effects:fF([...(Y==null?void 0:Y.effects)??[],typeof Q==="object"&&(Q==null?void 0:Q.effects),X==null?void 0:X.effects])}},Fr=(D,F,$)=>{if(!D)return;let{required:B,effects:J}=Object.entries(D.schemas).reduce((Y,[X,Q])=>{let w=F[X];if(!w)throw new Error("Property somehow doesn't exist in shape");let f=w.safeParse(void 0);if(!f.success)return Y.required.push(X),Y;if(f.data!==void 0){let G={zodType:w,path:[...$.path,`property: ${X}`]},H=Q.type==="ref"?{...G,type:"component"}:{...G,type:"schema",creationType:$.type};if(Y.effects.push(H),$.type==="output")Y.required.push(X)}return Y},{required:[],effects:[]});return{required:B,effects:J}},$r=(D,F)=>{let $=Object.entries(D);if(!$.length)return;return $.reduce((B,[J,Y])=>{if(fz(Y))return B;let X=gD(Y,F,[`property: ${J}`]);return B.schemas[J]=X,B.properties[J]=X.schema,B.effects.push(X.effects),B},{schemas:{},properties:{},effects:[]})},Br=(D,F)=>{var $,B,J,Y,X,Q;if(((B=($=D._def.zodOpenApi)==null?void 0:$.openapi)==null?void 0:B.effectType)==="input"||((Y=(J=D._def.zodOpenApi)==null?void 0:J.openapi)==null?void 0:Y.effectType)==="same")return gD(D._def.in,F,["pipeline input"]);if(((Q=(X=D._def.zodOpenApi)==null?void 0:X.openapi)==null?void 0:Q.effectType)==="output")return gD(D._def.out,F,["pipeline output"]);if(F.type==="input"){let f=gD(D._def.in,F,["pipeline input"]);return{...f,effects:fF([[{type:"schema",creationType:"input",path:[...F.path],zodType:D}],f.effects])}}let w=gD(D._def.out,F,["pipeline output"]);return{...w,effects:fF([[{type:"schema",creationType:"output",path:[...F.path],zodType:D}],w.effects])}},Jr=(D,F)=>gD(D._def.schema,F,["preprocess schema"]),Yr=(D,F)=>gD(D._def.innerType,F,["readonly"]),Xr=(D,F)=>{let $=gD(D.valueSchema,F,["record value"]),B=gD(D.keySchema,F,["record key"]),J=F.components.schemas.get(D.keySchema),Y=J&&J.type==="complete",X=Y&&J.schemaObject,Q=Y&&J.effects||void 0,w=X||B.schema;if("enum"in w&&w.enum)return{type:"schema",schema:{type:"object",properties:w.enum.reduce((f,G)=>{return f[G]=$.schema,f},{}),additionalProperties:!1},effects:fF([B.effects,$.effects,Q])};if(t2(F.components.openapi,"3.1.0")&&"type"in w&&w.type==="string"&&Object.keys(w).length>1)return{type:"schema",schema:{type:"object",propertyNames:B.schema,additionalProperties:$.schema},effects:fF([B.effects,$.effects])};return{type:"schema",schema:{type:"object",additionalProperties:$.schema},effects:$.effects}},Qr=(D,F)=>gD(D._def.schema,F,["refine schema"]),wr=(D,F)=>{var $,B;let J=D._def.valueType,Y=($=D._def.minSize)==null?void 0:$.value,X=(B=D._def.maxSize)==null?void 0:B.value,Q=gD(J,F,["set items"]);return{type:"schema",schema:{type:"array",items:Q.schema,uniqueItems:!0,...Y!==void 0&&{minItems:Y},...X!==void 0&&{maxItems:X}},effects:Q.effects}},fr=(D,F)=>{var $,B,J,Y,X,Q,w,f;let G=Wr(D),H=Vr(G),K=Gr(G),E=((B=($=G.length)==null?void 0:$[0])==null?void 0:B.value)??((Y=(J=G.min)==null?void 0:J[0])==null?void 0:Y.value),O=((Q=(X=G.length)==null?void 0:X[0])==null?void 0:Q.value)??((f=(w=G.max)==null?void 0:w[0])==null?void 0:f.value),q=t2(F.components.openapi,"3.1.0")?Ar(G):void 0;if(K.length<=1)return{type:"schema",schema:{type:"string",...H&&{format:H},...K[0]&&{pattern:K[0]},...E!==void 0&&{minLength:E},...O!==void 0&&{maxLength:O},...q&&{contentEncoding:q}}};return{type:"schema",schema:{allOf:[{type:"string",...H&&{format:H},...K[0]&&{pattern:K[0]},...E!==void 0&&{minLength:E},...O!==void 0&&{maxLength:O},...q&&{contentEncoding:q}},...K.slice(1).map((U)=>({type:"string",pattern:U}))]}}},Wr=(D)=>D._def.checks.reduce((F,$)=>{let B=F[$.kind];if(B)return B.push($),F;return F[$.kind]=[$],F},{}),Gr=(D)=>{let F=Hr(D),$=Er(D),B=Kr(D),J=qr(D);return[...B??[],...F?[F]:[],...$?[$]:[],...J??[]]},Hr=(D)=>{var F,$;if(($=(F=D.startsWith)==null?void 0:F[0])==null?void 0:$.value)return`^${D.startsWith[0].value}`;return},Er=(D)=>{var F,$;if(($=(F=D.endsWith)==null?void 0:F[0])==null?void 0:$.value)return`${D.endsWith[0].value}$`;return},Kr=(D)=>{var F;return(F=D.regex)==null?void 0:F.map(($)=>$.regex.source)},qr=(D)=>{var F;return(F=D.includes)==null?void 0:F.map(($)=>{if($.position===0)return`^${$.value}`;if($.position)return`^.{${$.position}}${$.value}`;return $.value})},Vr=(D)=>{var F,$,B,J;if(D.uuid)return"uuid";if(D.datetime)return"date-time";if(D.date)return"date";if(D.time)return"time";if(D.duration)return"duration";if(D.email)return"email";if(D.url)return"uri";if((F=D.ip)==null?void 0:F.every((Y)=>Y.version==="v4"))return"ipv4";if(($=D.ip)==null?void 0:$.every((Y)=>Y.version==="v6"))return"ipv6";if((B=D.cidr)==null?void 0:B.every((Y)=>Y.version==="v4"))return"ipv4";if((J=D.cidr)==null?void 0:J.every((Y)=>Y.version==="v6"))return"ipv6";return},Ar=(D)=>{if(D.base64)return"base64";return},Or=(D,F)=>{let $=D.items,B=D._def.rest,J=jr($,F);if(t2(F.components.openapi,"3.1.0")){if(!B)return{type:"schema",schema:{type:"array",maxItems:$.length,minItems:$.length,...J&&{prefixItems:J.schemas.map((X)=>X.schema)}},effects:J==null?void 0:J.effects};let Y=gD(B,F,["tuple items"]);return{type:"schema",schema:{type:"array",items:Y.schema,...J&&{prefixItems:J.schemas.map((X)=>X.schema)}},effects:fF([J==null?void 0:J.effects,Y.effects])}}if(!B)return{type:"schema",schema:{type:"array",maxItems:$.length,minItems:$.length,...J&&{items:{oneOf:J.schemas.map((Y)=>Y.schema)}}},effects:J==null?void 0:J.effects};if(J){let Y=gD(B,F,["tuple items"]);return{type:"schema",schema:{type:"array",items:{oneOf:[...J.schemas.map((X)=>X.schema),Y.schema]}},effects:fF([Y.effects,J.effects])}}return{type:"schema",schema:{type:"array"}}},jr=(D,F)=>{if(D.length){let $=D.map((B,J)=>gD(B,F,[`tuple item ${J}`]));return{effects:fF($.map((B)=>B.effects)),schemas:$}}return},Ur=(D,F)=>{var $,B,J;let Y=D.options.reduce((X,Q,w)=>{if(!fz(Q))X.push(gD(Q,F,[`union option ${w}`]));return X},[]);if(((B=($=D._def.zodOpenApi)==null?void 0:$.openapi)==null?void 0:B.unionOneOf)??((J=F.documentOptions)==null?void 0:J.unionOneOf))return{type:"schema",schema:{oneOf:Y.map((X)=>X.schema)},effects:fF(Y.map((X)=>X.effects))};return{type:"schema",schema:{anyOf:Y.map((X)=>X.schema)},effects:fF(Y.map((X)=>X.effects))}},Rr=(D)=>({type:"schema",schema:{}}),Cr=(D,F,$)=>{var B,J;if((J=(B=D._def.zodOpenApi)==null?void 0:B.openapi)==null?void 0:J.type)return Jz(D,$);if(JD(D,"ZodString"))return fr(D,$);if(JD(D,"ZodNumber"))return co(D,$);if(JD(D,"ZodBoolean"))return Mo();if(JD(D,"ZodEnum"))return ko(D);if(JD(D,"ZodLiteral"))return go(D,$);if(JD(D,"ZodNativeEnum"))return rf(D,$);if(JD(D,"ZodArray"))return Zo(D,$);if(JD(D,"ZodObject"))return to(D,F,$);if(JD(D,"ZodUnion"))return Ur(D,$);if(JD(D,"ZodDiscriminatedUnion"))return yo(D,$);if(JD(D,"ZodNull"))return wz();if(JD(D,"ZodNullable"))return mo(D,$);if(JD(D,"ZodOptional"))return ro(D,$);if(JD(D,"ZodReadonly"))return Yr(D,$);if(JD(D,"ZodDefault"))return Io(D,$,F);if(JD(D,"ZodRecord"))return Xr(D,$);if(JD(D,"ZodTuple"))return Or(D,$);if(JD(D,"ZodDate"))return zo(D,$);if(JD(D,"ZodPipeline"))return Br(D,$);if(JD(D,"ZodEffects")&&D._def.effect.type==="transform")return bo(D,$);if(JD(D,"ZodEffects")&&D._def.effect.type==="preprocess")return Jr(D,$);if(JD(D,"ZodEffects")&&D._def.effect.type==="refinement")return Qr(D,$);if(JD(D,"ZodNativeEnum"))return rf(D,$);if(JD(D,"ZodIntersection"))return uo(D,$);if(JD(D,"ZodCatch"))return Lo(D,$,F);if(JD(D,"ZodUnknown")||JD(D,"ZodAny"))return Rr();if(JD(D,"ZodLazy"))return vo(D,$);if(JD(D,"ZodBranded"))return _o(D,$);if(JD(D,"ZodSet"))return wr(D,$);if(JD(D,"ZodBigInt"))return No();return Jz(D,$)},sf=({zodSchema:D,previous:F,state:$})=>{var B;if($.visited.has(D))throw new Error(`The schema at ${$.path.join(" > ")} needs to be registered because it's circularly referenced`);$.visited.add(D);let{effectType:J,param:Y,header:X,ref:Q,refType:w,unionOneOf:f,...G}=((B=D._def.zodOpenApi)==null?void 0:B.openapi)??{},H=Cr(D,F,$),K=ef(H,G,$,F);return $.visited.delete(D),K},Zr=({previous:D,ref:F,zodSchema:$,state:B})=>{var J;B.components.schemas.set($,{type:"in-progress",ref:F});let Y=sf({zodSchema:$,previous:D,state:{...B,visited:new Set}});return B.components.schemas.set($,{type:"complete",ref:F,schemaObject:Y.schema,effects:Y.effects}),{type:"ref",schema:{$ref:T9(F,(J=B.documentOptions)==null?void 0:J.componentRefPath)},schemaObject:Y.schema,effects:Y.effects?[{type:"component",zodType:$,path:[...B.path]}]:void 0,zodType:$}},Nr=(D,F,$)=>{var B,J;if(F&&F.type==="complete")return{type:"ref",schema:{$ref:T9(F.ref,(B=$.documentOptions)==null?void 0:B.componentRefPath)},schemaObject:F.schemaObject,effects:F.effects?[{type:"component",zodType:D,path:[...$.path]}]:void 0,zodType:D};if(F&&F.type==="in-progress")return{type:"ref",schema:{$ref:T9(F.ref,(J=$.documentOptions)==null?void 0:J.componentRefPath)},schemaObject:void 0,effects:[{type:"component",zodType:D,path:[...$.path]}],zodType:D};return},af=(D,F,$)=>{var B,J,Y,X;let Q=F.components.schemas.get(D),w=Nr(D,Q,F);if(w)return w;let f=((B=D._def.zodOpenApi)==null?void 0:B[z2])?af(D._def.zodOpenApi[z2],F,!0):void 0,G=((J=D._def.zodOpenApi)==null?void 0:J[L2])&&D._def.zodOpenApi[L2]!==D?af(D._def.zodOpenApi[L2],F,!0):void 0,H=((X=(Y=D._def.zodOpenApi)==null?void 0:Y.openapi)==null?void 0:X.ref)??(Q==null?void 0:Q.ref);if(H)return G?sf({zodSchema:D,previous:G,state:F}):Zr({ref:H,zodSchema:D,previous:f,state:F});if($)return f??G;return sf({zodSchema:D,previous:f??G,state:F})},gD=(D,F,$)=>{F.path.push(...$);let B=af(D,F);if(!B)throw new Error("Schema does not exist");return F.path.pop(),B},DW=(D,F,$)=>{let B=gD(D,F,$);if(B.effects)So(B.effects,F);return B.schema};var Gz=(D,F="3.1.0")=>{let $={schemas:new Map,parameters:new Map,headers:new Map,requestBodies:new Map,responses:new Map,callbacks:new Map,openapi:F};if(!D)return $;return Mr(D.schemas,$),_r(D.parameters,$),Ir(D.requestBodies,$),Lr(D.headers,$),zr(D.responses,$),Tr(D.callbacks,$),$},Mr=(D,F)=>{if(!D)return;Object.entries(D).forEach(([$,B])=>{var J,Y;if(LY(B)){if(F.schemas.has(B))throw new Error(`Schema ${JSON.stringify(B._def)} is already registered`);let X=((Y=(J=B._def.zodOpenApi)==null?void 0:J.openapi)==null?void 0:Y.ref)??$;F.schemas.set(B,{type:"manual",ref:X})}})},_r=(D,F)=>{if(!D)return;Object.entries(D).forEach(([$,B])=>{var J,Y,X,Q,w,f,G,H,K;if(LY(B)){if(F.parameters.has(B))throw new Error(`Parameter ${JSON.stringify(B._def)} is already registered`);let E=((X=(Y=(J=B._def.zodOpenApi)==null?void 0:J.openapi)==null?void 0:Y.param)==null?void 0:X.ref)??$,O=(f=(w=(Q=B._def.zodOpenApi)==null?void 0:Q.openapi)==null?void 0:w.param)==null?void 0:f.name,q=(K=(H=(G=B._def.zodOpenApi)==null?void 0:G.openapi)==null?void 0:H.param)==null?void 0:K.in;if(!O||!q)throw new Error("`name` or `in` missing in .openapi()");F.parameters.set(B,{type:"manual",ref:E,in:q,name:O})}})},Lr=(D,F)=>{if(!D)return;Object.entries(D).forEach(([$,B])=>{var J,Y,X;if(LY(B)){if(F.parameters.has(B))throw new Error(`Header ${JSON.stringify(B._def)} is already registered`);let Q=((X=(Y=(J=B._def.zodOpenApi)==null?void 0:J.openapi)==null?void 0:Y.param)==null?void 0:X.ref)??$;F.headers.set(B,{type:"manual",ref:Q})}})},zr=(D,F)=>{if(!D)return;Object.entries(D).forEach(([$,B])=>{if(F.responses.has(B))throw new Error(`Header ${JSON.stringify(B)} is already registered`);let J=(B==null?void 0:B.ref)??$;F.responses.set(B,{type:"manual",ref:J})})},Ir=(D,F)=>{if(!D)return;Object.entries(D).forEach(([$,B])=>{if(F.requestBodies.has(B))throw new Error(`Header ${JSON.stringify(B)} is already registered`);let J=(B==null?void 0:B.ref)??$;F.requestBodies.set(B,{type:"manual",ref:J})})},Tr=(D,F)=>{if(!D)return;Object.entries(D).forEach(([$,B])=>{if(F.callbacks.has(B))throw new Error(`Callback ${JSON.stringify(B)} is already registered`);let J=(B==null?void 0:B.ref)??$;F.callbacks.set(B,{type:"manual",ref:J})})},T9=(D,F)=>`${F??"#/components/schemas/"}${D}`;var Hz=(D,F,$)=>{Array.from(F.schemas).forEach(([Y,{type:X}],Q)=>{var w,f;if(X==="manual"){let G={components:F,type:((f=(w=Y._def.zodOpenApi)==null?void 0:w.openapi)==null?void 0:f.refType)??"output",path:[],visited:new Set,documentOptions:$};DW(Y,G,[`component schema index ${Q}`])}});let B=Object.entries(D.schemas??{}).reduce((Y,[X,Q])=>{if(LY(Q))return Y;if(Y[X])throw new Error(`Schema "${X}" is already registered`);return Y[X]=Q,Y},{}),J=Array.from(F.schemas).reduce((Y,[X,Q])=>{if(Q.type==="complete"){if(Y[Q.ref])throw new Error(`Schema "${Q.ref}" is already registered`);Y[Q.ref]=Q.schemaObject}return Y},B);return Object.keys(J).length?J:void 0};XX();var Ez=(D,F)=>{let $=Gz({schemas:F==null?void 0:F.components},F==null?void 0:F.openapi),B={components:$,type:(F==null?void 0:F.schemaType)??"output",path:[],visited:new Set,documentOptions:F},J=DW(D,B,["createSchema"]),Y=Hz({},$);return{schema:J,components:Y}};function iD(D){return{builder:(F)=>{let{version:$,...B}=F??{};return Ez(D,F?{openapi:$,...B}:void 0)},validator:D.parse}}function T1(D,F,$){let B=Dz(D,F,$);return Object.assign(B,{[_9]:{resolver:async(J)=>Mf(D,await iD(F).builder(J)),metadata:{schemaType:"input"}}})}C0();await YB();await a8();await MD();P7();QF();await Y$();await u8();await lF();C0();var zY=W.object({projectName:W.string(),projectGoal:W.string(),completionPercentage:W.number().min(0).max(100),workingDirectory:W.string(),completedComponents:W.array(W.object({name:W.string(),description:W.string(),filePath:W.string().optional()})),remainingTasks:W.array(W.object({name:W.string(),description:W.string(),priority:W.enum(["high","medium","low"]),dependencies:W.array(W.string()).optional()})),criticalFiles:W.array(W.object({path:W.string(),description:W.string(),lineNumbers:W.array(W.number()).optional()})),knownIssues:W.array(W.object({issue:W.string(),solution:W.string()})),architecturalConstraints:W.array(W.string()),successCriteria:W.array(W.string()),testingApproach:W.array(W.string())});class Kz{generateMemorySearchQueries(D){let F=this.extractProjectDomain(D.projectName),$=this.getRecentTimeframe();return{recentSnapshot:`${D.projectName} project snapshot ${$}`,technicalImplementation:`${F} implementation patterns ${D.projectGoal}`,successPatterns:`${F} success patterns best practices`,errorSolutions:`${F} error solutions debugging`,architecturalDecisions:`${D.projectName} architecture decisions constraints`}}generateSubAgentTasks(D){let F=D.remainingTasks,$=Math.min(F.length,4),B=`Required Tasks (USE ${$} SUB-AGENTS IN PARALLEL)

`;return F.slice(0,$).forEach((J,Y)=>{let X=Y+1;if(B+=`Sub-Agent ${X}: ${J.name}
`,B+=`${J.description}

`,B+=`Implementation Steps:
`,B+=`- Analyze current state and requirements
`,B+=`- Apply Chain of Thought reasoning to break down the task
`,B+=`- Implement solution with iterative refinement
`,B+=`- Use Reflexion to learn from any errors encountered
`,B+=`- Validate implementation meets success criteria

`,B+=`Priority: ${J.priority}
`,J.dependencies?.length)B+=`Dependencies: ${J.dependencies.join(", ")}
`;B+=`
`}),B}generateReflexionInsights(D){let F=`Reflexion Insights & Learning

`;return F+=`What We've Accomplished:
`,D.completedComponents.forEach(($)=>{F+=`- ${$.name}: ${$.description}
`}),F+=`
Lessons Learned:
`,D.knownIssues.forEach(($)=>{F+=`- Challenge: ${$.issue}
`,F+=`  Solution Applied: ${$.solution}
`,F+=`  Future Prevention: Apply this pattern to similar issues

`}),F+=`Self-Reflection for Next Agent:
`,F+=`- Build upon the ${D.completionPercentage}% completion achieved
`,F+=`- Apply proven patterns from completed components
`,F+=`- Use iterative refinement for complex implementations
`,F+=`- Leverage vector memory for context preservation

`,F}generateRefinedSuccessCriteria(D){let F=`Success Criteria (Iteratively Refined)

`;return F+=`Core Success Metrics:
`,D.successCriteria.forEach(($,B)=>{F+=`${B+1}. ${$}
`}),F+=`
Measurable Validation:
`,F+=`- All tests pass without errors
`,F+=`- Performance benchmarks meet requirements
`,F+=`- Code quality standards maintained
`,F+=`- Documentation updated and accurate
`,F+=`
Automated Verification:
`,F+=`- CI/CD pipeline validates changes
`,F+=`- Integration tests confirm compatibility
`,F+=`- Memory storage validates project state

`,F}generateContinuationPrompt(D){let F=zY.parse(D),$=this.generateMemorySearchQueries(F),B=this.generateSubAgentTasks(F),J=this.generateReflexionInsights(F),Y=this.generateRefinedSuccessCriteria(F);return`
# Instructions for Next ${F.projectName} Agent

You are continuing the implementation of ${F.projectGoal}. The project is ${F.completionPercentage}% complete with significant progress made. Your task is to complete the remaining implementation using advanced prompting techniques and vector memory integration.

## Project Context
- **Working Directory**: ${F.workingDirectory}
- **Current Phase**: Implementation and optimization
- **Architecture**: Vector memory + MCP servers + advanced prompting
- **Completion Status**: ${F.completionPercentage}% complete

## Memory Search Commands (Chain of Thought Context Recovery)
First, retrieve the current project state and patterns using these optimized queries:

1. Search: "${$.recentSnapshot}"
2. Search: "${$.technicalImplementation}"
3. Search: "${$.successPatterns}"
4. Search: "${$.errorSolutions}"
5. Search: "${$.architecturalDecisions}"

## Completed Components (DO NOT RECREATE)
${F.completedComponents.map((Q)=>`\u2705 ${Q.name} - ${Q.description}${Q.filePath?` (${Q.filePath})`:""}`).join(`
`)}

## Critical Files to Reference
${F.criticalFiles.map((Q)=>`- ${Q.path} - ${Q.description}${Q.lineNumbers?.length?` (lines: ${Q.lineNumbers.join(", ")})`:""}`).join(`
`)}

## ${B}

## Integration Requirements
- Maintain backward compatibility with existing systems
- Follow established architectural patterns
- Integrate with vector memory storage system
- Use MCP servers for enhanced capabilities
- Apply prompting techniques for optimization

## Technical Constraints
${F.architecturalConstraints.map((Q)=>`- ${Q}`).join(`
`)}

## ${Y}

## Testing Approach (Iterative Validation)
${F.testingApproach.map((Q,w)=>`${w+1}. ${Q}`).join(`
`)}

## ${J}

## Important Notes
- **Chain of Thought**: Use step-by-step reasoning for complex implementations
- **Multi-Agent Coordination**: Leverage parallel sub-agents for efficiency
- **Reflexion**: Learn from previous patterns and apply proven solutions
- **Iterative Refinement**: Progressively improve outputs through multiple passes
- **Vector Memory**: Store all insights and patterns for future reference

## Next Steps
1. Begin with memory searches to restore full context
2. Launch sub-agents in parallel for maximum efficiency
3. Apply prompting techniques throughout implementation
4. Store results in vector memory for future handoffs
5. Validate all success criteria before completion

Start by searching memory for the mentioned queries to understand the current state, then launch your sub-agents to complete the implementation using the advanced prompting techniques outlined above.
`.trim()}extractProjectDomain(D){let F={opencode:"ai_coding_assistant",dgmo:"ai_agent_system",qdrant:"vector_database",mcp:"model_context_protocol"},$=D.toLowerCase();for(let[B,J]of Object.entries(F))if($.includes(B))return J;return"software_development"}getRecentTimeframe(){let D=new Date,F=D.getFullYear(),$=String(D.getMonth()+1).padStart(2,"0");return`${F}-${$}`}}var qz=new Kz;await qB();var Uz={400:{description:"Bad request",content:{"application/json":{schema:iD(W.object({data:W.record(W.string(),W.any())}).openapi({ref:"Error"}))}}}};function Sr(D,F){let $=Z0.create({service:"session-analyzer"});$.info("Analyzing session messages",{sessionId:F.id,messageCount:D.length,sessionTitle:F.title});let B={projectName:"",projectGoal:"",completionPercentage:50,completedComponents:[],remainingTasks:[],criticalFiles:[],knownIssues:[],architecturalConstraints:[],successCriteria:[],testingApproach:[]},J=D.slice(-20),Y=new Set,X=new Set,Q=[];for(let G of J)if(G.role==="user"||G.role==="assistant"){for(let H of G.parts)if(H.type==="text"&&H.text){let K=/(?:[\w\-]+\/)+[\w\-]+\.[\w]+/g;if((H.text.match(K)||[]).forEach((O)=>Y.add(O)),H.text.includes("error")||H.text.includes("Error")||H.text.includes("bug")){let O=H.text.match(/(?:error|Error|bug)[:.]?\s*(.{0,100})/);if(O)Q.push({issue:O[1].trim(),fromMessage:G.id})}if(H.text.includes("implement")||H.text.includes("fix")||H.text.includes("create"))X.add(H.text.substring(0,100))}}if(F.title)B.projectName=F.title,B.projectGoal=`Continue work on: ${F.title}`;B.criticalFiles=Array.from(Y).slice(0,10).map((G)=>({path:G,description:"File discussed in session"}));let w=Array.from(X);if(w.length>0)B.remainingTasks=w.slice(0,5).map((G,H)=>({name:`Task ${H+1}`,description:G.substring(0,100),priority:H===0?"high":"medium",dependencies:[]}));if(Q.length>0)B.knownIssues=Q.slice(0,5).map((G)=>({issue:G.issue,solution:"Investigate and fix based on session context"}));let f=D.filter((G)=>G.role==="assistant").length;return B.completionPercentage=Math.min(90,Math.max(10,f*5)),$.info("Session analysis complete",{mentionedFiles:Array.from(Y),topicsCount:X.size,errorsFound:Q.length,tasksExtracted:B.remainingTasks.length,criticalFiles:B.criticalFiles.length}),B}var B7;((nH0)=>{let D=Z0.create({service:"server"});function F(){let J=new gf;return J.onError((X,Q)=>{if(X instanceof BD)return Q.json(X.toObject(),{status:400});return Q.json(new BD.Unknown({message:X.toString()}).toObject(),{status:400})}).use(async(X,Q)=>{D.info("request",{method:X.req.method,path:X.req.path});let w=Date.now();await Q(),D.info("response",{duration:Date.now()-w})}).get("/doc",hL(J,{documentation:{info:{title:"dgmo",version:"0.0.2",description:"dgmo api"},openapi:"3.0.0"}})).get("/event",rD({description:"Get events",responses:{200:{description:"Event stream",content:{"application/json":{schema:iD(F0.payloads().openapi({ref:"Event"}))}}}}}),async(X)=>{return D.info("event connected"),cf(X,async(Q)=>{Q.writeSSE({data:JSON.stringify({})});let w=F0.subscribeAll(async(f)=>{try{await Q.writeSSE({data:JSON.stringify(f)})}catch(G){D.error("SSE write failed",G instanceof Error?{message:G.message,stack:G.stack}:{error:G})}});await new Promise((f)=>{Q.onAbort(()=>{w(),f(),D.info("event disconnected")})})})}).get("/app",rD({description:"Get app info",responses:{200:{description:"200",content:{"application/json":{schema:iD(w0.Info)}}}}}),async(X)=>{return X.json(w0.info())}).post("/app/init",rD({description:"Initialize the app",responses:{200:{description:"Initialize the app",content:{"application/json":{schema:iD(W.boolean())}}}}}),async(X)=>{return await w0.initialize(),X.json(!0)}).get("/config",rD({description:"Get config info",responses:{200:{description:"Get config info",content:{"application/json":{schema:iD(HD.Info)}}}}}),async(X)=>{return X.json(await HD.get())}).get("/session",rD({description:"List all sessions",responses:{200:{description:"List of sessions",content:{"application/json":{schema:iD(u0.Info.array())}}}}}),async(X)=>{let Q=await Array.fromAsync(u0.list());return X.json(Q)}).post("/session",rD({description:"Create a new session",responses:{...Uz,200:{description:"Successfully created session",content:{"application/json":{schema:iD(u0.Info)}}}}}),async(X)=>{let Q=await u0.create();return X.json(Q)}).delete("/session/:id",rD({description:"Delete a session and all its data",responses:{200:{description:"Successfully deleted session",content:{"application/json":{schema:iD(W.boolean())}}}}}),T1("param",W.object({id:W.string()})),async(X)=>{return await u0.remove(X.req.valid("param").id),X.json(!0)}).post("/session/:id/init",rD({description:"Analyze the app and create an AGENTS.md file",responses:{200:{description:"200",content:{"application/json":{schema:iD(W.boolean())}}}}}),T1("param",W.object({id:W.string().openapi({description:"Session ID"})})),T1("json",W.object({providerID:W.string(),modelID:W.string()})),async(X)=>{let Q=X.req.valid("param").id,w=X.req.valid("json");return await u0.initialize({...w,sessionID:Q}),X.json(!0)}).post("/session/:id/abort",rD({description:"Abort a session",responses:{200:{description:"Aborted session",content:{"application/json":{schema:iD(W.boolean())}}}}}),T1("param",W.object({id:W.string()})),async(X)=>{return X.json(u0.abort(X.req.valid("param").id))}).post("/session/:id/share",rD({description:"Share a session",responses:{200:{description:"Successfully shared session",content:{"application/json":{schema:iD(u0.Info)}}}}}),T1("param",W.object({id:W.string()})),async(X)=>{let Q=X.req.valid("param").id;await u0.share(Q);let w=await u0.get(Q);return X.json(w)}).delete("/session/:id/share",rD({description:"Unshare the session",responses:{200:{description:"Successfully unshared session",content:{"application/json":{schema:iD(u0.Info)}}}}}),T1("param",W.object({id:W.string()})),async(X)=>{let Q=X.req.valid("param").id;await u0.unshare(Q);let w=await u0.get(Q);return X.json(w)}).post("/session/:id/summarize",rD({description:"Summarize the session",responses:{200:{description:"Summarized session",content:{"application/json":{schema:iD(W.boolean())}}}}}),T1("param",W.object({id:W.string().openapi({description:"Session ID"})})),T1("json",W.object({providerID:W.string(),modelID:W.string()})),async(X)=>{let Q=X.req.valid("param").id,w=X.req.valid("json");return await u0.summarize({...w,sessionID:Q}),X.json(!0)}).get("/session/:id/message",rD({description:"List messages for a session",responses:{200:{description:"List of messages",content:{"application/json":{schema:iD(L1.Info.array())}}}}}),T1("param",W.object({id:W.string().openapi({description:"Session ID"})})),async(X)=>{let Q=await u0.messages(X.req.valid("param").id);return X.json(Q)}).post("/session/:id/message",rD({description:"Create and send a new message to a session",responses:{200:{description:"Created message",content:{"application/json":{schema:iD(L1.Info)}}}}}),T1("param",W.object({id:W.string().openapi({description:"Session ID"})})),T1("json",W.object({providerID:W.string(),modelID:W.string(),parts:L1.MessagePart.array()})),async(X)=>{let Q=X.req.valid("param").id,w=X.req.valid("json"),f=await u0.chat({...w,sessionID:Q});return X.json(f)}).get("/session/:id/sub-sessions",rD({description:"Get all sub-sessions for a parent session",responses:{200:{description:"List of sub-sessions",content:{"application/json":{schema:iD($1.Info.array())}}}}}),T1("param",W.object({id:W.string().openapi({description:"Parent Session ID"})})),async(X)=>{let Q=X.req.valid("param").id;try{let w=await $1.getByParent(Q);return X.json(w)}catch(w){return X.json([])}}).get("/sub-sessions",rD({description:"List all sub-sessions across all parent sessions",responses:{200:{description:"List of all sub-sessions",content:{"application/json":{schema:iD($1.Info.array())}}}}}),async(X)=>{let Q=await $1.list();return X.json(Q)}).get("/sub-sessions/search",rD({description:"Search sub-sessions by query",responses:{200:{description:"Search results",content:{"application/json":{schema:iD($1.Info.array())}}}}}),T1("query",W.object({q:W.string().openapi({description:"Search query"})})),async(X)=>{let Q=X.req.valid("query").q,w=await $1.search(Q);return X.json(w)}).get("/sub-session/:id",rD({description:"Get a specific sub-session",responses:{200:{description:"Sub-session details",content:{"application/json":{schema:iD($1.Info)}}}}}),T1("param",W.object({id:W.string().openapi({description:"Sub-session ID"})})),async(X)=>{let Q=await $1.get(X.req.valid("param").id);return X.json(Q)}).delete("/sub-session/:id",rD({description:"Delete a sub-session",responses:{200:{description:"Successfully deleted sub-session",content:{"application/json":{schema:iD(W.boolean())}}}}}),T1("param",W.object({id:W.string().openapi({description:"Sub-session ID"})})),async(X)=>{return await $1.remove(X.req.valid("param").id),X.json(!0)}).get("/config/providers",rD({description:"List all providers",responses:{200:{description:"List of providers",content:{"application/json":{schema:iD(W.object({providers:dF.Provider.array(),default:W.record(W.string(),W.string())}))}}}}}),async(X)=>{let Q=await z1.list().then((w)=>E5(w,(f)=>f.info));return X.json({providers:Object.values(Q),default:E5(Q,(w)=>z1.sort(Object.values(w.models))[0].id)})}).get("/file",rD({description:"Search for files",responses:{200:{description:"Search for files",content:{"application/json":{schema:iD(W.string().array())}}}}}),T1("query",W.object({query:W.string()})),async(X)=>{let Q=X.req.valid("query").query,w=w0.info(),f=await o1.files({cwd:w.path.cwd,query:Q,limit:10});return X.json(f)}).post("/session/:id/continuation-prompt",rD({description:"Generate continuation prompt for agent handoff",responses:{200:{description:"Generated continuation prompt",content:{"application/json":{schema:iD(W.object({prompt:W.string(),projectState:zY,taskId:W.string().optional()}))}}},...Uz}}),T1("param",W.object({id:W.string().openapi({description:"Session ID"})})),T1("json",zY.partial().extend({projectName:W.string().optional(),projectGoal:W.string().optional()})),async(X)=>{let Q=X.req.valid("param").id,w=X.req.valid("json"),f=Date.now(),G=`continuation-${Q}-${f}`;Z9({sessionID:Q,taskID:G,agentName:"Continuation Generator",taskDescription:"Generating continuation prompt for agent handoff",timestamp:f});try{let H=await u0.get(Q),K=w0.info(),E=await u0.messages(Q);o2({sessionID:Q,taskID:G,progress:25,message:"Analyzing session history and project state...",timestamp:Date.now(),startTime:f});let O=Sr(E,H),q={projectName:w.projectName||O.projectName||H.title||"Current Project",projectGoal:w.projectGoal||O.projectGoal||"Continue current implementation",completionPercentage:w.completionPercentage||O.completionPercentage||50,workingDirectory:w.workingDirectory||K.path.cwd,completedComponents:w.completedComponents||O.completedComponents||[{name:"Session Analysis",description:"Analyzed current session context",filePath:"session/"+Q}],remainingTasks:w.remainingTasks||O.remainingTasks||[{name:"Continue Implementation",description:"Continue work based on session context",priority:"high",dependencies:[]}],criticalFiles:w.criticalFiles||O.criticalFiles||[{path:"Current session files",description:"Files discussed in this session"}],knownIssues:w.knownIssues||O.knownIssues||[],architecturalConstraints:w.architecturalConstraints||O.architecturalConstraints||["Maintain consistency with current implementation","Follow established patterns in the codebase"],successCriteria:w.successCriteria||O.successCriteria||["Complete tasks discussed in session","Maintain code quality and tests"],testingApproach:w.testingApproach||O.testingApproach||["Test all new functionality","Ensure no regressions"]};o2({sessionID:Q,taskID:G,progress:75,message:"Generating continuation prompt...",timestamp:Date.now(),startTime:f});let U=qz.generateContinuationPrompt(q);return N9({sessionID:Q,taskID:G,duration:Date.now()-f,success:!0,summary:`Generated continuation prompt (${U.length} characters)`,timestamp:Date.now()}),X.json({prompt:U,projectState:q,taskId:G})}catch(H){let K=H instanceof Error?H.message:String(H);throw KY({sessionID:Q,taskID:G,error:K,recoverable:!0,timestamp:Date.now()}),D.error("continuation-prompt-error",{sessionID:Q,error:K,stack:H instanceof Error?H.stack:void 0}),H}}).get("/events/diagnostics",rD({description:"Get task event diagnostics information",responses:{200:{description:"Event diagnostics data",content:{"application/json":{schema:iD(W.object({eventCounts:W.object({started:W.number(),progress:W.number(),completed:W.number(),failed:W.number()}),lastEvents:W.record(W.any()),websocketClients:W.number()}))}}}}}),async(X)=>{let{taskEventDiagnostics:Q}=await BW().then(() => $W),{taskEventServer:w}=await IY().then(() => jz),f=Q.getStats();return X.json({...f,websocketClients:w.clients?.size||0})}).post("/events/test",rD({description:"Test task event flow",responses:{200:{description:"Test completed",content:{"application/json":{schema:iD(W.object({success:W.boolean(),message:W.string()}))}}}}}),async(X)=>{let{taskEventDiagnostics:Q}=await BW().then(() => $W);return await Q.testEventFlow(),X.json({success:!0,message:"Event flow test completed. Check logs for details."})})}async function $(){let J=F();return await Lf(J,{documentation:{info:{title:"dgmo",version:"1.0.0",description:"dgmo api"},openapi:"3.0.0"}})}nH0.openapi=$;function B(J){return Bun.serve({port:J.port,hostname:J.hostname,idleTimeout:0,fetch:F().fetch})}nH0.listen=B})(B7||={});import Rz from"fs/promises";import yr from"path";var Cz={command:"generate",handler:async()=>{let D=await B7.openapi(),F="gen";await Rz.rmdir("gen",{recursive:!0}).catch(()=>{}),await Rz.mkdir("gen",{recursive:!0}),await Bun.write(yr.join("gen","openapi.json"),JSON.stringify(D,null,2))}};await xD();await lJ();await iw();await dJ();import{stripVTControlCharacters as jW}from"util";var JF=Y2(XW(),1),CB=Y2(wW(),1);import{stdin as yz,stdout as xz}from"process";import*as t6 from"readline";import _z from"readline";import{Writable as mr}from"stream";function cr({onlyFirst:D=!1}={}){let F=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(F,D?void 0:"g")}var pr=cr();function kz(D){if(typeof D!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof D}\``);return D.replace(pr,"")}function uz(D){return D&&D.__esModule&&Object.prototype.hasOwnProperty.call(D,"default")?D.default:D}var vz={exports:{}};(function(D){var F={};D.exports=F,F.eastAsianWidth=function(B){var J=B.charCodeAt(0),Y=B.length==2?B.charCodeAt(1):0,X=J;return 55296<=J&&J<=56319&&56320<=Y&&Y<=57343&&(J&=1023,Y&=1023,X=J<<10|Y,X+=65536),X==12288||65281<=X&&X<=65376||65504<=X&&X<=65510?"F":X==8361||65377<=X&&X<=65470||65474<=X&&X<=65479||65482<=X&&X<=65487||65490<=X&&X<=65495||65498<=X&&X<=65500||65512<=X&&X<=65518?"H":4352<=X&&X<=4447||4515<=X&&X<=4519||4602<=X&&X<=4607||9001<=X&&X<=9002||11904<=X&&X<=11929||11931<=X&&X<=12019||12032<=X&&X<=12245||12272<=X&&X<=12283||12289<=X&&X<=12350||12353<=X&&X<=12438||12441<=X&&X<=12543||12549<=X&&X<=12589||12593<=X&&X<=12686||12688<=X&&X<=12730||12736<=X&&X<=12771||12784<=X&&X<=12830||12832<=X&&X<=12871||12880<=X&&X<=13054||13056<=X&&X<=19903||19968<=X&&X<=42124||42128<=X&&X<=42182||43360<=X&&X<=43388||44032<=X&&X<=55203||55216<=X&&X<=55238||55243<=X&&X<=55291||63744<=X&&X<=64255||65040<=X&&X<=65049||65072<=X&&X<=65106||65108<=X&&X<=65126||65128<=X&&X<=65131||110592<=X&&X<=110593||127488<=X&&X<=127490||127504<=X&&X<=127546||127552<=X&&X<=127560||127568<=X&&X<=127569||131072<=X&&X<=194367||177984<=X&&X<=196605||196608<=X&&X<=262141?"W":32<=X&&X<=126||162<=X&&X<=163||165<=X&&X<=166||X==172||X==175||10214<=X&&X<=10221||10629<=X&&X<=10630?"Na":X==161||X==164||167<=X&&X<=168||X==170||173<=X&&X<=174||176<=X&&X<=180||182<=X&&X<=186||188<=X&&X<=191||X==198||X==208||215<=X&&X<=216||222<=X&&X<=225||X==230||232<=X&&X<=234||236<=X&&X<=237||X==240||242<=X&&X<=243||247<=X&&X<=250||X==252||X==254||X==257||X==273||X==275||X==283||294<=X&&X<=295||X==299||305<=X&&X<=307||X==312||319<=X&&X<=322||X==324||328<=X&&X<=331||X==333||338<=X&&X<=339||358<=X&&X<=359||X==363||X==462||X==464||X==466||X==468||X==470||X==472||X==474||X==476||X==593||X==609||X==708||X==711||713<=X&&X<=715||X==717||X==720||728<=X&&X<=731||X==733||X==735||768<=X&&X<=879||913<=X&&X<=929||931<=X&&X<=937||945<=X&&X<=961||963<=X&&X<=969||X==1025||1040<=X&&X<=1103||X==1105||X==8208||8211<=X&&X<=8214||8216<=X&&X<=8217||8220<=X&&X<=8221||8224<=X&&X<=8226||8228<=X&&X<=8231||X==8240||8242<=X&&X<=8243||X==8245||X==8251||X==8254||X==8308||X==8319||8321<=X&&X<=8324||X==8364||X==8451||X==8453||X==8457||X==8467||X==8470||8481<=X&&X<=8482||X==8486||X==8491||8531<=X&&X<=8532||8539<=X&&X<=8542||8544<=X&&X<=8555||8560<=X&&X<=8569||X==8585||8592<=X&&X<=8601||8632<=X&&X<=8633||X==8658||X==8660||X==8679||X==8704||8706<=X&&X<=8707||8711<=X&&X<=8712||X==8715||X==8719||X==8721||X==8725||X==8730||8733<=X&&X<=8736||X==8739||X==8741||8743<=X&&X<=8748||X==8750||8756<=X&&X<=8759||8764<=X&&X<=8765||X==8776||X==8780||X==8786||8800<=X&&X<=8801||8804<=X&&X<=8807||8810<=X&&X<=8811||8814<=X&&X<=8815||8834<=X&&X<=8835||8838<=X&&X<=8839||X==8853||X==8857||X==8869||X==8895||X==8978||9312<=X&&X<=9449||9451<=X&&X<=9547||9552<=X&&X<=9587||9600<=X&&X<=9615||9618<=X&&X<=9621||9632<=X&&X<=9633||9635<=X&&X<=9641||9650<=X&&X<=9651||9654<=X&&X<=9655||9660<=X&&X<=9661||9664<=X&&X<=9665||9670<=X&&X<=9672||X==9675||9678<=X&&X<=9681||9698<=X&&X<=9701||X==9711||9733<=X&&X<=9734||X==9737||9742<=X&&X<=9743||9748<=X&&X<=9749||X==9756||X==9758||X==9792||X==9794||9824<=X&&X<=9825||9827<=X&&X<=9829||9831<=X&&X<=9834||9836<=X&&X<=9837||X==9839||9886<=X&&X<=9887||9918<=X&&X<=9919||9924<=X&&X<=9933||9935<=X&&X<=9953||X==9955||9960<=X&&X<=9983||X==10045||X==10071||10102<=X&&X<=10111||11093<=X&&X<=11097||12872<=X&&X<=12879||57344<=X&&X<=63743||65024<=X&&X<=65039||X==65533||127232<=X&&X<=127242||127248<=X&&X<=127277||127280<=X&&X<=127337||127344<=X&&X<=127386||917760<=X&&X<=917999||983040<=X&&X<=1048573||1048576<=X&&X<=1114109?"A":"N"},F.characterLength=function(B){var J=this.eastAsianWidth(B);return J=="F"||J=="W"||J=="A"?2:1};function $(B){return B.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]}F.length=function(B){for(var J=$(B),Y=0,X=0;X<J.length;X++)Y=Y+this.characterLength(J[X]);return Y},F.slice=function(B,J,Y){textLen=F.length(B),J=J||0,Y=Y||1,J<0&&(J=textLen+J),Y<0&&(Y=textLen+Y);for(var X="",Q=0,w=$(B),f=0;f<w.length;f++){var G=w[f],H=F.length(G);if(Q>=J-(H==2?1:0))if(Q+H<=Y)X+=G;else break;Q+=H}return X}})(vz);var ir=vz.exports,dr=uz(ir),lr=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g},nr=uz(lr);function ZB(D,F={}){if(typeof D!="string"||D.length===0||(F={ambiguousIsNarrow:!0,...F},D=kz(D),D.length===0))return 0;D=D.replace(nr(),"  ");let $=F.ambiguousIsNarrow?1:2,B=0;for(let J of D){let Y=J.codePointAt(0);if(Y<=31||Y>=127&&Y<=159||Y>=768&&Y<=879)continue;switch(dr.eastAsianWidth(J)){case"F":case"W":B+=2;break;case"A":B+=$;break;default:B+=1}}return B}var fW=10,Lz=(D=0)=>(F)=>`\x1B[${F+D}m`,zz=(D=0)=>(F)=>`\x1B[${38+D};5;${F}m`,Iz=(D=0)=>(F,$,B)=>`\x1B[${38+D};2;${F};${$};${B}m`,B1={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(B1.modifier);var or=Object.keys(B1.color),rr=Object.keys(B1.bgColor);[...or];function tr(){let D=new Map;for(let[F,$]of Object.entries(B1)){for(let[B,J]of Object.entries($))B1[B]={open:`\x1B[${J[0]}m`,close:`\x1B[${J[1]}m`},$[B]=B1[B],D.set(J[0],J[1]);Object.defineProperty(B1,F,{value:$,enumerable:!1})}return Object.defineProperty(B1,"codes",{value:D,enumerable:!1}),B1.color.close="\x1B[39m",B1.bgColor.close="\x1B[49m",B1.color.ansi=Lz(),B1.color.ansi256=zz(),B1.color.ansi16m=Iz(),B1.bgColor.ansi=Lz(fW),B1.bgColor.ansi256=zz(fW),B1.bgColor.ansi16m=Iz(fW),Object.defineProperties(B1,{rgbToAnsi256:{value:(F,$,B)=>F===$&&$===B?F<8?16:F>248?231:Math.round((F-8)/247*24)+232:16+36*Math.round(F/255*5)+6*Math.round($/255*5)+Math.round(B/255*5),enumerable:!1},hexToRgb:{value:(F)=>{let $=/[a-f\d]{6}|[a-f\d]{3}/i.exec(F.toString(16));if(!$)return[0,0,0];let[B]=$;B.length===3&&(B=[...B].map((Y)=>Y+Y).join(""));let J=Number.parseInt(B,16);return[J>>16&255,J>>8&255,J&255]},enumerable:!1},hexToAnsi256:{value:(F)=>B1.rgbToAnsi256(...B1.hexToRgb(F)),enumerable:!1},ansi256ToAnsi:{value:(F)=>{if(F<8)return 30+F;if(F<16)return 90+(F-8);let $,B,J;if(F>=232)$=((F-232)*10+8)/255,B=$,J=$;else{F-=16;let Q=F%36;$=Math.floor(F/36)/5,B=Math.floor(Q/6)/5,J=Q%6/5}let Y=Math.max($,B,J)*2;if(Y===0)return 30;let X=30+(Math.round(J)<<2|Math.round(B)<<1|Math.round($));return Y===2&&(X+=60),X},enumerable:!1},rgbToAnsi:{value:(F,$,B)=>B1.ansi256ToAnsi(B1.rgbToAnsi256(F,$,B)),enumerable:!1},hexToAnsi:{value:(F)=>B1.ansi256ToAnsi(B1.hexToAnsi256(F)),enumerable:!1}}),B1}var sr=tr(),SY=new Set(["\x1B","\x9B"]),ar=39,HW="\x07",gz="[",er="]",mz="m",EW=`${er}8;;`,Tz=(D)=>`${SY.values().next().value}${gz}${D}${mz}`,Pz=(D)=>`${SY.values().next().value}${EW}${D}${HW}`,Dt=(D)=>D.split(" ").map((F)=>ZB(F)),WW=(D,F,$)=>{let B=[...F],J=!1,Y=!1,X=ZB(kz(D[D.length-1]));for(let[Q,w]of B.entries()){let f=ZB(w);if(X+f<=$?D[D.length-1]+=w:(D.push(w),X=0),SY.has(w)&&(J=!0,Y=B.slice(Q+1).join("").startsWith(EW)),J){Y?w===HW&&(J=!1,Y=!1):w===mz&&(J=!1);continue}X+=f,X===$&&Q<B.length-1&&(D.push(""),X=0)}!X&&D[D.length-1].length>0&&D.length>1&&(D[D.length-2]+=D.pop())},Ft=(D)=>{let F=D.split(" "),$=F.length;for(;$>0&&!(ZB(F[$-1])>0);)$--;return $===F.length?D:F.slice(0,$).join(" ")+F.slice($).join("")},$t=(D,F,$={})=>{if($.trim!==!1&&D.trim()==="")return"";let B="",J,Y,X=Dt(D),Q=[""];for(let[f,G]of D.split(" ").entries()){$.trim!==!1&&(Q[Q.length-1]=Q[Q.length-1].trimStart());let H=ZB(Q[Q.length-1]);if(f!==0&&(H>=F&&($.wordWrap===!1||$.trim===!1)&&(Q.push(""),H=0),(H>0||$.trim===!1)&&(Q[Q.length-1]+=" ",H++)),$.hard&&X[f]>F){let K=F-H,E=1+Math.floor((X[f]-K-1)/F);Math.floor((X[f]-1)/F)<E&&Q.push(""),WW(Q,G,F);continue}if(H+X[f]>F&&H>0&&X[f]>0){if($.wordWrap===!1&&H<F){WW(Q,G,F);continue}Q.push("")}if(H+X[f]>F&&$.wordWrap===!1){WW(Q,G,F);continue}Q[Q.length-1]+=G}$.trim!==!1&&(Q=Q.map((f)=>Ft(f)));let w=[...Q.join(`
`)];for(let[f,G]of w.entries()){if(B+=G,SY.has(G)){let{groups:K}=new RegExp(`(?:\\${gz}(?<code>\\d+)m|\\${EW}(?<uri>.*)${HW})`).exec(w.slice(f).join(""))||{groups:{}};if(K.code!==void 0){let E=Number.parseFloat(K.code);J=E===ar?void 0:E}else K.uri!==void 0&&(Y=K.uri.length===0?void 0:K.uri)}let H=sr.codes.get(Number(J));w[f+1]===`
`?(Y&&(B+=Pz("")),J&&H&&(B+=Tz(H))):G===`
`&&(J&&H&&(B+=Tz(J)),Y&&(B+=Pz(Y)))}return B};function bz(D,F,$){return String(D).normalize().replace(/\r\n/g,`
`).split(`
`).map((B)=>$t(B,F,$)).join(`
`)}var Bt=["up","down","left","right","space","enter","cancel"],hY={actions:new Set(Bt),aliases:new Map([["k","up"],["j","down"],["h","left"],["l","right"],["\x03","cancel"],["escape","cancel"]])};function KW(D,F){if(typeof D=="string")return hY.aliases.get(D)===F;for(let $ of D)if($!==void 0&&KW($,F))return!0;return!1}function Jt(D,F){if(D===F)return;let $=D.split(`
`),B=F.split(`
`),J=[];for(let Y=0;Y<Math.max($.length,B.length);Y++)$[Y]!==B[Y]&&J.push(Y);return J}var Yt=globalThis.process.platform.startsWith("win"),GW=Symbol("clack:cancel");function R1(D){return D===GW}function bY(D,F){let $=D;$.isTTY&&$.setRawMode(F)}function cz({input:D=yz,output:F=xz,overwrite:$=!0,hideCursor:B=!0}={}){let J=t6.createInterface({input:D,output:F,prompt:"",tabSize:1});t6.emitKeypressEvents(D,J),D.isTTY&&D.setRawMode(!0);let Y=(X,{name:Q,sequence:w})=>{let f=String(X);if(KW([f,Q,w],"cancel")){B&&F.write(JF.cursor.show),process.exit(0);return}if(!$)return;t6.moveCursor(F,Q==="return"?0:-1,Q==="return"?-1:0,()=>{t6.clearLine(F,1,()=>{D.once("keypress",Y)})})};return B&&F.write(JF.cursor.hide),D.once("keypress",Y),()=>{D.off("keypress",Y),B&&F.write(JF.cursor.show),D.isTTY&&!Yt&&D.setRawMode(!1),J.terminal=!1,J.close()}}var Xt=Object.defineProperty,Qt=(D,F,$)=>(F in D)?Xt(D,F,{enumerable:!0,configurable:!0,writable:!0,value:$}):D[F]=$,hF=(D,F,$)=>(Qt(D,typeof F!="symbol"?F+"":F,$),$);class NB{constructor(D,F=!0){hF(this,"input"),hF(this,"output"),hF(this,"_abortSignal"),hF(this,"rl"),hF(this,"opts"),hF(this,"_render"),hF(this,"_track",!1),hF(this,"_prevFrame",""),hF(this,"_subscribers",new Map),hF(this,"_cursor",0),hF(this,"state","initial"),hF(this,"error",""),hF(this,"value");let{input:$=yz,output:B=xz,render:J,signal:Y,...X}=D;this.opts=X,this.onKeypress=this.onKeypress.bind(this),this.close=this.close.bind(this),this.render=this.render.bind(this),this._render=J.bind(this),this._track=F,this._abortSignal=Y,this.input=$,this.output=B}unsubscribe(){this._subscribers.clear()}setSubscriber(D,F){let $=this._subscribers.get(D)??[];$.push(F),this._subscribers.set(D,$)}on(D,F){this.setSubscriber(D,{cb:F})}once(D,F){this.setSubscriber(D,{cb:F,once:!0})}emit(D,...F){let $=this._subscribers.get(D)??[],B=[];for(let J of $)J.cb(...F),J.once&&B.push(()=>$.splice($.indexOf(J),1));for(let J of B)J()}prompt(){return new Promise((D,F)=>{if(this._abortSignal){if(this._abortSignal.aborted)return this.state="cancel",this.close(),D(GW);this._abortSignal.addEventListener("abort",()=>{this.state="cancel",this.close()},{once:!0})}let $=new mr;$._write=(B,J,Y)=>{this._track&&(this.value=this.rl?.line.replace(/\t/g,""),this._cursor=this.rl?.cursor??0,this.emit("value",this.value)),Y()},this.input.pipe($),this.rl=_z.createInterface({input:this.input,output:$,tabSize:2,prompt:"",escapeCodeTimeout:50,terminal:!0}),_z.emitKeypressEvents(this.input,this.rl),this.rl.prompt(),this.opts.initialValue!==void 0&&this._track&&this.rl.write(this.opts.initialValue),this.input.on("keypress",this.onKeypress),bY(this.input,!0),this.output.on("resize",this.render),this.render(),this.once("submit",()=>{this.output.write(JF.cursor.show),this.output.off("resize",this.render),bY(this.input,!1),D(this.value)}),this.once("cancel",()=>{this.output.write(JF.cursor.show),this.output.off("resize",this.render),bY(this.input,!1),D(GW)})})}onKeypress(D,F){if(this.state==="error"&&(this.state="active"),F?.name&&(!this._track&&hY.aliases.has(F.name)&&this.emit("cursor",hY.aliases.get(F.name)),hY.actions.has(F.name)&&this.emit("cursor",F.name)),D&&(D.toLowerCase()==="y"||D.toLowerCase()==="n")&&this.emit("confirm",D.toLowerCase()==="y"),D==="\t"&&this.opts.placeholder&&(this.value||(this.rl?.write(this.opts.placeholder),this.emit("value",this.opts.placeholder))),D&&this.emit("key",D.toLowerCase()),F?.name==="return"){if(this.opts.validate){let $=this.opts.validate(this.value);$&&(this.error=$ instanceof Error?$.message:$,this.state="error",this.rl?.write(this.value))}this.state!=="error"&&(this.state="submit")}KW([D,F?.name,F?.sequence],"cancel")&&(this.state="cancel"),(this.state==="submit"||this.state==="cancel")&&this.emit("finalize"),this.render(),(this.state==="submit"||this.state==="cancel")&&this.close()}close(){this.input.unpipe(),this.input.removeListener("keypress",this.onKeypress),this.output.write(`
`),bY(this.input,!1),this.rl?.close(),this.rl=void 0,this.emit(`${this.state}`,this.value),this.unsubscribe()}restoreCursor(){let D=bz(this._prevFrame,process.stdout.columns,{hard:!0}).split(`
`).length-1;this.output.write(JF.cursor.move(-999,D*-1))}render(){let D=bz(this._render(this)??"",process.stdout.columns,{hard:!0});if(D!==this._prevFrame){if(this.state==="initial")this.output.write(JF.cursor.hide);else{let F=Jt(this._prevFrame,D);if(this.restoreCursor(),F&&F?.length===1){let $=F[0];this.output.write(JF.cursor.move(0,$)),this.output.write(JF.erase.lines(1));let B=D.split(`
`);this.output.write(B[$]),this._prevFrame=D,this.output.write(JF.cursor.move(0,B.length-$-1));return}if(F&&F?.length>1){let $=F[0];this.output.write(JF.cursor.move(0,$)),this.output.write(JF.erase.down());let B=D.split(`
`).slice($);this.output.write(B.join(`
`)),this._prevFrame=D;return}this.output.write(JF.erase.down())}this.output.write(D),this.state==="initial"&&(this.state="active"),this._prevFrame=D}}}class qW extends NB{get cursor(){return this.value?0:1}get _value(){return this.cursor===0}constructor(D){super(D,!1),this.value=!!D.initialValue,this.on("value",()=>{this.value=this._value}),this.on("confirm",(F)=>{this.output.write(JF.cursor.move(0,-1)),this.value=F,this.state="submit",this.close()}),this.on("cursor",()=>{this.value=!this.value})}}var wt;wt=new WeakMap;var ft=Object.defineProperty,Wt=(D,F,$)=>(F in D)?ft(D,F,{enumerable:!0,configurable:!0,writable:!0,value:$}):D[F]=$,hz=(D,F,$)=>(Wt(D,typeof F!="symbol"?F+"":F,$),$);class VW extends NB{constructor({mask:D,...F}){super(F),hz(this,"valueWithCursor",""),hz(this,"_mask","\u2022"),this._mask=D??"\u2022",this.on("finalize",()=>{this.valueWithCursor=this.masked}),this.on("value",()=>{if(this.cursor>=this.value.length)this.valueWithCursor=`${this.masked}${CB.default.inverse(CB.default.hidden("_"))}`;else{let $=this.masked.slice(0,this.cursor),B=this.masked.slice(this.cursor);this.valueWithCursor=`${$}${CB.default.inverse(B[0])}${B.slice(1)}`}})}get cursor(){return this._cursor}get masked(){return this.value.replaceAll(/./g,this._mask)}}var Gt=Object.defineProperty,Ht=(D,F,$)=>(F in D)?Gt(D,F,{enumerable:!0,configurable:!0,writable:!0,value:$}):D[F]=$,Sz=(D,F,$)=>(Ht(D,typeof F!="symbol"?F+"":F,$),$);class AW extends NB{constructor(D){super(D,!1),Sz(this,"options"),Sz(this,"cursor",0),this.options=D.options,this.cursor=this.options.findIndex(({value:F})=>F===D.initialValue),this.cursor===-1&&(this.cursor=0),this.changeValue(),this.on("cursor",(F)=>{switch(F){case"left":case"up":this.cursor=this.cursor===0?this.options.length-1:this.cursor-1;break;case"down":case"right":this.cursor=this.cursor===this.options.length-1?0:this.cursor+1;break}this.changeValue()})}get _value(){return this.options[this.cursor]}changeValue(){this.value=this._value.value}}class OW extends NB{get valueWithCursor(){if(this.state==="submit")return this.value;if(this.cursor>=this.value.length)return`${this.value}\u2588`;let D=this.value.slice(0,this.cursor),[F,...$]=this.value.slice(this.cursor);return`${D}${CB.default.inverse(F)}${$.join("")}`}get cursor(){return this._cursor}constructor(D){super(D),this.on("finalize",()=>{this.value||(this.value=D.defaultValue)})}}var X0=Y2(wW(),1),yY=Y2(XW(),1);import U2 from"process";function Et(){return U2.platform!=="win32"?U2.env.TERM!=="linux":!!U2.env.CI||!!U2.env.WT_SESSION||!!U2.env.TERMINUS_SUBLIME||U2.env.ConEmuTask==="{cmd::Cmder}"||U2.env.TERM_PROGRAM==="Terminus-Sublime"||U2.env.TERM_PROGRAM==="vscode"||U2.env.TERM==="xterm-256color"||U2.env.TERM==="alacritty"||U2.env.TERMINAL_EMULATOR==="JetBrains-JediTerm"}var UW=Et(),C1=(D,F)=>UW?D:F,Kt=C1("\u25C6","*"),iz=C1("\u25A0","x"),dz=C1("\u25B2","x"),xY=C1("\u25C7","o"),qt=C1("\u250C","T"),TD=C1("\u2502","|"),J7=C1("\u2514","\u2014"),RW=C1("\u25CF",">"),CW=C1("\u25CB"," "),HE0=C1("\u25FB","[\u2022]"),EE0=C1("\u25FC","[+]"),KE0=C1("\u25FB","[ ]"),Vt=C1("\u25AA","\u2022"),pz=C1("\u2500","-"),At=C1("\u256E","+"),Ot=C1("\u251C","+"),jt=C1("\u256F","+"),Ut=C1("\u25CF","\u2022"),Rt=C1("\u25C6","*"),Ct=C1("\u25B2","!"),Zt=C1("\u25A0","x"),kY=(D)=>{switch(D){case"initial":case"active":return X0.default.cyan(Kt);case"cancel":return X0.default.red(iz);case"error":return X0.default.yellow(dz);case"submit":return X0.default.green(xY)}},Nt=(D)=>{let{cursor:F,options:$,style:B}=D,J=D.maxItems??Number.POSITIVE_INFINITY,Y=Math.max(process.stdout.rows-4,0),X=Math.min(Y,Math.max(J,5)),Q=0;F>=Q+X-3?Q=Math.max(Math.min(F-X+3,$.length-X),0):F<Q+2&&(Q=Math.max(F-2,0));let w=X<$.length&&Q>0,f=X<$.length&&Q+X<$.length;return $.slice(Q,Q+X).map((G,H,K)=>{let E=H===0&&w,O=H===K.length-1&&f;return E||O?X0.default.dim("..."):B(G,H+Q===F)})},s6=(D)=>new OW({validate:D.validate,placeholder:D.placeholder,defaultValue:D.defaultValue,initialValue:D.initialValue,render(){let F=`${X0.default.gray(TD)}
${kY(this.state)}  ${D.message}
`,$=D.placeholder?X0.default.inverse(D.placeholder[0])+X0.default.dim(D.placeholder.slice(1)):X0.default.inverse(X0.default.hidden("_")),B=this.value?this.valueWithCursor:$;switch(this.state){case"error":return`${F.trim()}
${X0.default.yellow(TD)}  ${B}
${X0.default.yellow(J7)}  ${X0.default.yellow(this.error)}
`;case"submit":return`${F}${X0.default.gray(TD)}  ${X0.default.dim(this.value||D.placeholder)}`;case"cancel":return`${F}${X0.default.gray(TD)}  ${X0.default.strikethrough(X0.default.dim(this.value??""))}${this.value?.trim()?`
${X0.default.gray(TD)}`:""}`;default:return`${F}${X0.default.cyan(TD)}  ${B}
${X0.default.cyan(J7)}
`}}}).prompt(),lz=(D)=>new VW({validate:D.validate,mask:D.mask??Vt,render(){let F=`${X0.default.gray(TD)}
${kY(this.state)}  ${D.message}
`,$=this.valueWithCursor,B=this.masked;switch(this.state){case"error":return`${F.trim()}
${X0.default.yellow(TD)}  ${B}
${X0.default.yellow(J7)}  ${X0.default.yellow(this.error)}
`;case"submit":return`${F}${X0.default.gray(TD)}  ${X0.default.dim(B)}`;case"cancel":return`${F}${X0.default.gray(TD)}  ${X0.default.strikethrough(X0.default.dim(B??""))}${B?`
${X0.default.gray(TD)}`:""}`;default:return`${F}${X0.default.cyan(TD)}  ${$}
${X0.default.cyan(J7)}
`}}}).prompt(),uY=(D)=>{let F=D.active??"Yes",$=D.inactive??"No";return new qW({active:F,inactive:$,initialValue:D.initialValue??!0,render(){let B=`${X0.default.gray(TD)}
${kY(this.state)}  ${D.message}
`,J=this.value?F:$;switch(this.state){case"submit":return`${B}${X0.default.gray(TD)}  ${X0.default.dim(J)}`;case"cancel":return`${B}${X0.default.gray(TD)}  ${X0.default.strikethrough(X0.default.dim(J))}
${X0.default.gray(TD)}`;default:return`${B}${X0.default.cyan(TD)}  ${this.value?`${X0.default.green(RW)} ${F}`:`${X0.default.dim(CW)} ${X0.default.dim(F)}`} ${X0.default.dim("/")} ${this.value?`${X0.default.dim(CW)} ${X0.default.dim($)}`:`${X0.default.green(RW)} ${$}`}
${X0.default.cyan(J7)}
`}}}).prompt()},a6=(D)=>{let F=($,B)=>{let J=$.label??String($.value);switch(B){case"selected":return`${X0.default.dim(J)}`;case"active":return`${X0.default.green(RW)} ${J} ${$.hint?X0.default.dim(`(${$.hint})`):""}`;case"cancelled":return`${X0.default.strikethrough(X0.default.dim(J))}`;default:return`${X0.default.dim(CW)} ${X0.default.dim(J)}`}};return new AW({options:D.options,initialValue:D.initialValue,render(){let $=`${X0.default.gray(TD)}
${kY(this.state)}  ${D.message}
`;switch(this.state){case"submit":return`${$}${X0.default.gray(TD)}  ${F(this.options[this.cursor],"selected")}`;case"cancel":return`${$}${X0.default.gray(TD)}  ${F(this.options[this.cursor],"cancelled")}
${X0.default.gray(TD)}`;default:return`${$}${X0.default.cyan(TD)}  ${Nt({cursor:this.cursor,options:this.options,maxItems:D.maxItems,style:(B,J)=>F(B,J?"active":"inactive")}).join(`
${X0.default.cyan(TD)}  `)}
${X0.default.cyan(J7)}
`}}}).prompt()};var ZW=(D="",F="")=>{let $=`
${D}
`.split(`
`),B=jW(F).length,J=Math.max($.reduce((X,Q)=>{let w=jW(Q);return w.length>X?w.length:X},0),B)+2,Y=$.map((X)=>`${X0.default.gray(TD)}  ${X0.default.dim(X)}${" ".repeat(J-jW(X).length)}${X0.default.gray(TD)}`).join(`
`);process.stdout.write(`${X0.default.gray(TD)}
${X0.default.green(xY)}  ${X0.default.reset(F)} ${X0.default.gray(pz.repeat(Math.max(J-B-1,1))+At)}
${Y}
${X0.default.gray(Ot+pz.repeat(J+2)+jt)}
`)};var tD=(D="")=>{process.stdout.write(`${X0.default.gray(qt)}  ${D}
`)},i0=(D="")=>{process.stdout.write(`${X0.default.gray(TD)}
${X0.default.gray(J7)}  ${D}

`)},s={message:(D="",{symbol:F=X0.default.gray(TD)}={})=>{let $=[`${X0.default.gray(TD)}`];if(D){let[B,...J]=D.split(`
`);$.push(`${F}  ${B}`,...J.map((Y)=>`${X0.default.gray(TD)}  ${Y}`))}process.stdout.write(`${$.join(`
`)}
`)},info:(D)=>{s.message(D,{symbol:X0.default.blue(Ut)})},success:(D)=>{s.message(D,{symbol:X0.default.green(Rt)})},step:(D)=>{s.message(D,{symbol:X0.default.green(xY)})},warn:(D)=>{s.message(D,{symbol:X0.default.yellow(Ct)})},warning:(D)=>{s.warn(D)},error:(D)=>{s.message(D,{symbol:X0.default.red(Zt)})}},qE0=`${X0.default.gray(TD)}  `;var vY=({indicator:D="dots"}={})=>{let F=UW?["\u25D2","\u25D0","\u25D3","\u25D1"]:["\u2022","o","O","0"],$=UW?80:120,B=process.env.CI==="true",J,Y,X=!1,Q="",w,f=performance.now(),G=(R)=>{let I=R>1?"Something went wrong":"Canceled";X&&C(I,R)},H=()=>G(2),K=()=>G(1),E=()=>{process.on("uncaughtExceptionMonitor",H),process.on("unhandledRejection",H),process.on("SIGINT",K),process.on("SIGTERM",K),process.on("exit",G)},O=()=>{process.removeListener("uncaughtExceptionMonitor",H),process.removeListener("unhandledRejection",H),process.removeListener("SIGINT",K),process.removeListener("SIGTERM",K),process.removeListener("exit",G)},q=()=>{if(w===void 0)return;B&&process.stdout.write(`
`);let R=w.split(`
`);process.stdout.write(yY.cursor.move(-999,R.length-1)),process.stdout.write(yY.erase.down(R.length))},U=(R)=>R.replace(/\.+$/,""),N=(R)=>{let I=(performance.now()-R)/1000,h=Math.floor(I/60),p=Math.floor(I%60);return h>0?`[${h}m ${p}s]`:`[${p}s]`},L=(R="")=>{X=!0,J=cz(),Q=U(R),f=performance.now(),process.stdout.write(`${X0.default.gray(TD)}
`);let I=0,h=0;E(),Y=setInterval(()=>{if(B&&Q===w)return;q(),w=Q;let p=X0.default.magenta(F[I]);if(B)process.stdout.write(`${p}  ${Q}...`);else if(D==="timer")process.stdout.write(`${p}  ${Q} ${N(f)}`);else{let P=".".repeat(Math.floor(h)).slice(0,3);process.stdout.write(`${p}  ${Q}${P}`)}I=I+1<F.length?I+1:0,h=h<F.length?h+0.125:0},$)},C=(R="",I=0)=>{X=!1,clearInterval(Y),q();let h=I===0?X0.default.green(xY):I===1?X0.default.red(iz):X0.default.red(dz);Q=U(R??Q),D==="timer"?process.stdout.write(`${h}  ${Q} ${N(f)}
`):process.stdout.write(`${h}  ${Q}
`),O(),J()};return{start:L,stop:C,message:(R="")=>{Q=U(R??Q)}}};import MB from"process";import{Buffer as FI}from"buffer";import $I from"path";import{fileURLToPath as nt}from"url";import ot from"util";import BI from"child_process";import SW,{constants as JI}from"fs/promises";import rz from"process";import It from"os";import Tt from"fs";import Lt from"fs";import nz from"fs";var MW;function Mt(){try{return nz.statSync("/.dockerenv"),!0}catch{return!1}}function _t(){try{return nz.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}function _W(){if(MW===void 0)MW=Mt()||_t();return MW}var LW,zt=()=>{try{return Lt.statSync("/run/.containerenv"),!0}catch{return!1}};function h9(){if(LW===void 0)LW=zt()||_W();return LW}var oz=()=>{if(rz.platform!=="linux")return!1;if(It.release().toLowerCase().includes("microsoft")){if(h9())return!1;return!0}try{return Tt.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!h9():!1}catch{return!1}},S9=rz.env.__IS_WSL_TEST__?oz:oz();function Y7(D,F,$){let B=(J)=>Object.defineProperty(D,F,{value:J,enumerable:!0,writable:!0});return Object.defineProperty(D,F,{configurable:!0,enumerable:!0,get(){let J=$();return B(J),J},set(J){B(J)}}),D}import{promisify as pt}from"util";import bW from"process";import{execFile as it}from"child_process";import{promisify as Pt}from"util";import bt from"process";import{execFile as ht}from"child_process";var St=Pt(ht);async function zW(){if(bt.platform!=="darwin")throw new Error("macOS only");let{stdout:D}=await St("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(D)?.groups.id??"com.apple.Safari"}import yt from"process";import{promisify as xt}from"util";import{execFile as kt,execFileSync as yE0}from"child_process";var ut=xt(kt);async function tz(D,{humanReadableOutput:F=!0}={}){if(yt.platform!=="darwin")throw new Error("macOS only");let $=F?[]:["-ss"],{stdout:B}=await ut("osascript",["-e",D,$]);return B.trim()}async function IW(D){return tz(`tell application "Finder" to set app_path to application file id "${D}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}import{promisify as vt}from"util";import{execFile as gt}from"child_process";var mt=vt(gt),ct={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}};class TW extends Error{}async function PW(D=mt){let{stdout:F}=await D("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),$=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(F);if(!$)throw new TW(`Cannot find Windows browser in stdout: ${JSON.stringify(F)}`);let{id:B}=$.groups,J=ct[B];if(!J)throw new TW(`Unknown browser ID: ${B}`);return J}var dt=pt(it),lt=(D)=>D.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,(F)=>F.toUpperCase());async function hW(){if(bW.platform==="darwin"){let D=await zW();return{name:await IW(D),id:D}}if(bW.platform==="linux"){let{stdout:D}=await dt("xdg-mime",["query","default","x-scheme-handler/http"]),F=D.trim();return{name:lt(F.replace(/.desktop$/,"").replace("-"," ")),id:F}}if(bW.platform==="win32")return PW();throw new Error("Only macOS, Linux, and Windows are supported")}var rt=ot.promisify(BI.execFile),yW=$I.dirname(nt(import.meta.url)),sz=$I.join(yW,"xdg-open"),{platform:y9,arch:az}=MB,tt=(()=>{let F;return async function(){if(F)return F;let $="/etc/wsl.conf",B=!1;try{await SW.access($,JI.F_OK),B=!0}catch{}if(!B)return"/mnt/";let J=await SW.readFile($,{encoding:"utf8"}),Y=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(J);if(!Y)return"/mnt/";return F=Y.groups.mountPoint.trim(),F=F.endsWith("/")?F:`${F}/`,F}})(),YI=async()=>{return`${await tt()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`};async function st(){let D=await YI(),F='(Get-ItemProperty -Path "HKCU:\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice").ProgId',$=FI.from('(Get-ItemProperty -Path "HKCU:\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice").ProgId',"utf16le").toString("base64"),{stdout:B}=await rt(D,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",$],{encoding:"utf8"}),J=B.trim(),Y={ChromeHTML:"com.google.chrome",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return Y[J]?{id:Y[J]}:{}}var ez=async(D,F)=>{let $;for(let B of D)try{return await F(B)}catch(J){$=J}throw $},gY=async(D)=>{if(D={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...D},Array.isArray(D.app))return ez(D.app,(Q)=>gY({...D,app:Q}));let{name:F,arguments:$=[]}=D.app??{};if($=[...$],Array.isArray(F))return ez(F,(Q)=>gY({...D,app:{name:Q,arguments:$}}));if(F==="browser"||F==="browserPrivate"){let Q={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},w={chrome:"--incognito",firefox:"--private-window",edge:"--inPrivate"},f=S9?await st():await hW();if(f.id in Q){let G=Q[f.id];if(F==="browserPrivate")$.push(w[G]);return gY({...D,app:{name:x9[G],arguments:$}})}throw new Error(`${f.name} is not supported as a default browser`)}let B,J=[],Y={};if(y9==="darwin"){if(B="open",D.wait)J.push("--wait-apps");if(D.background)J.push("--background");if(D.newInstance)J.push("--new");if(F)J.push("-a",F)}else if(y9==="win32"||S9&&!h9()&&!F){if(B=S9?await YI():`${MB.env.SYSTEMROOT||MB.env.windir||"C:\\Windows"}\\System32\\WindowsPowerShell\\v1.0\\powershell`,J.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),!S9)Y.windowsVerbatimArguments=!0;let Q=["Start"];if(D.wait)Q.push("-Wait");if(F){if(Q.push(`"\`"${F}\`""`),D.target)$.push(D.target)}else if(D.target)Q.push(`"${D.target}"`);if($.length>0)$=$.map((w)=>`"\`"${w}\`""`),Q.push("-ArgumentList",$.join(","));D.target=FI.from(Q.join(" "),"utf16le").toString("base64")}else{if(F)B=F;else{let Q=!yW||yW==="/",w=!1;try{await SW.access(sz,JI.X_OK),w=!0}catch{}B=MB.versions.electron??(y9==="android"||Q||!w)?"xdg-open":sz}if($.length>0)J.push(...$);if(!D.wait)Y.stdio="ignore",Y.detached=!0}if(y9==="darwin"&&$.length>0)J.push("--args",...$);if(D.target)J.push(D.target);let X=BI.spawn(B,J,Y);if(D.wait)return new Promise((Q,w)=>{X.once("error",w),X.once("close",(f)=>{if(!D.allowNonzeroExitCode&&f>0){w(new Error(`Exited with code ${f}`));return}Q(X)})});return X.unref(),X},at=(D,F)=>{if(typeof D!=="string")throw new TypeError("Expected a `target`");return gY({...F,target:D})};function DI(D){if(typeof D==="string"||Array.isArray(D))return D;let{[az]:F}=D;if(!F)throw new Error(`${az} is not supported`);return F}function xW({[y9]:D},{wsl:F}){if(F&&S9)return DI(F);if(!D)throw new Error(`${y9} is not supported`);return DI(D)}var x9={};Y7(x9,"chrome",()=>xW({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));Y7(x9,"firefox",()=>xW({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));Y7(x9,"edge",()=>xW({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));Y7(x9,"browser",()=>"browser");Y7(x9,"browserPrivate",()=>"browserPrivate");var XI=at;await Y$();P7();await d1();import et from"path";import Ds from"os";var QI=qD({command:"auth",describe:"manage credentials",builder:(D)=>D.command($s).command(Bs).command(Fs).demandCommand(),async handler(){}}),Fs=qD({command:"list",aliases:["ls"],describe:"list providers",async handler(){j.empty();let D=et.join(P0.Path.data,"auth.json"),F=Ds.homedir(),$=D.startsWith(F)?D.replace(F,"~"):D;tD(`Credentials ${j.Style.TEXT_DIM}${$}`);let B=await FF.all().then((X)=>Object.entries(X)),J=await dF.get();for(let[X,Q]of B){let w=J[X]?.name||X;s.info(`${w} ${j.Style.TEXT_DIM}${Q.type}`)}i0(`${B.length} credentials`);let Y=[];for(let[X,Q]of Object.entries(J))for(let w of Q.env)if(process.env[w])Y.push({provider:Q.name||X,envVar:w});if(Y.length>0){j.empty(),tD("Environment");for(let{provider:X,envVar:Q}of Y)s.info(`${X} ${j.Style.TEXT_DIM}${Q}`);i0(`${Y.length} environment variables`)}}}),$s=qD({command:"login",describe:"log in to a provider",async handler(){j.empty(),tD("Add credential");let D=await dF.get(),F={anthropic:0,"github-copilot":1,openai:2,google:3},$=await a6({message:"Select provider",maxItems:8,options:[...I7(D,cX(),Q$((Y)=>F[Y.id]??99,(Y)=>Y.name??Y.id),dX((Y)=>({label:Y.name,value:Y.id,hint:F[Y.id]===0?"recommended":void 0}))),{value:"other",label:"Other"}]});if(R1($))throw new j.CancelledError;if($==="other"){if($=await s6({message:"Enter provider id",validate:(Y)=>Y.match(/^[a-z-]+$/)?void 0:"a-z and hyphens only"}),R1($))throw new j.CancelledError;if($=$.replace(/^@ai-sdk\//,""),R1($))throw new j.CancelledError;s.warn(`This only stores a credential for ${$} - you will need configure it in dgmo.json, check the docs for examples.`)}if($==="amazon-bedrock"){s.info("Amazon bedrock can be configured with standard AWS environment variables like AWS_PROFILE or AWS_ACCESS_KEY_ID"),i0("Done");return}if($==="anthropic"){let Y=await a6({message:"Login method",options:[{label:"Claude Pro/Max",value:"oauth"},{label:"API Key",value:"api"}]});if(R1(Y))throw new j.CancelledError;if(Y==="oauth"){await new Promise((f)=>setTimeout(f,10));let{url:X,verifier:Q}=await K6.authorize();ZW("Trying to open browser...");try{await XI(X)}catch(f){s.error("Failed to open browser perhaps you are running without a display or X server, please open the following URL in your browser:")}s.info(X);let w=await s6({message:"Paste the authorization code here: ",validate:(f)=>f.length>0?void 0:"Required"});if(R1(w))throw new j.CancelledError;await K6.exchange(w,Q).then(()=>{s.success("Login successful")}).catch(()=>{s.error("Invalid code")}),i0("Done");return}}let B=await nJ();if($==="github-copilot"&&B){await new Promise((Q)=>setTimeout(Q,10));let Y=await B.authorize();ZW(`Please visit: ${Y.verification}
Enter code: ${Y.user}`);let X=vY();X.start("Waiting for authorization...");while(!0){await new Promise((w)=>setTimeout(w,Y.interval*1000));let Q=await B.poll(Y.device);if(Q.status==="pending")continue;if(Q.status==="success"){await FF.set("github-copilot",{type:"oauth",refresh:Q.refresh,access:Q.access,expires:Q.expires}),X.stop("Login successful");break}if(Q.status==="failed"){X.stop("Failed to authorize",1);break}}i0("Done");return}let J=await lz({message:"Enter your API key",validate:(Y)=>Y.length>0?void 0:"Required"});if(R1(J))throw new j.CancelledError;await FF.set($,{type:"api",key:J}),i0("Done")}}),Bs=qD({command:"logout",describe:"log out from a configured provider",async handler(){j.empty();let D=await FF.all().then((B)=>Object.entries(B));if(tD("Remove credential"),D.length===0){s.error("No credentials found");return}let F=await dF.get(),$=await a6({message:"Select provider",options:D.map(([B,J])=>({label:(F[B]?.name||B)+j.Style.TEXT_DIM+" ("+J.type+")",value:B}))});if(R1($))throw new j.CancelledError;await FF.remove($),i0("Logout successful")}});await XY();await MD();await lF();await d1();import X7 from"path";import e6 from"fs/promises";var wI=qD({command:"mcp",describe:"Manage MCP servers",builder:(D)=>D.command(Js).command(Ys).command(Xs).command(Qs).command(ws).command(fs).command(Ws).command(Gs).command(Hs).command(Es).command(Ks).command(qs).demandCommand().strict(),async handler(){}}),Js=qD({command:"list",aliases:["ls"],describe:"list all MCP servers",async handler(){j.empty(),tD("MCP Servers "+j.Style.TEXT_DIM+X7.join("~",".config","dgmo","config.json"));let D=X7.join(P0.Path.config,"config.json"),F={};try{let J=await e6.readFile(D,"utf-8");F=JSON.parse(J)}catch(J){}let $=F.mcp||{},B=Object.entries($);if(B.length===0){s.info("No MCP servers configured"),i0("Done");return}for(let[J,Y]of B){let X=Y,Q=X.type,w=X.enabled!==!1?"[enabled]":"[disabled]",f=X.type==="local"?X.command.join(" "):X.url;s.info(`\u25CF  ${J} ${j.Style.TEXT_DIM}${Q}${j.Style.TEXT_NORMAL} ${w}${j.Style.TEXT_NORMAL} ${j.Style.TEXT_DIM}${f}`)}i0(`${B.length} MCP servers`)}}),Ys=qD({command:"add",describe:"add a new MCP server",async handler(){j.empty(),tD("Add MCP server");let D=await s6({message:"Server name",placeholder:"my-server",validate:(X)=>{if(!X)return"Name is required";if(!/^[a-zA-Z0-9-_]+$/.test(X))return"Name must contain only letters, numbers, hyphens, and underscores"}});if(R1(D))throw new j.CancelledError;let F=await a6({message:"Server type",options:[{label:"Local (subprocess)",value:"local",hint:"Run an MCP server as a subprocess"},{label:"Remote (WebSocket)",value:"remote",hint:"Connect to a remote MCP server"}]});if(R1(F))throw new j.CancelledError;let $;if(F==="local"){let X=await s6({message:"Command to run",placeholder:"npx my-mcp-server",validate:(f)=>{if(!f)return"Command is required"}});if(R1(X))throw new j.CancelledError;let Q=await s6({message:"Environment variables (optional)",placeholder:"KEY1=value1 KEY2=value2"});if(R1(Q))throw new j.CancelledError;let w={};if(Q){let f=Q.split(/\s+/);for(let G of f){let[H,K]=G.split("=");if(H&&K)w[H]=K}}$={type:"local",command:X.split(/\s+/),environment:Object.keys(w).length>0?w:void 0}}else{let X=await s6({message:"WebSocket URL",placeholder:"ws://localhost:3000",validate:(Q)=>{if(!Q)return"URL is required";if(!Q.startsWith("ws://")&&!Q.startsWith("wss://"))return"URL must start with ws:// or wss://"}});if(R1(X))throw new j.CancelledError;$={type:"remote",url:X}}let B=X7.join(P0.Path.config,"config.json"),J={};try{let X=await e6.readFile(B,"utf-8");J=JSON.parse(X)}catch(X){}if(!J.mcp)J.mcp={};if(J.mcp[D]){let X=await uY({message:`Server "${D}" already exists. Overwrite?`,initialValue:!1});if(R1(X))throw new j.CancelledError;if(!X){i0("Cancelled");return}}J.mcp[D]=$,await e6.mkdir(X7.dirname(B),{recursive:!0}),await e6.writeFile(B,JSON.stringify(J,null,2)),s.success(`Added MCP server "${D}"`);let Y=await uY({message:"Test connection now?",initialValue:!0});if(R1(Y))throw new j.CancelledError;if(Y){s.info("Testing connection...");try{await w0.provide({cwd:process.cwd()},async()=>{let Q=(await bF.clients())[D];if(!Q)throw new Error("Failed to connect");let w=await Q.tools();s.success(`Connected! Found ${Object.keys(w).length} tools`)})}catch(X){s.error(`Failed to connect: ${X}`)}}i0("Done")}}),Xs=qD({command:"remove [server]",aliases:["rm"],describe:"remove an MCP server",builder:(D)=>D.positional("server",{describe:"name of the MCP server to remove",type:"string"}),async handler(D){let F=D.server;j.empty(),tD("Remove MCP server");let $=X7.join(P0.Path.config,"config.json"),B={};try{let w=await e6.readFile($,"utf-8");B=JSON.parse(w)}catch(w){if(w.code==="ENOENT"){s.error("No configuration file found"),i0("Failed");return}throw w}let J=B.mcp||{},Y=Object.keys(J);if(Y.length===0){s.error("No MCP servers configured"),i0("Failed");return}let X;if(F){if(!J[F]){s.error(`Server "${F}" not found`),i0("Failed");return}X=F}else{let w=await a6({message:"Select server to remove",options:Y.map((f)=>{let G=J[f],H=G.type,K=G.type==="local"?G.command.join(" "):G.url;return{label:`${f} ${j.Style.TEXT_DIM}(${H}: ${K})`,value:f}})});if(R1(w))throw new j.CancelledError;X=w}let Q=await uY({message:`Remove server "${X}"?`,initialValue:!1});if(R1(Q))throw new j.CancelledError;if(!Q){i0("Cancelled");return}delete B.mcp[X],await e6.writeFile($,JSON.stringify(B,null,2)),s.success(`Removed MCP server "${X}"`),i0("Done")}}),Qs=qD({command:"enable [server]",describe:"enable an MCP server",builder:(D)=>D.positional("server",{describe:"name of the MCP server to enable",type:"string"}),async handler(D){await fI(!0,D.server)}}),ws=qD({command:"disable [server]",describe:"disable an MCP server",builder:(D)=>D.positional("server",{describe:"name of the MCP server to disable",type:"string"}),async handler(D){await fI(!1,D.server)}});async function fI(D,F){j.empty(),tD(`${D?"Enable":"Disable"} MCP server`);let $=X7.join(P0.Path.config,"config.json"),B={};try{let X=await e6.readFile($,"utf-8");B=JSON.parse(X)}catch(X){if(X.code==="ENOENT"){s.error("No configuration file found"),i0("Failed");return}throw X}let J=B.mcp||{},Y;if(F){if(!J[F]){s.error(`Server "${F}" not found`),i0("Failed");return}let Q=J[F].enabled!==!1;if(D&&Q){s.warn(`Server "${F}" is already enabled`),i0("No change needed");return}if(!D&&!Q){s.warn(`Server "${F}" is already disabled`),i0("No change needed");return}Y=F}else{let X=Object.keys(J).filter((w)=>{let f=J[w];return D?f.enabled===!1:f.enabled!==!1});if(X.length===0){s.error(`No MCP servers to ${D?"enable":"disable"}`),i0("Failed");return}let Q=await a6({message:`Select server to ${D?"enable":"disable"}`,options:X.map((w)=>{let f=J[w],G=f.type,H=f.type==="local"?f.command.join(" "):f.url;return{label:`${w} ${j.Style.TEXT_DIM}(${G}: ${H})`,value:w}})});if(R1(Q))throw new j.CancelledError;Y=Q}if(D)delete B.mcp[Y].enabled;else B.mcp[Y].enabled=!1;await e6.writeFile($,JSON.stringify(B,null,2)),s.success(`${D?"Enabled":"Disabled"} MCP server "${Y}"`),i0("Done")}var fs=qD({command:"status [server]",describe:"show detailed MCP server status",builder:(D)=>D.positional("server",{describe:"specific server to check status (optional)",type:"string"}),async handler(D){j.empty();let F=D.server;if(F)tD(`MCP Server Status: ${F}`);else tD("MCP Server Status");try{await w0.provide({cwd:process.cwd()},async()=>{let $=await bF.clients(),J=(await HD.get()).mcp||{};if(F){if(!J[F]){s.error(`Server "${F}" not found in configuration`),i0("Failed");return}let Y=J[F],X=$[F],Q=!!X;if(s.info(`${j.Style.TEXT_HIGHLIGHT_BOLD}${F}${j.Style.TEXT_NORMAL}`),s.info(`  Type: ${Y.type}`),s.info(`  Enabled: ${Y.enabled!==!1?"\u2705 Yes":"\u274C No"}`),s.info(`  Status: ${Q?"\u2705 Connected":"\u274C Disconnected"}`),Y.type==="local"){if(s.info(`  Command: ${Y.command.join(" ")}`),Y.environment)s.info(`  Environment: ${Object.entries(Y.environment).map(([w,f])=>`${w}=${f}`).join(", ")}`)}else s.info(`  URL: ${Y.url}`);if(Q)try{let w=await X.tools();s.info(`  Tools: ${Object.keys(w).length} available`)}catch(w){s.warn(`  Tools: Error loading (${w})`)}}else{let Y=Object.entries(J);if(Y.length===0)s.info("No MCP servers configured");else{for(let[w,f]of Y){let H=!!$[w],K=f.enabled!==!1,E="\u274C";if(K&&H)E="\u2705";else if(!K)E="\u26AB";else if(K&&!H)E="\u26A0\uFE0F";let O=f.type==="local"?"local":"remote",q=f.type==="local"?f.command.join(" "):f.url;s.info(`${E} ${w} ${j.Style.TEXT_DIM}${O}${j.Style.TEXT_NORMAL} ${j.Style.TEXT_DIM}${q}${j.Style.TEXT_NORMAL}`)}let X=Object.keys($).length,Q=Y.length;s.info(`
${X}/${Q} servers connected`)}}i0("Done")})}catch($){s.error(`Failed to get server status: ${$}`),i0("Failed")}}}),Ws=qD({command:"test [server]",describe:"test MCP server connections",builder:(D)=>D.positional("server",{describe:"specific server to test (optional)",type:"string"}),async handler(D){j.empty();let F=D.server;if(F)tD(`Testing MCP Server: ${F}`);else tD("Testing MCP Servers");try{await w0.provide({cwd:process.cwd()},async()=>{let B=(await HD.get()).mcp||{},J=[];if(F){if(!B[F]){s.error(`Server "${F}" not found`),i0("Failed");return}J=[[F,B[F]]]}else J=Object.entries(B).filter(([Q,w])=>w.enabled!==!1);let Y=0,X=J.length;for(let[Q,w]of J){s.info(`
${j.Style.TEXT_HIGHLIGHT_BOLD}${Q}${j.Style.TEXT_NORMAL}`);try{s.info("  \uD83D\uDD04 Connecting...");let G=(await bF.clients())[Q];if(!G)throw new Error("Failed to establish connection");s.success("  \u2705 Connected"),s.info("  \uD83D\uDD04 Loading tools...");let H=await G.tools();s.success(`  \u2705 Tools: ${Object.keys(H).length} available`),Y++}catch(f){s.error(`  \u274C Failed: ${f}`)}}if(s.info(`
${j.Style.TEXT_HIGHLIGHT_BOLD}Test Results${j.Style.TEXT_NORMAL}`),s.info(`Passed: ${Y}/${X} servers`),Y===X)i0("All tests passed");else i0("Some tests failed")})}catch($){s.error(`Failed to test servers: ${$}`),i0("Failed")}}}),Gs=qD({command:"tools [server]",describe:"list and inspect MCP tools",builder:(D)=>D.positional("server",{describe:"specific server to show tools for (optional)",type:"string"}),async handler(D){j.empty();let F=D.server;if(F)tD(`MCP Tools: ${F}`);else tD("MCP Tools");try{await w0.provide({cwd:process.cwd()},async()=>{let $=await bF.clients(),B=await bF.tools();if(F){let J=$[F];if(!J){s.error(`Server "${F}" not connected`),i0("Failed");return}try{let Y=await J.tools(),X=Object.entries(Y);if(X.length===0)s.info("No tools available");else for(let[Q,w]of X){if(s.info(`
${j.Style.TEXT_HIGHLIGHT_BOLD}${Q}${j.Style.TEXT_NORMAL}`),w.description)s.info(`  ${w.description}`);if(w.parameters)s.info(`  ${j.Style.TEXT_DIM}Parameters: ${JSON.stringify(w.parameters)}${j.Style.TEXT_NORMAL}`)}i0(`${X.length} tools`)}catch(Y){s.error(`Failed to load tools: ${Y}`),i0("Failed")}}else{let J={},Y=0;for(let[X,Q]of Object.entries(B)){let w=X.split("_")[0];if(!J[w])J[w]=[];J[w].push(X),Y++}if(Y===0)s.info("No tools available from any server");else{for(let[X,Q]of Object.entries(J)){s.info(`
${j.Style.TEXT_HIGHLIGHT_BOLD}${X}${j.Style.TEXT_NORMAL} ${j.Style.TEXT_DIM}(${Q.length} tools)${j.Style.TEXT_NORMAL}`);for(let w of Q.slice(0,5)){let f=B[w];s.info(`  ${w}${f.description?` - ${f.description}`:""}`)}if(Q.length>5)s.info(`  ${j.Style.TEXT_DIM}... and ${Q.length-5} more${j.Style.TEXT_NORMAL}`)}s.info(`
${Y} total tools from ${Object.keys(J).length} servers`)}i0("Done")}})}catch($){s.error(`Failed to list tools: ${$}`),i0("Failed")}}}),Hs=qD({command:"resources [server]",describe:"list available MCP resources",builder:(D)=>D.positional("server",{describe:"specific server to show resources for (optional)",type:"string"}),async handler(D){j.empty();let F=D.server;if(F)tD(`MCP Resources: ${F}`);else tD("MCP Resources");try{let $=await bF.clients();if(F){let B=$[F];if(!B){s.error(`Server "${F}" not connected`),i0("Failed");return}try{let J=await B.resources?.()||[];if(J.length===0)s.info("No resources available");else for(let Y of J){if(s.info(`${j.Style.TEXT_HIGHLIGHT_BOLD}${Y.uri||Y.name}${j.Style.TEXT_NORMAL}`),Y.description)s.info(`  ${Y.description}`);if(Y.mimeType)s.info(`  ${j.Style.TEXT_DIM}Type: ${Y.mimeType}${j.Style.TEXT_NORMAL}`)}i0(`${J.length} resources`)}catch(J){s.warn("Resources not supported by this server"),i0("Not supported")}}else{let B=0,J=0;for(let[Y,X]of Object.entries($))try{let Q=await X.resources?.()||[];if(Q.length>0){J++,s.info(`
${j.Style.TEXT_HIGHLIGHT_BOLD}${Y}${j.Style.TEXT_NORMAL} ${j.Style.TEXT_DIM}(${Q.length} resources)${j.Style.TEXT_NORMAL}`);for(let w of Q.slice(0,5))s.info(`  ${w.uri||w.name}${w.description?` - ${w.description}`:""}`),B++;if(Q.length>5)s.info(`  ${j.Style.TEXT_DIM}... and ${Q.length-5} more${j.Style.TEXT_NORMAL}`),B+=Q.length-5}}catch(Q){}if(B===0)s.info("No resources available from any server");else s.info(`
${B} total resources from ${J} servers`);i0("Done")}}catch($){s.error(`Failed to list resources: ${$}`),i0("Failed")}}}),Es=qD({command:"debug [server]",describe:"show debug information and diagnostics",builder:(D)=>D.positional("server",{describe:"specific server to debug (optional)",type:"string"}),async handler(D){j.empty();let F=D.server;if(F)tD(`MCP Debug: ${F}`);else tD("MCP Debug Information");try{let B=(await HD.get()).mcp||{};if(F){if(!B[F]){s.error(`Server "${F}" not found`),i0("Failed");return}let J=B[F];if(s.info(`${j.Style.TEXT_HIGHLIGHT_BOLD}Configuration${j.Style.TEXT_NORMAL}`),s.info(`  Name: ${F}`),s.info(`  Type: ${J.type}`),s.info(`  Enabled: ${J.enabled!==!1}`),J.type==="local"){if(s.info(`  Command: ${J.command.join(" ")}`),J.environment){s.info("  Environment:");for(let[Y,X]of Object.entries(J.environment))s.info(`    ${Y}=${X}`)}}else s.info(`  URL: ${J.url}`)}else s.info(`${j.Style.TEXT_HIGHLIGHT_BOLD}Global Configuration${j.Style.TEXT_NORMAL}`),s.info(`  Config path: ${X7.join(P0.Path.config,"config.json")}`),s.info(`  Total servers: ${Object.keys(B).length}`),s.info(`  Enabled servers: ${Object.values(B).filter((J)=>J.enabled!==!1).length}`);i0("Done")}catch($){s.error(`Failed to get debug info: ${$}`),i0("Failed")}}}),Ks=qD({command:"logs [server]",describe:"show MCP server logs",builder:(D)=>D.positional("server",{describe:"specific server to show logs for (optional)",type:"string"}),async handler(D){j.empty();let F=D.server;if(F)tD(`MCP Logs: ${F}`);else tD("MCP Server Logs");s.info("Log viewing not yet implemented"),i0("Done")}}),qs=qD({command:"health",describe:"check overall MCP system health",async handler(){j.empty(),tD("MCP System Health Check");try{await w0.provide({cwd:process.cwd()},async()=>{let F=(await HD.get()).mcp||{},$=await bF.clients(),B=Object.keys(F).length,J=Object.values(F).filter((X)=>X.enabled!==!1).length,Y=Object.keys($).length;if(s.info(`${j.Style.TEXT_HIGHLIGHT_BOLD}System Status${j.Style.TEXT_NORMAL}`),s.info(`  Total servers: ${B}`),s.info(`  Enabled servers: ${J}`),s.info(`  Connected servers: ${Y}`),Y===J)s.success(`
\u2705 All enabled servers are connected`);else if(Y===0)s.error(`
\u274C No servers are connected`);else s.warn(`
\u26A0\uFE0F  Only ${Y}/${J} enabled servers are connected`);i0("Health check complete")})}catch(D){s.error(`Failed to check health: ${D}`),i0("Failed")}}});await U9();var WI={command:"upgrade [target]",describe:"upgrade dgmo to the latest or a specific version",builder:(D)=>{return D.positional("target",{describe:"version to upgrade to, for ex '0.1.48' or 'v0.1.48'",type:"string"}).option("method",{alias:"m",describe:"installation method to use",type:"string",choices:["curl","npm","pnpm","bun","brew"]})},handler:async(D)=>{j.empty(),j.println(j.logo("  ")),j.empty(),tD("Upgrade");let F=await Q1.method(),$=D.method??F;if($==="unknown"){s.error(`dgmo is installed to ${process.execPath} and seems to be managed by a package manager`),i0("Done");return}s.info("Using method: "+$);let B=D.target??await Q1.latest();s.info(`From ${Q1.VERSION} \u2192 ${B}`);let J=vY();J.start("Upgrading...");let Y=await Q1.upgrade($,B).catch((X)=>X);if(Y){if(J.stop("Upgrade failed"),Y instanceof Q1.UpgradeFailedError)s.error(Y.data.stderr);else if(Y instanceof Error)s.error(Y.message);i0("Done");return}J.stop("Upgrade complete"),i0("Done")}};await MD();await a8();var GI=qD({command:"models",describe:"list all available models",handler:async()=>{await w0.provide({cwd:process.cwd()},async()=>{let D=await z1.list();for(let[F,$]of Object.entries(D))for(let B of Object.keys($.info.models))console.log(`${F}/${B}`)})}});await U9();QF();await lF();await XY();function HI(D){if(bF.Failed.isInstance(D))return`MCP server "${D.data.name}" failed. Note, dgmo does not support MCP authentication yet.`;if(HD.JsonError.isInstance(D))return`Config file at ${D.data.path} is not valid JSON`;if(HD.InvalidError.isInstance(D))return[`Config file at ${D.data.path} is invalid`,...D.data.issues?.map((F)=>"\u21B3 "+F.message+" "+F.path.join("."))??[]].join(`
`);if(j.CancelledError.isInstance(D))return""}await MD();await a8();await JY();await IY();var EI=qD({command:"serve",builder:(D)=>D.option("port",{alias:["p"],type:"number",describe:"port to listen on",default:4096}).option("hostname",{alias:["h"],type:"string",describe:"hostname to listen on",default:"127.0.0.1"}),describe:"starts a headless dgmo server",handler:async(D)=>{let F=process.cwd();await w0.provide({cwd:F},async()=>{let $=await z1.list();if(Object.keys($).length===0)return"needs_provider";let{hostname:B,port:J}=D;await d2.init();let Y=B7.listen({port:J,hostname:B});b9.start(),console.log(`dgmo server listening on http://${Y.hostname}:${Y.port}`),console.log("Task event WebSocket server listening on ws://localhost:5747"),await new Promise(()=>{}),Y.stop()})}});await d1();await a8();await U9();await lF();await eD();await IY();import KI from"path";import Vs from"fs/promises";var qI=qD({command:"$0 [project]",describe:"start dgmo tui",builder:(D)=>D.positional("project",{type:"string",describe:"path to start dgmo in"}),handler:async(D)=>{while(!0){let F=D.project?KI.resolve(D.project):process.cwd();try{process.chdir(F)}catch(B){j.error("Failed to change directory to "+F);return}let $=await $2({cwd:F},async(B)=>{let J=await z1.list();if(Object.keys(J).length===0)return"needs_provider";let Y=B7.listen({port:0,hostname:"127.0.0.1"});b9.start();let X=!1,Q=()=>{if(!X&&Y)X=!0,Y.stop(),b9.stop()},f=[Bun.which("go",{PATH:process.env.PATH})||"/usr/bin/go","run","./main.go"],G=Bun.fileURLToPath(new URL("../../../../tui/cmd/dgmo",import.meta.url));if(Bun.embeddedFiles.length>0){let K=Bun.embeddedFiles[0],E=K.name;if(process.platform==="win32"&&!E.endsWith(".exe"))E+=".exe";let O=KI.join(P0.Path.cache,"tui",E),q=Bun.file(O);if(!await q.exists())await Bun.write(q,K,{mode:493}),await Vs.chmod(O,493);G=process.cwd(),f=[O]}let H=Bun.spawn({cmd:[...f,...process.argv.slice(2)],cwd:G,stdout:process.env.OPENCODE_ENV==="production"?"ignore":"inherit",stderr:process.env.OPENCODE_ENV==="production"?"ignore":"inherit",stdin:"inherit",env:{...process.env,OPENCODE_ENV:process.env.OPENCODE_ENV||"production",DGMO_SERVER:`http://${Y.hostname}:${Y.port}`,OPENCODE_SERVER:`http://${Y.hostname}:${Y.port}`,DGMO_APP_INFO:JSON.stringify(B),OPENCODE_APP_INFO:JSON.stringify(B)},onExit:()=>{Q()}});return(async()=>{if(Q1.VERSION==="dev")return;if(Q1.isSnapshot())return;if((await HD.global()).autoupdate===!1)return;let E=await Q1.latest().catch(()=>{});if(!E)return;if(Q1.VERSION===E)return;let O=await Q1.method();if(O==="unknown")return;await Q1.upgrade(O,E).then(()=>{F0.publish(Q1.Event.Updated,{version:E})}).catch(()=>{})})(),await H.exited,Q(),"done"});if($==="done")break;if($==="needs_provider"){if(j.empty(),j.println(j.logo("   ")),await Bun.spawn({cmd:[process.execPath,process.argv[1],"auth","login"],cwd:process.cwd(),stdout:"inherit",stderr:"inherit",stdin:"inherit"}).exited!==0)return;j.empty()}}}});await MD();await u8();await e7();await r7();await xD();import As from"path";var VI=qD({command:"debug",builder:(D)=>D.command(Os).command(Us).command(js).command(Ns).demandCommand(),async handler(){}}),Os=qD({command:"diagnostics <file>",builder:(D)=>D.positional("file",{type:"string",demandOption:!0}),async handler(D){await $2({cwd:process.cwd()},async()=>{await j1.touchFile(D.file,!0),await j1.touchFile(D.file,!0),console.log(await j1.diagnostics())})}}),js=qD({command:"symbols <query>",builder:(D)=>D.positional("query",{type:"string",demandOption:!0}),async handler(D){await $2({cwd:process.cwd()},async()=>{let B=[];try{await j1.touchFile("./src/index.ts",!0);const F=Y8(B,Z0.Default.time("symbols"),0);let $=await j1.workspaceSymbol(D.query);console.log(JSON.stringify($,null,2))}catch(J){var Y=J,X=1}finally{X8(B,Y,X)}})}}),Us=qD({command:"rg",builder:(D)=>D.command(Rs).command(Cs).command(Zs).demandCommand(),async handler(){}}),Rs=qD({command:"tree",builder:(D)=>D.option("limit",{type:"number"}),async handler(D){await $2({cwd:process.cwd()},async()=>{let F=w0.info();console.log(await o1.tree({cwd:F.path.cwd,limit:D.limit}))})}}),Cs=qD({command:"files",builder:(D)=>D.option("query",{type:"string",description:"Filter files by query"}).option("glob",{type:"string",description:"Glob pattern to match files"}).option("limit",{type:"number",description:"Limit number of results"}),async handler(D){await $2({cwd:process.cwd()},async()=>{let F=w0.info(),$=await o1.files({cwd:F.path.cwd,query:D.query,glob:D.glob,limit:D.limit});console.log($.join(`
`))})}}),Zs=qD({command:"search <pattern>",builder:(D)=>D.positional("pattern",{type:"string",demandOption:!0,description:"Search pattern"}).option("glob",{type:"array",description:"File glob patterns"}).option("limit",{type:"number",description:"Limit number of results"}),async handler(D){let F=await o1.search({cwd:process.cwd(),pattern:D.pattern,glob:D.glob,limit:D.limit});console.log(JSON.stringify(F,null,2))}}),Ns=qD({command:"file-read <path>",builder:(D)=>D.positional("path",{type:"string",demandOption:!0,description:"File path to read"}),async handler(D){await $2({cwd:process.cwd()},async()=>{let F=await tF.read(As.resolve(D.path));console.log(F)})}});await l2();await Wf();ff();import ns from"path";bD();O1();bD();O1();C0();O1();C0();bD();bD();O1();C0();var Ms=W.object({type:W.literal("error"),error:W.object({type:W.string(),message:W.string()})}),AI=rE({errorSchema:Ms,errorToMessage:(D)=>D.error.message});function _s(D){var F;let $=((F=D.tools)==null?void 0:F.length)?D.tools:void 0,B=[],J=new Set;if($==null)return{tools:void 0,tool_choice:void 0,toolWarnings:B,betas:J};let Y=[];for(let w of $)switch(w.type){case"function":Y.push({name:w.name,description:w.description,input_schema:w.parameters});break;case"provider-defined":switch(w.id){case"anthropic.computer_20250124":J.add("computer-use-2025-01-24"),Y.push({name:w.name,type:"computer_20250124",display_width_px:w.args.displayWidthPx,display_height_px:w.args.displayHeightPx,display_number:w.args.displayNumber});break;case"anthropic.computer_20241022":J.add("computer-use-2024-10-22"),Y.push({name:w.name,type:"computer_20241022",display_width_px:w.args.displayWidthPx,display_height_px:w.args.displayHeightPx,display_number:w.args.displayNumber});break;case"anthropic.text_editor_20250124":J.add("computer-use-2025-01-24"),Y.push({name:w.name,type:"text_editor_20250124"});break;case"anthropic.text_editor_20241022":J.add("computer-use-2024-10-22"),Y.push({name:w.name,type:"text_editor_20241022"});break;case"anthropic.bash_20250124":J.add("computer-use-2025-01-24"),Y.push({name:w.name,type:"bash_20250124"});break;case"anthropic.bash_20241022":J.add("computer-use-2024-10-22"),Y.push({name:w.name,type:"bash_20241022"});break;default:B.push({type:"unsupported-tool",tool:w});break}break;default:B.push({type:"unsupported-tool",tool:w});break}let X=D.toolChoice;if(X==null)return{tools:Y,tool_choice:void 0,toolWarnings:B,betas:J};let Q=X.type;switch(Q){case"auto":return{tools:Y,tool_choice:{type:"auto"},toolWarnings:B,betas:J};case"required":return{tools:Y,tool_choice:{type:"any"},toolWarnings:B,betas:J};case"none":return{tools:void 0,tool_choice:void 0,toolWarnings:B,betas:J};case"tool":return{tools:Y,tool_choice:{type:"tool",name:X.toolName},toolWarnings:B,betas:J};default:throw new Y6({functionality:`Unsupported tool choice type: ${Q}`})}}function Ls({prompt:D,sendReasoning:F,warnings:$}){var B,J,Y,X;let Q=new Set,w=zs(D),f=void 0,G=[];function H(K){var E;let O=K==null?void 0:K.anthropic;return(E=O==null?void 0:O.cacheControl)!=null?E:O==null?void 0:O.cache_control}for(let K=0;K<w.length;K++){let E=w[K],O=K===w.length-1,q=E.type;switch(q){case"system":{if(f!=null)throw new Y6({functionality:"Multiple system messages that are separated by user/assistant messages"});f=E.messages.map(({content:U,providerMetadata:N})=>({type:"text",text:U,cache_control:H(N)}));break}case"user":{let U=[];for(let N of E.messages){let{role:L,content:C}=N;switch(L){case"user":{for(let R=0;R<C.length;R++){let I=C[R],h=R===C.length-1,p=(B=H(I.providerMetadata))!=null?B:h?H(N.providerMetadata):void 0;switch(I.type){case"text":{U.push({type:"text",text:I.text,cache_control:p});break}case"image":{U.push({type:"image",source:I.image instanceof URL?{type:"url",url:I.image.toString()}:{type:"base64",media_type:(J=I.mimeType)!=null?J:"image/jpeg",data:T8(I.image)},cache_control:p});break}case"file":{if(I.mimeType!=="application/pdf")throw new Y6({functionality:"Non-PDF files in user messages"});Q.add("pdfs-2024-09-25"),U.push({type:"document",source:I.data instanceof URL?{type:"url",url:I.data.toString()}:{type:"base64",media_type:"application/pdf",data:I.data},cache_control:p});break}}}break}case"tool":{for(let R=0;R<C.length;R++){let I=C[R],h=R===C.length-1,p=(Y=H(I.providerMetadata))!=null?Y:h?H(N.providerMetadata):void 0,P=I.content!=null?I.content.map((v)=>{var n;switch(v.type){case"text":return{type:"text",text:v.text,cache_control:void 0};case"image":return{type:"image",source:{type:"base64",media_type:(n=v.mimeType)!=null?n:"image/jpeg",data:v.data},cache_control:void 0}}}):JSON.stringify(I.result);U.push({type:"tool_result",tool_use_id:I.toolCallId,content:P,is_error:I.isError,cache_control:p})}break}default:throw new Error(`Unsupported role: ${L}`)}}G.push({role:"user",content:U});break}case"assistant":{let U=[];for(let N=0;N<E.messages.length;N++){let L=E.messages[N],C=N===E.messages.length-1,{content:R}=L;for(let I=0;I<R.length;I++){let h=R[I],p=I===R.length-1,P=(X=H(h.providerMetadata))!=null?X:p?H(L.providerMetadata):void 0;switch(h.type){case"text":{U.push({type:"text",text:O&&C&&p?h.text.trim():h.text,cache_control:P});break}case"reasoning":{if(F)U.push({type:"thinking",thinking:h.text,signature:h.signature,cache_control:P});else $.push({type:"other",message:"sending reasoning content is disabled for this model"});break}case"redacted-reasoning":{U.push({type:"redacted_thinking",data:h.data,cache_control:P});break}case"tool-call":{U.push({type:"tool_use",id:h.toolCallId,name:h.toolName,input:h.args,cache_control:P});break}}}}G.push({role:"assistant",content:U});break}default:throw new Error(`Unsupported type: ${q}`)}}return{prompt:{system:f,messages:G},betas:Q}}function zs(D){let F=[],$=void 0;for(let B of D){let{role:J}=B;switch(J){case"system":{if(($==null?void 0:$.type)!=="system")$={type:"system",messages:[]},F.push($);$.messages.push(B);break}case"assistant":{if(($==null?void 0:$.type)!=="assistant")$={type:"assistant",messages:[]},F.push($);$.messages.push(B);break}case"user":{if(($==null?void 0:$.type)!=="user")$={type:"user",messages:[]},F.push($);$.messages.push(B);break}case"tool":{if(($==null?void 0:$.type)!=="user")$={type:"user",messages:[]},F.push($);$.messages.push(B);break}default:throw new Error(`Unsupported role: ${J}`)}}return F}function OI(D){switch(D){case"end_turn":case"stop_sequence":return"stop";case"tool_use":return"tool-calls";case"max_tokens":return"length";default:return"unknown"}}var Is=class{constructor(D,F,$){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=D,this.settings=F,this.config=$}supportsUrl(D){return D.protocol==="https:"}get provider(){return this.config.provider}get supportsImageUrls(){return this.config.supportsImageUrls}async getArgs({mode:D,prompt:F,maxTokens:$=4096,temperature:B,topP:J,topK:Y,frequencyPenalty:X,presencePenalty:Q,stopSequences:w,responseFormat:f,seed:G,providerMetadata:H}){var K,E,O;let q=D.type,U=[];if(X!=null)U.push({type:"unsupported-setting",setting:"frequencyPenalty"});if(Q!=null)U.push({type:"unsupported-setting",setting:"presencePenalty"});if(G!=null)U.push({type:"unsupported-setting",setting:"seed"});if(f!=null&&f.type!=="text")U.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});let{prompt:N,betas:L}=Ls({prompt:F,sendReasoning:(K=this.settings.sendReasoning)!=null?K:!0,warnings:U}),C=nE({provider:"anthropic",providerOptions:H,schema:bs}),R=((E=C==null?void 0:C.thinking)==null?void 0:E.type)==="enabled",I=(O=C==null?void 0:C.thinking)==null?void 0:O.budgetTokens,h={model:this.modelId,max_tokens:$,temperature:B,top_k:Y,top_p:J,stop_sequences:w,...R&&{thinking:{type:"enabled",budget_tokens:I}},system:N.system,messages:N.messages};if(R){if(I==null)throw new Y6({functionality:"thinking requires a budget"});if(h.temperature!=null)h.temperature=void 0,U.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported when thinking is enabled"});if(Y!=null)h.top_k=void 0,U.push({type:"unsupported-setting",setting:"topK",details:"topK is not supported when thinking is enabled"});if(J!=null)h.top_p=void 0,U.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported when thinking is enabled"});h.max_tokens=$+I}switch(q){case"regular":{let{tools:p,tool_choice:P,toolWarnings:v,betas:n}=_s(D);return{args:{...h,tools:p,tool_choice:P},warnings:[...U,...v],betas:new Set([...L,...n])}}case"object-json":throw new Y6({functionality:"json-mode object generation"});case"object-tool":{let{name:p,description:P,parameters:v}=D.tool;return{args:{...h,tools:[{name:p,description:P,input_schema:v}],tool_choice:{type:"tool",name:p}},warnings:U,betas:L}}default:throw new Error(`Unsupported type: ${q}`)}}async getHeaders({betas:D,headers:F}){return cE(await oE(this.config.headers),D.size>0?{"anthropic-beta":Array.from(D).join(",")}:{},F)}buildRequestUrl(D){var F,$,B;return(B=($=(F=this.config).buildRequestUrl)==null?void 0:$.call(F,this.config.baseURL,D))!=null?B:`${this.config.baseURL}/messages`}transformRequestBody(D){var F,$,B;return(B=($=(F=this.config).transformRequestBody)==null?void 0:$.call(F,D))!=null?B:D}async doGenerate(D){var F,$,B,J;let{args:Y,warnings:X,betas:Q}=await this.getArgs(D),{responseHeaders:w,value:f,rawValue:G}=await sX({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:Q,headers:D.headers}),body:this.transformRequestBody(Y),failedResponseHandler:AI,successfulResponseHandler:sE(Ts),abortSignal:D.abortSignal,fetch:this.config.fetch}),{messages:H,...K}=Y,E="";for(let U of f.content)if(U.type==="text")E+=U.text;let O=void 0;if(f.content.some((U)=>U.type==="tool_use")){O=[];for(let U of f.content)if(U.type==="tool_use")O.push({toolCallType:"function",toolCallId:U.id,toolName:U.name,args:JSON.stringify(U.input)})}let q=f.content.filter((U)=>U.type==="redacted_thinking"||U.type==="thinking").map((U)=>U.type==="thinking"?{type:"text",text:U.thinking,signature:U.signature}:{type:"redacted",data:U.data});return{text:E,reasoning:q.length>0?q:void 0,toolCalls:O,finishReason:OI(f.stop_reason),usage:{promptTokens:f.usage.input_tokens,completionTokens:f.usage.output_tokens},rawCall:{rawPrompt:H,rawSettings:K},rawResponse:{headers:w,body:G},response:{id:(F=f.id)!=null?F:void 0,modelId:($=f.model)!=null?$:void 0},warnings:X,providerMetadata:{anthropic:{cacheCreationInputTokens:(B=f.usage.cache_creation_input_tokens)!=null?B:null,cacheReadInputTokens:(J=f.usage.cache_read_input_tokens)!=null?J:null}},request:{body:JSON.stringify(Y)}}}async doStream(D){let{args:F,warnings:$,betas:B}=await this.getArgs(D),J={...F,stream:!0},{responseHeaders:Y,value:X}=await sX({url:this.buildRequestUrl(!0),headers:await this.getHeaders({betas:B,headers:D.headers}),body:this.transformRequestBody(J),failedResponseHandler:AI,successfulResponseHandler:tE(Ps),abortSignal:D.abortSignal,fetch:this.config.fetch}),{messages:Q,...w}=F,f="unknown",G={promptTokens:Number.NaN,completionTokens:Number.NaN},H={},K=void 0,E=void 0;return{stream:X.pipeThrough(new TransformStream({transform(O,q){var U,N,L,C;if(!O.success){q.enqueue({type:"error",error:O.error});return}let R=O.value;switch(R.type){case"ping":return;case"content_block_start":{let I=R.content_block.type;switch(E=I,I){case"text":case"thinking":return;case"redacted_thinking":{q.enqueue({type:"redacted-reasoning",data:R.content_block.data});return}case"tool_use":{H[R.index]={toolCallId:R.content_block.id,toolName:R.content_block.name,jsonText:""};return}default:throw new Error(`Unsupported content block type: ${I}`)}}case"content_block_stop":{if(H[R.index]!=null){let I=H[R.index];q.enqueue({type:"tool-call",toolCallType:"function",toolCallId:I.toolCallId,toolName:I.toolName,args:I.jsonText}),delete H[R.index]}E=void 0;return}case"content_block_delta":{let I=R.delta.type;switch(I){case"text_delta":{q.enqueue({type:"text-delta",textDelta:R.delta.text});return}case"thinking_delta":{q.enqueue({type:"reasoning",textDelta:R.delta.thinking});return}case"signature_delta":{if(E==="thinking")q.enqueue({type:"reasoning-signature",signature:R.delta.signature});return}case"input_json_delta":{let h=H[R.index];q.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:h.toolCallId,toolName:h.toolName,argsTextDelta:R.delta.partial_json}),h.jsonText+=R.delta.partial_json;return}default:throw new Error(`Unsupported delta type: ${I}`)}}case"message_start":{G.promptTokens=R.message.usage.input_tokens,G.completionTokens=R.message.usage.output_tokens,K={anthropic:{cacheCreationInputTokens:(U=R.message.usage.cache_creation_input_tokens)!=null?U:null,cacheReadInputTokens:(N=R.message.usage.cache_read_input_tokens)!=null?N:null}},q.enqueue({type:"response-metadata",id:(L=R.message.id)!=null?L:void 0,modelId:(C=R.message.model)!=null?C:void 0});return}case"message_delta":{G.completionTokens=R.usage.output_tokens,f=OI(R.delta.stop_reason);return}case"message_stop":{q.enqueue({type:"finish",finishReason:f,usage:G,providerMetadata:K});return}case"error":{q.enqueue({type:"error",error:R.error});return}default:throw new Error(`Unsupported chunk type: ${R}`)}}})),rawCall:{rawPrompt:Q,rawSettings:w},rawResponse:{headers:Y},warnings:$,request:{body:JSON.stringify(J)}}}},Ts=W.object({type:W.literal("message"),id:W.string().nullish(),model:W.string().nullish(),content:W.array(W.discriminatedUnion("type",[W.object({type:W.literal("text"),text:W.string()}),W.object({type:W.literal("thinking"),thinking:W.string(),signature:W.string()}),W.object({type:W.literal("redacted_thinking"),data:W.string()}),W.object({type:W.literal("tool_use"),id:W.string(),name:W.string(),input:W.unknown()})])),stop_reason:W.string().nullish(),usage:W.object({input_tokens:W.number(),output_tokens:W.number(),cache_creation_input_tokens:W.number().nullish(),cache_read_input_tokens:W.number().nullish()})}),Ps=W.discriminatedUnion("type",[W.object({type:W.literal("message_start"),message:W.object({id:W.string().nullish(),model:W.string().nullish(),usage:W.object({input_tokens:W.number(),output_tokens:W.number(),cache_creation_input_tokens:W.number().nullish(),cache_read_input_tokens:W.number().nullish()})})}),W.object({type:W.literal("content_block_start"),index:W.number(),content_block:W.discriminatedUnion("type",[W.object({type:W.literal("text"),text:W.string()}),W.object({type:W.literal("thinking"),thinking:W.string()}),W.object({type:W.literal("tool_use"),id:W.string(),name:W.string()}),W.object({type:W.literal("redacted_thinking"),data:W.string()})])}),W.object({type:W.literal("content_block_delta"),index:W.number(),delta:W.discriminatedUnion("type",[W.object({type:W.literal("input_json_delta"),partial_json:W.string()}),W.object({type:W.literal("text_delta"),text:W.string()}),W.object({type:W.literal("thinking_delta"),thinking:W.string()}),W.object({type:W.literal("signature_delta"),signature:W.string()})])}),W.object({type:W.literal("content_block_stop"),index:W.number()}),W.object({type:W.literal("error"),error:W.object({type:W.string(),message:W.string()})}),W.object({type:W.literal("message_delta"),delta:W.object({stop_reason:W.string().nullish()}),usage:W.object({output_tokens:W.number()})}),W.object({type:W.literal("message_stop")}),W.object({type:W.literal("ping")})]),bs=W.object({thinking:W.object({type:W.union([W.literal("enabled"),W.literal("disabled")]),budgetTokens:W.number().optional()}).optional()}),hs=W.object({command:W.string(),restart:W.boolean().optional()});function Ss(D={}){return{type:"provider-defined",id:"anthropic.bash_20241022",args:{},parameters:hs,execute:D.execute,experimental_toToolResultContent:D.experimental_toToolResultContent}}var ys=W.object({command:W.string(),restart:W.boolean().optional()});function xs(D={}){return{type:"provider-defined",id:"anthropic.bash_20250124",args:{},parameters:ys,execute:D.execute,experimental_toToolResultContent:D.experimental_toToolResultContent}}var ks=W.object({command:W.enum(["view","create","str_replace","insert","undo_edit"]),path:W.string(),file_text:W.string().optional(),insert_line:W.number().int().optional(),new_str:W.string().optional(),old_str:W.string().optional(),view_range:W.array(W.number().int()).optional()});function us(D={}){return{type:"provider-defined",id:"anthropic.text_editor_20241022",args:{},parameters:ks,execute:D.execute,experimental_toToolResultContent:D.experimental_toToolResultContent}}var vs=W.object({command:W.enum(["view","create","str_replace","insert","undo_edit"]),path:W.string(),file_text:W.string().optional(),insert_line:W.number().int().optional(),new_str:W.string().optional(),old_str:W.string().optional(),view_range:W.array(W.number().int()).optional()});function gs(D={}){return{type:"provider-defined",id:"anthropic.text_editor_20250124",args:{},parameters:vs,execute:D.execute,experimental_toToolResultContent:D.experimental_toToolResultContent}}var ms=W.object({action:W.enum(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:W.array(W.number().int()).optional(),text:W.string().optional()});function cs(D){return{type:"provider-defined",id:"anthropic.computer_20241022",args:{displayWidthPx:D.displayWidthPx,displayHeightPx:D.displayHeightPx,displayNumber:D.displayNumber},parameters:ms,execute:D.execute,experimental_toToolResultContent:D.experimental_toToolResultContent}}var ps=W.object({action:W.enum(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:W.tuple([W.number().int(),W.number().int()]).optional(),duration:W.number().optional(),scroll_amount:W.number().optional(),scroll_direction:W.enum(["up","down","left","right"]).optional(),start_coordinate:W.tuple([W.number().int(),W.number().int()]).optional(),text:W.string().optional()});function is(D){return{type:"provider-defined",id:"anthropic.computer_20250124",args:{displayWidthPx:D.displayWidthPx,displayHeightPx:D.displayHeightPx,displayNumber:D.displayNumber},parameters:ps,execute:D.execute,experimental_toToolResultContent:D.experimental_toToolResultContent}}var ds={bash_20241022:Ss,bash_20250124:xs,textEditor_20241022:us,textEditor_20250124:gs,computer_20241022:cs,computer_20250124:is};function kW(D={}){var F;let $=(F=aE(D.baseURL))!=null?F:"https://api.anthropic.com/v1",B=()=>({"anthropic-version":"2023-06-01","x-api-key":lE({apiKey:D.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...D.headers}),J=(X,Q={})=>new Is(X,Q,{provider:"anthropic.messages",baseURL:$,headers:B,fetch:D.fetch,supportsImageUrls:!0}),Y=function(X,Q){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return J(X,Q)};return Y.languageModel=J,Y.chat=J,Y.messages=J,Y.textEmbeddingModel=(X)=>{throw new w$({modelId:X,modelType:"textEmbeddingModel"})},Y.tools=ds,Y}var _q0=kW();M$();var ls=`Analyze this conversation between a user and an AI assistant to find patterns.

The conversation includes:
- USER: <user message>
- ASSISTANT: <assistant response start>...[truncated]...<assistant response end>
- TOOLS_USED: <list of tools> (format: "MCP:server:tool (params)" for MCP tools, "ERROR:tool:message" for failures)

Look for:
1. Repeated user requests or commands (even if worded differently)
2. Common workflows (what user asks \u2192 what assistant does \u2192 outcome)
3. Tools frequently used for specific tasks (especially MCP tools)
4. Patterns in errors or incomplete tasks
5. Sequential steps users follow
6. MCP server usage patterns (e.g., "MCP:qdrant:qdrant-find" used frequently)

Pay special attention to:
- The beginning of conversations (user's initial request)
- The end of conversations (success/failure/incomplete)
- Which MCP servers and tools are used for which requests
- Repeated phrases like "use your X to do Y"
- Tool errors and what causes them

Messages to analyze:
{messages}

Return a JSON object with patterns found. Count similar requests as the same pattern.

Example response:
{
  "patterns": [
    {
      "type": "workflow",
      "description": "User asks to check Qdrant for context before tasks",
      "frequency": 3,
      "examples": ["use your qdrant to get context", "check qdrant first"],
      "suggestedAutomation": "Auto-check Qdrant when starting new tasks",
      "confidence": 0.9
    }
  ],
  "workflows": [
    {
      "name": "Context-then-implement",
      "steps": ["Get context from Qdrant", "Analyze requirements", "Implement solution"],
      "frequency": 2,
      "automation": "Create macro for context-aware implementation"
    }
  ],
  "toolUsagePatterns": [
    {
      "tool": "qdrant",
      "commonUseCases": ["Getting project context", "Finding previous solutions"],
      "frequency": 5
    }
  ],
  "userPreferences": []
}

IMPORTANT: Return ONLY valid JSON, no other text.`;class jI{anthropic;model="claude-3-5-sonnet-20241022";constructor(D){this.anthropic=kW({apiKey:D})}async analyzeMessages(D,F=20,$=!1){let B={patterns:[],workflows:[],toolUsagePatterns:[],userPreferences:[]},J=this.createBatches(D,F);j.println(j.Style.TEXT_INFO_BOLD+"\u2192 ",j.Style.TEXT_NORMAL+`Analyzing ${D.length} messages in ${J.length} batches with Claude 3.5 Sonnet...`);for(let Y=0;Y<J.length;Y++){if($)j.println(j.Style.TEXT_DIM+`  Processing batch ${Y+1}/${J.length}...`);try{let X=await this.analyzeBatch(J[Y]);this.mergeResults(B,X)}catch(X){j.println(j.Style.TEXT_WARNING_BOLD+"\u26A0 ",j.Style.TEXT_NORMAL+`Batch ${Y+1} analysis failed: ${X}`)}if(Y<J.length-1)await new Promise((X)=>setTimeout(X,1000))}return this.consolidatePatterns(B),B}createBatches(D,F){let $=[];for(let B=0;B<D.length;B+=F)$.push(D.slice(B,B+F));return $}async analyzeBatch(D,F=!1){let $=ls.replace("{messages}",D.map((B,J)=>`${J+1}. ${B}`).join(`
`));try{let{text:B}=await x5({model:this.anthropic(this.model),prompt:$,temperature:0.3,maxTokens:4000});try{return JSON.parse(B)}catch{let J=B.match(/\{[\s\S]*\}/);if(!J)throw new Error("No JSON found in response");return JSON.parse(J[0])}}catch(B){if(F)j.println(j.Style.TEXT_WARNING_BOLD+"\u26A0 ",j.Style.TEXT_NORMAL+`LLM error: ${B}`);return{patterns:[],workflows:[],toolUsagePatterns:[],userPreferences:[]}}}extractPatternsFromText(D){let F={patterns:[],workflows:[],toolUsagePatterns:[],userPreferences:[]},$=D.split(`
`);for(let B of $)if(B.includes("pattern")||B.includes("workflow"))F.patterns.push({type:"extracted",description:B.trim(),frequency:1,examples:[],confidence:0.5});return F}mergeResults(D,F){for(let $ of F.patterns){let B=D.patterns.find((J)=>J.type===$.type&&J.description===$.description);if(B)B.frequency+=$.frequency,B.examples.push(...$.examples.slice(0,3-B.examples.length)),B.confidence=Math.max(B.confidence,$.confidence);else D.patterns.push($)}for(let $ of F.workflows){let B=D.workflows.find((J)=>J.name===$.name);if(B)B.frequency+=$.frequency;else D.workflows.push($)}for(let $ of F.toolUsagePatterns){let B=D.toolUsagePatterns.find((J)=>J.tool===$.tool);if(B){B.frequency+=$.frequency;for(let J of $.commonUseCases)if(!B.commonUseCases.includes(J))B.commonUseCases.push(J)}else D.toolUsagePatterns.push($)}for(let $ of F.userPreferences){let B=D.userPreferences.find((J)=>J.preference===$.preference);if(B)B.evidence.push(...$.evidence);else D.userPreferences.push($)}}consolidatePatterns(D){D.patterns.sort((F,$)=>{let B=F.frequency*F.confidence;return $.frequency*$.confidence-B}),D.patterns=D.patterns.filter((F)=>F.frequency>=2||F.confidence>=0.7),D.workflows.sort((F,$)=>$.frequency-F.frequency),D.toolUsagePatterns.sort((F,$)=>$.frequency-F.frequency)}convertToWorkflowPatterns(D){let F=[];for(let $ of D.patterns)if($.type==="workflow"||$.type==="repeated_phrase")F.push({pattern:$.description.toLowerCase().replace(/\s+/g,"_"),formula:$.description,count:$.frequency,examples:$.examples,suggestedAutomation:$.suggestedAutomation});for(let $ of D.workflows)F.push({pattern:$.name.toLowerCase().replace(/\s+/g,"_"),formula:$.steps.join(" \u2192 "),count:$.frequency,examples:$.steps,suggestedAutomation:$.automation});for(let $ of D.toolUsagePatterns)if($.frequency>=3)F.push({pattern:`${$.tool}_usage_pattern`,formula:`Use ${$.tool} for: ${$.commonUseCases.join(", ")}`,count:$.frequency,examples:$.commonUseCases,suggestedAutomation:`Auto-invoke ${$.tool} when detecting: ${$.commonUseCases[0]}`});return F}}async function UI(D,F,$=!1){try{let B=new jI(F),J=await B.analyzeMessages(D,20,$),Y=J.patterns.length+J.workflows.length+J.toolUsagePatterns.length;if(j.println(j.Style.TEXT_SUCCESS_BOLD+"\u2713 ",j.Style.TEXT_NORMAL+`LLM analysis complete. Found ${Y} patterns (${J.patterns.length} general, ${J.workflows.length} workflows, ${J.toolUsagePatterns.length} tool usage).`),$&&Y>0){if(j.println(j.Style.TEXT_DIM+`
Patterns detected:`),J.patterns.length>0){j.println(j.Style.TEXT_DIM+"  General patterns:");for(let X of J.patterns.slice(0,3))j.println(j.Style.TEXT_DIM+`    - ${X.description} (${X.frequency} times, confidence: ${X.confidence})`)}if(J.workflows.length>0){j.println(j.Style.TEXT_DIM+"  Workflows:");for(let X of J.workflows.slice(0,3))j.println(j.Style.TEXT_DIM+`    - ${X.name}: ${X.steps.join(" \u2192 ")} (${X.frequency} times)`)}}return B.convertToWorkflowPatterns(J)}catch(B){return j.println(j.Style.TEXT_WARNING_BOLD+"\u26A0 ",j.Style.TEXT_NORMAL+`LLM analysis failed: ${B}`),[]}}var ZI=qD({command:"evolve",describe:"analyze performance and evolve dgmo capabilities",builder:(D)=>{return D.option("analyze",{alias:["a"],describe:"analyze performance patterns without evolving",type:"boolean",default:!1}).option("session",{alias:["s"],describe:"analyze specific session ID",type:"string"}).option("auto-apply",{describe:"automatically apply improvements without confirmation",type:"boolean",default:!1}).option("min-samples",{describe:"minimum number of samples before evolution",type:"number",default:10}).option("verbose",{describe:"show detailed evolution process",type:"boolean",default:!1}).option("generate",{alias:["g"],describe:"generate code improvements based on performance data",type:"boolean",default:!1}).option("llm-analysis",{alias:["l"],describe:"use LLM to analyze message patterns (uses Claude 3.5 Sonnet)",type:"boolean",default:!1})},handler:async(D)=>{await $2({cwd:process.cwd()},async()=>{j.empty(),j.println(j.logo()),j.empty(),j.println(j.Style.TEXT_HIGHLIGHT_BOLD+"Evolution Engine",j.Style.TEXT_NORMAL+" - Analyzing performance patterns..."),j.empty();try{let F=process.cwd().includes("/opencode/packages/opencode")?process.cwd().replace("/opencode/packages/opencode",""):process.cwd(),{AuthAnthropic:$}=await lJ().then(() => H_),B=await $.access(),Y={enabled:!0,pythonPath:ns.join(F,"dgm","venv","bin","python"),dgmPath:F,timeout:30000,maxRetries:3,healthCheckInterval:60000,anthropicToken:B||void 0};j.println(j.Style.TEXT_DIM+"Initializing DGM bridge...");let X=new t8(Y);await X.initialize();let Q=await os(D.session,D.llmAnalysis,B,D.verbose);if(Q.totalSamples<D.minSamples){j.println(j.Style.TEXT_WARNING_BOLD+"\u26A0 ",j.Style.TEXT_NORMAL+`Insufficient data: ${Q.totalSamples}/${D.minSamples} samples`),j.println(j.Style.TEXT_DIM+"  Continue using DGMO to gather more performance data.");return}if(as(Q,D.verbose),D.analyze){j.empty(),j.println(j.Style.TEXT_INFO_BOLD+"Analysis complete. Use --analyze=false to trigger evolution.");return}if(D.generate){j.empty(),j.println(j.Style.TEXT_INFO_BOLD+"\u2192 ",j.Style.TEXT_NORMAL+"Generating code improvements based on performance data...");let f=await Ja(X,Q,D.verbose);if(Ya(f),D.autoApply||await CI())await Xa(X,f);await X.close();return}j.empty(),j.println(j.Style.TEXT_INFO_BOLD+"\u2192 ",j.Style.TEXT_NORMAL+"Sending patterns to DGM for analysis...");let w=await es(X,Q,D.verbose);if(Fa(w),D.autoApply||await CI())await $a(X,w);await X.close()}catch(F){if(F instanceof Error){if(j.error(`Evolution failed: ${F.name}`),j.println(j.Style.TEXT_DIM+`  ${F.message}`),F.stack&&D.verbose)j.println(j.Style.TEXT_DIM+"Stack trace:"),j.println(j.Style.TEXT_DIM+F.stack)}else j.error(`Evolution failed: ${String(F)}`);process.exit(1)}})}});async function os(D,F=!1,$,B=!1){let J={totalSamples:0,toolStats:{},errorPatterns:[],workflowPatterns:[],successRate:0,sessionCount:0,timeRange:{start:new Date,end:new Date}};if(D){if(!await u0.get(D))throw new Error(`Session ${D} not found`);let K=await V6.loadReport(D);if(K)RI(J,K),J.sessionCount=1;return J}let Y=[];for await(let H of u0.list())Y.push(H);let{Global:X}=await d1().then(() => uH),Q=await import("fs/promises"),w=await import("path");try{let H=w.join(X.Path.data,"project"),K=await Q.readdir(H).catch(()=>[]);for(let E of K){let O=w.join(H,E,"storage","session","info");try{let q=await Q.readdir(O).catch(()=>[]);for(let U of q)if(U.endsWith(".json"))try{let N=await Q.readFile(w.join(O,U),"utf-8"),L=JSON.parse(N);if(Y.push(L),L.id){let C=await u0.children(L.id).catch(()=>[]);Y.push(...C)}}catch(N){}}catch(q){}}}catch(H){j.println(j.Style.TEXT_DIM+"Note: Only analyzing current project sessions")}let f=Array.from(new Map(Y.map((H)=>[H.id,H])).values()).slice(0,500);j.println(j.Style.TEXT_DIM+`Found ${f.length} sessions across all projects`);let G=new Map;for(let H of f){let K=await V6.loadReport(H.id);if(K)RI(J,K),J.sessionCount++;else try{let E=await u0.messages(H.id),O=!1;for(let q of E){if(q.role==="user"&&q.parts){for(let U of q.parts)if(U.type==="text"&&U.text){if(ts(J,U.text),F){if(!G.has(H.id))G.set(H.id,[]);G.get(H.id).push(`USER: ${U.text}`)}}}if(F&&q.role==="assistant"){if(q.parts){for(let U of q.parts)if(U.type==="text"&&U.text){if(!G.has(H.id))G.set(H.id,[]);let N=U.text,L="";if(N.length<=800)L=N;else{let C=N.substring(0,400),R=N.substring(N.length-400);L=`${C}
[... middle truncated ...]
${R}`}G.get(H.id).push(`ASSISTANT: ${L}`)}}if(q.metadata?.tool){let U=[];for(let[,N]of Object.entries(q.metadata.tool)){let L=N.title||"unknown";if(L.includes("_")&&!L.startsWith("Error:")){let[R,...I]=L.split("_"),h=I.join("_"),p="";if(N.params)p=` (params: ${Object.keys(N.params).join(", ")})`;U.push(`MCP:${R}:${h}${p}`)}else U.push(L);if(N.error){let R=N.message||"Unknown error";U.push(`ERROR:${L}:${R.substring(0,100)}`)}}if(U.length>0&&G.has(H.id))G.get(H.id).push(`TOOLS_USED: ${U.join(" | ")}`)}}if(q.role==="assistant"&&q.metadata?.tool)for(let[U,N]of Object.entries(q.metadata.tool)){let L=N.title||"unknown";if(!J.toolStats[L])J.toolStats[L]={count:0,successRate:1,avgDuration:0,errors:[]};let C=J.toolStats[L],R=N.time?.end&&N.time?.start?N.time.end-N.time.start:100,I=C.count*C.avgDuration;if(C.count++,J.totalSamples++,O=!0,C.avgDuration=(I+R)/C.count,N.error)C.errors.push(N.message||"Unknown error"),NI(J,{tool:L,message:N.message||"Unknown error",type:"tool_error"});let h=C.count-C.errors.length;C.successRate=C.count>0?h/C.count:1}}if(O){J.sessionCount++;let q=new Date(H.time.created);if(q<J.timeRange.start)J.timeRange.start=q;if(q>J.timeRange.end)J.timeRange.end=q}}catch(E){}}if(J.totalSamples>0){let H=0;for(let K in J.toolStats)H+=J.toolStats[K].count*J.toolStats[K].successRate;J.successRate=H/J.totalSamples}if(J.errorPatterns.sort((H,K)=>K.count-H.count),F&&G.size>0&&$){j.empty(),j.println(j.Style.TEXT_INFO_BOLD+"\u2192 ",j.Style.TEXT_NORMAL+`Running LLM pattern analysis on ${G.size} sessions...`);let H=0,K=20;for(let[E,O]of G){if(H>=K){j.println(j.Style.TEXT_DIM+`  Analyzed ${K} sessions (limit reached)`);break}if(O.length<3)continue;if(H++,B)j.println(j.Style.TEXT_DIM+`  Analyzing session ${H}/${Math.min(G.size,K)} (${O.length} messages)...`);try{let q=await UI(O.slice(0,50),$,B);for(let U of q){let N=J.workflowPatterns.find((L)=>L.pattern===U.pattern);if(N){if(N.count+=U.count,N.examples.push(...U.examples.slice(0,3-N.examples.length)),U.suggestedAutomation&&!N.suggestedAutomation)N.suggestedAutomation=U.suggestedAutomation}else J.workflowPatterns.push(U)}if(H<K)await new Promise((U)=>setTimeout(U,500))}catch(q){if(B)j.println(j.Style.TEXT_WARNING_BOLD+"\u26A0 ",j.Style.TEXT_NORMAL+`Failed to analyze session: ${q}`)}}j.println(j.Style.TEXT_SUCCESS_BOLD+"\u2713 ",j.Style.TEXT_NORMAL+`LLM analysis complete. Analyzed ${H} sessions.`),J.workflowPatterns.sort((E,O)=>O.count-E.count)}return J}function RI(D,F){let $=new Date(F.timestamp||Date.now());if($<D.timeRange.start)D.timeRange.start=$;if($>D.timeRange.end)D.timeRange.end=$;if(F.operationBreakdown)for(let[B,J]of Object.entries(F.operationBreakdown)){if(!D.toolStats[B])D.toolStats[B]={count:0,successRate:1,avgDuration:0,errors:[]};let Y=D.toolStats[B],X=J,Q=Y.count*Y.avgDuration;if(Y.count+=X.count,D.totalSamples+=X.count,Y.count>0)Y.avgDuration=(Q+X.totalTime)/Y.count}if(F.errors)for(let B of F.errors)NI(D,B)}function NI(D,F){let $=rs(F),B=D.errorPatterns.find((J)=>J.pattern===$);if(!B)B={pattern:$,count:0,tools:[],examples:[]},D.errorPatterns.push(B);if(B.count++,F.tool&&!B.tools.includes(F.tool))B.tools.push(F.tool);if(B.examples.length<3&&F.message)B.examples.push(F.message)}function rs(D){let F=D.message||D.toString();if(F.includes("permission denied"))return"permission_denied";if(F.includes("file not found"))return"file_not_found";if(F.includes("timeout"))return"timeout";if(F.includes("syntax error"))return"syntax_error";if(F.includes("type error"))return"type_error";if(F.includes("network"))return"network_error";if(F.includes("memory"))return"memory_error";if(D.type)return D.type;return F.split(/\s+/).slice(0,3).join("_").toLowerCase()}function ts(D,F){let $=[{regex:/use your qdrant.*?to (get context|understand|know).*?(?:to do|for|about)\s+(.+?)(?:\.|$)/i,type:"qdrant_context_lookup",formula:"Use qdrant \u2192 get context \u2192 do {task}"},{regex:/use your prompting.*?to (optimize|refine|improve).*?(?:to|for)\s+(.+?)(?:\.|$)/i,type:"prompt_optimization",formula:"Use prompting MCP \u2192 optimize \u2192 do {task}"},{regex:/(?:first|start by|begin with)\s+(.+?)\s+(?:then|after that|next)\s+(.+?)(?:\.|$)/i,type:"sequential_workflow",formula:"First {step1} \u2192 then {step2}"},{regex:/remember (?:this|that|to)\s+(.+?)(?:\.|$)/i,type:"memory_request",formula:"Remember {information}"},{regex:/store (?:this|that|in)\s+(.+?)(?:\.|$)/i,type:"storage_request",formula:"Store {data} in {location}"},{regex:/create (\d+) (?:agents?|sub-?agents?).*?to\s+(.+?)(?:\.|$)/i,type:"parallel_agents",formula:"Create {n} agents to {task}"},{regex:/search (?:for|in|through)\s+(.+?)\s+(?:for|to find)\s+(.+?)(?:\.|$)/i,type:"search_pattern",formula:"Search {location} for {target}"}];for(let J of $)if(F.match(J.regex)){let X=D.workflowPatterns.find((Q)=>Q.pattern===J.type);if(!X)X={pattern:J.type,formula:J.formula,count:0,examples:[],suggestedAutomation:ss(J.type)},D.workflowPatterns.push(X);if(X.count++,X.examples.length<3)X.examples.push(F.substring(0,200))}let B=F.toLowerCase().split(/\s+/);for(let J=0;J<B.length-2;J++){let Y=B.slice(J,J+3).join(" ");if(Y.length>10&&!Y.includes("the")&&!Y.includes("and"));}}function ss(D){return{qdrant_context_lookup:"Add to system message: 'Always check Qdrant for relevant context before starting any task'",prompt_optimization:"Add to system message: 'Use the prompting MCP server to optimize your approach before complex tasks'",sequential_workflow:"Create workflow macro for common task sequences",memory_request:"Auto-store important information in Qdrant without explicit request",storage_request:"Implement automatic storage detection based on content importance",parallel_agents:"Create /parallel-task command for automatic agent delegation",search_pattern:"Implement smart search that pre-indexes common locations"}[D]||"Analyze pattern for automation opportunities"}function as(D,F){j.println(j.Style.TEXT_HIGHLIGHT_BOLD+"Performance Summary"),j.println(j.Style.TEXT_DIM+"\u2500".repeat(50)),j.empty();let $=Math.ceil((D.timeRange.end.getTime()-D.timeRange.start.getTime())/86400000);if(j.println(j.Style.TEXT_NORMAL_BOLD+"Analysis Period: ",j.Style.TEXT_NORMAL+`${$} days (${D.sessionCount} sessions)`),j.println(j.Style.TEXT_NORMAL_BOLD+"Total Operations: ",j.Style.TEXT_NORMAL+D.totalSamples.toLocaleString()),j.println(j.Style.TEXT_NORMAL_BOLD+"Success Rate: ",j.Style.TEXT_NORMAL+`${(D.successRate*100).toFixed(1)}%`),j.empty(),Object.keys(D.toolStats).length>0){j.println(j.Style.TEXT_NORMAL_BOLD+"Tool Usage:");let B=Object.entries(D.toolStats).sort((J,Y)=>Y[1].count-J[1].count).slice(0,F?void 0:5);for(let[J,Y]of B){let X=Y.successRate>0.9?"\u2713":Y.successRate>0.7?"~":"!";j.println(j.Style.TEXT_DIM+`  ${X} `,j.Style.TEXT_NORMAL+J.padEnd(20),j.Style.TEXT_DIM+`${Y.count} calls, `,j.Style.TEXT_NORMAL+`${(Y.successRate*100).toFixed(0)}% success, `,j.Style.TEXT_DIM+`${Y.avgDuration.toFixed(0)}ms avg`)}}if(D.errorPatterns.length>0){j.empty(),j.println(j.Style.TEXT_NORMAL_BOLD+"Common Error Patterns:");let B=D.errorPatterns.slice(0,F?10:3);for(let J of B)if(j.println(j.Style.TEXT_WARNING_BOLD+"  ! ",j.Style.TEXT_NORMAL+J.pattern.replace(/_/g," "),j.Style.TEXT_DIM+` (${J.count} occurrences)`),F&&J.tools.length>0)j.println(j.Style.TEXT_DIM+"    Tools: "+J.tools.join(", "))}if(D.workflowPatterns.length>0){j.empty(),j.println(j.Style.TEXT_NORMAL_BOLD+"Detected Workflow Patterns:");let B=D.workflowPatterns.sort((J,Y)=>Y.count-J.count).slice(0,F?10:5);for(let J of B)if(j.println(j.Style.TEXT_SUCCESS_BOLD+"  \u2192 ",j.Style.TEXT_NORMAL+J.formula,j.Style.TEXT_DIM+` (${J.count} times)`),F&&J.suggestedAutomation)j.println(j.Style.TEXT_DIM+"    Suggestion: "+J.suggestedAutomation)}}async function es(D,F,$){let B={suggestions:[],improvements:[],patterns:{errorPatterns:[],performancePatterns:[],successPatterns:[]}};try{let J={error_patterns:F.errorPatterns.map((X)=>({pattern:X.pattern,frequency:X.count,affected_tools:X.tools,examples:X.examples})),performance_patterns:Object.entries(F.toolStats).map(([X,Q])=>({tool:X,usage_count:Q.count,avg_duration_ms:Q.avgDuration,success_rate:Q.successRate,common_errors:Q.errors.slice(0,5)})),success_patterns:Object.entries(F.toolStats).filter(([X,Q])=>Q.successRate>0.9).map(([X,Q])=>({tool:X,success_rate:Q.successRate,usage_count:Q.count}))};if($)j.println(j.Style.TEXT_DIM+"Patterns detected:"),j.println(j.Style.TEXT_DIM+`  - Error patterns: ${J.error_patterns.length}`),j.println(j.Style.TEXT_DIM+`  - Performance patterns: ${J.performance_patterns.length}`),j.println(j.Style.TEXT_DIM+`  - Success patterns: ${J.success_patterns.length}`);let Y=await D.execute("evolve_based_on_patterns",J);if(Y.adaptations)for(let X of Y.adaptations)B.suggestions.push({type:X.type||"general",description:X.description,impact:Da(X),implementation:X.implementation||""});if(B.patterns={errorPatterns:J.error_patterns,performancePatterns:J.performance_patterns,successPatterns:J.success_patterns},$)j.println(j.Style.TEXT_DIM+`
Evolution analysis complete.`),j.println(j.Style.TEXT_DIM+`Found ${B.suggestions.length} improvement suggestions.`)}catch(J){j.println(j.Style.TEXT_WARNING_BOLD+"\u26A0 ",j.Style.TEXT_NORMAL+`Evolution analysis failed: ${J}`)}return B}function Da(D){if(D.priority==="critical"||D.affects_core)return"high";if(D.priority==="low"||D.affects_edge_cases)return"low";return"medium"}function Fa(D){if(j.empty(),j.println(j.Style.TEXT_HIGHLIGHT_BOLD+"Evolution Suggestions"),j.println(j.Style.TEXT_DIM+"\u2500".repeat(50)),j.empty(),D.suggestions.length===0){j.println(j.Style.TEXT_INFO_BOLD+"\u2139 ",j.Style.TEXT_NORMAL+"No improvements suggested at this time."),j.println(j.Style.TEXT_DIM+"  Continue using DGMO to gather more data.");return}let F=D.suggestions.filter((J)=>J.impact==="high"),$=D.suggestions.filter((J)=>J.impact==="medium"),B=D.suggestions.filter((J)=>J.impact==="low");if(F.length>0){j.println(j.Style.TEXT_DANGER_BOLD+"High Impact Improvements:");for(let J of F)if(j.println(j.Style.TEXT_DANGER_BOLD+"  \u26A1 ",j.Style.TEXT_NORMAL+J.description),J.type!=="general")j.println(j.Style.TEXT_DIM+"     Type: "+J.type);j.empty()}if($.length>0){j.println(j.Style.TEXT_WARNING_BOLD+"Medium Impact Improvements:");for(let J of $)j.println(j.Style.TEXT_WARNING_BOLD+"  \u2192 ",j.Style.TEXT_NORMAL+J.description);j.empty()}if(B.length>0)j.println(j.Style.TEXT_DIM+`Plus ${B.length} low-impact improvements available.`),j.empty();j.println(j.Style.TEXT_INFO_BOLD+"Summary: ",j.Style.TEXT_NORMAL+`${D.suggestions.length} total improvements identified`)}async function CI(){return j.empty(),j.println(j.Style.TEXT_WARNING_BOLD+"\u26A0 ",j.Style.TEXT_NORMAL+"Use --auto-apply to automatically apply high-impact improvements"),!1}async function $a(D,F){j.empty(),j.println(j.Style.TEXT_INFO_BOLD+"\u2192 ",j.Style.TEXT_NORMAL+"Applying improvements...");let $=0,B=0;for(let J of F.suggestions)if(J.impact==="high"&&J.implementation)try{j.println(j.Style.TEXT_DIM+"  Applying: ",j.Style.TEXT_NORMAL+J.description);let Y=await D.execute("apply_improvement",{suggestion:J.implementation,testFirst:!0});if(Y.success)$++,j.println(j.Style.TEXT_SUCCESS_BOLD+"    \u2713 ",j.Style.TEXT_NORMAL+"Applied successfully"),F.improvements.push({toolName:J.type,changes:[J.description],testResults:Y.testResults});else B++,j.println(j.Style.TEXT_DANGER_BOLD+"    \u2717 ",j.Style.TEXT_NORMAL+`Failed: ${Y.error||"Unknown error"}`)}catch(Y){B++,j.println(j.Style.TEXT_DANGER_BOLD+"    \u2717 ",j.Style.TEXT_NORMAL+`Error: ${Y}`)}if(j.empty(),j.println(j.Style.TEXT_HIGHLIGHT_BOLD+"Evolution Complete",j.Style.TEXT_NORMAL+` - Applied ${$} improvements`),B>0)j.println(j.Style.TEXT_WARNING_BOLD+"\u26A0 ",j.Style.TEXT_NORMAL+`${B} improvements failed to apply`);await Ba(F)}async function Ba(D){try{let F={timestamp:new Date().toISOString(),patterns:D.patterns,suggestions:D.suggestions,improvements:D.improvements},{Storage:$}=await v2().then(() => rJ);await $.writeJSON("evolution/history/"+Date.now(),F)}catch(F){}}async function Ja(D,F,$){let B={generatedCode:[],patterns:{errorPatterns:[],performancePatterns:[],successPatterns:[]}};try{let J={error_patterns:F.errorPatterns.map((X)=>({pattern:X.pattern,frequency:X.count,affected_tools:X.tools,examples:X.examples})),performance_patterns:Object.entries(F.toolStats).map(([X,Q])=>({tool:X,usage_count:Q.count,avg_duration_ms:Q.avgDuration,success_rate:Q.successRate,common_errors:Q.errors.slice(0,5)})),success_patterns:Object.entries(F.toolStats).filter(([X,Q])=>Q.successRate>0.9).map(([X,Q])=>({tool:X,success_rate:Q.successRate,usage_count:Q.count}))};if($)j.println(j.Style.TEXT_DIM+"Patterns for code generation:"),j.println(j.Style.TEXT_DIM+`  - Error patterns: ${J.error_patterns.length}`),j.println(j.Style.TEXT_DIM+`  - Performance patterns: ${J.performance_patterns.length}`),j.println(j.Style.TEXT_DIM+`  - Success patterns: ${J.success_patterns.length}`);let Y=await D.execute("generate_code_improvements",J);if(Y.generated_improvements)for(let X of Y.generated_improvements)B.generatedCode.push({toolName:X.tool_name||"unknown",originalCode:X.original_code||"",improvedCode:X.improved_code||"",improvements:X.improvements||[],performanceGain:X.performance_gain||0});if(B.patterns={errorPatterns:J.error_patterns,performancePatterns:J.performance_patterns,successPatterns:J.success_patterns},$)j.println(j.Style.TEXT_DIM+`
Code generation complete.`),j.println(j.Style.TEXT_DIM+`Generated ${B.generatedCode.length} code improvements.`)}catch(J){j.println(j.Style.TEXT_WARNING_BOLD+"\u26A0 ",j.Style.TEXT_NORMAL+`Code generation failed: ${J}`)}return B}function Ya(D){if(j.empty(),j.println(j.Style.TEXT_HIGHLIGHT_BOLD+"Generated Code Improvements"),j.println(j.Style.TEXT_DIM+"\u2500".repeat(50)),j.empty(),D.generatedCode.length===0){j.println(j.Style.TEXT_INFO_BOLD+"\u2139 ",j.Style.TEXT_NORMAL+"No code improvements generated at this time."),j.println(j.Style.TEXT_DIM+"  Continue using DGMO to gather more data.");return}for(let $ of D.generatedCode){if(j.println(j.Style.TEXT_HIGHLIGHT_BOLD+"Tool: ",j.Style.TEXT_NORMAL+$.toolName),$.performanceGain>0)j.println(j.Style.TEXT_SUCCESS_BOLD+"  Expected Performance Gain: ",j.Style.TEXT_NORMAL+`${$.performanceGain.toFixed(1)}%`);if($.improvements.length>0){j.println(j.Style.TEXT_NORMAL_BOLD+"  Improvements:");for(let B of $.improvements)j.println(j.Style.TEXT_DIM+"    \u2022 "+B)}j.empty()}j.println(j.Style.TEXT_INFO_BOLD+"Summary: ",j.Style.TEXT_NORMAL+`${D.generatedCode.length} code improvements generated`);let F=D.generatedCode.reduce(($,B)=>$+B.performanceGain,0);if(F>0)j.println(j.Style.TEXT_SUCCESS_BOLD+"Total Expected Performance Gain: ",j.Style.TEXT_NORMAL+`${F.toFixed(1)}%`)}async function Xa(D,F){j.empty(),j.println(j.Style.TEXT_INFO_BOLD+"\u2192 ",j.Style.TEXT_NORMAL+"Applying generated improvements...");let $=0,B=0;for(let J of F.generatedCode)try{j.println(j.Style.TEXT_DIM+"  Applying: ",j.Style.TEXT_NORMAL+J.toolName);let Y=await D.execute("apply_generated_code",{tool_name:J.toolName,improved_code:J.improvedCode,test_first:!0});if(Y.success)$++,j.println(j.Style.TEXT_SUCCESS_BOLD+"    \u2713 ",j.Style.TEXT_NORMAL+"Applied successfully");else B++,j.println(j.Style.TEXT_DANGER_BOLD+"    \u2717 ",j.Style.TEXT_NORMAL+`Failed: ${Y.error||"Unknown error"}`)}catch(Y){B++,j.println(j.Style.TEXT_DANGER_BOLD+"    \u2717 ",j.Style.TEXT_NORMAL+`Error: ${Y}`)}if(j.empty(),j.println(j.Style.TEXT_HIGHLIGHT_BOLD+"Code Generation Complete",j.Style.TEXT_NORMAL+` - Applied ${$} improvements`),B>0)j.println(j.Style.TEXT_WARNING_BOLD+"\u26A0 ",j.Style.TEXT_NORMAL+`${B} improvements failed to apply`);await Qa(F)}async function Qa(D){try{let F={timestamp:new Date().toISOString(),patterns:D.patterns,generatedCode:D.generatedCode},{Storage:$}=await v2().then(() => rJ);await $.writeJSON("evolution/generation/"+Date.now(),F)}catch(F){}}var wa=new AbortController;process.on("unhandledRejection",(D)=>{Z0.Default.error("rejection",{e:D instanceof Error?D.message:D})});process.on("uncaughtException",(D)=>{Z0.Default.error("exception",{e:D instanceof Error?D.message:D})});var MI=PH(UX(process.argv)).scriptName("dgmo").help("help","show help").version("version","show version number",Q1.VERSION).alias("version","v").option("print-logs",{describe:"print logs to stderr",type:"boolean"}).middleware(async()=>{await Z0.init({print:process.argv.includes("--print-logs")}),Z0.Default.info("dgmo",{version:Q1.VERSION,args:process.argv.slice(2)})}).usage(`
`+j.logo()).command(qI).command(_L).command(Cz).command(VI).command(QI).command(wI).command(WI).command(EI).command(GI).command(ZI).fail((D)=>{if(D.startsWith("Unknown argument")||D.startsWith("Not enough non-option arguments"))MI.showHelp("log")}).strict();try{await MI.parse()}catch(D){let F={};if(D instanceof BD){let B=D.toObject();Object.assign(F,{...B.data})}if(D instanceof Error)Object.assign(F,{name:D.name,message:D.message,cause:D.cause?.toString()});if(D&&typeof D==="object"&&"code"in D&&"specifier"in D)Object.assign(F,{name:D.name,message:D.message,code:D.code,specifier:D.specifier,referrer:D.referrer,position:D.position,importKind:D.importKind});Z0.Default.error("fatal",F);let $=HI(D);if($)j.error($);if($===void 0)j.error("Unexpected error, check log file at "+Z0.file()+" for more details");process.exitCode=1}wa.abort();
